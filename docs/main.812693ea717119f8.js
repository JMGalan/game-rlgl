"use strict";var kD=Object.defineProperty,FD=Object.defineProperties,LD=Object.getOwnPropertyDescriptors,nD=Object.getOwnPropertySymbols,UD=Object.prototype.hasOwnProperty,VD=Object.prototype.propertyIsEnumerable,rD=(st,we,k)=>we in st?kD(st,we,{enumerable:!0,configurable:!0,writable:!0,value:k}):st[we]=k,iD=(st,we)=>{for(var k in we||(we={}))UD.call(we,k)&&rD(st,k,we[k]);if(nD)for(var k of nD(we))VD.call(we,k)&&rD(st,k,we[k]);return st},sD=(st,we)=>FD(st,LD(we));(self.webpackChunkpruebaBBVA=self.webpackChunkpruebaBBVA||[]).push([[179],{2011:(st,we,k)=>{k.d(we,{hO:()=>et,xv:()=>ve,Dh:()=>de,GT:()=>le,cc:()=>Ve,on:()=>J,pX:()=>ae});var D=k(5e3),H=k(127),$=k(5813);st=k.hmd(st);const fe=["ngOnDestroy"],ae=(Pe,ot,ct,Ue={})=>new Proxy(Pe,{get:(Ne,ke)=>ct.runOutsideAngular(()=>{var Fe;if(Pe[ke])return(null===(Fe=null==Ue?void 0:Ue.spy)||void 0===Fe?void 0:Fe.get)&&Ue.spy.get(ke,Pe[ke]),Pe[ke];if(fe.indexOf(ke)>-1)return()=>{};const tt=ot.toPromise().then(ee=>{const Re=ee&&ee[ke];return"function"==typeof Re?Re.bind(ee):Re&&Re.then?Re.then(ie=>ct.run(()=>ie)):ct.run(()=>Re)});return new Proxy(()=>{},{get:(ee,Re)=>tt[Re],apply:(ee,Re,ie)=>tt.then(ge=>{var me;const Se=ge&&ge(...ie);return(null===(me=null==Ue?void 0:Ue.spy)||void 0===me?void 0:me.apply)&&Ue.spy.apply(ke,ie,Se),Se})})})}),le=(Pe,ot)=>{ot.forEach(ct=>{Object.getOwnPropertyNames(ct.prototype||ct).forEach(Ue=>{Object.defineProperty(Pe.prototype,Ue,Object.getOwnPropertyDescriptor(ct.prototype||ct,Ue))})})};class ce{constructor(ot){return ot}}const de=new D.OlP("angularfire2.app.options"),ve=new D.OlP("angularfire2.app.name");function J(Pe,ot,ct){const Ne="object"==typeof ct&&ct||{};Ne.name=Ne.name||"string"==typeof ct&&ct||"[DEFAULT]";const Fe=H.Z.apps.filter(tt=>tt&&tt.name===Ne.name)[0]||ot.runOutsideAngular(()=>H.Z.initializeApp(Pe,Ne));try{JSON.stringify(Pe)!==JSON.stringify(Fe.options)&&Z("error",`${Fe.name} Firebase App already initialized with different options${st.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(tt){}return new ce(Fe)}const Z=(Pe,...ot)=>{(0,D.X6Q)()&&"undefined"!=typeof console&&console[Pe](...ot)},pe={provide:ce,useFactory:J,deps:[de,D.R0b,[new D.FiY,ve]]};let et=(()=>{class Pe{constructor(ct){H.Z.registerVersion("angularfire",$.q4.full,"core"),H.Z.registerVersion("angularfire",$.q4.full,"app-compat"),H.Z.registerVersion("angular",D.q4F.full,ct.toString())}static initializeApp(ct,Ue){return{ngModule:Pe,providers:[{provide:de,useValue:ct},{provide:ve,useValue:Ue}]}}}return Pe.\u0275fac=function(ct){return new(ct||Pe)(D.LFG(D.Lbi))},Pe.\u0275mod=D.oAB({type:Pe}),Pe.\u0275inj=D.cJS({providers:[pe]}),Pe})();function Ve(Pe,ot,ct,Ue,Ne){const[,ke,Fe]=globalThis.\u0275AngularfireInstanceCache.find(tt=>tt[0]===Pe)||[];if(ke)return function He(Pe,ot){try{return Pe.toString()===ot.toString()}catch(ct){return Pe===ot}}(Ne,Fe)||(Ce("error",`${ot} was already initialized on the ${ct} Firebase App with different settings.${Je?" You may need to reload as Firebase is not HMR aware.":""}`),Ce("warn",{is:Ne,was:Fe})),ke;{const tt=Ue();return globalThis.\u0275AngularfireInstanceCache.push([Pe,tt,Ne]),tt}}const Je=!!st.hot,Ce=(Pe,...ot)=>{(0,D.X6Q)()&&"undefined"!=typeof console&&console[Pe](...ot)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(st,we,k)=>{k.d(we,{q4:()=>Mo,iC:()=>Sa,HU:()=>Rl,vb:()=>Au,JM:()=>Ad});var D=k(5e3),H=k(5867),$=k(5861),fe=k(9681),ae=k(2090),le=k(4859),ce=k(1877),de=k(8766);const ve="@firebase/installations",J="0.5.10",pe=`w:${J}`,et="FIS_v2",ot=new ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ct(T){return T instanceof ae.ZR&&T.code.includes("request-failed")}function Ue({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function Ne(T){return{token:T.token,requestStatus:2,expiresIn:ge(T.expiresIn),creationTime:Date.now()}}function ke(T,M){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,$.Z)(function*(T,M){const K=(yield M.json()).error;return ot.create("request-failed",{requestName:T,serverCode:K.code,serverMessage:K.message,serverStatus:K.status})})).apply(this,arguments)}function tt({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function ee(T,{refreshToken:M}){const U=tt(T);return U.append("Authorization",function me(T){return`${et} ${T}`}(M)),U}function Re(T){return ie.apply(this,arguments)}function ie(){return(ie=(0,$.Z)(function*(T){const M=yield T();return M.status>=500&&M.status<600?T():M})).apply(this,arguments)}function ge(T){return Number(T.replace("s","000"))}function Se(T,M){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,$.Z)(function*({appConfig:T,heartbeatServiceProvider:M},{fid:U}){const K=Ue(T),ue=tt(T),_e=M.getImmediate({optional:!0});if(_e){const xt=yield _e.getHeartbeatsHeader();xt&&ue.append("x-firebase-client",xt)}const nt={method:"POST",headers:ue,body:JSON.stringify({fid:U,authVersion:et,appId:T.appId,sdkVersion:pe})},Ht=yield Re(()=>fetch(K,nt));if(Ht.ok){const xt=yield Ht.json();return{fid:xt.fid||U,registrationStatus:2,refreshToken:xt.refreshToken,authToken:Ne(xt.authToken)}}throw yield ke("Create Installation",Ht)})).apply(this,arguments)}function Ye(T){return new Promise(M=>{setTimeout(M,T)})}const hn=/^[cdef][\w-]{21}$/;function Qe(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const U=function rn(T){return function bt(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return hn.test(U)?U:""}catch(T){return""}}function Wn(T){return`${T.appName}!${T.appId}`}const An=new Map;function pn(T,M){const U=Wn(T);Yt(U,M),function fr(T,M){const U=function wr(){return!Qn&&"BroadcastChannel"in self&&(Qn=new BroadcastChannel("[Firebase] FID Change"),Qn.onmessage=T=>{Yt(T.data.key,T.data.fid)}),Qn}();U&&U.postMessage({key:T,fid:M}),function pr(){0===An.size&&Qn&&(Qn.close(),Qn=null)}()}(U,M)}function Yt(T,M){const U=An.get(T);if(U)for(const K of U)K(M)}let Qn=null;const li="firebase-installations-store";let Mi=null;function Rt(){return Mi||(Mi=(0,de.X3)("firebase-installations-database",1,{upgrade:(T,M)=>{0===M&&T.createObjectStore(li)}})),Mi}function Ei(T,M){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,$.Z)(function*(T,M){const U=Wn(T),ue=(yield Rt()).transaction(li,"readwrite"),_e=ue.objectStore(li),Ge=yield _e.get(U);return yield _e.put(M,U),yield ue.done,(!Ge||Ge.fid!==M.fid)&&pn(T,M.fid),M})).apply(this,arguments)}function Kn(T){return cs.apply(this,arguments)}function cs(){return(cs=(0,$.Z)(function*(T){const M=Wn(T),K=(yield Rt()).transaction(li,"readwrite");yield K.objectStore(li).delete(M),yield K.done})).apply(this,arguments)}function di(T,M){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,$.Z)(function*(T,M){const U=Wn(T),ue=(yield Rt()).transaction(li,"readwrite"),_e=ue.objectStore(li),Ge=yield _e.get(U),nt=M(Ge);return void 0===nt?yield _e.delete(U):yield _e.put(nt,U),yield ue.done,nt&&(!Ge||Ge.fid!==nt.fid)&&pn(T,nt.fid),nt})).apply(this,arguments)}function gr(T){return hi.apply(this,arguments)}function hi(){return(hi=(0,$.Z)(function*(T){let M;const U=yield di(T.appConfig,K=>{const ue=$r(K),_e=pt(T,ue);return M=_e.registrationPromise,_e.installationEntry});return""===U.fid?{installationEntry:yield M}:{installationEntry:U,registrationPromise:M}})).apply(this,arguments)}function $r(T){return js(T||{fid:Qe(),registrationStatus:0})}function pt(T,M){if(0===M.registrationStatus){if(!navigator.onLine)return{installationEntry:M,registrationPromise:Promise.reject(ot.create("app-offline"))};const U={fid:M.fid,registrationStatus:1,registrationTime:Date.now()},K=function wt(T,M){return Tt.apply(this,arguments)}(T,U);return{installationEntry:U,registrationPromise:K}}return 1===M.registrationStatus?{installationEntry:M,registrationPromise:Ir(T)}:{installationEntry:M}}function Tt(){return(Tt=(0,$.Z)(function*(T,M){try{const U=yield Se(T,M);return Ei(T.appConfig,U)}catch(U){throw ct(U)&&409===U.customData.serverCode?yield Kn(T.appConfig):yield Ei(T.appConfig,{fid:M.fid,registrationStatus:0}),U}})).apply(this,arguments)}function Ir(T){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,$.Z)(function*(T){let M=yield an(T.appConfig);for(;1===M.registrationStatus;)yield Ye(100),M=yield an(T.appConfig);if(0===M.registrationStatus){const{installationEntry:U,registrationPromise:K}=yield gr(T);return K||U}return M})).apply(this,arguments)}function an(T){return di(T,M=>{if(!M)throw ot.create("installation-not-found");return js(M)})}function js(T){return function Fr(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function Vn(T,M){return q.apply(this,arguments)}function q(){return(q=(0,$.Z)(function*({appConfig:T,heartbeatServiceProvider:M},U){const K=re(T,U),ue=ee(T,U),_e=M.getImmediate({optional:!0});if(_e){const xt=yield _e.getHeartbeatsHeader();xt&&ue.append("x-firebase-client",xt)}const nt={method:"POST",headers:ue,body:JSON.stringify({installation:{sdkVersion:pe,appId:T.appId}})},Ht=yield Re(()=>fetch(K,nt));if(Ht.ok)return Ne(yield Ht.json());throw yield ke("Generate Auth Token",Ht)})).apply(this,arguments)}function re(T,{fid:M}){return`${Ue(T)}/${M}/authTokens:generate`}function oe(T){return Be.apply(this,arguments)}function Be(){return(Be=(0,$.Z)(function*(T,M=!1){let U;const K=yield di(T.appConfig,_e=>{if(!Lt(_e))throw ot.create("not-registered");const Ge=_e.authToken;if(!M&&Bn(Ge))return _e;if(1===Ge.requestStatus)return U=Y(T,M),_e;{if(!navigator.onLine)throw ot.create("app-offline");const nt=Dr(_e);return U=yt(T,nt),nt}});return U?yield U:K.authToken})).apply(this,arguments)}function Y(T,M){return he.apply(this,arguments)}function he(){return(he=(0,$.Z)(function*(T,M){let U=yield ze(T.appConfig);for(;1===U.authToken.requestStatus;)yield Ye(100),U=yield ze(T.appConfig);const K=U.authToken;return 0===K.requestStatus?oe(T,M):K})).apply(this,arguments)}function ze(T){return di(T,M=>{if(!Lt(M))throw ot.create("not-registered");return function Lr(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(M.authToken)?Object.assign(Object.assign({},M),{authToken:{requestStatus:0}}):M})}function yt(T,M){return St.apply(this,arguments)}function St(){return(St=(0,$.Z)(function*(T,M){try{const U=yield Vn(T,M),K=Object.assign(Object.assign({},M),{authToken:U});return yield Ei(T.appConfig,K),U}catch(U){if(!ct(U)||401!==U.customData.serverCode&&404!==U.customData.serverCode){const K=Object.assign(Object.assign({},M),{authToken:{requestStatus:0}});yield Ei(T.appConfig,K)}else yield Kn(T.appConfig);throw U}})).apply(this,arguments)}function Lt(T){return void 0!==T&&2===T.registrationStatus}function Bn(T){return 2===T.requestStatus&&!function Ut(T){const M=Date.now();return M<T.creationTime||T.creationTime+T.expiresIn<M+36e5}(T)}function Dr(T){const M={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:M})}function Wi(){return(Wi=(0,$.Z)(function*(T){const M=T,{installationEntry:U,registrationPromise:K}=yield gr(M);return K?K.catch(console.error):oe(M).catch(console.error),U.fid})).apply(this,arguments)}function qt(){return(qt=(0,$.Z)(function*(T,M=!1){const U=T;return yield Nn(U),(yield oe(U,M)).token})).apply(this,arguments)}function Nn(T){return ur.apply(this,arguments)}function ur(){return(ur=(0,$.Z)(function*(T){const{registrationPromise:M}=yield gr(T);M&&(yield M)})).apply(this,arguments)}function Ki(T){return ot.create("missing-app-config-values",{valueName:T})}const Xr="installations",Et=T=>{const M=T.getProvider("app").getImmediate(),U=function cr(T){if(!T||!T.options)throw Ki("App Configuration");if(!T.name)throw Ki("App Name");const M=["projectId","apiKey","appId"];for(const U of M)if(!T.options[U])throw Ki(U);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(M);return{app:M,appConfig:U,heartbeatServiceProvider:(0,fe._getProvider)(M,"heartbeat"),_delete:()=>Promise.resolve()}},bn=T=>{const M=T.getProvider("app").getImmediate(),U=(0,fe._getProvider)(M,Xr).getImmediate();return{getId:()=>function jo(T){return Wi.apply(this,arguments)}(U),getToken:ue=>function Xn(T){return qt.apply(this,arguments)}(U,ue)}};(function Hr(){(0,fe._registerComponent)(new le.wA(Xr,Et,"PUBLIC")),(0,fe._registerComponent)(new le.wA("installations-internal",bn,"PRIVATE"))})(),(0,fe.registerVersion)(ve,J),(0,fe.registerVersion)(ve,J,"esm2017");const Ae="@firebase/remote-config",er=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ma{constructor(M,U,K,ue){this.client=M,this.storage=U,this.storageCache=K,this.logger=ue}isCachedDataFresh(M,U){if(!U)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const K=Date.now()-U,ue=K<=M;return this.logger.debug(`Config fetch cache check. Cache age millis: ${K}. Cache max age millis (minimumFetchIntervalMillis setting): ${M}. Is cache hit: ${ue}.`),ue}fetch(M){var U=this;return(0,$.Z)(function*(){const[K,ue]=yield Promise.all([U.storage.getLastSuccessfulFetchTimestampMillis(),U.storage.getLastSuccessfulFetchResponse()]);if(ue&&U.isCachedDataFresh(M.cacheMaxAgeMillis,K))return ue;M.eTag=ue&&ue.eTag;const _e=yield U.client.fetch(M),Ge=[U.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===_e.status&&Ge.push(U.storage.setLastSuccessfulFetchResponse(_e)),yield Promise.all(Ge),_e})()}}function $a(T=navigator){return T.languages&&T.languages[0]||T.language}class nr{constructor(M,U,K,ue,_e,Ge){this.firebaseInstallations=M,this.sdkVersion=U,this.namespace=K,this.projectId=ue,this.apiKey=_e,this.appId=Ge}fetch(M){var U=this;return(0,$.Z)(function*(){var K,ue,_e;const[Ge,nt]=yield Promise.all([U.firebaseInstallations.getId(),U.firebaseInstallations.getToken()]),xt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${U.projectId}/namespaces/${U.namespace}:fetch?key=${U.apiKey}`,cn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":M.eTag||"*"},Ct={sdk_version:U.sdkVersion,app_instance_id:Ge,app_instance_id_token:nt,app_id:U.appId,language_code:$a()},ui={method:"POST",headers:cn,body:JSON.stringify(Ct)},rs=fetch(xt,ui),Ze=new Promise((Po,it)=>{M.signal.addEventListener(()=>{const be=new Error("The operation was aborted.");be.name="AbortError",it(be)})});let Mn;try{yield Promise.race([rs,Ze]),Mn=yield rs}catch(Po){let it="fetch-client-network";throw"AbortError"===(null===(K=Po)||void 0===K?void 0:K.name)&&(it="fetch-timeout"),er.create(it,{originalErrorMessage:null===(ue=Po)||void 0===ue?void 0:ue.message})}let mi=Mn.status;const Mu=Mn.headers.get("ETag")||void 0;let gt,kt;if(200===Mn.status){let Po;try{Po=yield Mn.json()}catch(it){throw er.create("fetch-client-parse",{originalErrorMessage:null===(_e=it)||void 0===_e?void 0:_e.message})}gt=Po.entries,kt=Po.state}if("INSTANCE_STATE_UNSPECIFIED"===kt?mi=500:"NO_CHANGE"===kt?mi=304:("NO_TEMPLATE"===kt||"EMPTY_CONFIG"===kt)&&(gt={}),304!==mi&&200!==mi)throw er.create("fetch-status",{httpStatus:mi});return{status:mi,eTag:Mu,config:gt}})()}}class vu{constructor(M,U){this.client=M,this.storage=U}fetch(M){var U=this;return(0,$.Z)(function*(){const K=(yield U.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return U.attemptFetch(M,K)})()}attemptFetch(M,{throttleEndTimeMillis:U,backoffCount:K}){var ue=this;return(0,$.Z)(function*(){yield function ki(T,M){return new Promise((U,K)=>{const ue=Math.max(M-Date.now(),0),_e=setTimeout(U,ue);T.addEventListener(()=>{clearTimeout(_e),K(er.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}(M.signal,U);try{const _e=yield ue.client.fetch(M);return yield ue.storage.deleteThrottleMetadata(),_e}catch(_e){if(!function mo(T){if(!(T instanceof ae.ZR&&T.customData))return!1;const M=Number(T.customData.httpStatus);return 429===M||500===M||503===M||504===M}(_e))throw _e;const Ge={throttleEndTimeMillis:Date.now()+(0,ae.$s)(K),backoffCount:K+1};return yield ue.storage.setThrottleMetadata(Ge),ue.attemptFetch(M,Ge)}})()}}class mr{constructor(M,U,K,ue,_e){this.app=M,this._client=U,this._storageCache=K,this._storage=ue,this._logger=_e,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function yo(T,M){var U;const K=T.target.error||void 0;return er.create(M,{originalErrorMessage:K&&(null===(U=K)||void 0===U?void 0:U.message)})}const Fi="app_namespace_store";class Eu{constructor(M,U,K,ue=function _u(){return new Promise((T,M)=>{var U;try{const K=indexedDB.open("firebase_remote_config",1);K.onerror=ue=>{M(yo(ue,"storage-open"))},K.onsuccess=ue=>{T(ue.target.result)},K.onupgradeneeded=ue=>{0===ue.oldVersion&&ue.target.result.createObjectStore(Fi,{keyPath:"compositeKey"})}}catch(K){M(er.create("storage-open",{originalErrorMessage:null===(U=K)||void 0===U?void 0:U.message}))}})}()){this.appId=M,this.appName=U,this.namespace=K,this.openDbPromise=ue}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(M){return this.set("last_fetch_status",M)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(M){return this.set("last_successful_fetch_timestamp_millis",M)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(M){return this.set("last_successful_fetch_response",M)}getActiveConfig(){return this.get("active_config")}setActiveConfig(M){return this.set("active_config",M)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(M){return this.set("active_config_etag",M)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(M){return this.set("throttle_metadata",M)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(M){var U=this;return(0,$.Z)(function*(){const K=yield U.openDbPromise;return new Promise((ue,_e)=>{var Ge;const Ht=K.transaction([Fi],"readonly").objectStore(Fi),xt=U.createCompositeKey(M);try{const cn=Ht.get(xt);cn.onerror=Ct=>{_e(yo(Ct,"storage-get"))},cn.onsuccess=Ct=>{const ui=Ct.target.result;ue(ui?ui.value:void 0)}}catch(cn){_e(er.create("storage-get",{originalErrorMessage:null===(Ge=cn)||void 0===Ge?void 0:Ge.message}))}})})()}set(M,U){var K=this;return(0,$.Z)(function*(){const ue=yield K.openDbPromise;return new Promise((_e,Ge)=>{var nt;const xt=ue.transaction([Fi],"readwrite").objectStore(Fi),cn=K.createCompositeKey(M);try{const Ct=xt.put({compositeKey:cn,value:U});Ct.onerror=ui=>{Ge(yo(ui,"storage-set"))},Ct.onsuccess=()=>{_e()}}catch(Ct){Ge(er.create("storage-set",{originalErrorMessage:null===(nt=Ct)||void 0===nt?void 0:nt.message}))}})})()}delete(M){var U=this;return(0,$.Z)(function*(){const K=yield U.openDbPromise;return new Promise((ue,_e)=>{var Ge;const Ht=K.transaction([Fi],"readwrite").objectStore(Fi),xt=U.createCompositeKey(M);try{const cn=Ht.delete(xt);cn.onerror=Ct=>{_e(yo(Ct,"storage-delete"))},cn.onsuccess=()=>{ue()}}catch(cn){_e(er.create("storage-delete",{originalErrorMessage:null===(Ge=cn)||void 0===Ge?void 0:Ge.message}))}})})()}createCompositeKey(M){return[this.appId,this.appName,this.namespace,M].join()}}class Go{constructor(M){this.storage=M}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var M=this;return(0,$.Z)(function*(){const U=M.storage.getLastFetchStatus(),K=M.storage.getLastSuccessfulFetchTimestampMillis(),ue=M.storage.getActiveConfig(),_e=yield U;_e&&(M.lastFetchStatus=_e);const Ge=yield K;Ge&&(M.lastSuccessfulFetchTimestampMillis=Ge);const nt=yield ue;nt&&(M.activeConfig=nt)})()}setLastFetchStatus(M){return this.lastFetchStatus=M,this.storage.setLastFetchStatus(M)}setLastSuccessfulFetchTimestampMillis(M){return this.lastSuccessfulFetchTimestampMillis=M,this.storage.setLastSuccessfulFetchTimestampMillis(M)}setActiveConfig(M){return this.activeConfig=M,this.storage.setActiveConfig(M)}}function Ts(){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,$.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(T){return!1}})).apply(this,arguments)}!function bs(){(0,fe._registerComponent)(new le.wA("remote-config",function T(M,{instanceIdentifier:U}){const K=M.getProvider("app").getImmediate(),ue=M.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw er.create("registration-window");if(!(0,ae.hl)())throw er.create("indexed-db-unavailable");const{projectId:_e,apiKey:Ge,appId:nt}=K.options;if(!_e)throw er.create("registration-project-id");if(!Ge)throw er.create("registration-api-key");if(!nt)throw er.create("registration-app-id");const Ht=new Eu(nt,K.name,U=U||"firebase"),xt=new Go(Ht),cn=new ce.Yd(Ae);cn.logLevel=ce.in.ERROR;const Ct=new nr(ue,fe.SDK_VERSION,U,_e,Ge,nt),ui=new vu(Ct,Ht),rs=new ma(ui,Ht,xt,cn),Ze=new mr(K,rs,xt,Ht,cn);return function Tn(T){const M=(0,ae.m9)(T);M._initializePromise||(M._initializePromise=M._storageCache.loadFromStorage().then(()=>{M._isInitializationComplete=!0}))}(Ze),Ze},"PUBLIC").setMultipleInstances(!0)),(0,fe.registerVersion)(Ae,"0.3.9"),(0,fe.registerVersion)(Ae,"0.3.9","esm2017")}();const Ko="/firebase-messaging-sw.js",xr="/firebase-cloud-messaging-push-scope",ds="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",hs="google.c.a.c_id",Gs="google.c.a.c_l",Ui="google.c.a.ts",Ga="google.c.a.e";var fs=(()=>{return(T=fs||(fs={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",fs;var T})();function Ur(T){const M=new Uint8Array(T);return btoa(String.fromCharCode(...M)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function za(T){const U=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),K=atob(U),ue=new Uint8Array(K.length);for(let _e=0;_e<K.length;++_e)ue[_e]=K.charCodeAt(_e);return ue}const Gr="fcm_token_details_db",rr="fcm_token_object_Store";function ya(T){return Vi.apply(this,arguments)}function Vi(){return Vi=(0,$.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(_e=>_e.name).includes(Gr))return null;let M=null;return(yield(0,de.X3)(Gr,5,{upgrade:(K=(0,$.Z)(function*(ue,_e,Ge,nt){var Ht;if(_e<2||!ue.objectStoreNames.contains(rr))return;const xt=nt.objectStore(rr),cn=yield xt.index("fcmSenderId").get(T);if(yield xt.clear(),cn)if(2===_e){const Ct=cn;if(!Ct.auth||!Ct.p256dh||!Ct.endpoint)return;M={token:Ct.fcmToken,createTime:null!==(Ht=Ct.createTime)&&void 0!==Ht?Ht:Date.now(),subscriptionOptions:{auth:Ct.auth,p256dh:Ct.p256dh,endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:"string"==typeof Ct.vapidKey?Ct.vapidKey:Ur(Ct.vapidKey)}}}else if(3===_e){const Ct=cn;M={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:Ur(Ct.auth),p256dh:Ur(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:Ur(Ct.vapidKey)}}}else if(4===_e){const Ct=cn;M={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:Ur(Ct.auth),p256dh:Ur(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:Ur(Ct.vapidKey)}}}}),function(_e,Ge,nt,Ht){return K.apply(this,arguments)})})).close(),yield(0,de.Lj)(Gr),yield(0,de.Lj)("fcm_vapid_details_db"),yield(0,de.Lj)("undefined"),_o(M)?M:null;var K}),Vi.apply(this,arguments)}function _o(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:M}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof M.auth&&M.auth.length>0&&"string"==typeof M.p256dh&&M.p256dh.length>0&&"string"==typeof M.endpoint&&M.endpoint.length>0&&"string"==typeof M.swScope&&M.swScope.length>0&&"string"==typeof M.vapidKey&&M.vapidKey.length>0}const zr="firebase-messaging-store";let va=null;function In(){return va||(va=(0,de.X3)("firebase-messaging-database",1,{upgrade:(T,M)=>{0===M&&T.createObjectStore(zr)}})),va}function x(T){return L.apply(this,arguments)}function L(){return(L=(0,$.Z)(function*(T){const M=je(T),K=yield(yield In()).transaction(zr).objectStore(zr).get(M);if(K)return K;{const ue=yield ya(T.appConfig.senderId);if(ue)return yield A(T,ue),ue}})).apply(this,arguments)}function A(T,M){return j.apply(this,arguments)}function j(){return(j=(0,$.Z)(function*(T,M){const U=je(T),ue=(yield In()).transaction(zr,"readwrite");return yield ue.objectStore(zr).put(M,U),yield ue.done,M})).apply(this,arguments)}function te(T){return Te.apply(this,arguments)}function Te(){return(Te=(0,$.Z)(function*(T){const M=je(T),K=(yield In()).transaction(zr,"readwrite");yield K.objectStore(zr).delete(M),yield K.done})).apply(this,arguments)}function je({appConfig:T}){return T.appId}const Vt=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function gn(T,M){return $t.apply(this,arguments)}function $t(){return($t=(0,$.Z)(function*(T,M){const U=yield Wr(T),K=qi(M),ue={method:"POST",headers:U,body:JSON.stringify(K)};let _e;try{_e=yield(yield fetch(br(T.appConfig),ue)).json()}catch(Ge){throw Vt.create("token-subscribe-failed",{errorInfo:Ge})}if(_e.error)throw Vt.create("token-subscribe-failed",{errorInfo:_e.error.message});if(!_e.token)throw Vt.create("token-subscribe-no-token");return _e.token})).apply(this,arguments)}function Qt(T,M){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,$.Z)(function*(T,M){const U=yield Wr(T),K=qi(M.subscriptionOptions),ue={method:"PATCH",headers:U,body:JSON.stringify(K)};let _e;try{_e=yield(yield fetch(`${br(T.appConfig)}/${M.token}`,ue)).json()}catch(Ge){throw Vt.create("token-update-failed",{errorInfo:Ge})}if(_e.error)throw Vt.create("token-update-failed",{errorInfo:_e.error.message});if(!_e.token)throw Vt.create("token-update-no-token");return _e.token})).apply(this,arguments)}function Bt(T,M){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,$.Z)(function*(T,M){const K={method:"DELETE",headers:yield Wr(T)};try{const _e=yield(yield fetch(`${br(T.appConfig)}/${M}`,K)).json();if(_e.error)throw Vt.create("token-unsubscribe-failed",{errorInfo:_e.error.message})}catch(ue){throw Vt.create("token-unsubscribe-failed",{errorInfo:ue})}})).apply(this,arguments)}function br({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function Wr(T){return At.apply(this,arguments)}function At(){return(At=(0,$.Z)(function*({appConfig:T,installations:M}){const U=yield M.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${U}`})})).apply(this,arguments)}function qi({p256dh:T,auth:M,endpoint:U,vapidKey:K}){const ue={web:{endpoint:U,auth:M,p256dh:T}};return K!==ds&&(ue.web.applicationPubKey=K),ue}const Eo=6048e5;function Ws(T){return qo.apply(this,arguments)}function qo(){return(qo=(0,$.Z)(function*(T){const M=yield On(T.swRegistration,T.vapidKey),U={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:M.endpoint,auth:Ur(M.getKey("auth")),p256dh:Ur(M.getKey("p256dh"))},K=yield x(T.firebaseDependencies);if(K){if(Ii(K.subscriptionOptions,U))return Date.now()>=K.createTime+Eo?Wa(T,{token:K.token,createTime:Date.now(),subscriptionOptions:U}):K.token;try{yield Bt(T.firebaseDependencies,K.token)}catch(ue){console.warn(ue)}return en(T.firebaseDependencies,U)}return en(T.firebaseDependencies,U)})).apply(this,arguments)}function Ss(T){return _a.apply(this,arguments)}function _a(){return(_a=(0,$.Z)(function*(T){const M=yield x(T.firebaseDependencies);M&&(yield Bt(T.firebaseDependencies,M.token),yield te(T.firebaseDependencies));const U=yield T.swRegistration.pushManager.getSubscription();return!U||U.unsubscribe()})).apply(this,arguments)}function Wa(T,M){return $e.apply(this,arguments)}function $e(){return($e=(0,$.Z)(function*(T,M){try{const U=yield Qt(T.firebaseDependencies,M),K=Object.assign(Object.assign({},M),{token:U,createTime:Date.now()});return yield A(T.firebaseDependencies,K),U}catch(U){throw yield Ss(T),U}})).apply(this,arguments)}function en(T,M){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,$.Z)(function*(T,M){const K={token:yield gn(T,M),createTime:Date.now(),subscriptionOptions:M};return yield A(T,K),K.token})).apply(this,arguments)}function On(T,M){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,$.Z)(function*(T,M){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:za(M)})})).apply(this,arguments)}function Ii(T,M){return M.vapidKey===T.vapidKey&&M.endpoint===T.endpoint&&M.auth===T.auth&&M.p256dh===T.p256dh}function Bi(T){const M={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function Ea(T,M){if(!M.notification)return;T.notification={};const U=M.notification.title;U&&(T.notification.title=U);const K=M.notification.body;K&&(T.notification.body=K);const ue=M.notification.image;ue&&(T.notification.image=ue)}(M,T),function Zi(T,M){!M.data||(T.data=M.data)}(M,T),function Nc(T,M){var U,K,ue,_e,Ge;if(!M.fcmOptions&&!(null===(U=M.notification)||void 0===U?void 0:U.click_action))return;T.fcmOptions={};const nt=null!==(ue=null===(K=M.fcmOptions)||void 0===K?void 0:K.link)&&void 0!==ue?ue:null===(_e=M.notification)||void 0===_e?void 0:_e.click_action;nt&&(T.fcmOptions.link=nt);const Ht=null===(Ge=M.fcmOptions)||void 0===Ge?void 0:Ge.analytics_label;Ht&&(T.fcmOptions.analyticsLabel=Ht)}(M,T),M}function qa(T){return"object"==typeof T&&!!T&&hs in T}function Yo(T,M){const U=[];for(let K=0;K<T.length;K++)U.push(T.charAt(K)),K<M.length&&U.push(M.charAt(K));return U.join("")}function Tr(T){return Vt.create("missing-app-config-values",{valueName:T})}Yo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Yo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class As{constructor(M,U,K){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ue=function wo(T){if(!T||!T.options)throw Tr("App Configuration Object");if(!T.name)throw Tr("App Name");const M=["projectId","apiKey","appId","messagingSenderId"],{options:U}=T;for(const K of M)if(!U[K])throw Tr(K);return{appName:T.name,projectId:U.projectId,apiKey:U.apiKey,appId:U.appId,senderId:U.messagingSenderId}}(M);this.firebaseDependencies={app:M,appConfig:ue,installations:U,analyticsProvider:K}}_delete(){return Promise.resolve()}}function ps(T){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,$.Z)(function*(T){var M;try{T.swRegistration=yield navigator.serviceWorker.register(Ko,{scope:xr}),T.swRegistration.update().catch(()=>{})}catch(U){throw Vt.create("failed-service-worker-registration",{browserErrorMessage:null===(M=U)||void 0===M?void 0:M.message})}})).apply(this,arguments)}function Yi(T,M){return gs.apply(this,arguments)}function gs(){return(gs=(0,$.Z)(function*(T,M){if(!M&&!T.swRegistration&&(yield ps(T)),M||!T.swRegistration){if(!(M instanceof ServiceWorkerRegistration))throw Vt.create("invalid-sw-registration");T.swRegistration=M}})).apply(this,arguments)}function wa(T,M){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,$.Z)(function*(T,M){M?T.vapidKey=M:T.vapidKey||(T.vapidKey=ds)})).apply(this,arguments)}function xs(){return(xs=(0,$.Z)(function*(T,M){if(!navigator)throw Vt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Vt.create("permission-blocked");return yield wa(T,null==M?void 0:M.vapidKey),yield Yi(T,null==M?void 0:M.serviceWorkerRegistration),Ws(T)})).apply(this,arguments)}function Jo(T,M,U){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,$.Z)(function*(T,M,U){const K=Da(M);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(K,{message_id:U[hs],message_name:U[Gs],message_time:U[Ui],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Da(T){switch(T){case fs.NOTIFICATION_CLICKED:return"notification_open";case fs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function qs(){return(qs=(0,$.Z)(function*(T,M){const U=M.data;if(!U.isFirebaseMessaging)return;T.onMessageHandler&&U.messageType===fs.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(Bi(U)):T.onMessageHandler.next(Bi(U)));const K=U.data;qa(K)&&"1"===K[Ga]&&(yield Jo(T,U.messageType,K))})).apply(this,arguments)}const Zs="@firebase/messaging",wu=T=>{const M=new As(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",U=>function Xo(T,M){return qs.apply(this,arguments)}(M,U)),M},Qs=T=>{const M=T.getProvider("messaging").getImmediate();return{getToken:K=>function Ia(T,M){return xs.apply(this,arguments)}(M,K)}};function Do(){return ea.apply(this,arguments)}function ea(){return(ea=(0,$.Z)(function*(){try{yield(0,ae.eu)()}catch(T){return!1}return"undefined"!=typeof window&&(0,ae.hl)()&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Io(){(0,fe._registerComponent)(new le.wA("messaging",wu,"PUBLIC")),(0,fe._registerComponent)(new le.wA("messaging-internal",Qs,"PRIVATE")),(0,fe.registerVersion)(Zs,"0.9.14"),(0,fe.registerVersion)(Zs,"0.9.14","esm2017")}();const Ya="analytics",kc="firebase_id",pi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",To="https://www.googletagmanager.com/gtag/js",fn=new ce.Yd("@firebase/analytics");function na(T){return Promise.all(T.map(M=>M.catch(U=>U)))}function oi(T,M){const U=document.createElement("script");U.src=`${To}?l=${T}&id=${M}`,U.async=!0,document.head.appendChild(U)}function ba(T,M,U,K,ue,_e){return $i.apply(this,arguments)}function $i(){return($i=(0,$.Z)(function*(T,M,U,K,ue,_e){const Ge=K[ue];try{if(Ge)yield M[Ge];else{const Ht=(yield na(U)).find(xt=>xt.measurementId===ue);Ht&&(yield M[Ht.appId])}}catch(nt){fn.error(nt)}T("config",ue,_e)})).apply(this,arguments)}function ms(T,M,U,K,ue){return ys.apply(this,arguments)}function ys(){return(ys=(0,$.Z)(function*(T,M,U,K,ue){try{let _e=[];if(ue&&ue.send_to){let Ge=ue.send_to;Array.isArray(Ge)||(Ge=[Ge]);const nt=yield na(U);for(const Ht of Ge){const xt=nt.find(Ct=>Ct.measurementId===Ht),cn=xt&&M[xt.appId];if(!cn){_e=[];break}_e.push(cn)}}0===_e.length&&(_e=Object.values(M)),yield Promise.all(_e),T("event",K,ue||{})}catch(_e){fn.error(_e)}})).apply(this,arguments)}function Fc(){const T=window.document.getElementsByTagName("script");for(const M of Object.values(T))if(M.src&&M.src.includes(To))return M;return null}const $n=new ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ja=new class ai{constructor(M={},U=1e3){this.throttleMetadata=M,this.intervalMillis=U}getThrottleMetadata(M){return this.throttleMetadata[M]}setThrottleMetadata(M,U){this.throttleMetadata[M]=U}deleteThrottleMetadata(M){delete this.throttleMetadata[M]}};function Hn(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function Di(T){return Du.apply(this,arguments)}function Du(){return(Du=(0,$.Z)(function*(T){var M;const{appId:U,apiKey:K}=T,ue={method:"GET",headers:Hn(K)},_e=pi.replace("{app-id}",U),Ge=yield fetch(_e,ue);if(200!==Ge.status&&304!==Ge.status){let nt="";try{const Ht=yield Ge.json();(null===(M=Ht.error)||void 0===M?void 0:M.message)&&(nt=Ht.error.message)}catch(Ht){}throw $n.create("config-fetch-failed",{httpStatus:Ge.status,responseMessage:nt})}return Ge.json()})).apply(this,arguments)}function Gn(T){return Os.apply(this,arguments)}function Os(){return(Os=(0,$.Z)(function*(T,M=Ja,U){const{appId:K,apiKey:ue,measurementId:_e}=T.options;if(!K)throw $n.create("no-app-id");if(!ue){if(_e)return{measurementId:_e,appId:K};throw $n.create("no-api-key")}const Ge=M.getThrottleMetadata(K)||{backoffCount:0,throttleEndTimeMillis:Date.now()},nt=new bu;return setTimeout((0,$.Z)(function*(){nt.abort()}),void 0!==U?U:6e4),Hi({appId:K,apiKey:ue,measurementId:_e},Ge,nt,M)})).apply(this,arguments)}function Hi(T,M,U){return zu.apply(this,arguments)}function zu(){return(zu=(0,$.Z)(function*(T,{throttleEndTimeMillis:M,backoffCount:U},K,ue=Ja){const{appId:_e,measurementId:Ge}=T;try{yield Ta(K,M)}catch(nt){if(Ge)return fn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ge} provided in the "measurementId" field in the local Firebase config. [${nt.message}]`),{appId:_e,measurementId:Ge};throw nt}try{const nt=yield Di(T);return ue.deleteThrottleMetadata(_e),nt}catch(nt){if(!Wu(nt)){if(ue.deleteThrottleMetadata(_e),Ge)return fn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ge} provided in the "measurementId" field in the local Firebase config. [${nt.message}]`),{appId:_e,measurementId:Ge};throw nt}const Ht=503===Number(nt.customData.httpStatus)?(0,ae.$s)(U,ue.intervalMillis,30):(0,ae.$s)(U,ue.intervalMillis),xt={throttleEndTimeMillis:Date.now()+Ht,backoffCount:U+1};return ue.setThrottleMetadata(_e,xt),fn.debug(`Calling attemptFetch again in ${Ht} millis`),Hi(T,xt,K,ue)}})).apply(this,arguments)}function Ta(T,M){return new Promise((U,K)=>{const ue=Math.max(M-Date.now(),0),_e=setTimeout(U,ue);T.addEventListener(()=>{clearTimeout(_e),K($n.create("fetch-throttle",{throttleEndTimeMillis:M}))})})}function Wu(T){if(!(T instanceof ae.ZR&&T.customData))return!1;const M=Number(T.customData.httpStatus);return 429===M||500===M||503===M||504===M}class bu{constructor(){this.listeners=[]}addEventListener(M){this.listeners.push(M)}abort(){this.listeners.forEach(M=>M())}}function Ku(){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,$.Z)(function*(){if(!(0,ae.hl)())return fn.warn($n.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ae.eu)()}catch(T){return fn.warn($n.create("indexeddb-unavailable",{errorInfo:T}).message),!1}return!0})).apply(this,arguments)}function bi(){return(bi=(0,$.Z)(function*(T,M,U,K,ue,_e,Ge){var nt;const Ht=Gn(T);Ht.then(rs=>{U[rs.measurementId]=rs.appId,T.options.measurementId&&rs.measurementId!==T.options.measurementId&&fn.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${rs.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(rs=>fn.error(rs)),M.push(Ht);const xt=Ku().then(rs=>{if(rs)return K.getId()}),[cn,Ct]=yield Promise.all([Ht,xt]);Fc()||oi(_e,cn.measurementId),ue("js",new Date);const ui=null!==(nt=null==Ge?void 0:Ge.config)&&void 0!==nt?nt:{};return ui.origin="firebase",ui.update=!0,null!=Ct&&(ui[kc]=Ct),ue("config",cn.measurementId,ui),cn.measurementId})).apply(this,arguments)}class Js{constructor(M){this.app=M}_delete(){return delete I[this.app.options.appId],Promise.resolve()}}let I={},_=[];const y={};let V,W,C="dataLayer",X=!1;function Jt(T,M,U){!function lt(){const T=[];if((0,ae.ru)()&&T.push("This is a browser extension environment."),(0,ae.zI)()||T.push("Cookies are not available."),T.length>0){const M=T.map((K,ue)=>`(${ue+1}) ${K}`).join(" "),U=$n.create("invalid-analytics-context",{errorInfo:M});fn.warn(U.message)}}();const K=T.options.appId;if(!K)throw $n.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw $n.create("no-api-key");fn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=I[K])throw $n.create("already-exists",{id:K});if(!X){!function Ms(T){let M=[];Array.isArray(window[T])?M=window[T]:window[T]=M}(C);const{wrappedGtag:_e,gtagCore:Ge}=function Gu(T,M,U,K,ue){let _e=function(...Ge){window[K].push(arguments)};return window[ue]&&"function"==typeof window[ue]&&(_e=window[ue]),window[ue]=function Rs(T,M,U,K){function _e(){return(_e=(0,$.Z)(function*(Ge,nt,Ht){try{"event"===Ge?yield ms(T,M,U,nt,Ht):"config"===Ge?yield ba(T,M,U,K,nt,Ht):T("set",nt)}catch(xt){fn.error(xt)}})).apply(this,arguments)}return function ue(Ge,nt,Ht){return _e.apply(this,arguments)}}(_e,T,M,U),{gtagCore:_e,wrappedGtag:window[ue]}}(I,_,y,C,"gtag");W=_e,V=Ge,X=!0}return I[K]=function Ji(T,M,U,K,ue,_e,Ge){return bi.apply(this,arguments)}(T,_,y,M,V,C,U),new Js(T)}function mn(){return(mn=(0,$.Z)(function*(T,M,U,K,ue){if(ue&&ue.global)T("event",U,K);else{const _e=yield M;T("event",U,Object.assign(Object.assign({},K),{send_to:_e}))}})).apply(this,arguments)}function qu(){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,$.Z)(function*(){if((0,ae.ru)()||!(0,ae.zI)()||!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch(T){return!1}})).apply(this,arguments)}const Cd="@firebase/analytics";!function Sd(){(0,fe._registerComponent)(new le.wA(Ya,(M,{options:U})=>Jt(M.getProvider("app").getImmediate(),M.getProvider("installations-internal").getImmediate(),U),"PUBLIC")),(0,fe._registerComponent)(new le.wA("analytics-internal",function T(M){try{const U=M.getProvider(Ya).getImmediate();return{logEvent:(K,ue,_e)=>function $h(T,M,U,K){T=(0,ae.m9)(T),function vt(T,M,U,K,ue){return mn.apply(this,arguments)}(W,I[T.app.options.appId],M,U,K).catch(ue=>fn.error(ue))}(U,K,ue,_e)}}catch(U){throw $n.create("interop-component-reg-failed",{reason:U})}},"PRIVATE")),(0,fe.registerVersion)(Cd,"0.7.10"),(0,fe.registerVersion)(Cd,"0.7.10","esm2017")}();var tu=k(4408),yr=k(7565);const ra=new class Ps extends yr.v{}(class Vc extends tu.o{constructor(M,U){super(M,U),this.scheduler=M,this.work=U}schedule(M,U=0){return U>0?super.schedule(M,U):(this.delay=U,this.state=M,this.scheduler.flush(this),this)}execute(M,U){return U>0||this.closed?super.execute(M,U):this._execute(M,U)}requestAsyncId(M,U,K=0){return null!=K&&K>0||null==K&&this.delay>0?super.requestAsyncId(M,U,K):M.flush(this)}});var Tu=k(4986),gi=k(8505),ts=k(9468),Ca=k(5363);const Mo=new D.GfV("7.4.1"),ia="__angularfire_symbol__analyticsIsSupportedValue",sa="__angularfire_symbol__analyticsIsSupported",eo="__angularfire_symbol__remoteConfigIsSupportedValue",Ro="__angularfire_symbol__remoteConfigIsSupported",Cu="__angularfire_symbol__messagingIsSupportedValue",nu="__angularfire_symbol__messagingIsSupported";function Ad(T,M,U){if(M){if(1===M.length)return M[0];const _e=M.filter(Ge=>Ge.app===U);if(1===_e.length)return _e[0]}return U.container.getProvider(T).getImmediate({optional:!0})}globalThis[sa]||(globalThis[sa]=qu().then(T=>globalThis[ia]=T).catch(()=>globalThis[ia]=!1)),globalThis[nu]||(globalThis[nu]=Do().then(T=>globalThis[Cu]=T).catch(()=>globalThis[Cu]=!1)),globalThis[Ro]||(globalThis[Ro]=Ts().then(T=>globalThis[eo]=T).catch(()=>globalThis[eo]=!1));const Au=(T,M)=>{const U=M?[M]:(0,H.C6)(),K=[];return U.forEach(ue=>{ue.container.getProvider(T).instances.forEach(Ge=>{K.includes(Ge)||K.push(Ge)})}),K};function Oo(){}class Bc{constructor(M,U=ra){this.zone=M,this.delegate=U}now(){return this.delegate.now()}schedule(M,U,K){const ue=this.zone;return this.delegate.schedule(function(Ge){ue.runGuarded(()=>{M.apply(this,[Ge])})},U,K)}}class No{constructor(M){this.zone=M,this.task=null}call(M,U){const K=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Oo,{},Oo,Oo)),U.pipe((0,gi.b)({next:K,complete:K,error:K})).subscribe(M).add(K)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Rl=(()=>{class T{constructor(U){this.ngZone=U,this.outsideAngular=U.runOutsideAngular(()=>new Bc(Zone.current)),this.insideAngular=U.run(()=>new Bc(Zone.current,Tu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(U){return new(U||T)(D.LFG(D.R0b))},T.\u0275prov=D.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function to(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function Sa(T){return to(),function iu(T){return function(U){return(U=U.lift(new No(T.ngZone))).pipe((0,ts.R)(T.outsideAngular),(0,Ca.Q)(T.insideAngular))}}(to())(T)}},2090:(st,we,k)=>{k.d(we,{BH:()=>et,LL:()=>Ie,ZR:()=>Se,zI:()=>ie,US:()=>le,tV:()=>ve,L:()=>de,$s:()=>an,r3:()=>ar,Sg:()=>Ve,ne:()=>Mi,vZ:()=>Qn,ZB:()=>Z,pd:()=>us,m9:()=>Vn,z$:()=>He,jU:()=>Pe,ru:()=>ot,d:()=>Ue,xb:()=>Yt,w1:()=>Ne,hl:()=>ee,uI:()=>Je,UG:()=>Ce,b$:()=>ct,G6:()=>tt,Mn:()=>ke,xO:()=>pr,zd:()=>_i,eu:()=>Re});const fe=function(q){const re=[];let oe=0;for(let Be=0;Be<q.length;Be++){let Y=q.charCodeAt(Be);Y<128?re[oe++]=Y:Y<2048?(re[oe++]=Y>>6|192,re[oe++]=63&Y|128):55296==(64512&Y)&&Be+1<q.length&&56320==(64512&q.charCodeAt(Be+1))?(Y=65536+((1023&Y)<<10)+(1023&q.charCodeAt(++Be)),re[oe++]=Y>>18|240,re[oe++]=Y>>12&63|128,re[oe++]=Y>>6&63|128,re[oe++]=63&Y|128):(re[oe++]=Y>>12|224,re[oe++]=Y>>6&63|128,re[oe++]=63&Y|128)}return re},le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,re){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const oe=re?this.byteToCharMapWebSafe_:this.byteToCharMap_,Be=[];for(let Y=0;Y<q.length;Y+=3){const he=q[Y],ze=Y+1<q.length,yt=ze?q[Y+1]:0,St=Y+2<q.length,Lt=St?q[Y+2]:0;let Dr=(15&yt)<<2|Lt>>6,Lr=63&Lt;St||(Lr=64,ze||(Dr=64)),Be.push(oe[he>>2],oe[(3&he)<<4|yt>>4],oe[Dr],oe[Lr])}return Be.join("")},encodeString(q,re){return this.HAS_NATIVE_SUPPORT&&!re?btoa(q):this.encodeByteArray(fe(q),re)},decodeString(q,re){return this.HAS_NATIVE_SUPPORT&&!re?atob(q):function(q){const re=[];let oe=0,Be=0;for(;oe<q.length;){const Y=q[oe++];if(Y<128)re[Be++]=String.fromCharCode(Y);else if(Y>191&&Y<224){const he=q[oe++];re[Be++]=String.fromCharCode((31&Y)<<6|63&he)}else if(Y>239&&Y<365){const St=((7&Y)<<18|(63&q[oe++])<<12|(63&q[oe++])<<6|63&q[oe++])-65536;re[Be++]=String.fromCharCode(55296+(St>>10)),re[Be++]=String.fromCharCode(56320+(1023&St))}else{const he=q[oe++],ze=q[oe++];re[Be++]=String.fromCharCode((15&Y)<<12|(63&he)<<6|63&ze)}}return re.join("")}(this.decodeStringToByteArray(q,re))},decodeStringToByteArray(q,re){this.init_();const oe=re?this.charToByteMapWebSafe_:this.charToByteMap_,Be=[];for(let Y=0;Y<q.length;){const he=oe[q.charAt(Y++)],yt=Y<q.length?oe[q.charAt(Y)]:0;++Y;const Lt=Y<q.length?oe[q.charAt(Y)]:64;++Y;const Ut=Y<q.length?oe[q.charAt(Y)]:64;if(++Y,null==he||null==yt||null==Lt||null==Ut)throw Error();Be.push(he<<2|yt>>4),64!==Lt&&(Be.push(yt<<4&240|Lt>>2),64!==Ut&&Be.push(Lt<<6&192|Ut))}return Be},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}},de=function(q){return function(q){const re=fe(q);return le.encodeByteArray(re,!0)}(q).replace(/\./g,"")},ve=function(q){try{return le.decodeString(q,!0)}catch(re){console.error("base64Decode failed: ",re)}return null};function Z(q,re){if(!(re instanceof Object))return re;switch(re.constructor){case Date:return new Date(re.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return re}for(const oe in re)!re.hasOwnProperty(oe)||!pe(oe)||(q[oe]=Z(q[oe],re[oe]));return q}function pe(q){return"__proto__"!==q}class et{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((re,oe)=>{this.resolve=re,this.reject=oe})}wrapCallback(re){return(oe,Be)=>{oe?this.reject(oe):this.resolve(Be),"function"==typeof re&&(this.promise.catch(()=>{}),1===re.length?re(oe):re(oe,Be))}}}function Ve(q,re){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Be=re||"demo-project",Y=q.iat||0,he=q.sub||q.user_id;if(!he)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ze=Object.assign({iss:`https://securetoken.google.com/${Be}`,aud:Be,iat:Y,exp:Y+3600,auth_time:Y,sub:he,user_id:he,firebase:{sign_in_provider:"custom",identities:{}}},q);return[de(JSON.stringify({alg:"none",type:"JWT"})),de(JSON.stringify(ze)),""].join(".")}function He(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Je(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(He())}function Ce(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(q){return!1}}function Pe(){return"object"==typeof self&&self.self===self}function ot(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function ct(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ue(){return He().indexOf("Electron/")>=0}function Ne(){const q=He();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function ke(){return He().indexOf("MSAppHost/")>=0}function tt(){return!Ce()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ee(){return"object"==typeof indexedDB}function Re(){return new Promise((q,re)=>{try{let oe=!0;const Be="validate-browser-context-for-indexeddb-analytics-module",Y=self.indexedDB.open(Be);Y.onsuccess=()=>{Y.result.close(),oe||self.indexedDB.deleteDatabase(Be),q(!0)},Y.onupgradeneeded=()=>{oe=!1},Y.onerror=()=>{var he;re((null===(he=Y.error)||void 0===he?void 0:he.message)||"")}}catch(oe){re(oe)}})}function ie(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Se extends Error{constructor(re,oe,Be){super(oe),this.code=re,this.customData=Be,this.name="FirebaseError",Object.setPrototypeOf(this,Se.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ie.prototype.create)}}class Ie{constructor(re,oe,Be){this.service=re,this.serviceName=oe,this.errors=Be}create(re,...oe){const Be=oe[0]||{},Y=`${this.service}/${re}`,he=this.errors[re],ze=he?function Ye(q,re){return q.replace(bt,(oe,Be)=>{const Y=re[Be];return null!=Y?String(Y):`<${Be}?>`})}(he,Be):"Error";return new Se(Y,`${this.serviceName}: ${ze} (${Y}).`,Be)}}const bt=/\{\$([^}]+)}/g;function ar(q,re){return Object.prototype.hasOwnProperty.call(q,re)}function Yt(q){for(const re in q)if(Object.prototype.hasOwnProperty.call(q,re))return!1;return!0}function Qn(q,re){if(q===re)return!0;const oe=Object.keys(q),Be=Object.keys(re);for(const Y of oe){if(!Be.includes(Y))return!1;const he=q[Y],ze=re[Y];if(wr(he)&&wr(ze)){if(!Qn(he,ze))return!1}else if(he!==ze)return!1}for(const Y of Be)if(!oe.includes(Y))return!1;return!0}function wr(q){return null!==q&&"object"==typeof q}function pr(q){const re=[];for(const[oe,Be]of Object.entries(q))Array.isArray(Be)?Be.forEach(Y=>{re.push(encodeURIComponent(oe)+"="+encodeURIComponent(Y))}):re.push(encodeURIComponent(oe)+"="+encodeURIComponent(Be));return re.length?"&"+re.join("&"):""}function _i(q){const re={};return q.replace(/^\?/,"").split("&").forEach(Be=>{if(Be){const[Y,he]=Be.split("=");re[decodeURIComponent(Y)]=decodeURIComponent(he)}}),re}function us(q){const re=q.indexOf("?");if(!re)return"";const oe=q.indexOf("#",re);return q.substring(re,oe>0?oe:void 0)}function Mi(q,re){const oe=new Rt(q,re);return oe.subscribe.bind(oe)}class Rt{constructor(re,oe){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=oe,this.task.then(()=>{re(this)}).catch(Be=>{this.error(Be)})}next(re){this.forEachObserver(oe=>{oe.next(re)})}error(re){this.forEachObserver(oe=>{oe.error(re)}),this.close(re)}complete(){this.forEachObserver(re=>{re.complete()}),this.close()}subscribe(re,oe,Be){let Y;if(void 0===re&&void 0===oe&&void 0===Be)throw new Error("Missing Observer.");Y=function Jn(q,re){if("object"!=typeof q||null===q)return!1;for(const oe of re)if(oe in q&&"function"==typeof q[oe])return!0;return!1}(re,["next","error","complete"])?re:{next:re,error:oe,complete:Be},void 0===Y.next&&(Y.next=Kn),void 0===Y.error&&(Y.error=Kn),void 0===Y.complete&&(Y.complete=Kn);const he=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Y.error(this.finalError):Y.complete()}catch(ze){}}),this.observers.push(Y),he}unsubscribeOne(re){void 0===this.observers||void 0===this.observers[re]||(delete this.observers[re],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(re){if(!this.finalized)for(let oe=0;oe<this.observers.length;oe++)this.sendOne(oe,re)}sendOne(re,oe){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[re])try{oe(this.observers[re])}catch(Be){"undefined"!=typeof console&&console.error&&console.error(Be)}})}close(re){this.finalized||(this.finalized=!0,void 0!==re&&(this.finalError=re),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Kn(){}function an(q,re=1e3,oe=2){const Be=re*Math.pow(oe,q),Y=Math.round(.5*Be*(Math.random()-.5)*2);return Math.min(144e5,Be+Y)}function Vn(q){return q&&q._delegate?q._delegate:q}},9857:(st,we,k)=>{k.d(we,{e:()=>fe});class D{constructor(le,ce){this.highscore=le,this.score=ce}}var H=k(5e3);const $="GAME_RLGL_";let fe=(()=>{class ae{constructor(){this.userName="",this.score=0,this.highScore=0}isAuth(){let de=localStorage.getItem($+"currentUser");return!!de&&(this.userName=de,!!this.getUserScores(de))}loginRegisterUser(ce){return this.getUserScores(ce)||this.createUserScores(ce),new Promise(ve=>{this.userName=ce,localStorage.setItem($+"currentUser",ce),ve("")})}getUserScores(ce){let de=localStorage.getItem($+ce);return de&&this.setScores(JSON.parse(de)),de}setScores(ce){this.score=ce.score,this.highScore=ce.highscore}createUserScores(ce){const de=new D(0,0);localStorage.setItem($+ce,JSON.stringify(Object.assign({},de))),this.getUserScores(ce)}logout(){return new Promise(ce=>{localStorage.removeItem($+"currentUser"),ce("")})}saveScores(ce){localStorage.setItem("GAME_RLGL_"+this.userName,JSON.stringify(ce))}}return ae.\u0275fac=function(ce){return new(ce||ae)},ae.\u0275prov=H.Yz7({token:ae,factory:ae.\u0275fac,providedIn:"root"}),ae})()},5079:(st,we,k)=>{var D=k(9808),H=k(5e3);class $ extends D.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class fe extends ${static makeCurrent(){(0,D.HT)(new fe)}onAndCancel(e,t,s){return e.addEventListener(t,s,!1),()=>{e.removeEventListener(t,s,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function le(){return ae=ae||document.querySelector("base"),ae?ae.getAttribute("href"):null}();return null==t?null:function de(n){ce=ce||document.createElement("a"),ce.setAttribute("href",n);const e=ce.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ae=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return(0,D.Mx)(document.cookie,e)}}let ce,ae=null;const ve=new H.OlP("TRANSITION_ID"),Z=[{provide:H.ip1,useFactory:function J(n,e,t){return()=>{t.get(H.CZH).donePromise.then(()=>{const s=(0,D.q)(),a=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<a.length;l++)s.remove(a[l])})}},deps:[ve,D.K0,H.zs3],multi:!0}];class pe{static init(){(0,H.VLi)(new pe)}addToWindow(e){H.dqk.getAngularTestability=(s,a=!0)=>{const l=e.findTestabilityInTree(s,a);if(null==l)throw new Error("Could not find testability for element.");return l},H.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),H.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),H.dqk.frameworkStabilizers||(H.dqk.frameworkStabilizers=[]),H.dqk.frameworkStabilizers.push(s=>{const a=H.dqk.getAllAngularTestabilities();let l=a.length,p=!1;const E=function(S){p=p||S,l--,0==l&&s(p)};a.forEach(function(S){S.whenStable(E)})})}findTestabilityInTree(e,t,s){if(null==t)return null;const a=e.getTestability(t);return null!=a?a:s?(0,D.q)().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let et=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=H.Yz7({token:n,factory:n.\u0275fac}),n})();const Ve=new H.OlP("EventManagerPlugins");let He=(()=>{class n{constructor(t,s){this._zone=s,this._eventNameToPlugin=new Map,t.forEach(a=>a.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,s,a){return this._findPluginFor(s).addEventListener(t,s,a)}addGlobalEventListener(t,s,a){return this._findPluginFor(s).addGlobalEventListener(t,s,a)}getZone(){return this._zone}_findPluginFor(t){const s=this._eventNameToPlugin.get(t);if(s)return s;const a=this._plugins;for(let l=0;l<a.length;l++){const p=a[l];if(p.supports(t))return this._eventNameToPlugin.set(t,p),p}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(H.LFG(Ve),H.LFG(H.R0b))},n.\u0275prov=H.Yz7({token:n,factory:n.\u0275fac}),n})();class Je{constructor(e){this._doc=e}addGlobalEventListener(e,t,s){const a=(0,D.q)().getGlobalEventTarget(this._doc,e);if(!a)throw new Error(`Unsupported event target ${a} for event ${t}`);return this.addEventListener(a,t,s)}}let Ce=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const s=new Set;t.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),s.add(a))}),this.onStylesAdded(s)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=H.Yz7({token:n,factory:n.\u0275fac}),n})(),Pe=(()=>{class n extends Ce{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,s,a){t.forEach(l=>{const p=this._doc.createElement("style");p.textContent=l,a.push(s.appendChild(p))})}addHost(t){const s=[];this._addStylesToHost(this._stylesSet,t,s),this._hostNodes.set(t,s)}removeHost(t){const s=this._hostNodes.get(t);s&&s.forEach(ot),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((s,a)=>{this._addStylesToHost(t,a,s)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ot))}}return n.\u0275fac=function(t){return new(t||n)(H.LFG(D.K0))},n.\u0275prov=H.Yz7({token:n,factory:n.\u0275fac}),n})();function ot(n){(0,D.q)().remove(n)}const ct={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ue=/%COMP%/g;function ie(n,e,t){for(let s=0;s<e.length;s++){let a=e[s];Array.isArray(a)?ie(n,a,t):(a=a.replace(Ue,n),t.push(a))}return t}function ge(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Se=(()=>{class n{constructor(t,s,a){this.eventManager=t,this.sharedStylesHost=s,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new Ie(t)}createRenderer(t,s){if(!t||!s)return this.defaultRenderer;switch(s.encapsulation){case H.ifc.Emulated:{let a=this.rendererByCompId.get(s.id);return a||(a=new hn(this.eventManager,this.sharedStylesHost,s,this.appId),this.rendererByCompId.set(s.id,a)),a.applyToHost(t),a}case 1:case H.ifc.ShadowDom:return new nn(this.eventManager,this.sharedStylesHost,t,s);default:if(!this.rendererByCompId.has(s.id)){const a=ie(s.id,s.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(s.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(H.LFG(He),H.LFG(Pe),H.LFG(H.AFp))},n.\u0275prov=H.Yz7({token:n,factory:n.\u0275fac}),n})();class Ie{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ct[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,s){e&&e.insertBefore(t,s)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let s="string"==typeof e?document.querySelector(e):e;if(!s)throw new Error(`The selector "${e}" did not match any elements`);return t||(s.textContent=""),s}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,s,a){if(a){t=a+":"+t;const l=ct[a];l?e.setAttributeNS(l,t,s):e.setAttribute(t,s)}else e.setAttribute(t,s)}removeAttribute(e,t,s){if(s){const a=ct[s];a?e.removeAttributeNS(a,t):e.removeAttribute(`${s}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,s,a){a&(H.JOm.DashCase|H.JOm.Important)?e.style.setProperty(t,s,a&H.JOm.Important?"important":""):e.style[t]=s}removeStyle(e,t,s){s&H.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,s){e[t]=s}setValue(e,t){e.nodeValue=t}listen(e,t,s){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ge(s)):this.eventManager.addEventListener(e,t,ge(s))}}class hn extends Ie{constructor(e,t,s,a){super(e),this.component=s;const l=ie(a+"-"+s.id,s.styles,[]);t.addStyles(l),this.contentAttr=function ee(n){return"_ngcontent-%COMP%".replace(Ue,n)}(a+"-"+s.id),this.hostAttr=function Re(n){return"_nghost-%COMP%".replace(Ue,n)}(a+"-"+s.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const s=super.createElement(e,t);return super.setAttribute(s,this.contentAttr,""),s}}class nn extends Ie{constructor(e,t,s,a){super(e),this.sharedStylesHost=t,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=ie(a.id,a.styles,[]);for(let p=0;p<l.length;p++){const E=document.createElement("style");E.textContent=l[p],this.shadowRoot.appendChild(E)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,s){return super.insertBefore(this.nodeOrShadowRoot(e),t,s)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Qe=(()=>{class n extends Je{constructor(t){super(t)}supports(t){return!0}addEventListener(t,s,a){return t.addEventListener(s,a,!1),()=>this.removeEventListener(t,s,a)}removeEventListener(t,s,a){return t.removeEventListener(s,a)}}return n.\u0275fac=function(t){return new(t||n)(H.LFG(D.K0))},n.\u0275prov=H.Yz7({token:n,factory:n.\u0275fac}),n})();const rn=["alt","control","meta","shift"],An={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ar={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let zt=(()=>{class n extends Je{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,s,a){const l=n.parseEventName(s),p=n.eventCallback(l.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,D.q)().onAndCancel(t,l.domEventName,p))}static parseEventName(t){const s=t.toLowerCase().split("."),a=s.shift();if(0===s.length||"keydown"!==a&&"keyup"!==a)return null;const l=n._normalizeKey(s.pop());let p="";if(rn.forEach(S=>{const P=s.indexOf(S);P>-1&&(s.splice(P,1),p+=S+".")}),p+=l,0!=s.length||0===l.length)return null;const E={};return E.domEventName=a,E.fullKey=p,E}static getEventFullKey(t){let s="",a=function Yt(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&pn.hasOwnProperty(e)&&(e=pn[e]))}return An[e]||e}(t);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),rn.forEach(l=>{l!=a&&ar[l](t)&&(s+=l+".")}),s+=a,s}static eventCallback(t,s,a){return l=>{n.getEventFullKey(l)===t&&a.runGuarded(()=>s(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(H.LFG(D.K0))},n.\u0275prov=H.Yz7({token:n,factory:n.\u0275fac}),n})();const _i=(0,H.eFA)(H._c5,"browser",[{provide:H.Lbi,useValue:D.bD},{provide:H.g9A,useValue:function fr(){fe.makeCurrent(),pe.init()},multi:!0},{provide:D.K0,useFactory:function wr(){return(0,H.RDi)(document),document},deps:[]}]),us=[{provide:H.zSh,useValue:"root"},{provide:H.qLn,useFactory:function Qn(){return new H.qLn},deps:[]},{provide:Ve,useClass:Qe,multi:!0,deps:[D.K0,H.R0b,H.Lbi]},{provide:Ve,useClass:zt,multi:!0,deps:[D.K0]},{provide:Se,useClass:Se,deps:[He,Pe,H.AFp]},{provide:H.FYo,useExisting:Se},{provide:Ce,useExisting:Pe},{provide:Pe,useClass:Pe,deps:[D.K0]},{provide:H.dDg,useClass:H.dDg,deps:[H.R0b]},{provide:He,useClass:He,deps:[Ve,H.R0b]},{provide:D.JF,useClass:et,deps:[]}];let li=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:H.AFp,useValue:t.appId},{provide:ve,useExisting:H.AFp},Z]}}}return n.\u0275fac=function(t){return new(t||n)(H.LFG(n,12))},n.\u0275mod=H.oAB({type:n}),n.\u0275inj=H.cJS({providers:us,imports:[D.ez,H.hGG]}),n})();"undefined"!=typeof window&&window;const Wi_firebase={apiKey:"AIzaSyB0l7xgqFZ6PCNKo4wC74b0JlKo8-jJblk",authDomain:"game-rlgl.firebaseapp.com",projectId:"game-rlgl",storageBucket:"game-rlgl.appspot.com",messagingSenderId:"495643108374",appId:"1:495643108374:web:8fcb5701cfc6e6e5220137"};var Xn=k(2011),qt=k(4986),Nn=k(8306),ur=k(8996),qn=k(9646),sn=k(5813),Ar=k(8675),$o=k(4482),ls=k(5403);function Ri(){return(0,$o.e)((n,e)=>{let t,s=!1;n.subscribe((0,ls.x)(e,a=>{const l=t;t=a,s&&e.next([l,a]),s=!0}))})}var Pn=k(4004),cr=k(5026),Ki=k(4671);function at(n,e){return n===e}var dt,Et=k(9300),Hr=(k(9916),k(3942)),Ae=k(5861),Rn=k(9681),ei=k(4859),un=k(1877),Pt=k(2090),er="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ot={},Oi=Oi||{},Nt=er||self;function ti(){}function tr(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function lr(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var dr="closure_uid_"+(1e9*Math.random()>>>0),Tn=0;function Ho(n,e,t){return n.call.apply(n.bind,arguments)}function Ni(n,e,t){if(!n)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,s),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function _n(n,e,t){return(_n=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ho:Ni).apply(null,arguments)}function ri(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),n.apply(this,s)}}function jn(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(s,a,l){for(var p=Array(arguments.length-2),E=2;E<arguments.length;E++)p[E-2]=arguments[E];return e.prototype[a].apply(s,p)}}function Pi(){this.s=this.s,this.o=this.o}var wi={};Pi.prototype.s=!1,Pi.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function ni(n){return Object.prototype.hasOwnProperty.call(n,dr)&&n[dr]||(n[dr]=++Tn)}(this);delete wi[n]}},Pi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const $s=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},ma=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const s=n.length,a="string"==typeof n?n.split(""):n;for(let l=0;l<s;l++)l in a&&e.call(t,a[l],l,n)};function nr(n){return Array.prototype.concat.apply([],arguments)}function ki(n){const e=n.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=n[s];return t}return[]}function mo(n){return/^[\s\xa0]*$/.test(n)}var mr,vu=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function xn(n,e){return-1!=n.indexOf(e)}function Hs(n,e){return n<e?-1:n>e?1:0}e:{var yo=Nt.navigator;if(yo){var Fi=yo.userAgent;if(Fi){mr=Fi;break e}}mr=""}function Ha(n,e,t){for(const s in n)e.call(t,n[s],s,n)}function vo(n){const e={};for(const t in n)e[t]=n[t];return e}var _u="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Eu(n,e){let t,s;for(let a=1;a<arguments.length;a++){for(t in s=arguments[a],s)n[t]=s[t];for(let l=0;l<_u.length;l++)t=_u[l],Object.prototype.hasOwnProperty.call(s,t)&&(n[t]=s[t])}}function Go(n){return Go[" "](n),n}Go[" "]=ti;var ii,n,zo=xn(mr,"Opera"),Li=xn(mr,"Trident")||xn(mr,"MSIE"),Ts=xn(mr,"Edge"),Wo=Ts||Li,Ko=xn(mr,"Gecko")&&!(xn(mr.toLowerCase(),"webkit")&&!xn(mr,"Edge"))&&!(xn(mr,"Trident")||xn(mr,"MSIE"))&&!xn(mr,"Edge"),xr=xn(mr.toLowerCase(),"webkit")&&!xn(mr,"Edge");function ds(){var n=Nt.document;return n?n.documentMode:void 0}e:{var hs="",Gs=(n=mr,Ko?/rv:([^\);]+)(\)|;)/.exec(n):Ts?/Edge\/([\d\.]+)/.exec(n):Li?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):xr?/WebKit\/(\S+)/.exec(n):zo?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Gs&&(hs=Gs?Gs[1]:""),Li){var Ui=ds();if(null!=Ui&&Ui>parseFloat(hs)){ii=String(Ui);break e}}ii=hs}var Ga={};var za=Nt.document&&Li&&(ds()||parseInt(ii,10))||void 0,Gr=function(){if(!Nt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Nt.addEventListener("test",ti,e),Nt.removeEventListener("test",ti,e)}catch(t){}return n}();function kn(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function rr(n,e){if(kn.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,s=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Ko){e:{try{Go(e.nodeName);var a=!0;break e}catch(l){}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:ya[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&rr.Z.h.call(this)}}kn.prototype.h=function(){this.defaultPrevented=!0},jn(rr,kn);var ya={2:"touch",3:"pen",4:"mouse"};rr.prototype.h=function(){rr.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Vi="closure_listenable_"+(1e6*Math.random()|0),_o=0;function zs(n,e,t,s,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ia=a,this.key=++_o,this.ca=this.fa=!1}function Cs(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function zr(n){this.src=n,this.g={},this.h=0}function va(n,e){var t=e.type;if(t in n.g){var l,s=n.g[t],a=$s(s,e);(l=0<=a)&&Array.prototype.splice.call(s,a,1),l&&(Cs(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function In(n,e,t,s){for(var a=0;a<n.length;++a){var l=n[a];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==s)return a}return-1}zr.prototype.add=function(n,e,t,s,a){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var p=In(n,e,s,a);return-1<p?(e=n[p],t||(e.fa=!1)):((e=new zs(e,this.src,l,!!s,a)).fa=t,n.push(e)),e};var x="closure_lm_"+(1e6*Math.random()|0),L={};function A(n,e,t,s,a){if(s&&s.once)return Te(n,e,t,s,a);if(Array.isArray(e)){for(var l=0;l<e.length;l++)A(n,e[l],t,s,a);return null}return t=Fn(t),n&&n[Vi]?n.N(e,t,lr(s)?!!s.capture:!!s,a):j(n,e,t,!1,s,a)}function j(n,e,t,s,a,l){if(!e)throw Error("Invalid event type");var p=lr(a)?!!a.capture:!!a,E=$t(n);if(E||(n[x]=E=new zr(n)),(t=E.add(e,t,s,p,l)).proxy)return t;if(s=function te(){var e=gn;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=s,s.src=n,s.listener=t,n.addEventListener)Gr||(a=p),void 0===a&&(a=!1),n.addEventListener(e.toString(),s,a);else if(n.attachEvent)n.attachEvent(Vt(e.toString()),s);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(s)}return t}function Te(n,e,t,s,a){if(Array.isArray(e)){for(var l=0;l<e.length;l++)Te(n,e[l],t,s,a);return null}return t=Fn(t),n&&n[Vi]?n.O(e,t,lr(s)?!!s.capture:!!s,a):j(n,e,t,!0,s,a)}function je(n,e,t,s,a){if(Array.isArray(e))for(var l=0;l<e.length;l++)je(n,e[l],t,s,a);else s=lr(s)?!!s.capture:!!s,t=Fn(t),n&&n[Vi]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=In(l=n.g[e],t,s,a))&&(Cs(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=$t(n))&&(e=n.g[e.toString()],n=-1,e&&(n=In(e,t,s,a)),(t=-1<n?e[n]:null)&&_t(t))}function _t(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Vi])va(e.i,n);else{var t=n.type,s=n.proxy;e.removeEventListener?e.removeEventListener(t,s,n.capture):e.detachEvent?e.detachEvent(Vt(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=$t(e))?(va(t,n),0==t.h&&(t.src=null,e[x]=null)):Cs(n)}}}function Vt(n){return n in L?L[n]:L[n]="on"+n}function gn(n,e){if(n.ca)n=!0;else{e=new rr(e,this);var t=n.listener,s=n.ia||n.src;n.fa&&_t(n),n=t.call(s,e)}return n}function $t(n){return(n=n[x])instanceof zr?n:null}var Qt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fn(n){return"function"==typeof n?n:(n[Qt]||(n[Qt]=function(e){return n.handleEvent(e)}),n[Qt])}function Bt(){Pi.call(this),this.i=new zr(this),this.P=this,this.I=null}function Kt(n,e){var t,s=n.I;if(s)for(t=[];s;s=s.I)t.push(s);if(n=n.P,s=e.type||e,"string"==typeof e)e=new kn(e,n);else if(e instanceof kn)e.target=e.target||n;else{var a=e;Eu(e=new kn(s,n),a)}if(a=!0,t)for(var l=t.length-1;0<=l;l--){var p=e.g=t[l];a=br(p,s,!0,e)&&a}if(a=br(p=e.g=n,s,!0,e)&&a,a=br(p,s,!1,e)&&a,t)for(l=0;l<t.length;l++)a=br(p=e.g=t[l],s,!1,e)&&a}function br(n,e,t,s){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,l=0;l<e.length;++l){var p=e[l];if(p&&!p.ca&&p.capture==t){var E=p.listener,S=p.ia||p.src;p.fa&&va(n.i,p),a=!1!==E.call(S,s)&&a}}return a&&!s.defaultPrevented}jn(Bt,Pi),Bt.prototype[Vi]=!0,Bt.prototype.removeEventListener=function(n,e,t,s){je(this,n,e,t,s)},Bt.prototype.M=function(){if(Bt.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],s=0;s<t.length;s++)Cs(t[s]);delete n.g[e],n.h--}}this.I=null},Bt.prototype.N=function(n,e,t,s){return this.i.add(String(n),e,!1,t,s)},Bt.prototype.O=function(n,e,t,s){return this.i.add(String(n),e,!0,t,s)};var Wr=Nt.JSON.stringify;function At(){var n=en;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var _a,Eo=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Ws,n=>n.reset());class Ws{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function qo(n){Nt.setTimeout(()=>{throw n},0)}function Ss(n,e){_a||function Wa(){var n=Nt.Promise.resolve(void 0);_a=function(){n.then(Ka)}}(),$e||(_a(),$e=!0),en.add(n,e)}var $e=!1,en=new class qi{constructor(){this.h=this.g=null}add(e,t){const s=Eo.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function Ka(){for(var n;n=At();){try{n.h.call(n.g)}catch(t){qo(t)}var e=Eo;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}$e=!1}function On(n,e){Bt.call(this),this.h=n||1,this.g=e||Nt,this.j=_n(this.kb,this),this.l=Date.now()}function Zo(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Ii(n,e,t){if("function"==typeof n)t&&(n=_n(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=_n(n.handleEvent,n)}return 2147483647<Number(e)?-1:Nt.setTimeout(n,e||0)}function Bi(n){n.g=Ii(()=>{n.g=null,n.i&&(n.i=!1,Bi(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}jn(On,Bt),(dt=On.prototype).da=!1,dt.S=null,dt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Kt(this,"tick"),this.da&&(Zo(this),this.start()))}},dt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},dt.M=function(){On.Z.M.call(this),Zo(this),delete this.g};class Ea extends Pi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Bi(this)}M(){super.M(),this.g&&(Nt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zi(n){Pi.call(this),this.h=n,this.g={}}jn(Zi,Pi);var Nc=[];function qa(n,e,t,s){Array.isArray(t)||(t&&(Nc[0]=t.toString()),t=Nc);for(var a=0;a<t.length;a++){var l=A(e,t[a],s||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function Yo(n){Ha(n.g,function(e,t){this.g.hasOwnProperty(t)&&_t(e)},n),n.g={}}function wo(){this.g=!0}function ps(n,e,t,s){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Yi(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var s=t[n];if(!(2>s.length)){var a=s[1];if(Array.isArray(a)&&!(1>a.length)){var l=a[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var p=1;p<a.length;p++)a[p]=""}}}return Wr(t)}catch(E){return e}}(n,t)+(s?" "+s:"")})}Zi.prototype.M=function(){Zi.Z.M.call(this),Yo(this)},Zi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},wo.prototype.Aa=function(){this.g=!1},wo.prototype.info=function(){};var gs={},wa=null;function Qo(){return wa=wa||new Bt}function Ia(n){kn.call(this,gs.Ma,n)}function xs(n){const e=Qo();Kt(e,new Ia(e,n))}function Jo(n,e){kn.call(this,gs.STAT_EVENT,n),this.stat=e}function Cr(n){const e=Qo();Kt(e,new Jo(e,n))}function Da(n,e){kn.call(this,gs.Na,n),this.size=e}function Xo(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Nt.setTimeout(function(){n()},e)}gs.Ma="serverreachability",jn(Ia,kn),gs.STAT_EVENT="statevent",jn(Jo,kn),gs.Na="timingevent",jn(Da,kn);var qs={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Zs={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ys(){}function Qs(){}Ys.prototype.h=null;var Iu,Io={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Do(){kn.call(this,"d")}function ea(){kn.call(this,"c")}function ir(){}function ji(n,e,t,s){this.l=n,this.j=e,this.m=t,this.X=s||1,this.V=new Zi(this),this.P=Ml,this.W=new On(n=Wo?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new hr}function hr(){this.i=null,this.g="",this.h=!1}jn(Do,kn),jn(ea,kn),jn(ir,Ys),ir.prototype.g=function(){return new XMLHttpRequest},ir.prototype.i=function(){return{}},Iu=new ir;var Ml=45e3,ta={},Za={};function Pc(n,e,t){n.K=1,n.v=Di($n(e)),n.s=t,n.U=!0,Ya(n,null)}function Ya(n,e){n.F=Date.now(),pi(n),n.A=$n(n.v);var t=n.A,s=n.X;Array.isArray(s)||(s=[String(s)]),_(t.h,"t",s),n.C=0,t=n.l.H,n.h=new hr,n.g=xu(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Ea(_n(n.Ia,n,n.g),n.O)),qa(n.V,n.g,"readystatechange",n.gb),e=n.H?vo(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),xs(1),function Tr(n,e,t,s,a,l){n.info(function(){if(n.g)if(l)for(var p="",E=l.split("&"),S=0;S<E.length;S++){var P=E[S].split("=");if(1<P.length){var G=P[0];P=P[1];var Q=G.split("_");p=2<=Q.length&&"type"==Q[1]?p+(G+"=")+P+"&":p+(G+"=redacted&")}}else p=null;else p=l;return"XMLHTTP REQ ("+s+") [attempt "+a+"]: "+e+"\n"+t+"\n"+p})}(n.j,n.u,n.A,n.m,n.X,n.s)}function kc(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Qa(n,e,t){let a,s=!0;for(;!n.I&&n.C<t.length;){if(a=bo(n,t),a==Za){4==e&&(n.o=4,Cr(14),s=!1),ps(n.j,n.m,null,"[Incomplete Response]");break}if(a==ta){n.o=4,Cr(15),ps(n.j,n.m,t,"[Invalid Chunk]"),s=!1;break}ps(n.j,n.m,a,null),Ms(n,a)}kc(n)&&a!=Za&&a!=ta&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Cr(16),s=!1),n.i=n.i&&s,s?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),oa(e),e.L=!0,Cr(11))):(ps(n.j,n.m,t,"[Invalid Chunked Response]"),oi(n),na(n))}function bo(n,e){var t=n.C,s=e.indexOf("\n",t);return-1==s?Za:(t=Number(e.substring(t,s)),isNaN(t)?ta:(s+=1)+t>e.length?Za:(e=e.substr(s,t),n.C=s+t,e))}function pi(n){n.Y=Date.now()+n.P,To(n,n.P)}function To(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Xo(_n(n.eb,n),e)}function fn(n){n.B&&(Nt.clearTimeout(n.B),n.B=null)}function na(n){0==n.l.G||n.I||Oo(n.l,n)}function oi(n){fn(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Zo(n.W),Yo(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Ms(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||lt(t.i,n)))if(t.I=n.N,!n.J&&lt(t.i,n)&&3==t.G){try{var s=t.Ca.g.parse(e)}catch(P){s=null}if(Array.isArray(s)&&3==s.length){var a=s;if(0==a[0])e:if(t.u)t.ta=a[1],0<t.ta-t.U&&37500>a[2]&&t.N&&0==t.A&&!t.v&&(t.v=Xo(_n(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Au(t),Mo(t)}ru(t),Cr(18)}if(1>=xe(t.i)&&t.ka){try{t.ka()}catch(P){}t.ka=void 0}}else No(t,11)}else if((n.J||t.g==n)&&Au(t),!mo(e))for(a=t.Ca.g.parse(e),e=0;e<a.length;e++){let P=a[e];if(t.U=P[0],P=P[1],2==t.G)if("c"==P[0]){t.J=P[1],t.la=P[2];const G=P[3];null!=G&&(t.ma=G,t.h.info("VER="+t.ma));const Q=P[4];null!=Q&&(t.za=Q,t.h.info("SVER="+t.za));const Ee=P[5];null!=Ee&&"number"==typeof Ee&&0<Ee&&(t.K=s=1.5*Ee,t.h.info("backChannelRequestTimeoutMs_="+s)),s=t;const Oe=n.g;if(Oe){const We=Oe.g?Oe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(We){var l=s.i;!l.g&&(xn(We,"spdy")||xn(We,"quic")||xn(We,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(Jt(l,l.h),l.h=null))}if(s.D){const ht=Oe.g?Oe.g.getResponseHeader("X-HTTP-Session-Id"):null;ht&&(s.sa=ht,Hn(s.F,s.D,ht))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var p=n;if((s=t).oa=to(s,s.H?s.la:null,s.W),p.J){vt(s.i,p);var E=p,S=s.K;S&&E.setTimeout(S),E.B&&(fn(E),pi(E)),s.g=p}else ns(s);0<t.l.length&&eo(t)}else"stop"!=P[0]&&"close"!=P[0]||No(t,7);else 3==t.G&&("stop"==P[0]||"close"==P[0]?"stop"==P[0]?No(t,7):Ca(t):"noop"!=P[0]&&t.j&&t.j.wa(P),t.A=0)}xs(4)}catch(P){}}function $i(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(tr(n)||"string"==typeof n)ma(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(tr(n)||"string"==typeof n){t=[];for(var s=n.length,a=0;a<s;a++)t.push(a)}else for(a in t=[],s=0,n)t[s++]=a;s=function ba(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(tr(n)){for(var e=[],t=n.length,s=0;s<t;s++)e.push(n[s]);return e}for(s in e=[],t=0,n)e[t++]=n[s];return e}(n),a=s.length;for(var l=0;l<a;l++)e.call(void 0,s[l],t&&t[l],n)}}function ms(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var s=0;s<t;s+=2)this.set(arguments[s],arguments[s+1])}else if(n)if(n instanceof ms)for(t=n.T(),s=0;s<t.length;s++)this.set(t[s],n.get(t[s]));else for(s in n)this.set(s,n[s])}function ys(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var s=n.g[e];Rs(n.h,s)&&(n.g[t++]=s),e++}n.g.length=t}if(n.i!=n.g.length){var a={};for(t=e=0;e<n.g.length;)Rs(a,s=n.g[e])||(n.g[t++]=s,a[s]=1),e++;n.g.length=t}}function Rs(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(dt=ji.prototype).setTimeout=function(n){this.P=n},dt.gb=function(n){n=n.target;const e=this.L;e&&3==Ps(n)?e.l():this.Ia(n)},dt.Ia=function(n){try{if(n==this.g)e:{const G=Ps(this.g);var e=this.g.Da();const Q=this.g.ba();if(!(3>G)&&(3!=G||Wo||this.g&&(this.h.h||this.g.ga()||ra(this.g)))){this.I||4!=G||7==e||xs(8==e||0>=Q?3:2),fn(this);var t=this.g.ba();this.N=t;t:if(kc(this)){var s=ra(this.g);n="";var a=s.length,l=4==Ps(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){oi(this),na(this);var p="";break t}this.h.i=new Nt.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(s[e],{stream:l&&e==a-1});s.splice(0,a),this.h.g+=n,this.C=0,p=this.h.g}else p=this.g.ga();if(this.i=200==t,function As(n,e,t,s,a,l,p){n.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+l+" "+p})}(this.j,this.u,this.A,this.m,this.X,G,t),this.i){if(this.$&&!this.J){t:{if(this.g){var E,S=this.g;if((E=S.g?S.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!mo(E)){var P=E;break t}}P=null}if(!(t=P)){this.i=!1,this.o=3,Cr(12),oi(this),na(this);break e}ps(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ms(this,t)}this.U?(Qa(this,G,p),Wo&&this.i&&3==G&&(qa(this.V,this.W,"tick",this.fb),this.W.start())):(ps(this.j,this.m,p,null),Ms(this,p)),4==G&&oi(this),this.i&&!this.I&&(4==G?Oo(this.l,this):(this.i=!1,pi(this)))}else 400==t&&0<p.indexOf("Unknown SID")?(this.o=3,Cr(12)):(this.o=0,Cr(13)),oi(this),na(this)}}}catch(G){}},dt.fb=function(){if(this.g){var n=Ps(this.g),e=this.g.ga();this.C<e.length&&(fn(this),Qa(this,n,e),this.i&&4!=n&&pi(this))}},dt.cancel=function(){this.I=!0,oi(this)},dt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Ks(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(xs(3),Cr(17)),oi(this),this.o=2,na(this)):To(this,this.Y-n)},(dt=ms.prototype).R=function(){ys(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},dt.T=function(){return ys(this),this.g.concat()},dt.get=function(n,e){return Rs(this.h,n)?this.h[n]:e},dt.set=function(n,e){Rs(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},dt.forEach=function(n,e){for(var t=this.T(),s=0;s<t.length;s++){var a=t[s],l=this.get(a);n.call(e,l,a,this)}};var Gu=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Co(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Co){this.g=void 0!==e?e:n.g,So(this,n.j),this.s=n.s,Qi(this,n.i),ai(this,n.m),this.l=n.l,e=n.h;var t=new Ji;t.i=e.i,e.g&&(t.g=new ms(e.g),t.h=e.h),Ja(this,t),this.o=n.o}else n&&(t=String(n).match(Gu))?(this.g=!!e,So(this,t[1]||"",!0),this.s=Os(t[2]||""),Qi(this,t[3]||"",!0),ai(this,t[4]),this.l=Os(t[5]||"",!0),Ja(this,t[6]||"",!0),this.o=Os(t[7]||"")):(this.g=!!e,this.h=new Ji(null,this.g))}function $n(n){return new Co(n)}function So(n,e,t){n.j=t?Os(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Qi(n,e,t){n.i=t?Os(e,!0):e}function ai(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Ja(n,e,t){e instanceof Ji?(n.h=e,function C(n,e){e&&!n.j&&(bi(n),n.i=null,n.g.forEach(function(t,s){var a=s.toLowerCase();s!=a&&(Js(this,s),_(this,a,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Hi(e,Ku)),n.h=new Ji(e,n.g))}function Hn(n,e,t){n.h.set(e,t)}function Di(n){return Hn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Os(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Hi(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,zu),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function zu(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Co.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Hi(e,Ta,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Hi(e,Ta,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Hi(t,"/"==t.charAt(0)?bu:Wu,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Hi(t,Ao)),n.join("")};var Ta=/[#\/\?@]/g,Wu=/[#\?:]/g,bu=/[#\?]/g,Ku=/[#\?@]/g,Ao=/#/g;function Ji(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function bi(n){n.g||(n.g=new ms,n.h=0,n.i&&function Fc(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var s=n[t].indexOf("="),a=null;if(0<=s){var l=n[t].substring(0,s);a=n[t].substring(s+1)}else l=n[t];e(l,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Js(n,e){bi(n),e=y(n,e),Rs(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Rs((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&ys(n)))}function I(n,e){return bi(n),e=y(n,e),Rs(n.g.h,e)}function _(n,e,t){Js(n,e),0<t.length&&(n.i=null,n.g.set(y(n,e),ki(t)),n.h+=t.length)}function y(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function V(n){this.l=n||W,n=Nt.PerformanceNavigationTiming?0<(n=Nt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Nt.g&&Nt.g.Ea&&Nt.g.Ea()&&Nt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(dt=Ji.prototype).add=function(n,e){bi(this),this.i=null,n=y(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},dt.forEach=function(n,e){bi(this),this.g.forEach(function(t,s){ma(t,function(a){n.call(e,a,s,this)},this)},this)},dt.T=function(){bi(this);for(var n=this.g.R(),e=this.g.T(),t=[],s=0;s<e.length;s++)for(var a=n[s],l=0;l<a.length;l++)t.push(e[s]);return t},dt.R=function(n){bi(this);var e=[];if("string"==typeof n)I(this,n)&&(e=nr(e,this.g.get(y(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=nr(e,n[t])}return e},dt.set=function(n,e){return bi(this),this.i=null,I(this,n=y(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},dt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},dt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var s=e[t],a=encodeURIComponent(String(s));s=this.R(s);for(var l=0;l<s.length;l++){var p=a;""!==s[l]&&(p+="="+encodeURIComponent(String(s[l]))),n.push(p)}}return this.i=n.join("&")};var W=10;function X(n){return!!n.h||!!n.g&&n.g.size>=n.j}function xe(n){return n.h?1:n.g?n.g.size:0}function lt(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Jt(n,e){n.g?n.g.add(e):n.h=e}function vt(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function mn(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return ki(n.i)}function on(){}function Ti(){this.g=new on}function Xi(n,e,t){const s=t||"";try{$i(n,function(a,l){let p=a;lr(a)&&(p=Wr(a)),e.push(s+l+"="+encodeURIComponent(p))})}catch(a){throw e.push(s+"type="+encodeURIComponent("_badmap")),a}}function es(n,e,t,s,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(s)}catch(l){}}function Vr(n){this.l=n.$b||null,this.j=n.ib||!1}function Ns(n,e){Bt.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Xa,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}V.prototype.cancel=function(){if(this.i=mn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},on.prototype.stringify=function(n){return Nt.JSON.stringify(n,void 0)},on.prototype.parse=function(n){return Nt.JSON.parse(n,void 0)},jn(Vr,Ys),Vr.prototype.g=function(){return new Ns(this.l,this.j)},Vr.prototype.i=function(n){return function(){return n}}({}),jn(Ns,Bt);var Xa=0;function eu(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Xs(n){n.readyState=4,n.l=null,n.j=null,n.A=null,qu(n)}function qu(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(dt=Ns.prototype).open=function(n,e){if(this.readyState!=Xa)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,qu(this)},dt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Nt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},dt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Xs(this)),this.readyState=Xa},dt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,qu(this)),this.g&&(this.readyState=3,qu(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Nt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;eu(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},dt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Xs(this):qu(this),3==this.readyState&&eu(this)}},dt.Ua=function(n){this.g&&(this.response=this.responseText=n,Xs(this))},dt.Ta=function(n){this.g&&(this.response=n,Xs(this))},dt.ha=function(){this.g&&Xs(this)},dt.setRequestHeader=function(n,e){this.v.append(n,e)},dt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},dt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Ns.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Lc=Nt.JSON.parse;function Xt(n){Bt.call(this),this.headers=new ms,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Td,this.K=this.L=!1}jn(Xt,Bt);var Td="",Np=/^https?$/i,Pp=["POST","PUT"];function Cd(n){return"content-type"==n.toLowerCase()}function Uc(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Sd(n),Vc(n)}function Sd(n){n.D||(n.D=!0,Kt(n,"complete"),Kt(n,"error"))}function tu(n){if(n.h&&void 0!==Oi&&(!n.C[1]||4!=Ps(n)||2!=n.ba()))if(n.v&&4==Ps(n))Ii(n.Fa,0,n);else if(Kt(n,"readystatechange"),4==Ps(n)){n.h=!1;try{const E=n.ba();e:switch(E){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===E){var a=String(n.H).match(Gu)[1]||null;if(!a&&Nt.self&&Nt.self.location){var l=Nt.self.location.protocol;a=l.substr(0,l.length-1)}s=!Np.test(a?a.toLowerCase():"")}t=s}if(t)Kt(n,"complete"),Kt(n,"success");else{n.m=6;try{var p=2<Ps(n)?n.g.statusText:""}catch(S){p=""}n.j=p+" ["+n.ba()+"]",Sd(n)}}finally{Vc(n)}}}function Vc(n,e){if(n.g){yr(n);const t=n.g,s=n.C[0]?ti:null;n.g=null,n.C=null,e||Kt(n,"ready");try{t.onreadystatechange=s}catch(a){}}}function yr(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Nt.clearTimeout(n.A),n.A=null)}function Ps(n){return n.g?n.g.readyState:0}function ra(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Td:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Tu(n,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=function kp(n){let e="";return Ha(n,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Hn(n,e,t))}function gi(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ts(n){this.za=0,this.l=[],this.h=new wo,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=gi("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=gi("baseRetryDelayMs",5e3,n),this.$a=gi("retryDelaySeedMs",1e4,n),this.Ya=gi("forwardChannelMaxRetries",2,n),this.ra=gi("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new V(n&&n.concurrentRequestLimit),this.Ca=new Ti,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Ca(n){if(ia(n),3==n.G){var e=n.V++,t=$n(n.F);Hn(t,"SID",n.J),Hn(t,"RID",e),Hn(t,"TYPE","terminate"),nu(n,t),(e=new ji(n,n.h,e,void 0)).K=2,e.v=Di($n(t)),t=!1,Nt.navigator&&Nt.navigator.sendBeacon&&(t=Nt.navigator.sendBeacon(e.v.toString(),"")),!t&&Nt.Image&&((new Image).src=e.v,t=!0),t||(e.g=xu(e.l,null),e.g.ea(e.v)),e.F=Date.now(),pi(e)}Rl(n)}function Mo(n){n.g&&(oa(n),n.g.cancel(),n.g=null)}function ia(n){Mo(n),n.u&&(Nt.clearTimeout(n.u),n.u=null),Au(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Nt.clearTimeout(n.m),n.m=null)}function sa(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&eo(n)}function eo(n){X(n.i)||n.m||(n.m=!0,Ss(n.Ha,n),n.C=0)}function Cu(n,e){var t;t=e?e.m:n.V++;const s=$n(n.F);Hn(s,"SID",n.J),Hn(s,"RID",t),Hn(s,"AID",n.U),nu(n,s),n.o&&n.s&&Tu(s,n.o,n.s),t=new ji(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Su(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Jt(n.i,t),Pc(t,s,e)}function nu(n,e){n.j&&$i({},function(t,s){Hn(e,s,t)})}function Su(n,e,t){t=Math.min(n.l.length,t);var s=n.j?_n(n.j.Oa,n.j,n):null;e:{var a=n.l;let l=-1;for(;;){const p=["count="+t];-1==l?0<t?(l=a[0].h,p.push("ofs="+l)):l=0:p.push("ofs="+l);let E=!0;for(let S=0;S<t;S++){let P=a[S].h;const G=a[S].g;if(P-=l,0>P)l=Math.max(0,a[S].h-100),E=!1;else try{Xi(G,p,"req"+P+"_")}catch(Q){s&&s(G)}}if(E){s=p.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,s}function ns(n){n.g||n.u||(n.Y=1,Ss(n.Ga,n),n.A=0)}function ru(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Xo(_n(n.Ga,n),Bc(n,n.A)),n.A++,0))}function oa(n){null!=n.B&&(Nt.clearTimeout(n.B),n.B=null)}function Ad(n){n.g=new ji(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=$n(n.oa);Hn(e,"RID","rpc"),Hn(e,"SID",n.J),Hn(e,"CI",n.N?"0":"1"),Hn(e,"AID",n.U),nu(n,e),Hn(e,"TYPE","xmlhttp"),n.o&&n.s&&Tu(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Di($n(e)),t.s=null,t.U=!0,Ya(t,n)}function Au(n){null!=n.v&&(Nt.clearTimeout(n.v),n.v=null)}function Oo(n,e){var t=null;if(n.g==e){Au(n),oa(n),n.g=null;var s=2}else{if(!lt(n.i,e))return;t=e.D,vt(n.i,e),s=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;Kt(s=Qo(),new Da(s,t,e,a)),eo(n)}else ns(n);else if(3==(a=e.o)||0==a&&0<n.I||!(1==s&&function Ro(n,e){return!(xe(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Xo(_n(n.Ha,n,e),Bc(n,n.C)),n.C++,0)))}(n,e)||2==s&&ru(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),a){case 1:No(n,5);break;case 4:No(n,10);break;case 3:No(n,6);break;default:No(n,2)}}function Bc(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function No(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var s=_n(n.jb,n);t||(t=new Co("//www.google.com/images/cleardot.gif"),Nt.location&&"http"==Nt.location.protocol||So(t,"https"),Di(t)),function xo(n,e){const t=new wo;if(Nt.Image){const s=new Image;s.onload=ri(es,t,s,"TestLoadImage: loaded",!0,e),s.onerror=ri(es,t,s,"TestLoadImage: error",!1,e),s.onabort=ri(es,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=ri(es,t,s,"TestLoadImage: timeout",!1,e),Nt.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=n}else e(!1)}(t.toString(),s)}else Cr(2);n.G=0,n.j&&n.j.va(e),Rl(n),ia(n)}function Rl(n){n.G=0,n.I=-1,n.j&&((0!=mn(n.i).length||0!=n.l.length)&&(n.i.i.length=0,ki(n.l),n.l.length=0),n.j.ua())}function to(n,e,t){let s=function Du(n){return n instanceof Co?$n(n):new Co(n,void 0)}(t);if(""!=s.i)e&&Qi(s,e+"."+s.i),ai(s,s.m);else{const a=Nt.location;s=function Gn(n,e,t,s){var a=new Co(null,void 0);return n&&So(a,n),e&&Qi(a,e),t&&ai(a,t),s&&(a.l=s),a}(a.protocol,e?e+"."+a.hostname:a.hostname,+a.port,t)}return n.aa&&Ha(n.aa,function(a,l){Hn(s,l,a)}),t=n.sa,(e=n.D)&&t&&Hn(s,e,t),Hn(s,"VER",n.ma),nu(n,s),s}function xu(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Xt(t&&n.Ba&&!n.qa?new Vr({ib:!0}):n.qa)).L=n.H,e}function no(){}function ro(){if(Li&&!(10<=Number(za)))throw Error("Environmental error: no available transport.")}function ks(n,e){Bt.call(this),this.g=new ts(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!mo(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!mo(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Fs(this)}function Sa(n){Do.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function iu(){ea.call(this),this.status=1}function Fs(n){this.g=n}(dt=Xt.prototype).ea=function(n,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Iu.g(),this.C=function wu(n){return n.h||(n.h=n.i())}(this.u?this.u:Iu),this.g.onreadystatechange=_n(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void Uc(this,l)}n=t||"";const a=new ms(this.headers);s&&$i(s,function(l,p){a.set(p,l)}),s=function $a(n){e:{var e=Cd;const t=n.length,s="string"==typeof n?n.split(""):n;for(let a=0;a<t;a++)if(a in s&&e.call(void 0,s[a],a,n)){e=a;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(a.T()),t=Nt.FormData&&n instanceof Nt.FormData,!(0<=$s(Pp,e))||s||t||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach(function(l,p){this.g.setRequestHeader(p,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{yr(this),0<this.B&&((this.K=function $h(n){return Li&&function si(){return function bs(n){var e=Ga;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=vu(String(ii)).split("."),t=vu("9").split("."),s=Math.max(e.length,t.length);for(let p=0;0==n&&p<s;p++){var a=e[p]||"",l=t[p]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==a[0].length&&0==l[0].length)break;n=Hs(0==a[1].length?0:parseInt(a[1],10),0==l[1].length?0:parseInt(l[1],10))||Hs(0==a[2].length,0==l[2].length)||Hs(a[2],l[2]),a=a[3],l=l[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_n(this.pa,this)):this.A=Ii(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){Uc(this,l)}},dt.pa=function(){void 0!==Oi&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Kt(this,"timeout"),this.abort(8))},dt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Kt(this,"complete"),Kt(this,"abort"),Vc(this))},dt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Vc(this,!0)),Xt.Z.M.call(this)},dt.Fa=function(){this.s||(this.F||this.v||this.l?tu(this):this.cb())},dt.cb=function(){tu(this)},dt.ba=function(){try{return 2<Ps(this)?this.g.status:-1}catch(n){return-1}},dt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},dt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Lc(e)}},dt.Da=function(){return this.m},dt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(dt=ts.prototype).ma=8,dt.G=1,dt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},dt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const a=new ji(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=vo(l),Eu(l,this.P)):l=this.P),null===this.o&&(a.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var s=this.l[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Su(this,a,e),Hn(t=$n(this.F),"RID",n),Hn(t,"CVER",22),this.D&&Hn(t,"X-HTTP-Session-Id",this.D),nu(this,t),this.o&&l&&Tu(t,this.o,l),Jt(this.i,a),this.Ra&&Hn(t,"TYPE","init"),this.ja?(Hn(t,"$req",e),Hn(t,"SID","null"),a.$=!0,Pc(a,t,null)):Pc(a,t,e),this.G=2}}else 3==this.G&&(n?Cu(this,n):0==this.l.length||X(this.i)||Cu(this))},dt.Ga=function(){if(this.u=null,Ad(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Xo(_n(this.bb,this),n)}},dt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Cr(10),Mo(this),Ad(this))},dt.ab=function(){null!=this.v&&(this.v=null,Mo(this),ru(this),Cr(19))},dt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Cr(2)):(this.h.info("Failed to ping google.com"),Cr(1))},(dt=no.prototype).xa=function(){},dt.wa=function(){},dt.va=function(){},dt.ua=function(){},dt.Oa=function(){},ro.prototype.g=function(n,e){return new ks(n,e)},jn(ks,Bt),ks.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Ss(_n(n.hb,n,e))),Cr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=to(n,null,n.W),eo(n)},ks.prototype.close=function(){Ca(this.g)},ks.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,sa(this.g,e)}else this.v?((e={}).__data__=Wr(n),sa(this.g,e)):sa(this.g,n)},ks.prototype.M=function(){this.g.j=null,delete this.j,Ca(this.g),delete this.g,ks.Z.M.call(this)},jn(Sa,Do),jn(iu,ea),jn(Fs,no),Fs.prototype.xa=function(){Kt(this.g,"a")},Fs.prototype.wa=function(n){Kt(this.g,new Sa(n))},Fs.prototype.va=function(n){Kt(this.g,new iu(n))},Fs.prototype.ua=function(){Kt(this.g,"b")},ro.prototype.createWebChannel=ro.prototype.g,ks.prototype.send=ks.prototype.u,ks.prototype.open=ks.prototype.m,ks.prototype.close=ks.prototype.close,qs.NO_ERROR=0,qs.TIMEOUT=8,qs.HTTP_ERROR=6,Zs.COMPLETE="complete",Qs.EventType=Io,Io.OPEN="a",Io.CLOSE="b",Io.ERROR="c",Io.MESSAGE="d",Bt.prototype.listen=Bt.prototype.N,Xt.prototype.listenOnce=Xt.prototype.O,Xt.prototype.getLastError=Xt.prototype.La,Xt.prototype.getLastErrorCode=Xt.prototype.Da,Xt.prototype.getStatus=Xt.prototype.ba,Xt.prototype.getResponseJson=Xt.prototype.Qa,Xt.prototype.getResponseText=Xt.prototype.ga,Xt.prototype.send=Xt.prototype.ea;var Ol=Ot.createWebChannelTransport=function(){return new ro},T=Ot.getStatEventTarget=function(){return Qo()},M=Ot.ErrorCode=qs,U=Ot.EventType=Zs,K=Ot.Event=gs,ue=Ot.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},_e=Ot.FetchXmlHttpFactory=Vr,Ge=Ot.WebChannel=Qs,nt=Ot.XhrIo=Xt;const Ht="@firebase/firestore";class xt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xt.UNAUTHENTICATED=new xt(null),xt.GOOGLE_CREDENTIALS=new xt("google-credentials-uid"),xt.FIRST_PARTY=new xt("first-party-uid"),xt.MOCK_USER=new xt("mock-user");let cn="9.8.3";const Ct=new un.Yd("@firebase/firestore");function ui(){return Ct.logLevel}function Ze(n,...e){if(Ct.logLevel<=un.in.DEBUG){const t=e.map(Mu);Ct.debug(`Firestore (${cn}): ${n}`,...t)}}function Mn(n,...e){if(Ct.logLevel<=un.in.ERROR){const t=e.map(Mu);Ct.error(`Firestore (${cn}): ${n}`,...t)}}function mi(n,...e){if(Ct.logLevel<=un.in.WARN){const t=e.map(Mu);Ct.warn(`Firestore (${cn}): ${n}`,...t)}}function Mu(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function gt(n="Unexpected state"){const e=`FIRESTORE (${cn}) INTERNAL ASSERTION FAILED: `+n;throw Mn(e),new Error(e)}function kt(n,e){n||gt()}function it(n,e){return n}const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qe extends Pt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ci{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Nl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Zu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(xt.UNAUTHENTICATED))}shutdown(){}}class jc{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Fp{constructor(e){this.t=e,this.currentUser=xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let a=this.i;const l=P=>this.i!==a?(a=this.i,t(P)):Promise.resolve();let p=new ci;this.o=()=>{this.i++,this.currentUser=this.u(),p.resolve(),p=new ci,e.enqueueRetryable(()=>l(this.currentUser))};const E=()=>{const P=p;e.enqueueRetryable((0,Ae.Z)(function*(){yield P.promise,yield l(s.currentUser)}))},S=P=>{Ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=P,this.auth.addAuthTokenListener(this.o),E()};this.t.onInit(P=>S(P)),setTimeout(()=>{if(!this.auth){const P=this.t.getImmediate({optional:!0});P?S(P):(Ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),p.resolve(),p=new ci)}},0),E()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(Ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(kt("string"==typeof s.accessToken),new Nl(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return kt(null===e||"string"==typeof e),new xt(e)}}class Hh{constructor(e,t,s){this.type="FirstParty",this.user=xt.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const a=e.auth.getAuthHeaderValueForFirstParty([]);a&&this.headers.set("Authorization",a),s&&this.headers.set("X-Goog-Iam-Authorization-Token",s)}}class Gh{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new Hh(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zh{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Lp{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const s=l=>{null!=l.error&&Ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const p=l.token!==this.p;return this.p=l.token,Ze("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const a=l=>{Ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.g.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.g.getImmediate({optional:!0});l?a(l):Ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(kt("string"==typeof t.token),this.p=t.token,new zh(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Pl(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}class Wh{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=Pl(40);for(let l=0;l<a.length;++l)s.length<20&&a[l]<t&&(s+=e.charAt(a[l]%e.length))}return s}}function Zt(n,e){return n<e?-1:n>e?1:0}function su(n,e,t){return n.length===e.length&&n.every((s,a)=>t(s,e[a]))}function Ru(n){return n+"\0"}class vr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new qe(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new qe(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new qe(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qe(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vr.fromMillis(Date.now())}static fromDate(e){return vr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new vr(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Zt(this.nanoseconds,e.nanoseconds):Zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Wt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Wt(e)}static min(){return new Wt(new vr(0,0))}static max(){return new Wt(new vr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class kl{constructor(e,t,s){void 0===t?t=0:t>e.length&&gt(),void 0===s?s=e.length-t:s>e.length-t&&gt(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===kl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof kl?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let a=0;a<s;a++){const l=e.get(a),p=t.get(a);if(l<p)return-1;if(l>p)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class yn extends kl{construct(e,t,s){return new yn(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new qe(be.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(a=>a.length>0))}return new yn(t)}static emptyPath(){return new yn([])}}const $c=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mr extends kl{construct(e,t,s){return new Mr(e,t,s)}static isValidIdentifier(e){return $c.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Mr(["__name__"])}static fromServerFormat(e){const t=[];let s="",a=0;const l=()=>{if(0===s.length)throw new qe(be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let p=!1;for(;a<e.length;){const E=e[a];if("\\"===E){if(a+1===e.length)throw new qe(be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const S=e[a+1];if("\\"!==S&&"."!==S&&"`"!==S)throw new qe(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=S,a+=2}else"`"===E?(p=!p,a++):"."!==E||p?(s+=E,a++):(l(),a++)}if(l(),p)throw new qe(be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mr(t)}static emptyPath(){return new Mr([])}}class ut{constructor(e){this.path=e}static fromPath(e){return new ut(yn.fromString(e))}static fromName(e){return new ut(yn.fromString(e).popFirst(5))}static empty(){return new ut(yn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===yn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return yn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ut(new yn(e.slice()))}}class Hc{constructor(e,t,s,a){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=a}}function Fl(n){return n.fields.find(e=>2===e.kind)}function Ou(n){return n.fields.filter(e=>2!==e.kind)}Hc.UNKNOWN_ID=-1;class Gc{constructor(e,t){this.fieldPath=e,this.kind=t}}class zc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new zc(0,Kr.min())}}function Kh(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,a=Wt.fromTimestamp(1e9===s?new vr(t+1,0):new vr(t,s));return new Kr(a,ut.empty(),e)}function qh(n){return new Kr(n.readTime,n.key,-1)}class Kr{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Kr(Wt.min(),ut.empty(),-1)}static max(){return new Kr(Wt.max(),ut.empty(),-1)}}function Aa(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ut.comparator(n.documentKey,e.documentKey),0!==t?t:Zt(n.largestBatchId,e.largestBatchId))}const Zh="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xd{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Nu(n){return Md.apply(this,arguments)}function Md(){return Md=(0,Ae.Z)(function*(n){if(n.code!==be.FAILED_PRECONDITION||n.message!==Zh)throw n;Ze("LocalStore","Unexpectedly lost primary lease")}),Md.apply(this,arguments)}class De{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&gt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new De((s,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof De?t:De.resolve(t)}catch(t){return De.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):De.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):De.reject(t)}static resolve(e){return new De((t,s)=>{t(e)})}static reject(e){return new De((t,s)=>{s(e)})}static waitFor(e){return new De((t,s)=>{let a=0,l=0,p=!1;e.forEach(E=>{++a,E.next(()=>{++l,p&&l===a&&t()},S=>s(S))}),p=!0,l===a&&t()})}static or(e){let t=De.resolve(!1);for(const s of e)t=t.next(a=>a?De.resolve(a):s());return t}static forEach(e,t){const s=[];return e.forEach((a,l)=>{s.push(t.call(this,a,l))}),this.waitFor(s)}static mapArray(e,t){return new De((s,a)=>{const l=e.length,p=new Array(l);let E=0;for(let S=0;S<l;S++){const P=S;t(e[P]).next(G=>{p[P]=G,++E,E===l&&s(p)},G=>a(G))}})}static doWhile(e,t){return new De((s,a)=>{const l=()=>{!0===e()?t().next(()=>{l()},a):s()};l()})}}class Wc{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new ci,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new Yu(e,t.error)):this.T.resolve()},this.transaction.onerror=s=>{const a=so(s.target.error);this.T.reject(new Yu(e,a))}}static open(e,t,s,a){try{return new Wc(t,e.transaction(a,s))}catch(l){throw new Yu(t,l)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Ze("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Up(t)}}class io{constructor(e,t,s){this.name=e,this.version=t,this.P=s,12.2===io.v((0,Pt.z$)())&&Mn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ze("SimpleDb","Removing database:",e),Qu(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,Pt.hl)())return!1;if(io.S())return!0;const e=(0,Pt.z$)(),t=io.v(e),s=0<t&&t<10,a=io.D(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||l)}static S(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static D(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}k(e){var t=this;return(0,Ae.Z)(function*(){return t.db||(Ze("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,a)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=p=>{s(p.target.result)},l.onblocked=()=>{a(new Yu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=p=>{const E=p.target.error;a("VersionError"===E.name?new qe(be.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===E.name?new qe(be.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+E):new Yu(e,E))},l.onupgradeneeded=p=>{Ze("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',p.oldVersion),t.P.O(p.target.result,l.transaction,p.oldVersion,t.version).next(()=>{Ze("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=s=>t.M(s)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,a){var l=this;return(0,Ae.Z)(function*(){const p="readonly"===t;let E=0;for(;;){++E;try{l.db=yield l.k(e);const S=Wc.open(l.db,e,p?"readonly":"readwrite",s),P=a(S).next(G=>(S.R(),G)).catch(G=>(S.abort(G),De.reject(G))).toPromise();return P.catch(()=>{}),yield S.A,P}catch(S){const P="FirebaseError"!==S.name&&E<3;if(Ze("SimpleDb","Transaction failed with error:",S.message,"Retrying:",P),l.close(),!P)return Promise.reject(S)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Yh{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return Qu(this.$.delete())}}class Yu extends qe{constructor(e,t){super(be.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ou(n){return"IndexedDbTransactionError"===n.name}class Up{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(Ze("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(Ze("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),Qu(s)}add(e){return Ze("SimpleDb","ADD",this.store.name,e,e),Qu(this.store.add(e))}get(e){return Qu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ze("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ze("SimpleDb","DELETE",this.store.name,e),Qu(this.store.delete(e))}count(){return Ze("SimpleDb","COUNT",this.store.name),Qu(this.store.count())}K(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const a=this.cursor(s),l=[];return this.G(a,(p,E)=>{l.push(E)}).next(()=>l)}{const a=this.store.getAll(s.range);return new De((l,p)=>{a.onerror=E=>{p(E.target.error)},a.onsuccess=E=>{l(E.target.result)}})}}j(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new De((a,l)=>{s.onerror=p=>{l(p.target.error)},s.onsuccess=p=>{a(p.target.result)}})}W(e,t){Ze("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.H=!1;const a=this.cursor(s);return this.G(a,(l,p,E)=>E.delete())}J(e,t){let s;t?s=e:(s={},t=e);const a=this.cursor(s);return this.G(a,t)}Y(e){const t=this.cursor({});return new De((s,a)=>{t.onerror=l=>{const p=so(l.target.error);a(p)},t.onsuccess=l=>{const p=l.target.result;p?e(p.primaryKey,p.value).next(E=>{E?p.continue():s()}):s()}})}G(e,t){const s=[];return new De((a,l)=>{e.onerror=p=>{l(p.target.error)},e.onsuccess=p=>{const E=p.target.result;if(!E)return void a();const S=new Yh(E),P=t(E.primaryKey,E.value,S);if(P instanceof De){const G=P.catch(Q=>(S.done(),De.reject(Q)));s.push(G)}S.isDone?a():null===S.U?E.continue():E.continue(S.U)}}).next(()=>De.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.H?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Qu(n){return new De((e,t)=>{n.onsuccess=s=>{e(s.target.result)},n.onerror=s=>{const a=so(s.target.error);t(a)}})}let Vp=!1;function so(n){const e=io.v((0,Pt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const s=new qe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Vp||(Vp=!0,setTimeout(()=>{throw s},0)),s}}return n}class Qh{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Ze("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ae.Z)(function*(){t.task=null;try{Ze("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(s){ou(s)?Ze("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield Nu(s)}yield t.Z(1)}))}}class aa{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,Ae.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.et(s,e))})()}et(e,t){const s=new Set;let a=t,l=!0;return De.doWhile(()=>!0===l&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(p=>{if(null!==p&&!s.has(p))return Ze("IndexBackiller",`Processing collection: ${p}`),this.nt(e,p,a).next(E=>{a-=E,s.add(p)});l=!1})).next(()=>t-a)}nt(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,s).next(l=>{const p=l.changes;return this.localStore.indexManager.updateIndexEntries(e,p).next(()=>this.st(a,l)).next(E=>(Ze("IndexBackiller",`Updating offset: ${E}`),this.localStore.indexManager.updateCollectionGroup(e,t,E))).next(()=>p.size)}))}st(e,t){let s=e;return t.changes.forEach((a,l)=>{const p=qh(l);Aa(p,s)>0&&(s=p)}),new Kr(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}class qr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.it(s),this.rt=s=>t.writeSequenceNumber(s))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function Rd(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ua(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Od(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}qr.ot=-1;class Br{constructor(e,t){this.comparator=e,this.root=t||Gi.EMPTY}insert(e,t){return new Br(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gi.BLACK,null,null))}remove(e){return new Br(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(0===a)return t+s.left.size;a<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kc(this.root,e,this.comparator,!0)}}class Kc{constructor(e,t,s,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gi{constructor(e,t,s,a,l){this.key=e,this.value=t,this.color=null!=s?s:Gi.RED,this.left=null!=a?a:Gi.EMPTY,this.right=null!=l?l:Gi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,a,l){return new Gi(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=a?a:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let a=this;const l=s(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,s),null):0===l?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Gi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return Gi.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw gt();const e=this.left.check();if(e!==this.right.check())throw gt();return e+(this.isRed()?0:1)}}Gi.EMPTY=null,Gi.RED=!0,Gi.BLACK=!1,Gi.EMPTY=new class{constructor(){this.size=0}get key(){throw gt()}get value(){throw gt()}get color(){throw gt()}get left(){throw gt()}get right(){throw gt()}copy(n,e,t,s,a){return this}insert(n,e,t){return new Gi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ln{constructor(e){this.comparator=e,this.data=new Br(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ju(this.data.getIterator())}getIteratorFrom(e){return new Ju(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Ln)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(0!==this.comparator(a,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ln(this.comparator);return t.data=e,t}}class Ju{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function au(n){return n.hasNext()?n.getNext():void 0}class oo{constructor(e){this.fields=e,e.sort(Mr.comparator)}static empty(){return new oo([])}unionWith(e){let t=new Ln(Mr.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new oo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return su(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Zr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Zr(t)}static fromUint8Array(e){const t=function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a}(e);return new Zr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zr.EMPTY_BYTE_STRING=new Zr("");const Bp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xa(n){if(kt(!!n),"string"==typeof n){let e=0;const t=Bp.exec(n);if(kt(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:_r(n.seconds),nanos:_r(n.nanos)}}function _r(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Pu(n){return"string"==typeof n?Zr.fromBase64String(n):Zr.fromUint8Array(n)}function Ll(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ku(n){const e=n.mapValue.fields.__previous_value__;return Ll(e)?ku(e):e}function Fu(n){const e=xa(n.mapValue.fields.__local_write_time__.timestampValue);return new vr(e.seconds,e.nanos)}class Nd{constructor(e,t,s,a,l,p,E,S){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=a,this.ssl=l,this.forceLongPolling=p,this.autoDetectLongPolling=E,this.useFetchStreams=S}}class Ma{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ma("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ma&&e.projectId===this.projectId&&e.database===this.database}}function Zn(n){return null==n}function qc(n){return 0===n&&1/n==-1/0}function Jh(n){return"number"==typeof n&&Number.isInteger(n)&&!qc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const ca={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Xu={nullValue:"NULL_VALUE"};function Lu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ll(n)?4:Qc(n)?9007199254740991:10:gt()}function la(n,e){if(n===e)return!0;const t=Lu(n);if(t!==Lu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Fu(n).isEqual(Fu(e));case 3:return function(s,a){if("string"==typeof s.timestampValue&&"string"==typeof a.timestampValue&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=xa(s.timestampValue),p=xa(a.timestampValue);return l.seconds===p.seconds&&l.nanos===p.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,Pu(n.bytesValue).isEqual(Pu(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,a){return _r(s.geoPointValue.latitude)===_r(a.geoPointValue.latitude)&&_r(s.geoPointValue.longitude)===_r(a.geoPointValue.longitude)}(n,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return _r(s.integerValue)===_r(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=_r(s.doubleValue),p=_r(a.doubleValue);return l===p?qc(l)===qc(p):isNaN(l)&&isNaN(p)}return!1}(n,e);case 9:return su(n.arrayValue.values||[],e.arrayValue.values||[],la);case 10:return function(s,a){const l=s.mapValue.fields||{},p=a.mapValue.fields||{};if(Rd(l)!==Rd(p))return!1;for(const E in l)if(l.hasOwnProperty(E)&&(void 0===p[E]||!la(l[E],p[E])))return!1;return!0}(n,e);default:return gt()}var a}function Zc(n,e){return void 0!==(n.values||[]).find(t=>la(t,e))}function uu(n,e){if(n===e)return 0;const t=Lu(n),s=Lu(e);if(t!==s)return Zt(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Zt(n.booleanValue,e.booleanValue);case 2:return function(a,l){const p=_r(a.integerValue||a.doubleValue),E=_r(l.integerValue||l.doubleValue);return p<E?-1:p>E?1:p===E?0:isNaN(p)?isNaN(E)?0:-1:1}(n,e);case 3:return ec(n.timestampValue,e.timestampValue);case 4:return ec(Fu(n),Fu(e));case 5:return Zt(n.stringValue,e.stringValue);case 6:return function(a,l){const p=Pu(a),E=Pu(l);return p.compareTo(E)}(n.bytesValue,e.bytesValue);case 7:return function(a,l){const p=a.split("/"),E=l.split("/");for(let S=0;S<p.length&&S<E.length;S++){const P=Zt(p[S],E[S]);if(0!==P)return P}return Zt(p.length,E.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,l){const p=Zt(_r(a.latitude),_r(l.latitude));return 0!==p?p:Zt(_r(a.longitude),_r(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,l){const p=a.values||[],E=l.values||[];for(let S=0;S<p.length&&S<E.length;++S){const P=uu(p[S],E[S]);if(P)return P}return Zt(p.length,E.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,l){if(a===ca.mapValue&&l===ca.mapValue)return 0;if(a===ca.mapValue)return 1;if(l===ca.mapValue)return-1;const p=a.fields||{},E=Object.keys(p),S=l.fields||{},P=Object.keys(S);E.sort(),P.sort();for(let G=0;G<E.length&&G<P.length;++G){const Q=Zt(E[G],P[G]);if(0!==Q)return Q;const Ee=uu(p[E[G]],S[P[G]]);if(0!==Ee)return Ee}return Zt(E.length,P.length)}(n.mapValue,e.mapValue);default:throw gt()}}function ec(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Zt(n,e);const t=xa(n),s=xa(e),a=Zt(t.seconds,s.seconds);return 0!==a?a:Zt(t.nanos,s.nanos)}function Yc(n){return Pd(n)}function Pd(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(s){const a=xa(s);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Pu(n.bytesValue).toBase64():"referenceValue"in n?ut.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(s){let a="[",l=!0;for(const p of s.values||[])l?l=!1:a+=",",a+=Pd(p);return a+"]"}(n.arrayValue):"mapValue"in n?function(s){const a=Object.keys(s.fields||{}).sort();let l="{",p=!0;for(const E of a)p?p=!1:l+=",",l+=`${E}:${Pd(s.fields[E])}`;return l+"}"}(n.mapValue):gt();var e}function ko(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ci(n){return!!n&&"integerValue"in n}function Uu(n){return!!n&&"arrayValue"in n}function kd(n){return!!n&&"nullValue"in n}function Ul(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jr(n){return!!n&&"mapValue"in n}function Fo(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ua(n.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Fo(s)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Fo(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Qc(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function jp(n){return"nullValue"in n?Xu:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ko(Ma.empty(),ut.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:gt()}function Fd(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ko(Ma.empty(),ut.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ca:gt()}function Ld(n,e){const t=uu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function vs(n,e){const t=uu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Rr{constructor(e){this.value=e}static empty(){return new Rr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!jr(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fo(t)}setAll(e){let t=Mr.emptyPath(),s={},a=[];e.forEach((p,E)=>{if(!t.isImmediateParentOf(E)){const S=this.getFieldsMap(t);this.applyChanges(S,s,a),s={},a=[],t=E.popLast()}p?s[E.lastSegment()]=Fo(p):a.push(E.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,a)}delete(e){const t=this.field(e.popLast());jr(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return la(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=t.mapValue.fields[e.get(s)];jr(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,s){ua(t,(a,l)=>e[a]=l);for(const a of s)delete e[a]}clone(){return new Rr(Fo(this.value))}}function Ud(n){const e=[];return ua(n.fields,(t,s)=>{const a=new Mr([t]);if(jr(s)){const l=Ud(s.mapValue).fields;if(0===l.length)e.push(a);else for(const p of l)e.push(a.child(p))}else e.push(a)}),new oo(e)}class Yn{constructor(e,t,s,a,l,p){this.key=e,this.documentType=t,this.version=s,this.readTime=a,this.data=l,this.documentState=p}static newInvalidDocument(e){return new Yn(e,0,Wt.min(),Wt.min(),Rr.empty(),0)}static newFoundDocument(e,t,s){return new Yn(e,1,t,Wt.min(),s,0)}static newNoDocument(e,t){return new Yn(e,2,t,Wt.min(),Rr.empty(),0)}static newUnknownDocument(e,t){return new Yn(e,3,t,Wt.min(),Rr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Wt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Vd{constructor(e,t=null,s=[],a=[],l=null,p=null,E=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=a,this.limit=l,this.startAt=p,this.endAt=E,this.ut=null}}function Vl(n,e=null,t=[],s=[],a=null,l=null,p=null){return new Vd(n,e,t,s,a,l,p)}function Ra(n){const e=it(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>{return(a=s).field.canonicalString()+a.op.toString()+Yc(a.value);var a}).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(a=s).field.canonicalString()+a.dir;var a}).join(","),Zn(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Yc(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Yc(s)).join(",")),e.ut=t}return e.ut}function Jc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<n.orderBy.length;a++)if(!jd(n.orderBy[a],e.orderBy[a]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let a=0;a<n.filters.length;a++)if((t=n.filters[a]).op!==(s=e.filters[a]).op||!t.field.isEqual(s.field)||!la(t.value,s.value))return!1;var t,s;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!of(n.startAt,e.startAt)&&of(n.endAt,e.endAt)}function Ls(n){return ut.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Xc(n,e){return n.filters.filter(t=>t instanceof Si&&t.field.isEqual(e))}function ef(n,e,t){let s=Xu,a=!0;for(const l of Xc(n,e)){let p=Xu,E=!0;switch(l.op){case"<":case"<=":p=jp(l.value);break;case"==":case"in":case">=":p=l.value;break;case">":p=l.value,E=!1;break;case"!=":case"not-in":p=Xu}Ld({value:s,inclusive:a},{value:p,inclusive:E})<0&&(s=p,a=E)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const p=t.position[l];Ld({value:s,inclusive:a},{value:p,inclusive:t.inclusive})<0&&(s=p,a=t.inclusive);break}return{value:s,inclusive:a}}function el(n,e,t){let s=ca,a=!0;for(const l of Xc(n,e)){let p=ca,E=!0;switch(l.op){case">=":case">":p=Fd(l.value),E=!1;break;case"==":case"in":case"<=":p=l.value;break;case"<":p=l.value,E=!1;break;case"!=":case"not-in":p=ca}vs({value:s,inclusive:a},{value:p,inclusive:E})>0&&(s=p,a=E)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const p=t.position[l];vs({value:s,inclusive:a},{value:p,inclusive:t.inclusive})>0&&(s=p,a=t.inclusive);break}return{value:s,inclusive:a}}class Si extends class{}{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,s):new tf(e,t,s):"array-contains"===t?new nf(e,s):"in"===t?new Oa(e,s):"not-in"===t?new tl(e,s):"array-contains-any"===t?new rf(e,s):new Si(e,t,s)}static ct(e,t,s){return"in"===t?new _s(e,s):new Bd(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(uu(t,this.value)):null!==t&&Lu(this.value)===Lu(t)&&this.at(uu(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return gt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class tf extends Si{constructor(e,t,s){super(e,t,s),this.key=ut.fromName(s.referenceValue)}matches(e){const t=ut.comparator(e.key,this.key);return this.at(t)}}class _s extends Si{constructor(e,t){super(e,"in",t),this.keys=Bl(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Bd extends Si{constructor(e,t){super(e,"not-in",t),this.keys=Bl(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Bl(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>ut.fromName(s.referenceValue))}class nf extends Si{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Uu(t)&&Zc(t.arrayValue,this.value)}}class Oa extends Si{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Zc(this.value.arrayValue,t)}}class tl extends Si{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Zc(this.value.arrayValue,t)}}class rf extends Si{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Uu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Zc(this.value.arrayValue,s))}}class Na{constructor(e,t){this.position=e,this.inclusive=t}}class tc{constructor(e,t="asc"){this.field=e,this.dir=t}}function jd(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function sf(n,e,t){let s=0;for(let a=0;a<n.position.length;a++){const l=e[a],p=n.position[a];if(s=l.field.isKeyField()?ut.comparator(ut.fromName(p.referenceValue),t.key):uu(p,t.data.field(l.field)),"desc"===l.dir&&(s*=-1),0!==s)break}return s}function of(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!la(n.position[t],e.position[t]))return!1;return!0}class Es{constructor(e,t=null,s=[],a=[],l=null,p="F",E=null,S=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=a,this.limit=l,this.limitType=p,this.startAt=E,this.endAt=S,this.lt=null,this.ft=null}}function Lo(n,e,t,s,a,l,p,E){return new Es(n,e,t,s,a,l,p,E)}function g(n){return new Es(n)}function f(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function v(n){for(const e of n.filters)if(e.ht())return e.field;return null}function O(n){return null!==n.collectionGroup}function B(n){const e=it(n);if(null===e.lt){e.lt=[];const t=v(e),s=f(e);if(null!==t&&null===s)t.isKeyField()||e.lt.push(new tc(t)),e.lt.push(new tc(Mr.keyField(),"asc"));else{let a=!1;for(const l of e.explicitOrderBy)e.lt.push(l),l.field.isKeyField()&&(a=!0);if(!a){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new tc(Mr.keyField(),l))}}}return e.lt}function se(n){const e=it(n);if(!e.ft)if("F"===e.limitType)e.ft=Vl(e.path,e.collectionGroup,B(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of B(e))t.push(new tc(l.field,"desc"===l.dir?"asc":"desc"));const s=e.endAt?new Na(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new Na(e.startAt.position,e.startAt.inclusive):null;e.ft=Vl(e.path,e.collectionGroup,t,e.filters,e.limit,s,a)}return e.ft}function Me(n,e,t){return new Es(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Xe(n,e){return Jc(se(n),se(e))&&n.limitType===e.limitType}function mt(n){return`${Ra(se(n))}|lt:${n.limitType}`}function Ft(n){return`Query(target=${function Xh(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(s=t).field.canonicalString()} ${s.op} ${Yc(s.value)}`;var s}).join(", ")}]`),Zn(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(s=t).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Yc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Yc(t)).join(",")),`Target(${e})`}(se(n))}; limitType=${n.limitType})`}function Mt(n,e){return e.isFoundDocument()&&function(t,s){const a=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):ut.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,s){for(const a of t.explicitOrderBy)if(!a.field.isKeyField()&&null===s.data.field(a.field))return!1;return!0}(n,e)&&function(t,s){for(const a of t.filters)if(!a.matches(s))return!1;return!0}(n,e)&&(s=e,!((t=n).startAt&&!function(a,l,p){const E=sf(a,l,p);return a.inclusive?E<=0:E<0}(t.startAt,B(t),s)||t.endAt&&!function(a,l,p){const E=sf(a,l,p);return a.inclusive?E>=0:E>0}(t.endAt,B(t),s)));var t,s}function Or(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ws(n){return(e,t)=>{let s=!1;for(const a of B(n)){const l=nl(a,e,t);if(0!==l)return l;s=s||a.field.isKeyField()}return 0}}function nl(n,e,t){const s=n.field.isKeyField()?ut.comparator(e.key,t.key):function(a,l,p){const E=l.data.field(a),S=p.data.field(a);return null!==E&&null!==S?uu(E,S):gt()}(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return gt()}}function af(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qc(e)?"-0":e}}function Pa(n){return{integerValue:""+n}}function rl(n,e){return Jh(e)?Pa(e):af(n,e)}class nc{constructor(){this._=void 0}}function $d(n,e,t){return n instanceof cu?function(s,a){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&(l.fields.__previous_value__=a),{mapValue:l}}(t,e):n instanceof lu?uf(n,e):n instanceof ka?cf(n,e):function(s,a){const l=Hd(s,a),p=lf(l)+lf(s._t);return Ci(l)&&Ci(s._t)?Pa(p):af(s.wt,p)}(n,e)}function jl(n,e,t){return n instanceof lu?uf(n,e):n instanceof ka?cf(n,e):t}function Hd(n,e){return n instanceof il?Ci(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class cu extends nc{}class lu extends nc{constructor(e){super(),this.elements=e}}function uf(n,e){const t=$p(e);for(const s of n.elements)t.some(a=>la(a,s))||t.push(s);return{arrayValue:{values:t}}}class ka extends nc{constructor(e){super(),this.elements=e}}function cf(n,e){let t=$p(e);for(const s of n.elements)t=t.filter(a=>!la(a,s));return{arrayValue:{values:t}}}class il extends nc{constructor(e,t){super(),this.wt=e,this._t=t}}function lf(n){return _r(n.integerValue||n.doubleValue)}function $p(n){return Uu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class sl{constructor(e,t){this.field=e,this.transform=t}}class C0{constructor(e,t){this.version=e,this.transformResults=t}}class Nr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Nr}static exists(e){return new Nr(void 0,e)}static updateTime(e){return new Nr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gd(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class du{}function Hp(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Vu(n.key,Nr.none()):new ol(n.key,n.data,Nr.none());{const t=n.data,s=Rr.empty();let a=new Ln(Mr.comparator);for(let l of e.fields)if(!a.has(l)){let p=t.field(l);null===p&&l.length>1&&(l=l.popLast(),p=t.field(l)),null===p?s.delete(l):s.set(l,p),a=a.add(l)}return new hu(n.key,s,new oo(a.toArray()),Nr.none())}}function uy(n,e,t){n instanceof ol?function(s,a,l){const p=s.value.clone(),E=hf(s.fieldTransforms,a,l.transformResults);p.setAll(E),a.convertToFoundDocument(l.version,p).setHasCommittedMutations()}(n,e,t):n instanceof hu?function(s,a,l){if(!Gd(s.precondition,a))return void a.convertToUnknownDocument(l.version);const p=hf(s.fieldTransforms,a,l.transformResults),E=a.data;E.setAll(Gp(s)),E.setAll(p),a.convertToFoundDocument(l.version,E).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function zd(n,e,t,s){return n instanceof ol?function(a,l,p,E){if(!Gd(a.precondition,l))return p;const S=a.value.clone(),P=zp(a.fieldTransforms,E,l);return S.setAll(P),l.convertToFoundDocument(l.version,S).setHasLocalMutations(),null}(n,e,t,s):n instanceof hu?function(a,l,p,E){if(!Gd(a.precondition,l))return p;const S=zp(a.fieldTransforms,E,l),P=l.data;return P.setAll(Gp(a)),P.setAll(S),l.convertToFoundDocument(l.version,P).setHasLocalMutations(),null===p?null:p.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(G=>G.field))}(n,e,t,s):(p=t,Gd(n.precondition,l=e)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):p);var l,p}function df(n,e){let t=null;for(const s of n.fieldTransforms){const a=e.data.field(s.field),l=Hd(s.transform,a||null);null!=l&&(null===t&&(t=Rr.empty()),t.set(s.field,l))}return t||null}function cy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===s||t&&s&&su(t,s,(a,l)=>function T0(n,e){return n.field.isEqual(e.field)&&(s=e.transform,(t=n.transform)instanceof lu&&s instanceof lu||t instanceof ka&&s instanceof ka?su(t.elements,s.elements,la):t instanceof il&&s instanceof il?la(t._t,s._t):t instanceof cu&&s instanceof cu);var t,s}(a,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,s}class ol extends du{constructor(e,t,s,a=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class hu extends du{constructor(e,t,s,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Gp(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}}),e}function hf(n,e,t){const s=new Map;kt(n.length===t.length);for(let a=0;a<t.length;a++){const l=n[a],p=l.transform,E=e.data.field(l.field);s.set(l.field,jl(p,E,t[a]))}return s}function zp(n,e,t){const s=new Map;for(const a of n){const l=a.transform,p=t.data.field(a.field);s.set(a.field,$d(l,p,e))}return s}class Vu extends du{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $l extends du{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ly{constructor(e){this.count=e}}var Yr,Cn;function ff(n){switch(n){default:return gt();case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0}}function Hl(n){if(void 0===n)return Mn("GRPC error has no .code"),be.UNKNOWN;switch(n){case Yr.OK:return be.OK;case Yr.CANCELLED:return be.CANCELLED;case Yr.UNKNOWN:return be.UNKNOWN;case Yr.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case Yr.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case Yr.INTERNAL:return be.INTERNAL;case Yr.UNAVAILABLE:return be.UNAVAILABLE;case Yr.UNAUTHENTICATED:return be.UNAUTHENTICATED;case Yr.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case Yr.NOT_FOUND:return be.NOT_FOUND;case Yr.ALREADY_EXISTS:return be.ALREADY_EXISTS;case Yr.PERMISSION_DENIED:return be.PERMISSION_DENIED;case Yr.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case Yr.ABORTED:return be.ABORTED;case Yr.OUT_OF_RANGE:return be.OUT_OF_RANGE;case Yr.UNIMPLEMENTED:return be.UNIMPLEMENTED;case Yr.DATA_LOSS:return be.DATA_LOSS;default:return gt()}}(Cn=Yr||(Yr={}))[Cn.OK=0]="OK",Cn[Cn.CANCELLED=1]="CANCELLED",Cn[Cn.UNKNOWN=2]="UNKNOWN",Cn[Cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Cn[Cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Cn[Cn.NOT_FOUND=5]="NOT_FOUND",Cn[Cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Cn[Cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Cn[Cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Cn[Cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Cn[Cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Cn[Cn.ABORTED=10]="ABORTED",Cn[Cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Cn[Cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Cn[Cn.INTERNAL=13]="INTERNAL",Cn[Cn.UNAVAILABLE=14]="UNAVAILABLE",Cn[Cn.DATA_LOSS=15]="DATA_LOSS";class rc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[a,l]of s)if(this.equalsFn(a,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),a=this.inner[s];if(void 0===a)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return 1===s.length?delete this.inner[t]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ua(this.inner,(t,s)=>{for(const[a,l]of s)e(a,l)})}isEmpty(){return Od(this.inner)}size(){return this.innerSize}}const dy=new Br(ut.comparator);function ao(){return dy}const hy=new Br(ut.comparator);function Gl(...n){let e=hy;for(const t of n)e=e.insert(t.key,t);return e}function pf(n){let e=hy;return n.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Fa(){return zl()}function S0(){return zl()}function zl(){return new rc(n=>n.toString(),(n,e)=>n.isEqual(e))}const A0=new Br(ut.comparator),fy=new Ln(ut.comparator);function ln(...n){let e=fy;for(const t of n)e=e.add(t);return e}const x0=new Ln(Zt);function uo(){return x0}class Wd{constructor(e,t,s,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const s=new Map;return s.set(e,Wl.createSynthesizedTargetChangeForCurrentChange(e,t)),new Wd(Wt.min(),s,uo(),ao(),ln())}}class Wl{constructor(e,t,s,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Wl(Zr.EMPTY_BYTE_STRING,t,ln(),ln(),ln())}}class gf{constructor(e,t,s,a){this.gt=e,this.removedTargetIds=t,this.key=s,this.yt=a}}class py{constructor(e,t){this.targetId=e,this.It=t}}class gy{constructor(e,t,s=Zr.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=a}}class my{constructor(){this.Tt=0,this.Et=_y(),this.At=Zr.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=ln(),t=ln(),s=ln();return this.Et.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:s=s.add(a);break;default:gt()}}),new Wl(this.At,this.Rt,e,t,s)}Dt(){this.bt=!1,this.Et=_y()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class yy{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=ao(),this.Bt=vy(),this.Lt=new Ln(Zt)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const s=this.Qt(t);switch(e.state){case 0:this.jt(t)&&s.Vt(e.resumeToken);break;case 1:s.kt(),s.Pt||s.Dt(),s.Vt(e.resumeToken);break;case 2:s.kt(),s.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(s.Ot(),s.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),s.Vt(e.resumeToken));break;default:gt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((s,a)=>{this.jt(a)&&t(a)})}zt(e){const t=e.targetId,s=e.It.count,a=this.Ht(t);if(a){const l=a.target;if(Ls(l))if(0===s){const p=new ut(l.path);this.Kt(t,p,Yn.newNoDocument(p,Wt.min()))}else kt(1===s);else this.Jt(t)!==s&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((l,p)=>{const E=this.Ht(p);if(E){if(l.current&&Ls(E.target)){const S=new ut(E.target.path);null!==this.$t.get(S)||this.Xt(p,S)||this.Kt(p,S,Yn.newNoDocument(S,e))}l.vt&&(t.set(p,l.St()),l.Dt())}});let s=ln();this.Bt.forEach((l,p)=>{let E=!0;p.forEachWhile(S=>{const P=this.Ht(S);return!P||2===P.purpose||(E=!1,!1)}),E&&(s=s.add(l))}),this.$t.forEach((l,p)=>p.setReadTime(e));const a=new Wd(e,t,this.Lt,this.$t,s);return this.$t=ao(),this.Bt=vy(),this.Lt=new Ln(Zt),a}qt(e,t){if(!this.jt(e))return;const s=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,s),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,s){if(!this.jt(e))return;const a=this.Qt(e);this.Xt(e,t)?a.Ct(t,1):a.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),s&&(this.$t=this.$t.insert(t,s))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new my,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new Ln(Zt),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Ze("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new my),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function vy(){return new Br(ut.comparator)}function _y(){return new Br(ut.comparator)}const M0={asc:"ASCENDING",desc:"DESCENDING"},tn={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Ey{constructor(e,t){this.databaseId=e,this.dt=t}}function Kl(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Wp(n,e){return n.dt?e.toBase64():e.toUint8Array()}function mf(n,e){return Kl(n,e.toTimestamp())}function sr(n){return kt(!!n),Wt.fromTimestamp(function(e){const t=xa(e);return new vr(t.seconds,t.nanos)}(n))}function yf(n,e){return(t=n,new yn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function wy(n){const e=yn.fromString(n);return kt(Ef(e)),e}function al(n,e){return yf(n.databaseId,e.path)}function zi(n,e){const t=wy(e);if(t.get(1)!==n.databaseId.projectId)throw new qe(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new qe(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ut(R0(t))}function Kd(n,e){return yf(n.databaseId,e)}function Kp(n){const e=wy(n);return 4===e.length?yn.emptyPath():R0(e)}function ul(n){return new yn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function R0(n){return kt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function qp(n,e,t){return{name:al(n,e),fields:t.value.mapValue.fields}}function O0(n,e,t){const s=zi(n,e.name),a=sr(e.updateTime),l=new Rr({mapValue:{fields:e.fields}}),p=Yn.newFoundDocument(s,a,l);return t&&p.setHasCommittedMutations(),t?p.setHasCommittedMutations():p}function cl(n,e){let t;if(e instanceof ol)t={update:qp(n,e.key,e.value)};else if(e instanceof Vu)t={delete:al(n,e.key)};else if(e instanceof hu)t={update:qp(n,e.key,e.data),updateMask:k0(e.fieldMask)};else{if(!(e instanceof $l))return gt();t={verify:al(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(a,l){const p=l.transform;if(p instanceof cu)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof lu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof ka)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof il)return{fieldPath:l.field.canonicalString(),increment:p._t};throw gt()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:mf(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:gt()),t;var a}function qd(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Nr.updateTime(sr(a.updateTime)):void 0!==a.exists?Nr.exists(a.exists):Nr.none():Nr.none(),s=e.updateTransforms?e.updateTransforms.map(a=>function(l,p){let E=null;"setToServerValue"in p?(kt("REQUEST_TIME"===p.setToServerValue),E=new cu):"appendMissingElements"in p?E=new lu(p.appendMissingElements.values||[]):"removeAllFromArray"in p?E=new ka(p.removeAllFromArray.values||[]):"increment"in p?E=new il(l,p.increment):gt();const S=Mr.fromServerFormat(p.fieldPath);return new sl(S,E)}(n,a)):[];var a;if(e.update){const a=zi(n,e.update.name),l=new Rr({mapValue:{fields:e.update.fields}});if(e.updateMask){const p=new oo((e.updateMask.fieldPaths||[]).map(P=>Mr.fromServerFormat(P)));return new hu(a,l,p,t,s)}return new ol(a,l,t,s)}if(e.delete){const a=zi(n,e.delete);return new Vu(a,t)}if(e.verify){const a=zi(n,e.verify);return new $l(a,t)}return gt()}function N0(n,e){return{documents:[Kd(n,e.path)]}}function Iy(n,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=Kd(n,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Kd(n,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const a=function(S){if(0===S.length)return;const P=S.map(G=>function(Q){if("=="===Q.op){if(Ul(Q.value))return{unaryFilter:{field:ql(Q.field),op:"IS_NAN"}};if(kd(Q.value))return{unaryFilter:{field:ql(Q.field),op:"IS_NULL"}}}else if("!="===Q.op){if(Ul(Q.value))return{unaryFilter:{field:ql(Q.field),op:"IS_NOT_NAN"}};if(kd(Q.value))return{unaryFilter:{field:ql(Q.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ql(Q.field),op:eI(Q.op),value:Q.value}}}(G));return 1===P.length?P[0]:{compositeFilter:{op:"AND",filters:P}}}(e.filters);a&&(t.structuredQuery.where=a);const l=function(S){if(0!==S.length)return S.map(P=>{return{field:ql((G=P).field),direction:Ty(G.dir)};var G})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const p=(P=e.limit,n.dt||Zn(P)?P:{value:P});var P,E,S;return null!==p&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt={before:(E=e.startAt).inclusive,values:E.position}),e.endAt&&(t.structuredQuery.endAt={before:!(S=e.endAt).inclusive,values:S.position}),t}function Dy(n){let e=Kp(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let a=null;if(s>0){kt(1===s);const G=t.from[0];G.allDescendants?a=G.collectionId:e=e.child(G.collectionId)}let l=[];t.where&&(l=by(t.where));let p=[];t.orderBy&&(p=t.orderBy.map(G=>{return new tc(Zd((Q=G).field),function(Ee){switch(Ee){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Q.direction));var Q}));let E=null;t.limit&&(E=function(G){let Q;return Q="object"==typeof G?G.value:G,Zn(Q)?null:Q}(t.limit));let S=null;var G;t.startAt&&(S=new Na((G=t.startAt).values||[],!!G.before));let P=null;return t.endAt&&(P=function(G){return new Na(G.values||[],!G.before)}(t.endAt)),Lo(e,a,p,l,E,"F",S,P)}function by(n){return n?void 0!==n.unaryFilter?[Sy(n)]:void 0!==n.fieldFilter?[Cy(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>by(e)).reduce((e,t)=>e.concat(t)):gt():[]}function Ty(n){return M0[n]}function eI(n){return tn[n]}function ql(n){return{fieldPath:n.canonicalString()}}function Zd(n){return Mr.fromServerFormat(n.fieldPath)}function Cy(n){return Si.create(Zd(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gt()}}(n.fieldFilter.op),n.fieldFilter.value)}function Sy(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Zd(n.unaryFilter.field);return Si.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Zd(n.unaryFilter.field);return Si.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Zd(n.unaryFilter.field);return Si.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Zd(n.unaryFilter.field);return Si.create(a,"!=",{nullValue:"NULL_VALUE"});default:return gt()}}function k0(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Ef(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function co(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=F0(e)),e=tI(n.get(t),e);return F0(e)}function tI(n,e){let t=e;const s=n.length;for(let a=0;a<s;a++){const l=n.charAt(a);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function F0(n){return n+"\x01\x01"}function Bu(n){const e=n.length;if(kt(e>=2),2===e)return kt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),yn.emptyPath();const t=e-2,s=[];let a="";for(let l=0;l<e;){const p=n.indexOf("\x01",l);switch((p<0||p>t)&&gt(),n.charAt(p+1)){case"\x01":const E=n.substring(l,p);let S;0===a.length?S=E:(a+=E,S=a,a=""),s.push(S);break;case"\x10":a+=n.substring(l,p),a+="\0";break;case"\x11":a+=n.substring(l,p+1);break;default:gt()}l=p+2}return new yn(s)}const L0=["userId","batchId"];function Yp(n,e){return[n,co(e)]}function U0(n,e,t){return[n,co(e),t]}const nI={},rI=["prefixPath","collectionGroup","readTime","documentId"],iI=["prefixPath","collectionGroup","documentId"],ic=["collectionGroup","readTime","prefixPath","documentId"],Qp=["canonicalId","targetId"],V0=["targetId","path"],Ay=["path","targetId"],Jp=["collectionId","parent"],xy=["indexId","uid"],Xp=["uid","sequenceNumber"],B0=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],sc=["indexId","uid","orderedDocumentKey"],My=["userId","collectionPath","documentId"],j0=["userId","collectionPath","largestBatchId"],eg=["userId","collectionGroup","largestBatchId"],Ry=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Oy=[...Ry,"documentOverlays"],Ny=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Py=Ny,Yd=[...Py,"indexConfiguration","indexState","indexEntries"];class oc extends xd{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function yi(n,e){const t=it(n);return io.N(t.ee,e)}class ac{constructor(e,t,s,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&uy(l,e,s[a])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=zd(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=zd(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=S0();return this.mutations.forEach(a=>{const l=e.get(a.key),p=l.overlayedDocument;let E=this.applyToLocalView(p,l.mutatedFields);E=t.has(a.key)?null:E;const S=Hp(p,E);null!==S&&s.set(a.key,S),p.isValidDocument()||p.convertToNoDocument(Wt.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ln())}isEqual(e){return this.batchId===e.batchId&&su(this.mutations,e.mutations,(t,s)=>cy(t,s))&&su(this.baseMutations,e.baseMutations,(t,s)=>cy(t,s))}}class ll{constructor(e,t,s,a){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=a}static from(e,t,s){kt(e.mutations.length===s.length);let a=A0;const l=e.mutations;for(let p=0;p<l.length;p++)a=a.insert(l[p].key,s[p].version);return new ll(e,t,s,a)}}class uc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class cc{constructor(e,t,s,a,l=Wt.min(),p=Wt.min(),E=Zr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=E}withSequenceNumber(e){return new cc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new cc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new cc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class tg{constructor(e){this.ne=e}}function wf(n,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Zl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:al(a=n.ne,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:Kl(a,l.version.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:lc(e.version)};else{if(!e.isUnknownDocument())return gt();s.unknownDocument={path:t.path.toArray(),version:lc(e.version)}}var a,l;return s}function Zl(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function lc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function fu(n){const e=new vr(n.seconds,n.nanoseconds);return Wt.fromTimestamp(e)}function dl(n,e){const t=(e.baseMutations||[]).map(l=>qd(n.ne,l));for(let l=0;l<e.mutations.length-1;++l){const p=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(p.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const s=e.mutations.map(l=>qd(n.ne,l)),a=vr.fromMillis(e.localWriteTimeMs);return new ac(e.batchId,a,t,s)}function Yl(n){const e=fu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?fu(n.lastLimboFreeSnapshotVersion):Wt.min();let s;var a;return void 0!==n.query.documents?(kt(1===(a=n.query).documents.length),s=se(g(Kp(a.documents[0])))):s=se(Dy(n.query)),new cc(s,n.targetId,0,n.lastListenSequenceNumber,e,t,Zr.fromBase64String(n.resumeToken))}function $0(n,e){const t=lc(e.snapshotVersion),s=lc(e.lastLimboFreeSnapshotVersion);let a;a=Ls(e.target)?N0(n.ne,e.target):Iy(n.ne,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ra(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:a}}function If(n){const e=Dy({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Me(e,e.limit,"L"):e}function Df(n,e){return new uc(e.largestBatchId,qd(n.ne,e.overlayMutation))}function Fy(n,e){const t=e.path.lastSegment();return[n,co(e.path.popLast()),t]}function ng(n,e,t,s){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:lc(s.readTime),documentKey:co(s.documentKey.path),largestBatchId:s.largestBatchId}}class H0{getBundleMetadata(e,t){return Ly(e).get(t).next(s=>{if(s)return{id:(a=s).bundleId,createTime:fu(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return Ly(e).put({bundleId:(s=t).id,createTime:lc(sr(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return lo(e).get(t).next(s=>{if(s)return{name:(a=s).name,query:If(a.bundledQuery),readTime:fu(a.readTime)};var a})}saveNamedQuery(e,t){return lo(e).put({name:(s=t).name,readTime:lc(sr(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Ly(n){return yi(n,"bundles")}function lo(n){return yi(n,"namedQueries")}class bf{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new bf(e,t.uid||"")}getOverlay(e,t){return Qd(e).get(Fy(this.userId,t)).next(s=>s?Df(this.wt,s):null)}getOverlays(e,t){const s=Fa();return De.forEach(t,a=>this.getOverlay(e,a).next(l=>{null!==l&&s.set(a,l)})).next(()=>s)}saveOverlays(e,t,s){const a=[];return s.forEach((l,p)=>{const E=new uc(t,p);a.push(this.ie(e,E))}),De.waitFor(a)}removeOverlaysForBatchId(e,t,s){const a=new Set;t.forEach(p=>a.add(co(p.getCollectionPath())));const l=[];return a.forEach(p=>{const E=IDBKeyRange.bound([this.userId,p,s],[this.userId,p,s+1],!1,!0);l.push(Qd(e).W("collectionPathOverlayIndex",E))}),De.waitFor(l)}getOverlaysForCollection(e,t,s){const a=Fa(),l=co(t),p=IDBKeyRange.bound([this.userId,l,s],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Qd(e).K("collectionPathOverlayIndex",p).next(E=>{for(const S of E){const P=Df(this.wt,S);a.set(P.getKey(),P)}return a})}getOverlaysForCollectionGroup(e,t,s,a){const l=Fa();let p;const E=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Qd(e).J({index:"collectionGroupOverlayIndex",range:E},(S,P,G)=>{const Q=Df(this.wt,P);l.size()<a||Q.largestBatchId===p?(l.set(Q.getKey(),Q),p=Q.largestBatchId):G.done()}).next(()=>l)}ie(e,t){return Qd(e).put(function(s,a,l){const[p,E,S]=Fy(a,l.mutation.key);return{userId:a,collectionPath:E,documentId:S,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:cl(s.ne,l.mutation)}}(this.wt,this.userId,t))}}function Qd(n){return yi(n,"documentOverlays")}class Ql{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(_r(e.integerValue));else if("doubleValue"in e){const s=_r(e.doubleValue);isNaN(s)?this.ce(t,13):(this.ce(t,15),qc(s)?t.ae(0):t.ae(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ce(t,20),"string"==typeof s?t.he(s):(t.he(`${s.seconds||""}`),t.ae(s.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Pu(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ce(t,45),t.ae(s.latitude||0),t.ae(s.longitude||0)}else"mapValue"in e?Qc(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):gt()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const s=e.fields||{};this.ce(t,55);for(const a of Object.keys(s))this.le(a,t),this.oe(s[a],t)}me(e,t){const s=e.values||[];this.ce(t,50);for(const a of s)this.oe(a,t)}_e(e,t){this.ce(t,37),ut.fromName(e).path.forEach(s=>{this.ce(t,60),this.ge(s,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function sI(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function rg(n){const e=64-function(t){let s=0;for(let a=0;a<8;++a){const l=sI(255&t[a]);if(s+=l,8!==l)break}return s}(n);return Math.ceil(e/8)}Ql.ye=new Ql;class oI{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ie(s.value),s=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ae(s.value),s=t.next();this.Re()}be(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ie(s);else if(s<2048)this.Ie(960|s>>>6),this.Ie(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|s>>>12),this.Ie(128|63&s>>>6),this.Ie(128|63&s);else{const a=t.codePointAt(0);this.Ie(240|a>>>18),this.Ie(128|63&a>>>12),this.Ie(128|63&a>>>6),this.Ie(128|63&a)}}this.Te()}Pe(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ae(s);else if(s<2048)this.Ae(960|s>>>6),this.Ae(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|s>>>12),this.Ae(128|63&s>>>6),this.Ae(128|63&s);else{const a=t.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}this.Re()}ve(e){const t=this.Ve(e),s=rg(t);this.Se(1+s),this.buffer[this.position++]=255&s;for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=255&t[a]}De(e){const t=this.Ve(e),s=rg(t);this.Se(1+s),this.buffer[this.position++]=~(255&s);for(let a=t.length-s;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let a=1;a<t.length;++a)t[a]^=s?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const a=new Uint8Array(s);a.set(this.buffer),this.buffer=a}}class G0{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class ig{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class Jl{constructor(){this.Me=new oI,this.Fe=new G0(this.Me),this.$e=new ig(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class hl{constructor(e,t,s,a){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=a}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new hl(this.indexId,this.documentKey,this.arrayValue,s)}}function fl(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Uy(n.arrayValue,e.arrayValue),0!==t?t:(t=Uy(n.directionalValue,e.directionalValue),0!==t?t:ut.comparator(n.documentKey,e.documentKey)))}function Uy(n,e){for(let t=0;t<n.length&&t<e.length;++t){const s=n[t]-e[t];if(0!==s)return s}return n.length-e.length}class Vy{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const s=t;s.ht()?this.Ke=s:this.qe.push(s)}}Ge(e){const t=Fl(e);if(void 0!==t&&!this.Qe(t))return!1;const s=Ou(e);let a=0,l=0;for(;a<s.length&&this.Qe(s[a]);++a);if(a===s.length)return!0;if(void 0!==this.Ke){const p=s[a];if(!this.je(this.Ke,p)||!this.We(this.Ue[l++],p))return!1;++a}for(;a<s.length;++a){const p=s[a];if(l>=this.Ue.length||!this.We(this.Ue[l++],p))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class z0{constructor(){this.ze=new Tf}addToCollectionParentIndex(e,t){return this.ze.add(t),De.resolve()}getCollectionParents(e,t){return De.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return De.resolve()}deleteFieldIndex(e,t){return De.resolve()}getDocumentsMatchingTarget(e,t){return De.resolve(null)}getIndexType(e,t){return De.resolve(0)}getFieldIndexes(e,t){return De.resolve([])}getNextCollectionGroupToUpdate(e){return De.resolve(null)}getMinOffset(e,t){return De.resolve(Kr.min())}getMinOffsetFromCollectionGroup(e,t){return De.resolve(Kr.min())}updateCollectionGroup(e,t,s){return De.resolve()}updateIndexEntries(e,t){return De.resolve()}}class Tf{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t]||new Ln(yn.comparator),l=!a.has(s);return this.index[t]=a.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),a=this.index[t];return a&&a.has(s)}getEntries(e){return(this.index[e]||new Ln(yn.comparator)).toArray()}}const Cf=new Uint8Array(0);class W0{constructor(e,t){this.user=e,this.databaseId=t,this.He=new Tf,this.Je=new rc(s=>Ra(s),(s,a)=>Jc(s,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const s=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const l={collectionId:s,parent:co(a)};return sg(e).put(l)}return De.resolve()}getCollectionParents(e,t){const s=[],a=IDBKeyRange.bound([t,""],[Ru(t),""],!1,!0);return sg(e).K(a).next(l=>{for(const p of l){if(p.collectionId!==t)break;s.push(Bu(p.parent))}return s})}addFieldIndex(e,t){const s=Sf(e),a={indexId:(p=t).indexId,collectionGroup:p.collectionGroup,fields:p.fields.map(E=>[E.fieldPath.canonicalString(),E.kind])};var p;delete a.indexId;const l=s.add(a);if(t.indexState){const p=ho(e);return l.next(E=>{p.put(ng(E,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const s=Sf(e),a=ho(e),l=Xl(e);return s.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=Xl(e);let a=!0;const l=new Map;return De.forEach(this.Ye(t),p=>this.Xe(e,p).next(E=>{a&&(a=!!E),l.set(p,E)})).next(()=>{if(a){let p=ln();const E=[];return De.forEach(l,(S,P)=>{var G;Ze("IndexedDbIndexManager",`Using index ${G=S,`id=${G.indexId}|cg=${G.collectionGroup}|f=${G.fields.map(Un=>`${Un.fieldPath}:${Un.kind}`).join(",")}`} to execute ${Ra(t)}`);const Q=function(Un,vn){const wn=Fl(vn);if(void 0===wn)return null;for(const dn of Xc(Un,wn.fieldPath))switch(dn.op){case"array-contains-any":return dn.value.arrayValue.values||[];case"array-contains":return[dn.value]}return null}(P,S),Ee=function(Un,vn){const wn=new Map;for(const dn of Ou(vn))for(const Ds of Xc(Un,dn.fieldPath))switch(Ds.op){case"==":case"in":wn.set(dn.fieldPath.canonicalString(),Ds.value);break;case"not-in":case"!=":return wn.set(dn.fieldPath.canonicalString(),Ds.value),Array.from(wn.values())}return null}(P,S),Oe=function(Un,vn){const wn=[];let dn=!0;for(const Ds of Ou(vn)){const Op=0===Ds.kind?ef(Un,Ds.fieldPath,Un.startAt):el(Un,Ds.fieldPath,Un.startAt);wn.push(Op.value),dn&&(dn=Op.inclusive)}return new Na(wn,dn)}(P,S),We=function(Un,vn){const wn=[];let dn=!0;for(const Ds of Ou(vn)){const Op=0===Ds.kind?el(Un,Ds.fieldPath,Un.endAt):ef(Un,Ds.fieldPath,Un.endAt);wn.push(Op.value),dn&&(dn=Op.inclusive)}return new Na(wn,dn)}(P,S),ht=this.Ze(S,P,Oe),It=this.Ze(S,P,We),En=this.tn(S,P,Ee),zn=this.en(S.indexId,Q,ht,Oe.inclusive,It,We.inclusive,En);return De.forEach(zn,Un=>s.j(Un,t.limit).next(vn=>{vn.forEach(wn=>{const dn=ut.fromSegments(wn.documentKey);p.has(dn)||(p=p.add(dn),E.push(dn))})}))}).next(()=>E)}return De.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,s,a,l,p,E){const S=(null!=t?t.length:1)*Math.max(s.length,l.length),P=S/(null!=t?t.length:1),G=[];for(let Q=0;Q<S;++Q){const Ee=t?this.nn(t[Q/P]):Cf,Oe=this.sn(e,Ee,s[Q%P],a),We=this.rn(e,Ee,l[Q%P],p),ht=E.map(It=>this.sn(e,Ee,It,!0));G.push(...this.createRange(Oe,We,ht))}return G}sn(e,t,s,a){const l=new hl(e,ut.empty(),t,s);return a?l:l.Le()}rn(e,t,s,a){const l=new hl(e,ut.empty(),t,s);return a?l.Le():l}Xe(e,t){const s=new Vy(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(l=>{let p=null;for(const E of l)s.Ge(E)&&(!p||E.fields.length>p.fields.length)&&(p=E);return p})}getIndexType(e,t){let s=2;return De.forEach(this.Ye(t),a=>this.Xe(e,a).next(l=>{l?0!==s&&l.fields.length<function(p){let E=new Ln(Mr.comparator),S=!1;for(const P of p.filters){const G=P;G.field.isKeyField()||("array-contains"===G.op||"array-contains-any"===G.op?S=!0:E=E.add(G.field))}for(const P of p.orderBy)P.field.isKeyField()||(E=E.add(P.field));return E.size+(S?1:0)}(a)&&(s=1):s=0})).next(()=>s)}on(e,t){const s=new Jl;for(const a of Ou(e)){const l=t.data.field(a.fieldPath);if(null==l)return null;const p=s.Be(a.kind);Ql.ye.re(l,p)}return s.Oe()}nn(e){const t=new Jl;return Ql.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const s=new Jl;return Ql.ye.re(ko(this.databaseId,t),s.Be(function(a){const l=Ou(a);return 0===l.length?0:l[l.length-1].kind}(e))),s.Oe()}tn(e,t,s){if(null===s)return[];let a=[];a.push(new Jl);let l=0;for(const p of Ou(e)){const E=s[l++];for(const S of a)if(this.cn(t,p.fieldPath)&&Uu(E))a=this.an(a,p,E);else{const P=S.Be(p.kind);Ql.ye.re(E,P)}}return this.hn(a)}Ze(e,t,s){return this.tn(e,t,s.position)}hn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Oe();return t}an(e,t,s){const a=[...e],l=[];for(const p of s.arrayValue.values||[])for(const E of a){const S=new Jl;S.seed(E.Oe()),Ql.ye.re(p,S.Be(t.kind)),l.push(S)}return l}cn(e,t){return!!e.filters.find(s=>s instanceof Si&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=Sf(e),a=ho(e);return(t?s.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.K()).next(l=>{const p=[];return De.forEach(l,E=>a.get([E.indexId,this.uid]).next(S=>{p.push(function(P,G){const Q=G?new zc(G.sequenceNumber,new Kr(fu(G.readTime),new ut(Bu(G.documentKey)),G.largestBatchId)):zc.empty(),Ee=P.fields.map(([Oe,We])=>new Gc(Mr.fromServerFormat(Oe),We));return new Hc(P.indexId,P.collectionGroup,Ee,Q)}(E,S))})).next(()=>p)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,a)=>{const l=s.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==l?l:Zt(s.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const a=Sf(e),l=ho(e);return this.ln(e).next(p=>a.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(E=>De.forEach(E,S=>l.put(ng(S.indexId,this.user,p,s)))))}updateIndexEntries(e,t){const s=new Map;return De.forEach(t,(a,l)=>{const p=s.get(a.collectionGroup);return(p?De.resolve(p):this.getFieldIndexes(e,a.collectionGroup)).next(E=>(s.set(a.collectionGroup,E),De.forEach(E,S=>this.fn(e,a,S).next(P=>{const G=this.dn(l,S);return P.isEqual(G)?De.resolve():this._n(e,l,S,P,G)}))))})}wn(e,t,s,a){return Xl(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.un(s,t.key),documentKey:t.key.path.toArray()})}mn(e,t,s,a){return Xl(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.un(s,t.key),t.key.path.toArray()])}fn(e,t,s){const a=Xl(e);let l=new Ln(fl);return a.J({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.un(s,t)])},(p,E)=>{l=l.add(new hl(s.indexId,t,E.arrayValue,E.directionalValue))}).next(()=>l)}dn(e,t){let s=new Ln(fl);const a=this.on(t,e);if(null==a)return s;const l=Fl(t);if(null!=l){const p=e.data.field(l.fieldPath);if(Uu(p))for(const E of p.arrayValue.values||[])s=s.add(new hl(t.indexId,e.key,this.nn(E),a))}else s=s.add(new hl(t.indexId,e.key,Cf,a));return s}_n(e,t,s,a,l){Ze("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const p=[];return function(E,S,P,G,Q){const Ee=E.getIterator(),Oe=S.getIterator();let We=au(Ee),ht=au(Oe);for(;We||ht;){let It=!1,En=!1;if(We&&ht){const zn=P(We,ht);zn<0?En=!0:zn>0&&(It=!0)}else null!=We?En=!0:It=!0;It?(G(ht),ht=au(Oe)):En?(Q(We),We=au(Ee)):(We=au(Ee),ht=au(Oe))}}(a,l,fl,E=>{p.push(this.wn(e,t,s,E))},E=>{p.push(this.mn(e,t,s,E))}),De.waitFor(p)}ln(e){let t=1;return ho(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,a,l)=>{l.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((p,E)=>fl(p,E)).filter((p,E,S)=>!E||0!==fl(p,S[E-1]));const a=[];a.push(e);for(const p of s){const E=fl(p,e),S=fl(p,t);if(0===E)a[0]=e.Le();else if(E>0&&S<0)a.push(p),a.push(p.Le());else if(S>0)break}a.push(t);const l=[];for(let p=0;p<a.length;p+=2)l.push(IDBKeyRange.bound([a[p].indexId,this.uid,a[p].arrayValue,a[p].directionalValue,Cf,[]],[a[p+1].indexId,this.uid,a[p+1].arrayValue,a[p+1].directionalValue,Cf,[]]));return l}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Af)}getMinOffset(e,t){return De.mapArray(this.Ye(t),s=>this.Xe(e,s).next(a=>a||gt())).next(Af)}}function sg(n){return yi(n,"collectionParents")}function Xl(n){return yi(n,"indexEntries")}function Sf(n){return yi(n,"indexConfiguration")}function ho(n){return yi(n,"indexState")}function Af(n){kt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<n.length;s++){const a=n[s].indexState.offset;Aa(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Kr(e.readTime,e.documentKey,t)}const By={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class fo{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new fo(e,fo.DEFAULT_COLLECTION_PERCENTILE,fo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function K0(n,e,t){const s=n.store("mutations"),a=n.store("documentMutations"),l=[],p=IDBKeyRange.only(t.batchId);let E=0;const S=s.J({range:p},(G,Q,Ee)=>(E++,Ee.delete()));l.push(S.next(()=>{kt(1===E)}));const P=[];for(const G of t.mutations){const Q=U0(e,G.key.path,t.batchId);l.push(a.delete(Q)),P.push(G.key)}return De.waitFor(l).next(()=>P)}function Jd(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw gt();e=n.noDocument}return JSON.stringify(e).length}fo.DEFAULT_COLLECTION_PERCENTILE=10,fo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fo.DEFAULT=new fo(41943040,fo.DEFAULT_COLLECTION_PERCENTILE,fo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fo.DISABLED=new fo(-1,0,0);class xf{constructor(e,t,s,a){this.userId=e,this.wt=t,this.indexManager=s,this.referenceDelegate=a,this.gn={}}static se(e,t,s,a){kt(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new xf(l,t,s,a)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return dc(e).J({index:"userMutationsIndex",range:s},(a,l,p)=>{t=!1,p.done()}).next(()=>t)}addMutationBatch(e,t,s,a){const l=hc(e),p=dc(e);return p.add({}).next(E=>{kt("number"==typeof E);const S=new ac(E,t,s,a),P=function(Ee,Oe,We){const ht=We.baseMutations.map(En=>cl(Ee.ne,En)),It=We.mutations.map(En=>cl(Ee.ne,En));return{userId:Oe,batchId:We.batchId,localWriteTimeMs:We.localWriteTime.toMillis(),baseMutations:ht,mutations:It}}(this.wt,this.userId,S),G=[];let Q=new Ln((Ee,Oe)=>Zt(Ee.canonicalString(),Oe.canonicalString()));for(const Ee of a){const Oe=U0(this.userId,Ee.key.path,E);Q=Q.add(Ee.key.path.popLast()),G.push(p.put(P)),G.push(l.put(Oe,nI))}return Q.forEach(Ee=>{G.push(this.indexManager.addToCollectionParentIndex(e,Ee))}),e.addOnCommittedListener(()=>{this.gn[E]=S.keys()}),De.waitFor(G).next(()=>S)})}lookupMutationBatch(e,t){return dc(e).get(t).next(s=>s?(kt(s.userId===this.userId),dl(this.wt,s)):null)}yn(e,t){return this.gn[t]?De.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const a=s.keys();return this.gn[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,a=IDBKeyRange.lowerBound([this.userId,s]);let l=null;return dc(e).J({index:"userMutationsIndex",range:a},(p,E,S)=>{E.userId===this.userId&&(kt(E.batchId>=s),l=dl(this.wt,E)),S.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return dc(e).J({index:"userMutationsIndex",range:t,reverse:!0},(a,l,p)=>{s=l.batchId,p.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return dc(e).K("userMutationsIndex",t).next(s=>s.map(a=>dl(this.wt,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=Yp(this.userId,t.path),a=IDBKeyRange.lowerBound(s),l=[];return hc(e).J({range:a},(p,E,S)=>{const[P,G,Q]=p,Ee=Bu(G);if(P===this.userId&&t.path.isEqual(Ee))return dc(e).get(Q).next(Oe=>{if(!Oe)throw gt();kt(Oe.userId===this.userId),l.push(dl(this.wt,Oe))});S.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ln(Zt);const a=[];return t.forEach(l=>{const p=Yp(this.userId,l.path),E=IDBKeyRange.lowerBound(p),S=hc(e).J({range:E},(P,G,Q)=>{const[Ee,Oe,We]=P,ht=Bu(Oe);Ee===this.userId&&l.path.isEqual(ht)?s=s.add(We):Q.done()});a.push(S)}),De.waitFor(a).next(()=>this.pn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1,l=Yp(this.userId,s),p=IDBKeyRange.lowerBound(l);let E=new Ln(Zt);return hc(e).J({range:p},(S,P,G)=>{const[Q,Ee,Oe]=S,We=Bu(Ee);Q===this.userId&&s.isPrefixOf(We)?We.length===a&&(E=E.add(Oe)):G.done()}).next(()=>this.pn(e,E))}pn(e,t){const s=[],a=[];return t.forEach(l=>{a.push(dc(e).get(l).next(p=>{if(null===p)throw gt();kt(p.userId===this.userId),s.push(dl(this.wt,p))}))}),De.waitFor(a).next(()=>s)}removeMutationBatch(e,t){return K0(e.ee,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),De.forEach(s,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return De.resolve();const s=IDBKeyRange.lowerBound([this.userId]),a=[];return hc(e).J({range:s},(l,p,E)=>{if(l[0]===this.userId){const S=Bu(l[1]);a.push(S)}else E.done()}).next(()=>{kt(0===a.length)})})}containsKey(e,t){return jy(e,this.userId,t)}Tn(e){return $y(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function jy(n,e,t){const s=Yp(e,t.path),a=s[1],l=IDBKeyRange.lowerBound(s);let p=!1;return hc(n).J({range:l,H:!0},(E,S,P)=>{const[G,Q,Ee]=E;G===e&&Q===a&&(p=!0),P.done()}).next(()=>p)}function dc(n){return yi(n,"mutations")}function hc(n){return yi(n,"documentMutations")}function $y(n){return yi(n,"mutationQueues")}class pl{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new pl(0)}static Rn(){return new pl(-1)}}class Mf{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const s=new pl(t.highestTargetId);return t.highestTargetId=s.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>Wt.fromTimestamp(new vr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.bn(e).next(a=>(a.highestListenSequenceNumber=t,s&&(a.lastRemoteSnapshotVersion=s.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Pn(e,a)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(s=>(s.targetCount+=1,this.Vn(t,s),this.Pn(e,s))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>fc(e).delete(t.targetId)).next(()=>this.bn(e)).next(s=>(kt(s.targetCount>0),s.targetCount-=1,this.Pn(e,s)))}removeTargets(e,t,s){let a=0;const l=[];return fc(e).J((p,E)=>{const S=Yl(E);S.sequenceNumber<=t&&null===s.get(S.targetId)&&(a++,l.push(this.removeTargetData(e,S)))}).next(()=>De.waitFor(l)).next(()=>a)}forEachTarget(e,t){return fc(e).J((s,a)=>{const l=Yl(a);t(l)})}bn(e){return Hy(e).get("targetGlobalKey").next(t=>(kt(null!==t),t))}Pn(e,t){return Hy(e).put("targetGlobalKey",t)}vn(e,t){return fc(e).put($0(this.wt,t))}Vn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=Ra(t),a=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let l=null;return fc(e).J({range:a,index:"queryTargetsIndex"},(p,E,S)=>{const P=Yl(E);Jc(t,P.target)&&(l=P,S.done())}).next(()=>l)}addMatchingKeys(e,t,s){const a=[],l=pu(e);return t.forEach(p=>{const E=co(p.path);a.push(l.put({targetId:s,path:E})),a.push(this.referenceDelegate.addReference(e,s,p))}),De.waitFor(a)}removeMatchingKeys(e,t,s){const a=pu(e);return De.forEach(t,l=>{const p=co(l.path);return De.waitFor([a.delete([s,p]),this.referenceDelegate.removeReference(e,s,l)])})}removeMatchingKeysForTargetId(e,t){const s=pu(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(a)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),a=pu(e);let l=ln();return a.J({range:s,H:!0},(p,E,S)=>{const P=Bu(p[1]),G=new ut(P);l=l.add(G)}).next(()=>l)}containsKey(e,t){const s=co(t.path),a=IDBKeyRange.bound([s],[Ru(s)],!1,!0);let l=0;return pu(e).J({index:"documentTargetsIndex",H:!0,range:a},([p,E],S,P)=>{0!==p&&(l++,P.done())}).next(()=>l>0)}te(e,t){return fc(e).get(t).next(s=>s?Yl(s):null)}}function fc(n){return yi(n,"targets")}function Hy(n){return yi(n,"targetGlobal")}function pu(n){return yi(n,"targetDocuments")}function Rf([n,e],[t,s]){const a=Zt(n,t);return 0===a?Zt(e,s):a}class Gy{constructor(e){this.Sn=e,this.buffer=new Ln(Rf),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Rf(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class q0{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Ze("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ae.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){ou(s)?Ze("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield Nu(s)}yield t.kn(3e5)}))}}class Z0{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return De.resolve(qr.ot);const s=new Gy(t);return this.On.forEachTarget(e,a=>s.xn(a.sequenceNumber)).next(()=>this.On.Fn(e,a=>s.xn(a))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.On.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ze("LruGarbageCollector","Garbage collection skipped; disabled"),De.resolve(By)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),By):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let s,a,l,p,E,S,P;const G=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Q=>(Q>this.params.maximumSequenceNumbersToCollect?(Ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Q}`),a=this.params.maximumSequenceNumbersToCollect):a=Q,p=Date.now(),this.nthSequenceNumber(e,a))).next(Q=>(s=Q,E=Date.now(),this.removeTargets(e,s,t))).next(Q=>(l=Q,S=Date.now(),this.removeOrphanedDocuments(e,s))).next(Q=>(P=Date.now(),ui()<=un.in.DEBUG&&Ze("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${p-G}ms\n\tDetermined least recently used ${a} in `+(E-p)+`ms\n\tRemoved ${l} targets in `+(S-E)+`ms\n\tRemoved ${Q} documents in `+(P-S)+`ms\nTotal Duration: ${P-G}ms`),De.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:Q})))}}class og{constructor(e,t){this.db=e,this.garbageCollector=new Z0(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(a=>s+a))}Bn(e){let t=0;return this.Fn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(s,a)=>t(a))}addReference(e,t,s){return ag(e,s)}removeReference(e,t,s){return ag(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return ag(e,t)}Un(e,t){return function(s,a){let l=!1;return $y(s).Y(p=>jy(s,p,a).next(E=>(E&&(l=!0),De.resolve(!E)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Ln(e,(p,E)=>{if(E<=t){const S=this.Un(e,p).next(P=>{if(!P)return l++,s.getEntry(e,p).next(()=>(s.removeEntry(p,Wt.min()),pu(e).delete([0,co(p.path)])))});a.push(S)}}).next(()=>De.waitFor(a)).next(()=>s.apply(e)).next(()=>l)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return ag(e,t)}Ln(e,t){const s=pu(e);let a,l=qr.ot;return s.J({index:"documentTargetsIndex"},([p,E],{path:S,sequenceNumber:P})=>{0===p?(l!==qr.ot&&t(new ut(Bu(a)),l),l=P,a=S):l=qr.ot}).next(()=>{l!==qr.ot&&t(new ut(Bu(a)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ag(n,e){return pu(n).put((s=n.currentSequenceNumber,{targetId:0,path:co(e.path),sequenceNumber:s}));var s}class zy{constructor(){this.changes=new rc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?De.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Wy{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return pc(e).put(s)}removeEntry(e,t,s){return pc(e).delete(function(a,l){const p=a.path.toArray();return[p.slice(0,p.length-2),p[p.length-2],Zl(l),p[p.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.qn(e,s)))}getEntry(e,t){let s=Yn.newInvalidDocument(t);return pc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Uo(t))},(a,l)=>{s=this.Kn(t,l)}).next(()=>s)}Gn(e,t){let s={size:0,document:Yn.newInvalidDocument(t)};return pc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Uo(t))},(a,l)=>{s={document:this.Kn(t,l),size:Jd(l)}}).next(()=>s)}getEntries(e,t){let s=ao();return this.Qn(e,t,(a,l)=>{const p=this.Kn(a,l);s=s.insert(a,p)}).next(()=>s)}jn(e,t){let s=ao(),a=new Br(ut.comparator);return this.Qn(e,t,(l,p)=>{const E=this.Kn(l,p);s=s.insert(l,E),a=a.insert(l,Jd(p))}).next(()=>({documents:s,Wn:a}))}Qn(e,t,s){if(t.isEmpty())return De.resolve();let a=new Ln(qy);t.forEach(S=>a=a.add(S));const l=IDBKeyRange.bound(Uo(a.first()),Uo(a.last())),p=a.getIterator();let E=p.getNext();return pc(e).J({index:"documentKeyIndex",range:l},(S,P,G)=>{const Q=ut.fromSegments([...P.prefixPath,P.collectionGroup,P.documentId]);for(;E&&qy(E,Q)<0;)s(E,null),E=p.getNext();E&&E.isEqual(Q)&&(s(E,P),E=p.hasNext()?p.getNext():null),E?G.q(Uo(E)):G.done()}).next(()=>{for(;E;)s(E,null),E=p.hasNext()?p.getNext():null})}getAllFromCollection(e,t,s){const a=[t.popLast().toArray(),t.lastSegment(),Zl(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],l=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pc(e).K(IDBKeyRange.bound(a,l,!0)).next(p=>{let E=ao();for(const S of p){const P=this.Kn(ut.fromSegments(S.prefixPath.concat(S.collectionGroup,S.documentId)),S);E=E.insert(P.key,P)}return E})}getAllFromCollectionGroup(e,t,s,a){let l=ao();const p=Xd(t,s),E=Xd(t,Kr.max());return pc(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(p,E,!0)},(S,P,G)=>{const Q=this.Kn(ut.fromSegments(P.prefixPath.concat(P.collectionGroup,P.documentId)),P);l=l.insert(Q.key,Q),l.size===a&&G.done()}).next(()=>l)}newChangeBuffer(e){return new Ky(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return cg(e).get("remoteDocumentGlobalKey").next(t=>(kt(!!t),t))}qn(e,t){return cg(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const s=function ky(n,e){let t;if(e.document)t=O0(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=ut.fromSegments(e.noDocument.path),a=fu(e.noDocument.readTime);t=Yn.newNoDocument(s,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return gt();{const s=ut.fromSegments(e.unknownDocument.path),a=fu(e.unknownDocument.version);t=Yn.newUnknownDocument(s,a)}}return e.readTime&&t.setReadTime(function(s){const a=new vr(s[0],s[1]);return Wt.fromTimestamp(a)}(e.readTime)),t}(this.wt,t);if(!s.isNoDocument()||!s.version.isEqual(Wt.min()))return s}return Yn.newInvalidDocument(e)}}function ug(n){return new Wy(n)}class Ky extends zy{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new rc(s=>s.toString(),(s,a)=>s.isEqual(a))}applyChanges(e){const t=[];let s=0,a=new Ln((l,p)=>Zt(l.canonicalString(),p.canonicalString()));return this.changes.forEach((l,p)=>{const E=this.Hn.get(l);if(t.push(this.zn.removeEntry(e,l,E.readTime)),p.isValidDocument()){const S=wf(this.zn.wt,p);a=a.add(l.path.popLast()),s+=Jd(S)-E.size,t.push(this.zn.addEntry(e,l,S))}else if(s-=E.size,this.trackRemovals){const S=wf(this.zn.wt,p.convertToNoDocument(Wt.min()));t.push(this.zn.addEntry(e,l,S))}}),a.forEach(l=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.zn.updateMetadata(e,s)),De.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(s=>(this.Hn.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:s,Wn:a})=>(a.forEach((l,p)=>{this.Hn.set(l,{size:p,readTime:s.get(l).readTime})}),s))}}function cg(n){return yi(n,"remoteDocumentGlobal")}function pc(n){return yi(n,"remoteDocumentsV14")}function Uo(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Xd(n,e){const t=e.documentKey.path.toArray();return[n,Zl(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function qy(n,e){const t=n.path.toArray(),s=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<s.length-2;++l)if(a=Zt(t[l],s[l]),a)return a;return a=Zt(t.length,s.length),a||(a=Zt(t[t.length-2],s[s.length-2]),a||Zt(t[t.length-1],s[s.length-1]))}class Y0{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Q0{constructor(e,t,s,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(s=a,this.getBaseDocument(e,t,s))).next(a=>(null!==s&&zd(s.mutation,a,oo.empty(),vr.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,ln()).next(()=>s))}getLocalViewOfDocuments(e,t,s=ln()){const a=Fa();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,s).next(l=>{let p=Gl();return l.forEach((E,S)=>{p=p.insert(E,S.overlayedDocument)}),p}))}getOverlayedDocuments(e,t){const s=Fa();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,ln()))}populateOverlays(e,t,s){const a=[];return s.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((p,E)=>{t.set(p,E)})})}computeViews(e,t,s,a){let l=ao();const p=zl(),E=zl();return t.forEach((S,P)=>{const G=s.get(P.key);a.has(P.key)&&(void 0===G||G.mutation instanceof hu)?l=l.insert(P.key,P):void 0!==G&&(p.set(P.key,G.mutation.getFieldMask()),zd(G.mutation,P,G.mutation.getFieldMask(),vr.now()))}),this.recalculateAndSaveOverlays(e,l).next(S=>(S.forEach((P,G)=>p.set(P,G)),t.forEach((P,G)=>{var Q;return E.set(P,new Y0(G,null!==(Q=p.get(P))&&void 0!==Q?Q:null))}),E))}recalculateAndSaveOverlays(e,t){const s=zl();let a=new Br((p,E)=>p-E),l=ln();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(p=>{for(const E of p)E.keys().forEach(S=>{const P=t.get(S);if(null===P)return;let G=s.get(S)||oo.empty();G=E.applyToLocalView(P,G),s.set(S,G);const Q=(a.get(E.batchId)||ln()).add(S);a=a.insert(E.batchId,Q)})}).next(()=>{const p=[],E=a.getReverseIterator();for(;E.hasNext();){const S=E.getNext(),P=S.key,G=S.value,Q=S0();G.forEach(Ee=>{if(!l.has(Ee)){const Oe=Hp(t.get(Ee),s.get(Ee));null!==Oe&&Q.set(Ee,Oe),l=l.add(Ee)}}),p.push(this.documentOverlayCache.saveOverlays(e,P,Q))}return De.waitFor(p)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return ut.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):O(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var a}getNextDocuments(e,t,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,a).next(l=>{const p=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,a-l.size):De.resolve(Fa());let E=-1,S=l;return p.next(P=>De.forEach(P,(G,Q)=>(E<Q.largestBatchId&&(E=Q.largestBatchId),l.get(G)?De.resolve():this.getBaseDocument(e,G,Q).next(Ee=>{S=S.insert(G,Ee)}))).next(()=>this.populateOverlays(e,P,l)).next(()=>this.computeViews(e,S,P,ln())).next(G=>({batchId:E,changes:pf(G)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ut(t)).next(s=>{let a=Gl();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const a=t.collectionGroup;let l=Gl();return this.indexManager.getCollectionParents(e,a).next(p=>De.forEach(p,E=>{const S=(P=t,G=E.child(a),new Es(G,null,P.explicitOrderBy.slice(),P.filters.slice(),P.limit,P.limitType,P.startAt,P.endAt));var P,G;return this.getDocumentsMatchingCollectionQuery(e,S,s).next(P=>{P.forEach((G,Q)=>{l=l.insert(G,Q)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,s){let a;return this.remoteDocumentCache.getAllFromCollection(e,t.path,s).next(l=>(a=l,this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId))).next(l=>{l.forEach((E,S)=>{const P=S.getKey();null===a.get(P)&&(a=a.insert(P,Yn.newInvalidDocument(P)))});let p=Gl();return a.forEach((E,S)=>{const P=l.get(E);void 0!==P&&zd(P.mutation,S,oo.empty(),vr.now()),Mt(t,S)&&(p=p.insert(E,S))}),p})}getBaseDocument(e,t,s){return null===s||1===s.mutation.type?this.remoteDocumentCache.getEntry(e,t):De.resolve(Yn.newInvalidDocument(t))}}class lg{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return De.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var s;return this.Jn.set(t.id,{id:(s=t).id,version:s.version,createTime:sr(s.createTime)}),De.resolve()}getNamedQuery(e,t){return De.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(s=t).name,query:If(s.bundledQuery),readTime:sr(s.readTime)}),De.resolve();var s}}class Zy{constructor(){this.overlays=new Br(ut.comparator),this.Xn=new Map}getOverlay(e,t){return De.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Fa();return De.forEach(t,a=>this.getOverlay(e,a).next(l=>{null!==l&&s.set(a,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((a,l)=>{this.ie(e,t,l)}),De.resolve()}removeOverlaysForBatchId(e,t,s){const a=this.Xn.get(s);return void 0!==a&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.Xn.delete(s)),De.resolve()}getOverlaysForCollection(e,t,s){const a=Fa(),l=t.length+1,p=new ut(t.child("")),E=this.overlays.getIteratorFrom(p);for(;E.hasNext();){const S=E.getNext().value,P=S.getKey();if(!t.isPrefixOf(P.path))break;P.path.length===l&&S.largestBatchId>s&&a.set(S.getKey(),S)}return De.resolve(a)}getOverlaysForCollectionGroup(e,t,s,a){let l=new Br((P,G)=>P-G);const p=this.overlays.getIterator();for(;p.hasNext();){const P=p.getNext().value;if(P.getKey().getCollectionGroup()===t&&P.largestBatchId>s){let G=l.get(P.largestBatchId);null===G&&(G=Fa(),l=l.insert(P.largestBatchId,G)),G.set(P.getKey(),P)}}const E=Fa(),S=l.getIterator();for(;S.hasNext()&&(S.getNext().value.forEach((P,G)=>E.set(P,G)),!(E.size()>=a)););return De.resolve(E)}ie(e,t,s){const a=this.overlays.get(s.key);if(null!==a){const p=this.Xn.get(a.largestBatchId).delete(s.key);this.Xn.set(a.largestBatchId,p)}this.overlays=this.overlays.insert(s.key,new uc(t,s));let l=this.Xn.get(t);void 0===l&&(l=ln(),this.Xn.set(t,l)),this.Xn.set(t,l.add(s.key))}}class eh{constructor(){this.Zn=new Ln(Qr.ts),this.es=new Ln(Qr.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const s=new Qr(e,t);this.Zn=this.Zn.add(s),this.es=this.es.add(s)}ss(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.rs(new Qr(e,t))}os(e,t){e.forEach(s=>this.removeReference(s,t))}us(e){const t=new ut(new yn([])),s=new Qr(t,e),a=new Qr(t,e+1),l=[];return this.es.forEachInRange([s,a],p=>{this.rs(p),l.push(p.key)}),l}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new ut(new yn([])),s=new Qr(t,e),a=new Qr(t,e+1);let l=ln();return this.es.forEachInRange([s,a],p=>{l=l.add(p.key)}),l}containsKey(e){const t=new Qr(e,0),s=this.Zn.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class Qr{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return ut.comparator(e.key,t.key)||Zt(e.ls,t.ls)}static ns(e,t){return Zt(e.ls,t.ls)||ut.comparator(e.key,t.key)}}class J0{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new Ln(Qr.ts)}checkEmpty(e){return De.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,a){const l=this.fs;this.fs++;const p=new ac(l,t,s,a);this.mutationQueue.push(p);for(const E of a)this.ds=this.ds.add(new Qr(E.key,l)),this.indexManager.addToCollectionParentIndex(e,E.key.path.popLast());return De.resolve(p)}lookupMutationBatch(e,t){return De.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.ws(t+1),l=a<0?0:a;return De.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return De.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return De.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Qr(t,0),a=new Qr(t,Number.POSITIVE_INFINITY),l=[];return this.ds.forEachInRange([s,a],p=>{const E=this._s(p.ls);l.push(E)}),De.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ln(Zt);return t.forEach(a=>{const l=new Qr(a,0),p=new Qr(a,Number.POSITIVE_INFINITY);this.ds.forEachInRange([l,p],E=>{s=s.add(E.ls)})}),De.resolve(this.gs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,a=s.length+1;let l=s;ut.isDocumentKey(l)||(l=l.child(""));const p=new Qr(new ut(l),0);let E=new Ln(Zt);return this.ds.forEachWhile(S=>{const P=S.key.path;return!!s.isPrefixOf(P)&&(P.length===a&&(E=E.add(S.ls)),!0)},p),De.resolve(this.gs(E))}gs(e){const t=[];return e.forEach(s=>{const a=this._s(s);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){kt(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let s=this.ds;return De.forEach(t.mutations,a=>{const l=new Qr(a.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.ds=s})}In(e){}containsKey(e,t){const s=new Qr(t,0),a=this.ds.firstAfterOrEqual(s);return De.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return De.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class dg{constructor(e){this.ps=e,this.docs=new Br(ut.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,a=this.docs.get(s),l=a?a.size:0,p=this.ps(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:p}),this.size+=p-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return De.resolve(s?s.document.mutableCopy():Yn.newInvalidDocument(t))}getEntries(e,t){let s=ao();return t.forEach(a=>{const l=this.docs.get(a);s=s.insert(a,l?l.document.mutableCopy():Yn.newInvalidDocument(a))}),De.resolve(s)}getAllFromCollection(e,t,s){let a=ao();const l=new ut(t.child("")),p=this.docs.getIteratorFrom(l);for(;p.hasNext();){const{key:E,value:{document:S}}=p.getNext();if(!t.isPrefixOf(E.path))break;E.path.length>t.length+1||Aa(qh(S),s)<=0||(a=a.insert(S.key,S.mutableCopy()))}return De.resolve(a)}getAllFromCollectionGroup(e,t,s,a){gt()}Is(e,t){return De.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new Yy(this)}getSize(e){return De.resolve(this.size)}}class Yy extends zy{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?t.push(this.zn.addEntry(e,a)):this.zn.removeEntry(s)}),De.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class Qy{constructor(e){this.persistence=e,this.Ts=new rc(t=>Ra(t),Jc),this.lastRemoteSnapshotVersion=Wt.min(),this.highestTargetId=0,this.Es=0,this.As=new eh,this.targetCount=0,this.Rs=pl.An()}forEachTarget(e,t){return this.Ts.forEach((s,a)=>t(a)),De.resolve()}getLastRemoteSnapshotVersion(e){return De.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return De.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),De.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Es&&(this.Es=t),De.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new pl(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,De.resolve()}updateTargetData(e,t){return this.vn(t),De.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,De.resolve()}removeTargets(e,t,s){let a=0;const l=[];return this.Ts.forEach((p,E)=>{E.sequenceNumber<=t&&null===s.get(E.targetId)&&(this.Ts.delete(p),l.push(this.removeMatchingKeysForTargetId(e,E.targetId)),a++)}),De.waitFor(l).next(()=>a)}getTargetCount(e){return De.resolve(this.targetCount)}getTargetData(e,t){const s=this.Ts.get(t)||null;return De.resolve(s)}addMatchingKeys(e,t,s){return this.As.ss(t,s),De.resolve()}removeMatchingKeys(e,t,s){this.As.os(t,s);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(p=>{l.push(a.markPotentiallyOrphaned(e,p))}),De.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),De.resolve()}getMatchingKeysForTargetId(e,t){const s=this.As.hs(t);return De.resolve(s)}containsKey(e,t){return De.resolve(this.As.containsKey(t))}}class hg{constructor(e,t){this.bs={},this.overlays={},this.Ps=new qr(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new Qy(this),this.indexManager=new z0,this.remoteDocumentCache=new dg(s=>this.referenceDelegate.Ss(s)),this.wt=new tg(t),this.Ds=new lg(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Zy,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.bs[e.toKey()];return s||(s=new J0(t,this.referenceDelegate),this.bs[e.toKey()]=s),s}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,s){Ze("MemoryPersistence","Starting transaction:",e);const a=new X0(this.Ps.next());return this.referenceDelegate.Cs(),s(a).next(l=>this.referenceDelegate.xs(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ns(e,t){return De.or(Object.values(this.bs).map(s=>()=>s.containsKey(e,t)))}}class X0 extends xd{constructor(e){super(),this.currentSequenceNumber=e}}class ed{constructor(e){this.persistence=e,this.ks=new eh,this.Os=null}static Ms(e){return new ed(e)}get Fs(){if(this.Os)return this.Os;throw gt()}addReference(e,t,s){return this.ks.addReference(s,t),this.Fs.delete(s.toString()),De.resolve()}removeReference(e,t,s){return this.ks.removeReference(s,t),this.Fs.add(s.toString()),De.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),De.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(a=>this.Fs.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.Fs.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return De.forEach(this.Fs,s=>{const a=ut.fromPath(s);return this.$s(e,a).next(l=>{l||t.removeEntry(a,Wt.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(s=>{s?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return De.or([()=>De.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class eE{constructor(e){this.wt=e}O(e,t,s,a){const l=new Wc("createOrUpgrade",t);var E;s<1&&a>=1&&(e.createObjectStore("owner"),(E=e).createObjectStore("mutationQueues",{keyPath:"userId"}),E.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",L0,{unique:!0}),E.createObjectStore("documentMutations"),Jy(e),function(E){E.createObjectStore("remoteDocuments")}(e));let p=De.resolve();return s<3&&a>=3&&(0!==s&&(function(E){E.deleteObjectStore("targetDocuments"),E.deleteObjectStore("targets"),E.deleteObjectStore("targetGlobal")}(e),Jy(e)),p=p.next(()=>function(E){const S=E.store("targetGlobal"),P={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Wt.min().toTimestamp(),targetCount:0};return S.put("targetGlobalKey",P)}(l))),s<4&&a>=4&&(0!==s&&(p=p.next(()=>function(E,S){return S.store("mutations").K().next(P=>{E.deleteObjectStore("mutations"),E.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",L0,{unique:!0});const G=S.store("mutations"),Q=P.map(Ee=>G.put(Ee));return De.waitFor(Q)})}(e,l))),p=p.next(()=>{!function(E){E.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&a>=5&&(p=p.next(()=>this.Bs(l))),s<6&&a>=6&&(p=p.next(()=>(function(E){E.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(l)))),s<7&&a>=7&&(p=p.next(()=>this.Us(l))),s<8&&a>=8&&(p=p.next(()=>this.qs(e,l))),s<9&&a>=9&&(p=p.next(()=>{!function(E){E.objectStoreNames.contains("remoteDocumentChanges")&&E.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&a>=10&&(p=p.next(()=>this.Ks(l))),s<11&&a>=11&&(p=p.next(()=>{(function(E){E.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(E){E.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&a>=12&&(p=p.next(()=>{!function(E){const S=E.createObjectStore("documentOverlays",{keyPath:My});S.createIndex("collectionPathOverlayIndex",j0,{unique:!1}),S.createIndex("collectionGroupOverlayIndex",eg,{unique:!1})}(e)})),s<13&&a>=13&&(p=p.next(()=>function(E){const S=E.createObjectStore("remoteDocumentsV14",{keyPath:rI});S.createIndex("documentKeyIndex",iI),S.createIndex("collectionGroupIndex",ic)}(e)).next(()=>this.Gs(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&a>=14&&(p=p.next(()=>this.Qs(e,l))),s<15&&a>=15&&(p=p.next(()=>function(E){E.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),E.createObjectStore("indexState",{keyPath:xy}).createIndex("sequenceNumberIndex",Xp,{unique:!1}),E.createObjectStore("indexEntries",{keyPath:B0}).createIndex("documentKeyIndex",sc,{unique:!1})}(e))),p}Ls(e){let t=0;return e.store("remoteDocuments").J((s,a)=>{t+=Jd(a)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Bs(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.K().next(a=>De.forEach(a,l=>{const p=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return s.K("userMutationsIndex",p).next(E=>De.forEach(E,S=>{kt(S.userId===l.userId);const P=dl(this.wt,S);return K0(e,l.userId,P).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const l=[];return s.J((p,E)=>{const S=new yn(p),P=[0,co(S)];l.push(t.get(P).next(G=>G?De.resolve():t.put({targetId:0,path:co(S),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>De.waitFor(l))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:Jp});const s=t.store("collectionParents"),a=new Tf,l=p=>{if(a.add(p)){const E=p.lastSegment(),S=p.popLast();return s.put({collectionId:E,parent:co(S)})}};return t.store("remoteDocuments").J({H:!0},(p,E)=>{const S=new yn(p);return l(S.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([p,E,S],P)=>{const G=Bu(E);return l(G.popLast())}))}Ks(e){const t=e.store("targets");return t.J((s,a)=>{const l=Yl(a),p=$0(this.wt,l);return t.put(p)})}Gs(e,t){const s=t.store("remoteDocuments"),a=[];return s.J((l,p)=>{const E=t.store("remoteDocumentsV14"),S=(P=p,P.document?new ut(yn.fromString(P.document.name).popFirst(5)):P.noDocument?ut.fromSegments(P.noDocument.path):P.unknownDocument?ut.fromSegments(P.unknownDocument.path):gt()).path.toArray();var P;const G={prefixPath:S.slice(0,S.length-2),collectionGroup:S[S.length-2],documentId:S[S.length-1],readTime:p.readTime||[0,0],unknownDocument:p.unknownDocument,noDocument:p.noDocument,document:p.document,hasCommittedMutations:!!p.hasCommittedMutations};a.push(E.put(G))}).next(()=>De.waitFor(a))}Qs(e,t){const s=t.store("mutations"),a=ug(this.wt),l=new hg(ed.Ms,this.wt.ne);return s.K().next(p=>{const E=new Map;return p.forEach(S=>{var P;let G=null!==(P=E.get(S.userId))&&void 0!==P?P:ln();dl(this.wt,S).keys().forEach(Q=>G=G.add(Q)),E.set(S.userId,G)}),De.forEach(E,(S,P)=>{const G=new xt(P),Q=bf.se(this.wt,G),Ee=l.getIndexManager(G),Oe=xf.se(G,this.wt,Ee,l.referenceDelegate);return new Q0(a,Oe,Q,Ee).recalculateAndSaveOverlaysForDocumentKeys(new oc(t,qr.ot),S).next()})})}}function Jy(n){n.createObjectStore("targetDocuments",{keyPath:V0}).createIndex("documentTargetsIndex",Ay,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Qp,{unique:!0}),n.createObjectStore("targetGlobal")}const Of="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class gc{constructor(e,t,s,a,l,p,E,S,P,G,Q=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.js=l,this.window=p,this.document=E,this.Ws=P,this.zs=G,this.Hs=Q,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=Ee=>Promise.resolve(),!gc.V())throw new qe(be.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new og(this,a),this.ei=t+"main",this.wt=new tg(S),this.ni=new io(this.ei,this.Hs,new eE(this.wt)),this.Vs=new Mf(this.referenceDelegate,this.wt),this.remoteDocumentCache=ug(this.wt),this.Ds=new H0,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===G&&Mn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new qe(be.FAILED_PRECONDITION,Of);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new qr(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var s=(0,Ae.Z)(function*(a){if(t.started)return e(a)});return function(a){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,Ae.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,Ae.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Nf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(ou(e))return Ze("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ze("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return td(e).get("owner").next(t=>De.resolve(this.di(t)))}_i(e){return Nf(e).delete(this.clientId)}wi(){var e=this;return(0,Ae.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const a=yi(s,"clientMetadata");return a.K().next(l=>{const p=e.gi(l,18e5),E=l.filter(S=>-1===p.indexOf(S));return De.forEach(E,S=>a.delete(S.clientId)).next(()=>E)})}).catch(()=>[]);if(e.si)for(const s of t)e.si.removeItem(e.yi(s.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?De.resolve(!0):td(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new qe(be.FAILED_PRECONDITION,Of);return!1}}return!(!this.networkEnabled||!this.inForeground)||Nf(e).K().next(s=>void 0===this.gi(s,5e3).find(a=>{if(this.clientId!==a.clientId){const p=!this.inForeground&&a.inForeground,E=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||p&&E)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ze("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ae.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new oc(t,qr.ot);return e.li(s).next(()=>e._i(s))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(s=>this.mi(s.updateTimeMs,t)&&!this.pi(s.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>Nf(e).K().next(t=>this.gi(t,18e5).map(s=>s.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return xf.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new W0(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return bf.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,s){Ze("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",l=15===(p=this.Hs)?Yd:14===p?Py:13===p?Ny:12===p?Oy:11===p?Ry:void gt();var p;let E;return this.ni.runTransaction(e,a,l,S=>(E=new oc(S,this.Ps?this.Ps.next():qr.ot),"readwrite-primary"===t?this.ai(E).next(P=>!!P||this.hi(E)).next(P=>{if(!P)throw Mn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new qe(be.FAILED_PRECONDITION,Zh);return s(E)}).next(P=>this.fi(E).next(()=>P)):this.bi(E).next(()=>s(E)))).then(S=>(E.raiseOnCommittedEvent(),S))}bi(e){return td(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new qe(be.FAILED_PRECONDITION,Of)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return td(e).put("owner",t)}static V(){return io.V()}li(e){const t=td(e);return t.get("owner").next(s=>this.di(s)?(Ze("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):De.resolve())}mi(e,t){const s=Date.now();return!(e<s-t||e>s&&(Mn(`Detected an update time that is in the future: ${e} > ${s}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,Pt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const s=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Ze("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Mn("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Mn("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(e){}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function td(n){return yi(n,"owner")}function Nf(n){return yi(n,"clientMetadata")}function fg(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class mc{constructor(e,t,s,a){this.targetId=e,this.fromCache=t,this.Pi=s,this.vi=a}static Vi(e,t){let s=ln(),a=ln();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new mc(e,t.fromCache,s,a)}}class Xy{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,s,a){return this.Ci(e,t).next(l=>l||this.xi(e,t,a,s)).next(l=>l||this.Ni(e,t))}Ci(e,t){return De.resolve(null)}xi(e,t,s,a){return function d(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||a.isEqual(Wt.min())?this.Ni(e,t):this.Di.getDocuments(e,s).next(l=>{const p=this.ki(t,l);return this.Oi(t,p,s,a)?this.Ni(e,t):(ui()<=un.in.DEBUG&&Ze("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ft(t)),this.Mi(e,p,t,Kh(a,-1)))})}ki(e,t){let s=new Ln(ws(e));return t.forEach((a,l)=>{Mt(e,l)&&(s=s.add(l))}),s}Oi(e,t,s,a){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const l="F"===e.limitType?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ni(e,t){return ui()<=un.in.DEBUG&&Ze("QueryEngine","Using full collection scan to execute query:",Ft(t)),this.Di.getDocumentsMatchingQuery(e,t,Kr.min())}Mi(e,t,s,a){return this.Di.getDocumentsMatchingQuery(e,s,a).next(l=>(t.forEach(p=>{l=l.insert(p.key,p)}),l))}}class tE{constructor(e,t,s,a){this.persistence=e,this.Fi=t,this.wt=a,this.$i=new Br(Zt),this.Bi=new rc(l=>Ra(l),Jc),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(s)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Q0(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function ev(n,e,t,s){return new tE(n,e,t,s)}function tv(n,e){return Vo.apply(this,arguments)}function Vo(){return Vo=(0,Ae.Z)(function*(n,e){const t=it(n);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let a;return t.mutationQueue.getAllMutationBatches(s).next(l=>(a=l,t.qi(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const p=[],E=[];let S=ln();for(const P of a){p.push(P.batchId);for(const G of P.mutations)S=S.add(G.key)}for(const P of l){E.push(P.batchId);for(const G of P.mutations)S=S.add(G.key)}return t.localDocuments.getDocuments(s,S).next(P=>({Ki:P,removedBatchIds:p,addedBatchIds:E}))})})}),Vo.apply(this,arguments)}function pg(n,e){const t=it(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),l=t.Ui.newChangeBuffer({trackRemovals:!0});return function(p,E,S,P){const G=S.batch,Q=G.keys();let Ee=De.resolve();return Q.forEach(Oe=>{Ee=Ee.next(()=>P.getEntry(E,Oe)).next(We=>{const ht=S.docVersions.get(Oe);kt(null!==ht),We.version.compareTo(ht)<0&&(G.applyToRemoteDocument(We,S),We.isValidDocument()&&(We.setReadTime(S.commitVersion),P.addEntry(We)))})}),Ee.next(()=>p.mutationQueue.removeMutationBatch(E,G))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(p){let E=ln();for(let S=0;S<p.mutationResults.length;++S)p.mutationResults[S].transformResults.length>0&&(E=E.add(p.batch.mutations[S].key));return E}(e))).next(()=>t.localDocuments.getDocuments(s,a))})}function gg(n){const e=it(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function nv(n,e){const t=it(n),s=e.snapshotVersion;let a=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const p=t.Ui.newChangeBuffer({trackRemovals:!0});a=t.$i;const E=[];e.targetChanges.forEach((G,Q)=>{const Ee=a.get(Q);if(!Ee)return;E.push(t.Vs.removeMatchingKeys(l,G.removedDocuments,Q).next(()=>t.Vs.addMatchingKeys(l,G.addedDocuments,Q)));let Oe=Ee.withSequenceNumber(l.currentSequenceNumber);var We,ht,It;e.targetMismatches.has(Q)?Oe=Oe.withResumeToken(Zr.EMPTY_BYTE_STRING,Wt.min()).withLastLimboFreeSnapshotVersion(Wt.min()):G.resumeToken.approximateByteSize()>0&&(Oe=Oe.withResumeToken(G.resumeToken,s)),a=a.insert(Q,Oe),ht=Oe,It=G,(0===(We=Ee).resumeToken.approximateByteSize()||ht.snapshotVersion.toMicroseconds()-We.snapshotVersion.toMicroseconds()>=3e8||It.addedDocuments.size+It.modifiedDocuments.size+It.removedDocuments.size>0)&&E.push(t.Vs.updateTargetData(l,Oe))});let S=ao(),P=ln();if(e.documentUpdates.forEach(G=>{e.resolvedLimboDocuments.has(G)&&E.push(t.persistence.referenceDelegate.updateLimboDocument(l,G))}),E.push(mg(l,p,e.documentUpdates).next(G=>{S=G.Gi,P=G.Qi})),!s.isEqual(Wt.min())){const G=t.Vs.getLastRemoteSnapshotVersion(l).next(Q=>t.Vs.setTargetsMetadata(l,l.currentSequenceNumber,s));E.push(G)}return De.waitFor(E).next(()=>p.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,S,P)).next(()=>S)}).then(l=>(t.$i=a,l))}function mg(n,e,t){let s=ln(),a=ln();return t.forEach(l=>s=s.add(l)),e.getEntries(n,s).next(l=>{let p=ao();return t.forEach((E,S)=>{const P=l.get(E);S.isFoundDocument()!==P.isFoundDocument()&&(a=a.add(E)),S.isNoDocument()&&S.version.isEqual(Wt.min())?(e.removeEntry(E,S.readTime),p=p.insert(E,S)):!P.isValidDocument()||S.version.compareTo(P.version)>0||0===S.version.compareTo(P.version)&&P.hasPendingWrites?(e.addEntry(S),p=p.insert(E,S)):Ze("LocalStore","Ignoring outdated watch update for ",E,". Current version:",P.version," Watch version:",S.version)}),{Gi:p,Qi:a}})}function rv(n,e){const t=it(n);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function nd(n,e){const t=it(n);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return t.Vs.getTargetData(s,e).next(l=>l?(a=l,De.resolve(a)):t.Vs.allocateTargetId(s).next(p=>(a=new cc(e,p,0,s.currentSequenceNumber),t.Vs.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=t.$i.get(s.targetId);return(null===a||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.$i=t.$i.insert(s.targetId,s),t.Bi.set(e,s.targetId)),s})}function rd(n,e,t){return yg.apply(this,arguments)}function yg(){return yg=(0,Ae.Z)(function*(n,e,t){const s=it(n),a=s.$i.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",l,p=>s.persistence.referenceDelegate.removeTarget(p,a)))}catch(p){if(!ou(p))throw p;Ze("LocalStore",`Failed to update sequence numbers for target ${e}: ${p}`)}s.$i=s.$i.remove(e),s.Bi.delete(a.target)}),yg.apply(this,arguments)}function Pf(n,e,t){const s=it(n);let a=Wt.min(),l=ln();return s.persistence.runTransaction("Execute query","readonly",p=>function(E,S,P){const G=it(E),Q=G.Bi.get(P);return void 0!==Q?De.resolve(G.$i.get(Q)):G.Vs.getTargetData(S,P)}(s,p,se(e)).next(E=>{if(E)return a=E.lastLimboFreeSnapshotVersion,s.Vs.getMatchingKeysForTargetId(p,E.targetId).next(S=>{l=S})}).next(()=>s.Fi.getDocumentsMatchingQuery(p,e,t?a:Wt.min(),t?l:ln())).next(E=>(_g(s,Or(e),E),{documents:E,ji:l})))}function vg(n,e){const t=it(n),s=it(t.Vs),a=t.$i.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",l=>s.te(l,e).next(p=>p?p.target:null))}function nE(n,e){const t=it(n),s=t.Li.get(e)||Wt.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Ui.getAllFromCollectionGroup(a,e,Kh(s,-1),Number.MAX_SAFE_INTEGER)).then(a=>(_g(t,e,a),a))}function _g(n,e,t){let s=Wt.min();t.forEach((a,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),n.Li.set(e,s)}function Eg(){return Eg=(0,Ae.Z)(function*(n,e,t,s){const a=it(n);let l=ln(),p=ao();for(const P of t){const G=e.Wi(P.metadata.name);P.document&&(l=l.add(G));const Q=e.zi(P);Q.setReadTime(e.Hi(P.metadata.readTime)),p=p.insert(G,Q)}const E=a.Ui.newChangeBuffer({trackRemovals:!0}),S=yield nd(a,(P=s,se(g(yn.fromString(`__bundle__/docs/${P}`)))));var P;return a.persistence.runTransaction("Apply bundle documents","readwrite",P=>mg(P,E,p).next(G=>(E.apply(P),G)).next(G=>a.Vs.removeMatchingKeysForTargetId(P,S.targetId).next(()=>a.Vs.addMatchingKeys(P,l,S.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(P,G.Gi,G.Qi)).next(()=>G.Gi)))}),Eg.apply(this,arguments)}function aI(n,e){return iv.apply(this,arguments)}function iv(){return iv=(0,Ae.Z)(function*(n,e,t=ln()){const s=yield nd(n,se(If(e.bundledQuery))),a=it(n);return a.persistence.runTransaction("Save named query","readwrite",l=>{const p=sr(e.readTime);if(s.snapshotVersion.compareTo(p)>=0)return a.Ds.saveNamedQuery(l,e);const E=s.withResumeToken(Zr.EMPTY_BYTE_STRING,p);return a.$i=a.$i.insert(E.targetId,E),a.Vs.updateTargetData(l,E).next(()=>a.Vs.removeMatchingKeysForTargetId(l,s.targetId)).next(()=>a.Vs.addMatchingKeys(l,t,s.targetId)).next(()=>a.Ds.saveNamedQuery(l,e))})}),iv.apply(this,arguments)}function kf(n,e){return`firestore_clients_${n}_${e}`}function sv(n,e,t){let s=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Ff(n,e){return`firestore_targets_${n}_${e}`}class th{constructor(e,t,s,a){this.user=e,this.batchId=t,this.state=s,this.error=a}static Ji(e,t,s){const a=JSON.parse(s);let l,p="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return p&&a.error&&(p="string"==typeof a.error.message&&"string"==typeof a.error.code,p&&(l=new qe(a.error.code,a.error.message))),p?new th(e,t,a.state,l):(Mn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Lf{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Ji(e,t){const s=JSON.parse(t);let a,l="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(a=new qe(s.error.code,s.error.message))),l?new Lf(e,s.state,a):(Mn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class po{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const s=JSON.parse(t);let a="object"==typeof s&&s.activeTargetIds instanceof Array,l=uo();for(let p=0;a&&p<s.activeTargetIds.length;++p)a=Jh(s.activeTargetIds[p]),l=l.add(s.activeTargetIds[p]);return a?new po(e,l):(Mn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ov{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ov(t.clientId,t.onlineState):(Mn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class av{constructor(){this.activeTargetIds=uo()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Uf{constructor(e,t,s,a,l){this.window=e,this.js=t,this.persistenceKey=s,this.tr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Br(Zt),this.started=!1,this.ir=[];const p=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.rr=kf(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new av),this.cr=new RegExp(`^firestore_clients_${p}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${p}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${p}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(E){return`firestore_bundle_loaded_v2_${E}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ae.Z)(function*(){const t=yield e.syncEngine.Ri();for(const a of t){if(a===e.tr)continue;const l=e.getItem(kf(e.persistenceKey,a));if(l){const p=po.Ji(a,l);p&&(e.sr=e.sr.insert(p.clientId,p))}}e._r();const s=e.storage.getItem(e.lr);if(s){const a=e.wr(s);a&&e.mr(a)}for(const a of e.ir)e.nr(a);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((s,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,s){this.yr(e,t,s),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Ff(this.persistenceKey,e));if(s){const a=Lf.Ji(e,s);a&&(t=a.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ff(this.persistenceKey,e))}updateQueryState(e,t,s){this.Tr(e,t,s)}handleUserChange(e,t,s){t.forEach(a=>{this.pr(a)}),this.currentUser=e,s.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ze("SharedClientState","READ",e,t),t}setItem(e,t){Ze("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ze("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(Ze("SharedClientState","EVENT",s.key,s.newValue),s.key===this.rr)return void Mn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,Ae.Z)(function*(){if(t.started){if(null!==s.key)if(t.cr.test(s.key)){if(null==s.newValue){const a=t.Rr(s.key);return t.br(a,null)}{const a=t.Pr(s.key,s.newValue);if(a)return t.br(a.clientId,a)}}else if(t.ar.test(s.key)){if(null!==s.newValue){const a=t.vr(s.key,s.newValue);if(a)return t.Vr(a)}}else if(t.hr.test(s.key)){if(null!==s.newValue){const a=t.Sr(s.key,s.newValue);if(a)return t.Dr(a)}}else if(s.key===t.lr){if(null!==s.newValue){const a=t.wr(s.newValue);if(a)return t.mr(a)}}else if(s.key===t.ur){const a=function(l){let p=qr.ot;if(null!=l)try{const E=JSON.parse(l);kt("number"==typeof E),p=E}catch(E){Mn("SharedClientState","Failed to read sequence number from WebStorage",E)}return p}(s.newValue);a!==qr.ot&&t.sequenceNumberHandler(a)}else if(s.key===t.dr){const a=t.Cr(s.newValue);yield Promise.all(a.map(l=>t.syncEngine.Nr(l)))}}else t.ir.push(s)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,s){const a=new th(this.currentUser,e,t,s),l=sv(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Yi())}pr(e){const t=sv(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,s){const a=Ff(this.persistenceKey,e),l=new Lf(e,t,s);this.setItem(a,l.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const s=this.Rr(e);return po.Ji(s,t)}vr(e,t){const s=this.ar.exec(e),a=Number(s[1]);return th.Ji(new xt(void 0!==s[2]?s[2]:null),a,t)}Sr(e,t){const s=this.hr.exec(e),a=Number(s[1]);return Lf.Ji(a,t)}wr(e){return ov.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,Ae.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Ze("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const s=t?this.sr.insert(e,t):this.sr.remove(e),a=this.gr(this.sr),l=this.gr(s),p=[],E=[];return l.forEach(S=>{a.has(S)||p.push(S)}),a.forEach(S=>{l.has(S)||E.push(S)}),this.syncEngine.Mr(p,E).then(()=>{this.sr=s})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=uo();return e.forEach((s,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class wg{constructor(){this.Fr=new av,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,s){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new av,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class uv{Br(e){}shutdown(){}}class cv{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const uI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class lv{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class Ig extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,s,a,l){const p=this.oo(e,t);Ze("RestConnection","Sending: ",p,s);const E={};return this.uo(E,a,l),this.co(e,p,E,s).then(S=>(Ze("RestConnection","Received: ",S),S),S=>{throw mi("RestConnection",`${e} failed with error: `,S,"url: ",p,"request:",s),S})}ao(e,t,s,a,l){return this.ro(e,t,s,a,l)}uo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+cn,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),s&&s.headers.forEach((a,l)=>e[l]=a)}oo(e,t){return`${this.so}/v1/${t}:${uI[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,s,a){return new Promise((l,p)=>{const E=new nt;E.listenOnce(U.COMPLETE,()=>{try{switch(E.getLastErrorCode()){case M.NO_ERROR:const P=E.getResponseJson();Ze("Connection","XHR received:",JSON.stringify(P)),l(P);break;case M.TIMEOUT:Ze("Connection",'RPC "'+e+'" timed out'),p(new qe(be.DEADLINE_EXCEEDED,"Request time out"));break;case M.HTTP_ERROR:const G=E.getStatus();if(Ze("Connection",'RPC "'+e+'" failed with status:',G,"response text:",E.getResponseText()),G>0){const Q=E.getResponseJson().error;if(Q&&Q.status&&Q.message){const Ee=function(Oe){const We=Oe.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(We)>=0?We:be.UNKNOWN}(Q.status);p(new qe(Ee,Q.message))}else p(new qe(be.UNKNOWN,"Server responded with status "+E.getStatus()))}else p(new qe(be.UNAVAILABLE,"Connection failed."));break;default:gt()}}finally{Ze("Connection",'RPC "'+e+'" completed.')}});const S=JSON.stringify(a);E.send(t,"POST",S,s,15)})}ho(e,t,s){const a=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Ol(),p=T(),E={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(E.xmlHttpFactory=new _e({})),this.uo(E.initMessageHeaders,t,s),(0,Pt.uI)()||(0,Pt.b$)()||(0,Pt.d)()||(0,Pt.w1)()||(0,Pt.Mn)()||(0,Pt.ru)()||(E.httpHeadersOverwriteParam="$httpHeaders");const S=a.join("");Ze("Connection","Creating WebChannel: "+S,E);const P=l.createWebChannel(S,E);let G=!1,Q=!1;const Ee=new lv({jr:We=>{Q?Ze("Connection","Not sending because WebChannel is closed:",We):(G||(Ze("Connection","Opening WebChannel transport."),P.open(),G=!0),Ze("Connection","WebChannel sending:",We),P.send(We))},Wr:()=>P.close()}),Oe=(We,ht,It)=>{We.listen(ht,En=>{try{It(En)}catch(zn){setTimeout(()=>{throw zn},0)}})};return Oe(P,Ge.EventType.OPEN,()=>{Q||Ze("Connection","WebChannel transport opened.")}),Oe(P,Ge.EventType.CLOSE,()=>{Q||(Q=!0,Ze("Connection","WebChannel transport closed"),Ee.eo())}),Oe(P,Ge.EventType.ERROR,We=>{Q||(Q=!0,mi("Connection","WebChannel transport errored:",We),Ee.eo(new qe(be.UNAVAILABLE,"The operation could not be completed")))}),Oe(P,Ge.EventType.MESSAGE,We=>{var ht;if(!Q){const It=We.data[0];kt(!!It);const En=It,zn=En.error||(null===(ht=En[0])||void 0===ht?void 0:ht.error);if(zn){Ze("Connection","WebChannel received error:",zn);const Un=zn.status;let vn=function(dn){const Ds=Yr[dn];if(void 0!==Ds)return Hl(Ds)}(Un),wn=zn.message;void 0===vn&&(vn=be.INTERNAL,wn="Unknown error status: "+Un+" with message "+zn.message),Q=!0,Ee.eo(new qe(vn,wn)),P.close()}else Ze("Connection","WebChannel received:",It),Ee.no(It)}}),Oe(p,K.STAT_EVENT,We=>{We.stat===ue.PROXY?Ze("Connection","Detected buffering proxy"):We.stat===ue.NOPROXY&&Ze("Connection","Detected no buffering proxy")}),setTimeout(()=>{Ee.Zr()},0),Ee}}function dv(){return"undefined"!=typeof window?window:null}function id(){return"undefined"!=typeof document?document:null}function nh(n){return new Ey(n,!0)}class Dg{constructor(e,t,s=1e3,a=1.5,l=6e4){this.js=e,this.timerId=t,this.lo=s,this.fo=a,this._o=l,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),s=Math.max(0,Date.now()-this.yo),a=Math.max(0,t-s);a>0&&Ze("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,a,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class hv{constructor(e,t,s,a,l,p,E,S){this.js=e,this.Ao=s,this.Ro=a,this.bo=l,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=E,this.listener=S,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new Dg(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,Ae.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,Ae.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var s=this;return(0,Ae.Z)(function*(){s.Fo(),s.$o(),s.So.cancel(),s.Po++,4!==e?s.So.reset():t&&t.code===be.RESOURCE_EXHAUSTED?(Mn(t.toString()),Mn("Using maximum backoff delay to prevent overloading the backend."),s.So.po()):t&&t.code===be.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Bo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Po===t&&this.Uo(s,a)},s=>{e(()=>{const a=new qe(be.UNKNOWN,"Fetching auth token failed: "+s.message);return this.qo(a)})})}Uo(e,t){const s=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{s(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(a=>{s(()=>this.qo(a))}),this.stream.onMessage(a=>{s(()=>this.onMessage(a))})}xo(){var e=this;this.state=5,this.So.Io((0,Ae.Z)(function*(){e.state=0,e.start()}))}qo(e){return Ze("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iE extends hv{constructor(e,t,s,a,l,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,a,p),this.wt=l}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function _f(n,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(S=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===S?1:"REMOVE"===S?2:"CURRENT"===S?3:"RESET"===S?4:gt(),a=e.targetChange.targetIds||[],l=function(S,P){return S.dt?(kt(void 0===P||"string"==typeof P),Zr.fromBase64String(P||"")):(kt(void 0===P||P instanceof Uint8Array),Zr.fromUint8Array(P||new Uint8Array))}(n,e.targetChange.resumeToken),p=e.targetChange.cause,E=p&&function(S){const P=void 0===S.code?be.UNKNOWN:Hl(S.code);return new qe(P,S.message||"")}(p);t=new gy(s,a,l,E||null)}else if("documentChange"in e){const s=e.documentChange,a=zi(n,s.document.name),l=sr(s.document.updateTime),p=new Rr({mapValue:{fields:s.document.fields}}),E=Yn.newFoundDocument(a,l,p);t=new gf(s.targetIds||[],s.removedTargetIds||[],E.key,E)}else if("documentDelete"in e){const s=e.documentDelete,a=zi(n,s.document),l=s.readTime?sr(s.readTime):Wt.min(),p=Yn.newNoDocument(a,l);t=new gf([],s.removedTargetIds||[],p.key,p)}else if("documentRemove"in e){const s=e.documentRemove,a=zi(n,s.document);t=new gf([],s.removedTargetIds||[],a,null)}else{if(!("filter"in e))return gt();{const s=e.filter,l=new ly(s.count||0);t=new py(s.targetId,l)}}var S;return t}(this.wt,e),s=function(a){if(!("targetChange"in a))return Wt.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Wt.min():l.readTime?sr(l.readTime):Wt.min()}(e);return this.listener.Go(t,s)}Qo(e){const t={};t.database=ul(this.wt),t.addTarget=function(a,l){let p;const E=l.target;return p=Ls(E)?{documents:N0(a,E)}:{query:Iy(a,E)},p.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?p.resumeToken=Wp(a,l.resumeToken):l.snapshotVersion.compareTo(Wt.min())>0&&(p.readTime=Kl(a,l.snapshotVersion.toTimestamp())),p}(this.wt,e);const s=function P0(n,e){const t=function(s,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return gt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Mo(t)}jo(e){const t={};t.database=ul(this.wt),t.removeTarget=e,this.Mo(t)}}class sE extends hv{constructor(e,t,s,a,l,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,a,p),this.wt=l,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(kt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function Zp(n,e){return n&&n.length>0?(kt(void 0!==e),n.map(t=>function(s,a){let l=sr(s.updateTime?s.updateTime:a);return l.isEqual(Wt.min())&&(l=sr(a)),new C0(l,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=sr(e.commitTime);return this.listener.Jo(s,t)}return kt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=ul(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>cl(this.wt,s))};this.Mo(t)}}class oE extends class{}{constructor(e,t,s,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=s,this.wt=a,this.Zo=!1}tu(){if(this.Zo)throw new qe(be.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,s){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.bo.ro(e,t,s,a,l)).catch(a=>{throw"FirebaseError"===a.name?(a.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new qe(be.UNKNOWN,a.toString())})}ao(e,t,s){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.bo.ao(e,t,s,a,l)).catch(a=>{throw"FirebaseError"===a.name?(a.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new qe(be.UNKNOWN,a.toString())})}terminate(){this.Zo=!0}}class Vf{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Mn(t),this.su=!1):Ze("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class sd{constructor(e,t,s,a,l){var p=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=l,this.du.Br(E=>{s.enqueueAndForget((0,Ae.Z)(function*(){var S;Ai(p)&&(Ze("RemoteStore","Restarting streams for network reachability change."),yield(S=(0,Ae.Z)(function*(P){const G=it(P);G.lu.add(4),yield od(G),G._u.set("Unknown"),G.lu.delete(4),yield rh(G)}),function(P){return S.apply(this,arguments)})(p))}))}),this._u=new Vf(s,a)}}function rh(n){return gl.apply(this,arguments)}function gl(){return gl=(0,Ae.Z)(function*(n){if(Ai(n))for(const e of n.fu)yield e(!0)}),gl.apply(this,arguments)}function od(n){return bg.apply(this,arguments)}function bg(){return bg=(0,Ae.Z)(function*(n){for(const e of n.fu)yield e(!1)}),bg.apply(this,arguments)}function ad(n,e){const t=it(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),ud(t)?ju(t):_l(t).Co()&&ml(t,e))}function go(n,e){const t=it(n),s=_l(t);t.hu.delete(e),s.Co()&&is(t,e),0===t.hu.size&&(s.Co()?s.ko():Ai(t)&&t._u.set("Unknown"))}function ml(n,e){n.wu.Nt(e.targetId),_l(n).Qo(e)}function is(n,e){n.wu.Nt(e),_l(n).jo(e)}function ju(n){n.wu=new yy({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),_l(n).start(),n._u.iu()}function ud(n){return Ai(n)&&!_l(n).Do()&&n.hu.size>0}function Ai(n){return 0===it(n).lu.size}function Bf(n){n.wu=void 0}function cd(n){return yc.apply(this,arguments)}function yc(){return yc=(0,Ae.Z)(function*(n){n.hu.forEach((e,t)=>{ml(n,e)})}),yc.apply(this,arguments)}function ld(n,e){return vc.apply(this,arguments)}function vc(){return vc=(0,Ae.Z)(function*(n,e){Bf(n),ud(n)?(n._u.uu(e),ju(n)):n._u.set("Unknown")}),vc.apply(this,arguments)}function dd(n,e,t){return _c.apply(this,arguments)}function _c(){return _c=(0,Ae.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof gy&&2===e.state&&e.cause)try{yield(s=(0,Ae.Z)(function*(a,l){const p=l.cause;for(const E of l.targetIds)a.hu.has(E)&&(yield a.remoteSyncer.rejectListen(E,p),a.hu.delete(E),a.wu.removeTarget(E))}),function(a,l){return s.apply(this,arguments)})(n,e)}catch(s){Ze("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield $u(n,s)}else if(e instanceof gf?n.wu.Ut(e):e instanceof py?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(Wt.min()))try{const s=yield gg(n.localStore);t.compareTo(s)>=0&&(yield function(a,l){const p=a.wu.Yt(l);return p.targetChanges.forEach((E,S)=>{if(E.resumeToken.approximateByteSize()>0){const P=a.hu.get(S);P&&a.hu.set(S,P.withResumeToken(E.resumeToken,l))}}),p.targetMismatches.forEach(E=>{const S=a.hu.get(E);if(!S)return;a.hu.set(E,S.withResumeToken(Zr.EMPTY_BYTE_STRING,S.snapshotVersion)),is(a,E);const P=new cc(S.target,E,1,S.sequenceNumber);ml(a,P)}),a.remoteSyncer.applyRemoteEvent(p)}(n,t))}catch(s){Ze("RemoteStore","Failed to raise snapshot:",s),yield $u(n,s)}var s}),_c.apply(this,arguments)}function $u(n,e,t){return Ec.apply(this,arguments)}function Ec(){return Ec=(0,Ae.Z)(function*(n,e,t){if(!ou(e))throw e;n.lu.add(1),yield od(n),n._u.set("Offline"),t||(t=()=>gg(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ae.Z)(function*(){Ze("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield rh(n)}))}),Ec.apply(this,arguments)}function yl(n,e){return e().catch(t=>$u(n,t,e))}function vl(n){return jf.apply(this,arguments)}function jf(){return jf=(0,Ae.Z)(function*(n){const e=it(n),t=wc(e);let s=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;fv(e);)try{const a=yield rv(e.localStore,s);if(null===a){0===e.au.length&&t.ko();break}s=a.batchId,pv(e,a)}catch(a){yield $u(e,a)}Tg(e)&&Cg(e)}),jf.apply(this,arguments)}function fv(n){return Ai(n)&&n.au.length<10}function pv(n,e){n.au.push(e);const t=wc(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function Tg(n){return Ai(n)&&!wc(n).Do()&&n.au.length>0}function Cg(n){wc(n).start()}function gv(n){return $f.apply(this,arguments)}function $f(){return $f=(0,Ae.Z)(function*(n){wc(n).Xo()}),$f.apply(this,arguments)}function mv(n){return Sg.apply(this,arguments)}function Sg(){return Sg=(0,Ae.Z)(function*(n){const e=wc(n);for(const t of n.au)e.Ho(t.mutations)}),Sg.apply(this,arguments)}function yv(n,e,t){return Ag.apply(this,arguments)}function Ag(){return Ag=(0,Ae.Z)(function*(n,e,t){const s=n.au.shift(),a=ll.from(s,e,t);yield yl(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield vl(n)}),Ag.apply(this,arguments)}function aE(n,e){return Hf.apply(this,arguments)}function Hf(){return Hf=(0,Ae.Z)(function*(n,e){var t;e&&wc(n).zo&&(yield(t=(0,Ae.Z)(function*(s,a){if(ff(l=a.code)&&l!==be.ABORTED){const p=s.au.shift();wc(s).No(),yield yl(s,()=>s.remoteSyncer.rejectFailedWrite(p.batchId,a)),yield vl(s)}var l}),function(s,a){return t.apply(this,arguments)})(n,e)),Tg(n)&&Cg(n)}),Hf.apply(this,arguments)}function vv(n,e){return xg.apply(this,arguments)}function xg(){return xg=(0,Ae.Z)(function*(n,e){const t=it(n);t.asyncQueue.verifyOperationInProgress(),Ze("RemoteStore","RemoteStore received new credentials");const s=Ai(t);t.lu.add(3),yield od(t),s&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield rh(t)}),xg.apply(this,arguments)}function Gf(n,e){return Mg.apply(this,arguments)}function Mg(){return Mg=(0,Ae.Z)(function*(n,e){const t=it(n);e?(t.lu.delete(2),yield rh(t)):e||(t.lu.add(2),yield od(t),t._u.set("Unknown"))}),Mg.apply(this,arguments)}function _l(n){return n.mu||(n.mu=function(e,t,s){const a=it(e);return a.tu(),new iE(t,a.bo,a.authCredentials,a.appCheckCredentials,a.wt,s)}(n.datastore,n.asyncQueue,{zr:cd.bind(null,n),Jr:ld.bind(null,n),Go:dd.bind(null,n)}),n.fu.push(function(){var e=(0,Ae.Z)(function*(t){t?(n.mu.No(),ud(n)?ju(n):n._u.set("Unknown")):(yield n.mu.stop(),Bf(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function wc(n){return n.gu||(n.gu=function(e,t,s){const a=it(e);return a.tu(),new sE(t,a.bo,a.authCredentials,a.appCheckCredentials,a.wt,s)}(n.datastore,n.asyncQueue,{zr:gv.bind(null,n),Jr:aE.bind(null,n),Yo:mv.bind(null,n),Jo:yv.bind(null,n)}),n.fu.push(function(){var e=(0,Ae.Z)(function*(t){t?(n.gu.No(),yield vl(n)):(yield n.gu.stop(),n.au.length>0&&(Ze("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class Rg{constructor(e,t,s,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=a,this.removalCallback=l,this.deferred=new ci,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}static createAndSchedule(e,t,s,a,l){const p=Date.now()+s,E=new Rg(e,t,p,a,l);return E.start(s),E}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new qe(be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ih(n,e){if(Mn("AsyncQueue",`${e}: ${n}`),ou(n))return new qe(be.UNAVAILABLE,`${e}: ${n}`);throw n}class hd{constructor(e){this.comparator=e?(t,s)=>e(t,s)||ut.comparator(t.key,s.key):(t,s)=>ut.comparator(t.key,s.key),this.keyedMap=Gl(),this.sortedSet=new Br(this.comparator)}static emptySet(e){return new hd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof hd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=s.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new hd;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class zf{constructor(){this.yu=new Br(ut.comparator)}track(e){const t=e.doc.key,s=this.yu.get(t);s?0!==e.type&&3===s.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==s.type?this.yu=this.yu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.yu=this.yu.remove(t):1===e.type&&2===s.type?this.yu=this.yu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):gt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,s)=>{e.push(s)}),e}}class Ic{constructor(e,t,s,a,l,p,E,S){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=l,this.fromCache=p,this.syncStateChanged=E,this.excludesMetadataChanges=S}static fromInitialDocuments(e,t,s,a){const l=[];return t.forEach(p=>{l.push({type:0,doc:p})}),new Ic(e,t,hd.emptySet(t),l,s,a,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xe(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==s[a].type||!t[a].doc.isEqual(s[a].doc))return!1;return!0}}class uE{constructor(){this.Iu=void 0,this.listeners=[]}}class cI{constructor(){this.queries=new rc(e=>mt(e),Xe),this.onlineState="Unknown",this.Tu=new Set}}function _v(n,e){return Ev.apply(this,arguments)}function Ev(){return Ev=(0,Ae.Z)(function*(n,e){const t=it(n),s=e.query;let a=!1,l=t.queries.get(s);if(l||(a=!0,l=new uE),a)try{l.Iu=yield t.onListen(s)}catch(p){const E=ih(p,`Initialization of query '${Ft(e.query)}' failed`);return void e.onError(E)}t.queries.set(s,l),l.listeners.push(e),e.Eu(t.onlineState),l.Iu&&e.Au(l.Iu)&&Dc(t)}),Ev.apply(this,arguments)}function Og(n,e){return Wf.apply(this,arguments)}function Wf(){return Wf=(0,Ae.Z)(function*(n,e){const t=it(n),s=e.query;let a=!1;const l=t.queries.get(s);if(l){const p=l.listeners.indexOf(e);p>=0&&(l.listeners.splice(p,1),a=0===l.listeners.length)}if(a)return t.queries.delete(s),t.onUnlisten(s)}),Wf.apply(this,arguments)}function lI(n,e){const t=it(n);let s=!1;for(const a of e){const p=t.queries.get(a.query);if(p){for(const E of p.listeners)E.Au(a)&&(s=!0);p.Iu=a}}s&&Dc(t)}function cE(n,e,t){const s=it(n),a=s.queries.get(e);if(a)for(const l of a.listeners)l.onError(t);s.queries.delete(e)}function Dc(n){n.Tu.forEach(e=>{e.next()})}class Ng{constructor(e,t,s){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=s||{}}Au(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)3!==a.type&&s.push(a);e=new Ic(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Ic.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class wv{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class Iv{constructor(e){this.wt=e}Wi(e){return zi(this.wt,e)}zi(e){return e.metadata.exists?O0(this.wt,e.document,!1):Yn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return sr(e)}}class Dv{constructor(e,t,s){this.xu=e,this.localStore=t,this.wt=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=sh(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const s=yn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,s=new Iv(this.wt);for(const a of e)if(a.metadata.queries){const l=s.Wi(a.metadata.name);for(const p of a.metadata.queries){const E=(t.get(p)||ln()).add(l);t.set(p,E)}}return t}complete(){var e=this;return(0,Ae.Z)(function*(){const t=yield function rE(n,e,t,s){return Eg.apply(this,arguments)}(e.localStore,new Iv(e.wt),e.documents,e.xu.id),s=e.ku(e.documents);for(const a of e.queries)yield aI(e.localStore,a,s.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function sh(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class bv{constructor(e){this.key=e}}class Pg{constructor(e){this.key=e}}class Tv{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=ln(),this.mutatedKeys=ln(),this.Lu=ws(e),this.Uu=new hd(this.Lu)}get qu(){return this.Fu}Ku(e,t){const s=t?t.Gu:new zf,a=t?t.Uu:this.Uu;let l=t?t.mutatedKeys:this.mutatedKeys,p=a,E=!1;const S="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,P="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((G,Q)=>{const Ee=a.get(G),Oe=Mt(this.query,Q)?Q:null,We=!!Ee&&this.mutatedKeys.has(Ee.key),ht=!!Oe&&(Oe.hasLocalMutations||this.mutatedKeys.has(Oe.key)&&Oe.hasCommittedMutations);let It=!1;Ee&&Oe?Ee.data.isEqual(Oe.data)?We!==ht&&(s.track({type:3,doc:Oe}),It=!0):this.Qu(Ee,Oe)||(s.track({type:2,doc:Oe}),It=!0,(S&&this.Lu(Oe,S)>0||P&&this.Lu(Oe,P)<0)&&(E=!0)):!Ee&&Oe?(s.track({type:0,doc:Oe}),It=!0):Ee&&!Oe&&(s.track({type:1,doc:Ee}),It=!0,(S||P)&&(E=!0)),It&&(Oe?(p=p.add(Oe),l=ht?l.add(G):l.delete(G)):(p=p.delete(G),l=l.delete(G)))}),null!==this.query.limit)for(;p.size>this.query.limit;){const G="F"===this.query.limitType?p.last():p.first();p=p.delete(G.key),l=l.delete(G.key),s.track({type:1,doc:G})}return{Uu:p,Gu:s,Oi:E,mutatedKeys:l}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const a=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const l=e.Gu.pu();l.sort((P,G)=>function(Q,Ee){const Oe=We=>{switch(We){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt()}};return Oe(Q)-Oe(Ee)}(P.type,G.type)||this.Lu(P.doc,G.doc)),this.ju(s);const p=t?this.Wu():[],E=0===this.Bu.size&&this.current?1:0,S=E!==this.$u;return this.$u=E,0!==l.length||S?{snapshot:new Ic(this.query,e.Uu,a,l,e.mutatedKeys,0===E,S,!1),zu:p}:{zu:p}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new zf,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=ln(),this.Uu.forEach(s=>{this.Hu(s.key)&&(this.Bu=this.Bu.add(s.key))});const t=[];return e.forEach(s=>{this.Bu.has(s)||t.push(new Pg(s))}),this.Bu.forEach(s=>{e.has(s)||t.push(new bv(s))}),t}Ju(e){this.Fu=e.ji,this.Bu=ln();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return Ic.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class lE{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class dE{constructor(e){this.key=e,this.Xu=!1}}class hE{constructor(e,t,s,a,l,p){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=p,this.Zu={},this.tc=new rc(E=>mt(E),Xe),this.ec=new Map,this.nc=new Set,this.sc=new Br(ut.comparator),this.ic=new Map,this.rc=new eh,this.oc={},this.uc=new Map,this.cc=pl.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function fE(n,e){return Kf.apply(this,arguments)}function Kf(){return Kf=(0,Ae.Z)(function*(n,e){const t=Uv(n);let s,a;const l=t.tc.get(e);if(l)s=l.targetId,t.sharedClientState.addLocalQueryTarget(s),a=l.view.Yu();else{const p=yield nd(t.localStore,se(e));t.isPrimaryClient&&ad(t.remoteStore,p);const E=t.sharedClientState.addLocalQueryTarget(p.targetId);s=p.targetId,a=yield kg(t,e,s,"current"===E)}return a}),Kf.apply(this,arguments)}function kg(n,e,t,s){return qf.apply(this,arguments)}function qf(){return qf=(0,Ae.Z)(function*(n,e,t,s){n.hc=(G,Q,Ee)=>{return(Oe=(0,Ae.Z)(function*(We,ht,It,En){let zn=ht.view.Ku(It);zn.Oi&&(zn=yield Pf(We.localStore,ht.query,!1).then(({documents:wn})=>ht.view.Ku(wn,zn)));const Un=En&&En.targetChanges.get(ht.targetId),vn=ht.view.applyChanges(zn,We.isPrimaryClient,Un);return jg(We,ht.targetId,vn.zu),vn.snapshot}),function(We,ht,It,En){return Oe.apply(this,arguments)})(n,G,Q,Ee);var Oe};const a=yield Pf(n.localStore,e,!0),l=new Tv(e,a.ji),p=l.Ku(a.documents),E=Wl.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==n.onlineState),S=l.applyChanges(p,n.isPrimaryClient,E);jg(n,t,S.zu);const P=new lE(e,t,l);return n.tc.set(e,P),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),S.snapshot}),qf.apply(this,arguments)}function Cv(n,e){return oh.apply(this,arguments)}function oh(){return oh=(0,Ae.Z)(function*(n,e){const t=it(n),s=t.tc.get(e),a=t.ec.get(s.targetId);if(a.length>1)return t.ec.set(s.targetId,a.filter(l=>!Xe(l,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield rd(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),go(t.remoteStore,s.targetId),bc(t,s.targetId)}).catch(Nu))):(bc(t,s.targetId),yield rd(t.localStore,s.targetId,!0))}),oh.apply(this,arguments)}function ah(){return ah=(0,Ae.Z)(function*(n,e,t){const s=qg(n);try{const a=yield function(l,p){const E=it(l),S=vr.now(),P=p.reduce((Ee,Oe)=>Ee.add(Oe.key),ln());let G,Q;return E.persistence.runTransaction("Locally write mutations","readwrite",Ee=>{let Oe=ao(),We=ln();return E.Ui.getEntries(Ee,P).next(ht=>{Oe=ht,Oe.forEach((It,En)=>{En.isValidDocument()||(We=We.add(It))})}).next(()=>E.localDocuments.getOverlayedDocuments(Ee,Oe)).next(ht=>{G=ht;const It=[];for(const En of p){const zn=df(En,G.get(En.key).overlayedDocument);null!=zn&&It.push(new hu(En.key,zn,Ud(zn.value.mapValue),Nr.exists(!0)))}return E.mutationQueue.addMutationBatch(Ee,S,It,p)}).next(ht=>{Q=ht;const It=ht.applyToLocalDocumentSet(G,We);return E.documentOverlayCache.saveOverlays(Ee,ht.batchId,It)})}).then(()=>({batchId:Q.batchId,changes:pf(G)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(l,p,E){let S=l.oc[l.currentUser.toKey()];S||(S=new Br(Zt)),S=S.insert(p,E),l.oc[l.currentUser.toKey()]=S}(s,a.batchId,t),yield gu(s,a.changes),yield vl(s.remoteStore)}catch(a){const l=ih(a,"Failed to persist write");t.reject(l)}}),ah.apply(this,arguments)}function Sv(n,e){return Av.apply(this,arguments)}function Av(){return Av=(0,Ae.Z)(function*(n,e){const t=it(n);try{const s=yield nv(t.localStore,e);e.targetChanges.forEach((a,l)=>{const p=t.ic.get(l);p&&(kt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?p.Xu=!0:a.modifiedDocuments.size>0?kt(p.Xu):a.removedDocuments.size>0&&(kt(p.Xu),p.Xu=!1))}),yield gu(t,s,e)}catch(s){yield Nu(s)}}),Av.apply(this,arguments)}function fd(n,e,t){const s=it(n);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const a=[];s.tc.forEach((l,p)=>{const E=p.view.Eu(e);E.snapshot&&a.push(E.snapshot)}),function(l,p){const E=it(l);E.onlineState=p;let S=!1;E.queries.forEach((P,G)=>{for(const Q of G.listeners)Q.Eu(p)&&(S=!0)}),S&&Dc(E)}(s.eventManager,e),a.length&&s.Zu.Go(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function xv(n,e,t){return uh.apply(this,arguments)}function uh(){return uh=(0,Ae.Z)(function*(n,e,t){const s=it(n);s.sharedClientState.updateQueryState(e,"rejected",t);const a=s.ic.get(e),l=a&&a.key;if(l){let p=new Br(ut.comparator);p=p.insert(l,Yn.newNoDocument(l,Wt.min()));const E=ln().add(l),S=new Wd(Wt.min(),new Map,new Ln(Zt),p,E);yield Sv(s,S),s.sc=s.sc.remove(l),s.ic.delete(e),Yf(s)}else yield rd(s.localStore,e,!1).then(()=>bc(s,e,t)).catch(Nu)}),uh.apply(this,arguments)}function Fg(n,e){return Lg.apply(this,arguments)}function Lg(){return Lg=(0,Ae.Z)(function*(n,e){const t=it(n),s=e.batch.batchId;try{const a=yield pg(t.localStore,e);ch(t,s,null),Vg(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield gu(t,a)}catch(a){yield Nu(a)}}),Lg.apply(this,arguments)}function Zf(n,e,t){return pd.apply(this,arguments)}function pd(){return pd=(0,Ae.Z)(function*(n,e,t){const s=it(n);try{const a=yield function(l,p){const E=it(l);return E.persistence.runTransaction("Reject batch","readwrite-primary",S=>{let P;return E.mutationQueue.lookupMutationBatch(S,p).next(G=>(kt(null!==G),P=G.keys(),E.mutationQueue.removeMutationBatch(S,G))).next(()=>E.mutationQueue.performConsistencyCheck(S)).next(()=>E.documentOverlayCache.removeOverlaysForBatchId(S,P,p)).next(()=>E.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(S,P)).next(()=>E.localDocuments.getDocuments(S,P))})}(s.localStore,e);ch(s,e,t),Vg(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield gu(s,a)}catch(a){yield Nu(a)}}),pd.apply(this,arguments)}function Mv(){return Mv=(0,Ae.Z)(function*(n,e){const t=it(n);Ai(t.remoteStore)||Ze("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(l){const p=it(l);return p.persistence.runTransaction("Get highest unacknowledged batch id","readonly",E=>p.mutationQueue.getHighestUnacknowledgedBatchId(E))}(t.localStore);if(-1===s)return void e.resolve();const a=t.uc.get(s)||[];a.push(e),t.uc.set(s,a)}catch(s){const a=ih(s,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),Mv.apply(this,arguments)}function Vg(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function ch(n,e,t){const s=it(n);let a=s.oc[s.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),s.oc[s.currentUser.toKey()]=a}}function bc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.ec.get(e))n.tc.delete(s),t&&n.Zu.lc(s,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(s=>{n.rc.containsKey(s)||Bg(n,s)})}function Bg(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(go(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),Yf(n))}function jg(n,e,t){for(const s of t)s instanceof bv?(n.rc.addReference(s.key,e),$g(n,s)):s instanceof Pg?(Ze("SyncEngine","Document no longer in limbo: "+s.key),n.rc.removeReference(s.key,e),n.rc.containsKey(s.key)||Bg(n,s.key)):gt()}function $g(n,e){const t=e.key,s=t.path.canonicalString();n.sc.get(t)||n.nc.has(s)||(Ze("SyncEngine","New document in limbo: "+t),n.nc.add(s),Yf(n))}function Yf(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new ut(yn.fromString(e)),s=n.cc.next();n.ic.set(s,new dE(t)),n.sc=n.sc.insert(t,s),ad(n.remoteStore,new cc(se(g(t.path)),s,2,qr.ot))}}function gu(n,e,t){return lh.apply(this,arguments)}function lh(){return lh=(0,Ae.Z)(function*(n,e,t){const s=it(n),a=[],l=[],p=[];var E;s.tc.isEmpty()||(s.tc.forEach((E,S)=>{p.push(s.hc(S,e,t).then(P=>{if(P){s.isPrimaryClient&&s.sharedClientState.updateQueryState(S.targetId,P.fromCache?"not-current":"current"),a.push(P);const G=mc.Vi(S.targetId,P);l.push(G)}}))}),yield Promise.all(p),s.Zu.Go(a),yield(E=(0,Ae.Z)(function*(S,P){const G=it(S);try{yield G.persistence.runTransaction("notifyLocalViewChanges","readwrite",Q=>De.forEach(P,Ee=>De.forEach(Ee.Pi,Oe=>G.persistence.referenceDelegate.addReference(Q,Ee.targetId,Oe)).next(()=>De.forEach(Ee.vi,Oe=>G.persistence.referenceDelegate.removeReference(Q,Ee.targetId,Oe)))))}catch(Q){if(!ou(Q))throw Q;Ze("LocalStore","Failed to update sequence numbers: "+Q)}for(const Q of P){const Ee=Q.targetId;if(!Q.fromCache){const Oe=G.$i.get(Ee),ht=Oe.withLastLimboFreeSnapshotVersion(Oe.snapshotVersion);G.$i=G.$i.insert(Ee,ht)}}}),function(S,P){return E.apply(this,arguments)})(s.localStore,l))}),lh.apply(this,arguments)}function Rv(n,e){return Hg.apply(this,arguments)}function Hg(){return Hg=(0,Ae.Z)(function*(n,e){const t=it(n);if(!t.currentUser.isEqual(e)){Ze("SyncEngine","User change. New user:",e.toKey());const s=yield tv(t.localStore,e);t.currentUser=e,(a=t).uc.forEach(p=>{p.forEach(E=>{E.reject(new qe(be.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.uc.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield gu(t,s.Ki)}var a}),Hg.apply(this,arguments)}function Ov(n,e){const t=it(n),s=t.ic.get(e);if(s&&s.Xu)return ln().add(s.key);{let a=ln();const l=t.ec.get(e);if(!l)return a;for(const p of l){const E=t.tc.get(p);a=a.unionWith(E.view.qu)}return a}}function Nv(n,e){return dh.apply(this,arguments)}function dh(){return dh=(0,Ae.Z)(function*(n,e){const t=it(n),s=yield Pf(t.localStore,e.query,!0),a=e.view.Ju(s);return t.isPrimaryClient&&jg(t,e.targetId,a.zu),a}),dh.apply(this,arguments)}function pE(n,e){return Gg.apply(this,arguments)}function Gg(){return Gg=(0,Ae.Z)(function*(n,e){const t=it(n);return nE(t.localStore,e).then(s=>gu(t,s))}),Gg.apply(this,arguments)}function gE(n,e,t,s){return zg.apply(this,arguments)}function zg(){return zg=(0,Ae.Z)(function*(n,e,t,s){const a=it(n),l=yield function(p,E){const S=it(p),P=it(S.mutationQueue);return S.persistence.runTransaction("Lookup mutation documents","readonly",G=>P.yn(G,E).next(Q=>Q?S.localDocuments.getDocuments(G,Q):De.resolve(null)))}(a.localStore,e);var E;null!==l?("pending"===t?yield vl(a.remoteStore):"acknowledged"===t||"rejected"===t?(ch(a,e,s||null),Vg(a,e),E=e,it(it(a.localStore).mutationQueue).In(E)):gt(),yield gu(a,l)):Ze("SyncEngine","Cannot apply mutation batch with id: "+e)}),zg.apply(this,arguments)}function hh(){return hh=(0,Ae.Z)(function*(n,e){const t=it(n);if(Uv(t),qg(t),!0===e&&!0!==t.ac){const s=t.sharedClientState.getAllActiveQueryTargets(),a=yield Wg(t,s.toArray());t.ac=!0,yield Gf(t.remoteStore,!0);for(const l of a)ad(t.remoteStore,l)}else if(!1===e&&!1!==t.ac){const s=[];let a=Promise.resolve();t.ec.forEach((l,p)=>{t.sharedClientState.isLocalQueryTarget(p)?s.push(p):a=a.then(()=>(bc(t,p),rd(t.localStore,p,!0))),go(t.remoteStore,p)}),yield a,yield Wg(t,s),function(l){const p=it(l);p.ic.forEach((E,S)=>{go(p.remoteStore,S)}),p.rc.cs(),p.ic=new Map,p.sc=new Br(ut.comparator)}(t),t.ac=!1,yield Gf(t.remoteStore,!1)}}),hh.apply(this,arguments)}function Wg(n,e,t){return Qf.apply(this,arguments)}function Qf(){return Qf=(0,Ae.Z)(function*(n,e,t){const s=it(n),a=[],l=[];for(const p of e){let E;const S=s.ec.get(p);if(S&&0!==S.length){E=yield nd(s.localStore,se(S[0]));for(const P of S){const G=s.tc.get(P),Q=yield Nv(s,G);Q.snapshot&&l.push(Q.snapshot)}}else{const P=yield vg(s.localStore,p);E=yield nd(s.localStore,P),yield kg(s,Kg(P),p,!1)}a.push(E)}return s.Zu.Go(l),a}),Qf.apply(this,arguments)}function Kg(n){return Lo(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function kv(n){const e=it(n);return it(it(e.localStore).persistence).Ri()}function Fv(n,e,t,s){return Jf.apply(this,arguments)}function Jf(){return Jf=(0,Ae.Z)(function*(n,e,t,s){const a=it(n);if(a.ac)return void Ze("SyncEngine","Ignoring unexpected query state notification.");const l=a.ec.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const p=yield nE(a.localStore,Or(l[0])),E=Wd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield gu(a,p,E);break}case"rejected":yield rd(a.localStore,e,!0),bc(a,e,s);break;default:gt()}}),Jf.apply(this,arguments)}function Lv(n,e,t){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,Ae.Z)(function*(n,e,t){const s=Uv(n);if(s.ac){for(const a of e){if(s.ec.has(a)){Ze("SyncEngine","Adding an already active target "+a);continue}const l=yield vg(s.localStore,a),p=yield nd(s.localStore,l);yield kg(s,Kg(l),p.targetId,!1),ad(s.remoteStore,p)}for(const a of t)s.ec.has(a)&&(yield rd(s.localStore,a,!1).then(()=>{go(s.remoteStore,a),bc(s,a)}).catch(Nu))}}),Xf.apply(this,arguments)}function Uv(n){const e=it(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Sv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ov.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xv.bind(null,e),e.Zu.Go=lI.bind(null,e.eventManager),e.Zu.lc=cE.bind(null,e.eventManager),e}function qg(n){const e=it(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Fg.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Zf.bind(null,e),e}class Zg{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ae.Z)(function*(){t.wt=nh(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return ev(this.persistence,new Xy,e.initialUser,this.wt)}_c(e){return new hg(ed.Ms,this.wt)}dc(e){return new wg}terminate(){var e=this;return(0,Ae.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Vv extends Zg{constructor(e,t,s){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,Ae.Z)(function*(){yield t().call(s,e),yield s.yc.initialize(s,e),yield qg(s.yc.syncEngine),yield vl(s.yc.remoteStore),yield s.persistence.ci(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return ev(this.persistence,new Xy,e.initialUser,this.wt)}mc(e,t){return new q0(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const s=new aa(t,this.persistence);return new Qh(e.asyncQueue,s)}_c(e){const t=fg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?fo.withCacheSize(this.cacheSizeBytes):fo.DEFAULT;return new gc(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,dv(),id(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new wg}}class xi extends Vv{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,Ae.Z)(function*(){yield t().call(s,e);const a=s.yc.syncEngine;s.sharedClientState instanceof Uf&&(s.sharedClientState.syncEngine={kr:gE.bind(null,a),Or:Fv.bind(null,a),Mr:Lv.bind(null,a),Ri:kv.bind(null,a),Nr:pE.bind(null,a)},yield s.sharedClientState.start()),yield s.persistence.ci(function(){var l=(0,Ae.Z)(function*(p){yield function Pv(n,e){return hh.apply(this,arguments)}(s.yc.syncEngine,p),s.gcScheduler&&(p&&!s.gcScheduler.started?s.gcScheduler.start():p||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(p&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():p||s.indexBackfillerScheduler.stop())});return function(p){return l.apply(this,arguments)}}())})()}dc(e){const t=dv();if(!Uf.V(t))throw new qe(be.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=fg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Uf(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class ep{initialize(e,t){var s=this;return(0,Ae.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=a=>fd(s.syncEngine,a,1),s.remoteStore.remoteSyncer.handleCredentialChange=Rv.bind(null,s.syncEngine),yield Gf(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new cI}createDatastore(e){const t=nh(e.databaseInfo.databaseId),s=new Ig(e.databaseInfo);return new oE(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,a=e.asyncQueue,l=E=>fd(this.syncEngine,E,0),p=cv.V()?new cv:new uv,new sd(t,s,a,l,p);var t,s,a,l,p}createSyncEngine(e,t){return function(s,a,l,p,E,S,P){const G=new hE(s,a,l,p,E,S);return P&&(G.ac=!0),G}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ae.Z)(function*(t){const s=it(t);Ze("RemoteStore","RemoteStore shutting down."),s.lu.add(5),yield od(s),s.du.shutdown(),s._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Bv(n,e=10240){let t=0;return{read:()=>(0,Ae.Z)(function*(){if(t<n.byteLength){const s={value:n.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,Ae.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class tp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class jv{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new ci,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(s=>{s&&s.Cu()?this.metadata.resolve(s.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.payload)}`))},s=>this.metadata.reject(s))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,Ae.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,Ae.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,Ae.Z)(function*(){const t=yield e.bc();if(null===t)return null;const s=e.Ac.decode(t),a=Number(s);isNaN(a)&&e.Pc(`length string (${s}) is not valid number`);const l=yield e.vc(a);return new wv(JSON.parse(l),t.length+a)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,Ae.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}vc(e){var t=this;return(0,Ae.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const s=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,Ae.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class yE{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ae.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new qe(be.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(a=(0,Ae.Z)(function*(l,p){const E=it(l),S=ul(E.wt)+"/documents",P={documents:p.map(Oe=>al(E.wt,Oe))},G=yield E.ao("BatchGetDocuments",S,P),Q=new Map;G.forEach(Oe=>{const We=function vf(n,e){return"found"in e?function(t,s){kt(!!s.found);const a=zi(t,s.found.name),l=sr(s.found.updateTime),p=new Rr({mapValue:{fields:s.found.fields}});return Yn.newFoundDocument(a,l,p)}(n,e):"missing"in e?function(t,s){kt(!!s.missing),kt(!!s.readTime);const a=zi(t,s.missing),l=sr(s.readTime);return Yn.newNoDocument(a,l)}(n,e):gt()}(E.wt,Oe);Q.set(We.key.toString(),We)});const Ee=[];return p.forEach(Oe=>{const We=Q.get(Oe.toString());kt(!!We),Ee.push(We)}),Ee}),function(l,p){return a.apply(this,arguments)})(t.datastore,e);var a;return s.forEach(a=>t.recordVersion(a)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Vu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ae.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,a)=>{const l=ut.fromPath(a);e.mutations.push(new $l(l,e.precondition(l)))}),yield(s=(0,Ae.Z)(function*(a,l){const p=it(a),E=ul(p.wt)+"/documents",S={writes:l.map(P=>cl(p.wt,P))};yield p.ro("Commit",E,S)}),function(a,l){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw gt();t=Wt.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new qe(be.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Nr.updateTime(t):Nr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Wt.min()))throw new qe(be.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Nr.updateTime(t)}return Nr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class $v{constructor(e,t,s,a,l){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=a,this.deferred=l,this.Dc=s.maxAttempts,this.So=new Dg(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,Ae.Z)(function*(){const t=new yE(e.datastore),s=e.xc(t);s&&s.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(l=>{e.Nc(l)}))}).catch(a=>{e.Nc(a)})}))}xc(e){try{const t=this.updateFunction(e);return!Zn(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!ff(t)}return!1}}class Hv{constructor(e,t,s,a){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=a,this.user=xt.UNAUTHENTICATED,this.clientId=Wh.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var p=(0,Ae.Z)(function*(E){Ze("FirestoreClient","Received user=",E.uid),yield l.authCredentialListener(E),l.user=E});return function(E){return p.apply(this,arguments)}}()),this.appCheckCredentials.start(s,p=>(Ze("FirestoreClient","Received new app check token=",p),this.appCheckCredentialListener(p,this.user)))}getConfiguration(){var e=this;return(0,Ae.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new qe(be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ci;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ae.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const a=ih(s,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function El(n,e){return Yg.apply(this,arguments)}function Yg(){return Yg=(0,Ae.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ze("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,Ae.Z)(function*(l){s.isEqual(l)||(yield tv(e.localStore,l),s=l)});return function(l){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Yg.apply(this,arguments)}function Gv(n,e){return np.apply(this,arguments)}function np(){return np=(0,Ae.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Qg(n);Ze("FirestoreClient","Initializing OnlineComponentProvider");const s=yield n.getConfiguration();yield e.initialize(t,s),n.setCredentialChangeListener(a=>vv(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,l)=>vv(e.remoteStore,l)),n.onlineComponents=e}),np.apply(this,arguments)}function Qg(n){return rp.apply(this,arguments)}function rp(){return rp=(0,Ae.Z)(function*(n){return n.offlineComponents||(Ze("FirestoreClient","Using default OfflineComponentProvider"),yield El(n,new Zg)),n.offlineComponents}),rp.apply(this,arguments)}function Jg(n){return ip.apply(this,arguments)}function ip(){return ip=(0,Ae.Z)(function*(n){return n.onlineComponents||(Ze("FirestoreClient","Using default OnlineComponentProvider"),yield Gv(n,new ep)),n.onlineComponents}),ip.apply(this,arguments)}function sp(n){return Qg(n).then(e=>e.persistence)}function da(n){return Qg(n).then(e=>e.localStore)}function zv(n){return Jg(n).then(e=>e.remoteStore)}function Xg(n){return Jg(n).then(e=>e.syncEngine)}function Us(n){return Bo.apply(this,arguments)}function Bo(){return Bo=(0,Ae.Z)(function*(n){const e=yield Jg(n),t=e.eventManager;return t.onListen=fE.bind(null,e.syncEngine),t.onUnlisten=Cv.bind(null,e.syncEngine),t}),Bo.apply(this,arguments)}function qv(n,e,t={}){const s=new ci;return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return function(a,l,p,E,S){const P=new tp({next:Q=>{l.enqueueAndForget(()=>Og(a,G));const Ee=Q.docs.has(p);!Ee&&Q.fromCache?S.reject(new qe(be.UNAVAILABLE,"Failed to get document because the client is offline.")):Ee&&Q.fromCache&&E&&"server"===E.source?S.reject(new qe(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):S.resolve(Q)},error:Q=>S.reject(Q)}),G=new Ng(g(p.path),P,{includeMetadataChanges:!0,Du:!0});return _v(a,G)}(yield Us(n),n.asyncQueue,e,t,s)})),s.promise}function Zv(n,e,t={}){const s=new ci;return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return function(a,l,p,E,S){const P=new tp({next:Q=>{l.enqueueAndForget(()=>Og(a,G)),Q.fromCache&&"server"===E.source?S.reject(new qe(be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):S.resolve(Q)},error:Q=>S.reject(Q)}),G=new Ng(p,P,{includeMetadataChanges:!0,Du:!0});return _v(a,G)}(yield Us(n),n.asyncQueue,e,t,s)})),s.promise}const tm=new Map;function nm(n,e,t){if(!t)throw new qe(be.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rm(n,e,t,s){if(!0===e&&!0===s)throw new qe(be.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function im(n){if(!ut.isDocumentKey(n))throw new qe(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ph(n){if(ut.isDocumentKey(n))throw new qe(be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function op(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":gt()}function Dn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new qe(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=op(n);throw new qe(be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function sm(n,e){if(e<=0)throw new qe(be.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class ap{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new qe(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new qe(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,rm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Tc{constructor(e,t,s){this._authCredentials=t,this._appCheckCredentials=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ap({}),this._settingsFrozen=!1,e instanceof Ma?this._databaseId=e:(this._app=e,this._databaseId=function(a){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new qe(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ma(a.options.projectId)}(e))}get app(){if(!this._app)throw new qe(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new qe(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ap(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Zu;switch(t.type){case"gapi":const s=t.client;return kt(!("object"!=typeof s||null===s||!s.auth||!s.auth.getAuthHeaderValueForFirstParty)),new Gh(s,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new qe(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=tm.get(e);t&&(Ze("ComponentProvider","Removing Datastore"),tm.delete(e),t.terminate())}(this),Promise.resolve()}}class Er{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ua(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Er(this.firestore,e,this._key)}}class ss{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ss(this.firestore,e,this._query)}}class Ua extends ss{constructor(e,t,s){super(e,t,g(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Er(this.firestore,null,new ut(e))}withConverter(e){return new Ua(this.firestore,e,this._path)}}function am(n,e,...t){if(n=(0,Pt.m9)(n),nm("collection","path",e),n instanceof Tc){const s=yn.fromString(e,...t);return ph(s),new Ua(n,null,s)}{if(!(n instanceof Er||n instanceof Ua))throw new qe(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(yn.fromString(e,...t));return ph(s),new Ua(n.firestore,null,s)}}function gh(n,e,...t){if(n=(0,Pt.m9)(n),1===arguments.length&&(e=Wh.I()),nm("doc","path",e),n instanceof Tc){const s=yn.fromString(e,...t);return im(s),new Er(n,null,new ut(s))}{if(!(n instanceof Er||n instanceof Ua))throw new qe(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(yn.fromString(e,...t));return im(s),new Er(n.firestore,n instanceof Ua?n.converter:null,new ut(s))}}function um(n,e){return n=(0,Pt.m9)(n),e=(0,Pt.m9)(e),(n instanceof Er||n instanceof Ua)&&(e instanceof Er||e instanceof Ua)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function cm(n,e){return n=(0,Pt.m9)(n),e=(0,Pt.m9)(e),n instanceof ss&&e instanceof ss&&n.firestore===e.firestore&&Xe(n._query,e._query)&&n.converter===e.converter}class wE{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new Dg(this,"async_queue_retry"),this.Kc=()=>{const t=id();t&&Ze("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=id();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=id();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new ci;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,Ae.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!ou(t))throw t;Ze("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(s=>{throw this.Bc=s,this.Lc=!1,Mn("INTERNAL UNHANDLED ERROR: ",function(l){let p=l.message||"";return l.stack&&(p=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),p}(s)),s}).then(s=>(this.Lc=!1,s))));return this.Oc=t,t}enqueueAfterDelay(e,t,s){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const a=Rg.createAndSchedule(this,e,t,s,l=>this.Wc(l));return this.$c.push(a),a}Gc(){this.Bc&&gt()}verifyOperationInProgress(){}zc(){var e=this;return(0,Ae.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function lm(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const a of["next","error","complete"])if(a in s&&"function"==typeof s[a])return!0;return!1}(n)}class IE{constructor(){this._progressObserver={},this._taskCompletionResolver=new ci,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Pr extends Tc{constructor(e,t,s){super(e,t,s),this.type="firestore",this._queue=new wE,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Qv(this),this._firestoreClient.terminate()}}function vi(n){return n._firestoreClient||Qv(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Qv(n){var e;const t=n._freezeSettings(),s=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Nd(n._databaseId,l,n._persistenceKey,(E=t).host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,E.useFetchStreams));var l,E;n._firestoreClient=new Hv(n._authCredentials,n._appCheckCredentials,n._queue,s)}function Jv(n,e,t){const s=new ci;return n.asyncQueue.enqueue((0,Ae.Z)(function*(){try{yield El(n,t),yield Gv(n,e),s.resolve()}catch(a){if(!("FirebaseError"===(l=a).name?l.code===be.FAILED_PRECONDITION||l.code===be.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),s.reject(a)}var l})).then(()=>s.promise)}function dm(n){if(n._initialized||n._terminated)throw new qe(be.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class mu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new qe(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Va{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Va(Zr.fromBase64String(e))}catch(t){throw new qe(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Va(Zr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Cc{constructor(e){this._methodName=e}}class mh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new qe(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new qe(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Zt(this._lat,e._lat)||Zt(this._long,e._long)}}const t_=/^__.*__$/;class n_{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new hu(e,this.data,this.fieldMask,t,this.fieldTransforms):new ol(e,this.data,t,this.fieldTransforms)}}class hm{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new hu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Sc(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt()}}class up{constructor(e,t,s,a,l,p){this.settings=e,this.databaseId=t,this.wt=s,this.ignoreUndefinedProperties=a,void 0===l&&this.Xc(),this.fieldTransforms=l||[],this.fieldMask=p||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new up(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ta({path:s,na:!1});return a.sa(e),a}ia(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ta({path:s,na:!1});return a.Xc(),a}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return lp(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(Sc(this.Zc)&&t_.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class RE{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=s||nh(e)}aa(e,t,s,a=!1){return new up({Zc:e,methodName:t,ca:s,path:Mr.emptyPath(),na:!1,ua:a},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function ha(n){const e=n._freezeSettings(),t=nh(n._databaseId);return new RE(n._databaseId,!!e.ignoreUndefinedProperties,t)}function fm(n,e,t,s,a,l={}){const p=n.aa(l.merge||l.mergeFields?2:0,e,t,a);gd("Data must be an object, but it was:",p,s);const E=s_(s,p);let S,P;if(l.merge)S=new oo(p.fieldMask),P=p.fieldTransforms;else if(l.mergeFields){const G=[];for(const Q of l.mergeFields){const Ee=kr(e,Q,t);if(!p.contains(Ee))throw new qe(be.INVALID_ARGUMENT,`Field '${Ee}' is specified in your field mask but missing from your input data.`);o_(G,Ee)||G.push(Ee)}S=new oo(G),P=p.fieldTransforms.filter(Q=>S.covers(Q.field))}else S=null,P=p.fieldTransforms;return new n_(new Rr(E),S,P)}class wl extends Cc{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wl}}function OE(n,e,t){return new up({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class cp extends Cc{_toFieldTransform(e){return new sl(e.path,new cu)}isEqual(e){return e instanceof cp}}class r_ extends Cc{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=OE(this,e,!0),s=this.ha.map(l=>yu(l,t)),a=new lu(s);return new sl(e.path,a)}isEqual(e){return this===e}}class gI extends Cc{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=OE(this,e,!0),s=this.ha.map(l=>yu(l,t)),a=new ka(s);return new sl(e.path,a)}isEqual(e){return this===e}}class Gt extends Cc{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new il(e.wt,rl(e.wt,this.la));return new sl(e.path,t)}isEqual(e){return this===e}}function pm(n,e,t,s){const a=n.aa(1,e,t);gd("Data must be an object, but it was:",a,s);const l=[],p=Rr.empty();ua(s,(S,P)=>{const G=vh(e,S,t);P=(0,Pt.m9)(P);const Q=a.ia(G);if(P instanceof wl)l.push(G);else{const Ee=yu(P,Q);null!=Ee&&(l.push(G),p.set(G,Ee))}});const E=new oo(l);return new hm(p,E,a.fieldTransforms)}function gm(n,e,t,s,a,l){const p=n.aa(1,e,t),E=[kr(e,s,t)],S=[a];if(l.length%2!=0)throw new qe(be.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ee=0;Ee<l.length;Ee+=2)E.push(kr(e,l[Ee])),S.push(l[Ee+1]);const P=[],G=Rr.empty();for(let Ee=E.length-1;Ee>=0;--Ee)if(!o_(P,E[Ee])){const Oe=E[Ee];let We=S[Ee];We=(0,Pt.m9)(We);const ht=p.ia(Oe);if(We instanceof wl)P.push(Oe);else{const It=yu(We,ht);null!=It&&(P.push(Oe),G.set(Oe,It))}}const Q=new oo(P);return new hm(G,Q,p.fieldTransforms)}function i_(n,e,t,s=!1){return yu(t,n.aa(s?4:3,e))}function yu(n,e){if(yh(n=(0,Pt.m9)(n)))return gd("Unsupported field value:",e,n),s_(n,e);if(n instanceof Cc)return function(t,s){if(!Sc(s.Zc))throw s.oa(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.oa(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,s){const a=[];let l=0;for(const p of t){let E=yu(p,s.ra(l));null==E&&(E={nullValue:"NULL_VALUE"}),a.push(E),l++}return{arrayValue:{values:a}}}(n,e)}return function(t,s){if(null===(t=(0,Pt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return rl(s.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=vr.fromDate(t);return{timestampValue:Kl(s.wt,a)}}if(t instanceof vr){const a=new vr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Kl(s.wt,a)}}if(t instanceof mh)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Va)return{bytesValue:Wp(s.wt,t._byteString)};if(t instanceof Er){const a=s.databaseId,l=t.firestore._databaseId;if(!l.isEqual(a))throw s.oa(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:yf(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.oa(`Unsupported field value: ${op(t)}`)}(n,e)}function s_(n,e){const t={};return Od(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ua(n,(s,a)=>{const l=yu(a,e.ea(s));null!=l&&(t[s]=l)}),{mapValue:{fields:t}}}function yh(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof vr||n instanceof mh||n instanceof Va||n instanceof Er||n instanceof Cc)}function gd(n,e,t){if(!yh(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=op(t);throw e.oa("an object"===s?n+" a custom object":n+" "+s)}var s}function kr(n,e,t){if((e=(0,Pt.m9)(e))instanceof mu)return e._internalPath;if("string"==typeof e)return vh(n,e);throw lp("Field path arguments must be of type string or ",n,!1,void 0,t)}const mI=new RegExp("[~\\*/\\[\\]]");function vh(n,e,t){if(e.search(mI)>=0)throw lp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new mu(...e.split("."))._internalPath}catch(s){throw lp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function lp(n,e,t,s,a){const l=s&&!s.isEmpty(),p=void 0!==a;let E=`Function ${e}() called with invalid data`;t&&(E+=" (via `toFirestore()`)"),E+=". ";let S="";return(l||p)&&(S+=" (found",l&&(S+=` in field ${s}`),p&&(S+=` in document ${a}`),S+=")"),new qe(be.INVALID_ARGUMENT,E+n+S)}function o_(n,e){return n.some(t=>t.isEqual(e))}class md{constructor(e,t,s,a,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Er(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new a_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(_h("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class a_ extends md{data(){return super.data()}}function _h(n,e){return"string"==typeof e?vh(n,e):e instanceof mu?e._internalPath:e._delegate._internalPath}class Ac{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hu extends md{constructor(e,t,s,a,l,p){super(e,t,s,a,p),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Eh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(_h("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Eh extends Hu{data(e={}){return super.data(e)}}class xc{constructor(e,t,s,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Ac(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Eh(this._firestore,this._userDataWriter,s.key,s,new Ac(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new qe(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(p=>({type:"added",doc:new Eh(s._firestore,s._userDataWriter,p.doc.key,p.doc,new Ac(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:l++}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(p=>a||3!==p.type).map(p=>{const E=new Eh(s._firestore,s._userDataWriter,p.doc.key,p.doc,new Ac(s._snapshot.mutatedKeys.has(p.doc.key),s._snapshot.fromCache),s.query.converter);let S=-1,P=-1;return 0!==p.type&&(S=l.indexOf(p.doc.key),l=l.delete(p.doc.key)),1!==p.type&&(l=l.add(p.doc),P=l.indexOf(p.doc.key)),{type:wh(p.type),doc:E,oldIndex:S,newIndex:P}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function wh(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt()}}function u_(n,e){return n instanceof Hu&&e instanceof Hu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof xc&&e instanceof xc&&n._firestore===e._firestore&&cm(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function c_(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new qe(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ih{}function Ba(n,...e){for(const t of e)n=t._apply(n);return n}class l_ extends Ih{constructor(e,t,s){super(),this.fa=e,this.da=t,this._a=s,this.type="where"}_apply(e){const t=ha(e.firestore),s=function(a,l,p,E,S,P,G){let Q;if(S.isKeyField()){if("array-contains"===P||"array-contains-any"===P)throw new qe(be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${P}' queries on documentId().`);if("in"===P||"not-in"===P){y_(G,P);const Oe=[];for(const We of G)Oe.push(m_(E,a,We));Q={arrayValue:{values:Oe}}}else Q=m_(E,a,G)}else"in"!==P&&"not-in"!==P&&"array-contains-any"!==P||y_(G,P),Q=i_(p,"where",G,"in"===P||"not-in"===P);const Ee=Si.create(S,P,Q);return function(Oe,We){if(We.ht()){const It=v(Oe);if(null!==It&&!It.isEqual(We.field))throw new qe(be.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${It.toString()}' and '${We.field.toString()}'`);const En=f(Oe);null!==En&&LE(0,We.field,En)}const ht=function(It,En){for(const zn of It.filters)if(En.indexOf(zn.op)>=0)return zn.op;return null}(Oe,function(It){switch(It){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(We.op));if(null!==ht)throw new qe(be.INVALID_ARGUMENT,ht===We.op?`Invalid query. You cannot use more than one '${We.op.toString()}' filter.`:`Invalid query. You cannot use '${We.op.toString()}' filters with '${ht.toString()}' filters.`)}(a,Ee),Ee}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new ss(e.firestore,e.converter,function(a,l){const p=a.filters.concat([l]);return new Es(a.path,a.collectionGroup,a.explicitOrderBy.slice(),p,a.limit,a.limitType,a.startAt,a.endAt)}(e._query,s))}}class h_ extends Ih{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(s,a,l){if(null!==s.startAt)throw new qe(be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new qe(be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const p=new tc(a,l);return function(E,S){if(null===f(E)){const P=v(E);null!==P&&LE(0,P,S.field)}}(s,p),p}(e._query,this.fa,this.wa);return new ss(e.firestore,e.converter,function(s,a){const l=s.explicitOrderBy.concat([a]);return new Es(s.path,s.collectionGroup,l,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class yd extends Ih{constructor(e,t,s){super(),this.type=e,this.ma=t,this.ga=s}_apply(e){return new ss(e.firestore,e.converter,Me(e._query,this.ma,this.ga))}}class f_ extends Ih{constructor(e,t,s){super(),this.type=e,this.ya=t,this.pa=s}_apply(e){const t=ym(e,this.type,this.ya,this.pa);return new ss(e.firestore,e.converter,(a=t,new Es((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,a,s.endAt)));var s,a}}class mm extends Ih{constructor(e,t,s){super(),this.type=e,this.ya=t,this.pa=s}_apply(e){const t=ym(e,this.type,this.ya,this.pa);return new ss(e.firestore,e.converter,(a=t,new Es((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,a)));var s,a}}function ym(n,e,t,s){if(t[0]=(0,Pt.m9)(t[0]),t[0]instanceof md)return function(a,l,p,E,S){if(!E)throw new qe(be.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${p}().`);const P=[];for(const G of B(a))if(G.field.isKeyField())P.push(ko(l,E.key));else{const Q=E.data.field(G.field);if(Ll(Q))throw new qe(be.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+G.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Q){const Ee=G.field.canonicalString();throw new qe(be.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ee}' (used as the orderBy) does not exist.`)}P.push(Q)}return new Na(P,S)}(n._query,n.firestore._databaseId,e,t[0]._document,s);{const a=ha(n.firestore);return function(l,p,E,S,P,G){const Q=l.explicitOrderBy;if(P.length>Q.length)throw new qe(be.INVALID_ARGUMENT,`Too many arguments provided to ${S}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ee=[];for(let Oe=0;Oe<P.length;Oe++){const We=P[Oe];if(Q[Oe].field.isKeyField()){if("string"!=typeof We)throw new qe(be.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${S}(), but got a ${typeof We}`);if(!O(l)&&-1!==We.indexOf("/"))throw new qe(be.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${S}() must be a plain document ID, but '${We}' contains a slash.`);const ht=l.path.child(yn.fromString(We));if(!ut.isDocumentKey(ht))throw new qe(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${S}() must result in a valid document path, but '${ht}' is not because it contains an odd number of segments.`);const It=new ut(ht);Ee.push(ko(p,It))}else{const ht=i_(E,S,We);Ee.push(ht)}}return new Na(Ee,G)}(n._query,n.firestore._databaseId,a,e,t,s)}}function m_(n,e,t){if("string"==typeof(t=(0,Pt.m9)(t))){if(""===t)throw new qe(be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!O(e)&&-1!==t.indexOf("/"))throw new qe(be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(yn.fromString(t));if(!ut.isDocumentKey(s))throw new qe(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return ko(n,new ut(s))}if(t instanceof Er)return ko(n,t._key);throw new qe(be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${op(t)}.`)}function y_(n,e){if(!Array.isArray(n)||0===n.length)throw new qe(be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new qe(be.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function LE(n,e,t){if(!t.isEqual(e))throw new qe(be.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const yI={maxAttempts:5};class v_{convertValue(e,t="none"){switch(Lu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _r(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw gt()}}convertObject(e,t){const s={};return ua(e.fields,(a,l)=>{s[a]=this.convertValue(l,t)}),s}convertGeoPoint(e){return new mh(_r(e.latitude),_r(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=ku(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Fu(e));default:return null}}convertTimestamp(e){const t=xa(e);return new vr(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=yn.fromString(e);kt(Ef(s));const a=new Ma(s.get(1),s.get(3)),l=new ut(s.popFirst(5));return a.isEqual(t)||Mn(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function vm(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class __ extends v_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Va(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Er(this.firestore,null,t)}}class bh{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ha(e)}set(e,t,s){this._verifyNotCommitted();const a=Mc(e,this._firestore),l=vm(a.converter,t,s),p=fm(this._dataReader,"WriteBatch.set",a._key,l,null!==a.converter,s);return this._mutations.push(p.toMutation(a._key,Nr.none())),this}update(e,t,s,...a){this._verifyNotCommitted();const l=Mc(e,this._firestore);let p;return p="string"==typeof(t=(0,Pt.m9)(t))||t instanceof mu?gm(this._dataReader,"WriteBatch.update",l._key,t,s,a):pm(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(p.toMutation(l._key,Nr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Mc(e,this._firestore);return this._mutations=this._mutations.concat(new Vu(t._key,Nr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new qe(be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Mc(n,e){if((n=(0,Pt.m9)(n)).firestore!==e)throw new qe(be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Rc extends v_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Va(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Er(this.firestore,null,t)}}function E_(n,e,t){n=Dn(n,Er);const s=Dn(n.firestore,Pr),a=vm(n.converter,e,t);return Dl(s,[fm(ha(s),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,Nr.none())])}function _m(n,e,t,...s){n=Dn(n,Er);const a=Dn(n.firestore,Pr),l=ha(a);let p;return p="string"==typeof(e=(0,Pt.m9)(e))||e instanceof mu?gm(l,"updateDoc",n._key,e,t,s):pm(l,"updateDoc",n._key,e),Dl(a,[p.toMutation(n._key,Nr.exists(!0))])}function Il(n,...e){var t,s,a;n=(0,Pt.m9)(n);let l={includeMetadataChanges:!1},p=0;"object"!=typeof e[p]||lm(e[p])||(l=e[p],p++);const E={includeMetadataChanges:l.includeMetadataChanges};if(lm(e[p])){const Q=e[p];e[p]=null===(t=Q.next)||void 0===t?void 0:t.bind(Q),e[p+1]=null===(s=Q.error)||void 0===s?void 0:s.bind(Q),e[p+2]=null===(a=Q.complete)||void 0===a?void 0:a.bind(Q)}let S,P,G;if(n instanceof Er)P=Dn(n.firestore,Pr),G=g(n._key.path),S={next:Q=>{e[p]&&e[p](Em(P,n,Q))},error:e[p+1],complete:e[p+2]};else{const Q=Dn(n,ss);P=Dn(Q.firestore,Pr),G=Q._query;const Ee=new Rc(P);S={next:Oe=>{e[p]&&e[p](new xc(P,Ee,Q,Oe))},error:e[p+1],complete:e[p+2]},c_(n._query)}return function(Q,Ee,Oe,We){const ht=new tp(We),It=new Ng(Ee,ht,Oe);return Q.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return _v(yield Us(Q),It)})),()=>{ht.Tc(),Q.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return Og(yield Us(Q),It)}))}}(vi(P),G,E,S)}function Dl(n,e){return function(t,s){const a=new ci;return t.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return function dI(n,e,t){return ah.apply(this,arguments)}(yield Xg(t),s,a)})),a.promise}(vi(n),e)}function Em(n,e,t){const s=t.docs.get(e._key),a=new Rc(n);return new Hu(n,a,e._key,s,new Ac(t.hasPendingWrites,t.fromCache),e.converter)}class w_ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ha(e)}get(e){const t=Mc(e,this._firestore),s=new __(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return gt();const l=a[0];if(l.isFoundDocument())return new md(this._firestore,s,l.key,l,t.converter);if(l.isNoDocument())return new md(this._firestore,s,t._key,null,t.converter);throw gt()})}set(e,t,s){const a=Mc(e,this._firestore),l=vm(a.converter,t,s),p=fm(this._dataReader,"Transaction.set",a._key,l,null!==a.converter,s);return this._transaction.set(a._key,p),this}update(e,t,s,...a){const l=Mc(e,this._firestore);let p;return p="string"==typeof(t=(0,Pt.m9)(t))||t instanceof mu?gm(this._dataReader,"Transaction.update",l._key,t,s,a):pm(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,p),this}delete(e){const t=Mc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Mc(e,this._firestore),s=new Rc(this._firestore);return super.get(e).then(a=>new Hu(this._firestore,s,t._key,a._document,new Ac(!1,!1),t.converter))}}function Dm(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new qe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function bm(){if("undefined"==typeof Uint8Array)throw new qe("unimplemented","Uint8Arrays are not available in this environment.")}function T_(){if(!function ay(){return"undefined"!=typeof atob}())throw new qe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){cn=Rn.SDK_VERSION,(0,Rn._registerComponent)(new ei.wA("firestore",(t,{options:s})=>{const a=t.getProvider("app").getImmediate(),l=new Pr(a,new Fp(t.getProvider("auth-internal")),new Lp(t.getProvider("app-check-internal")));return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC")),(0,Rn.registerVersion)(Ht,"3.4.10",n),(0,Rn.registerVersion)(Ht,"3.4.10","esm2017")}();class Ch{constructor(e){this._delegate=e}static fromBase64String(e){return T_(),new Ch(Va.fromBase64String(e))}static fromUint8Array(e){return bm(),new Ch(Va.fromUint8Array(e))}toBase64(){return T_(),this._delegate.toBase64()}toUint8Array(){return bm(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Tm(n){return function QE(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(n,["next","error","complete"])}class JE{enableIndexedDbPersistence(e,t){return function bE(n,e){dm(n=Dn(n,Pr));const t=vi(n),s=n._freezeSettings(),a=new ep;return Jv(t,a,new Vv(a,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function TE(n){dm(n=Dn(n,Pr));const e=vi(n),t=n._freezeSettings(),s=new ep;return Jv(e,s,new xi(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function CE(n){if(n._initialized&&!n._terminated)throw new qe(be.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ci;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ae.Z)(function*(){try{yield(t=(0,Ae.Z)(function*(s){if(!io.V())return Promise.resolve();const a=s+"main";yield io.delete(a)}),function(s){return t.apply(this,arguments)})(fg(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class C_{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ma||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&mi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function om(n,e,t,s={}){var a;const l=(n=Dn(n,Tc))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&mi("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let p,E;if("string"==typeof s.mockUserToken)p=s.mockUserToken,E=xt.MOCK_USER;else{p=(0,Pt.Sg)(s.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new qe(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new xt(S)}n._authCredentials=new jc(new Nl(p,E))}}(this._delegate,e,t,s)}enableNetwork(){return function AE(n){return function La(n){return n.asyncQueue.enqueue((0,Ae.Z)(function*(){const e=yield sp(n),t=yield zv(n);return e.setNetworkEnabled(!0),function(s){const a=it(s);return a.lu.delete(0),rh(a)}(t)}))}(vi(n=Dn(n,Pr)))}(this._delegate)}disableNetwork(){return function xE(n){return function Wv(n){return n.asyncQueue.enqueue((0,Ae.Z)(function*(){const e=yield sp(n),t=yield zv(n);return e.setNetworkEnabled(!1),(s=(0,Ae.Z)(function*(a){const l=it(a);l.lu.add(0),yield od(l),l._u.set("Offline")}),function(a){return s.apply(this,arguments)})(t);var s}))}(vi(n=Dn(n,Pr)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,rm("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function SE(n){return function(e){const t=new ci;return e.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return function Ug(n,e){return Mv.apply(this,arguments)}(yield Xg(e),t)})),t.promise}(vi(n=Dn(n,Pr)))}(this._delegate)}onSnapshotsInSync(e){return function zE(n,e){return function _E(n,e){const t=new tp(e);return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return s=yield Us(n),a=t,it(s).Tu.add(a),void a.next();var s,a})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return s=yield Us(n),a=t,void it(s).Tu.delete(a);var s,a}))}}(vi(n=Dn(n,Pr)),lm(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new qe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new vd(this,am(this._delegate,e))}catch(t){throw Is(t,"collection()","Firestore.collection()")}}doc(e){try{return new fa(this,gh(this._delegate,e))}catch(t){throw Is(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new os(this,function Yv(n,e){if(n=Dn(n,Tc),nm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new qe(be.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ss(n,null,(t=e,new Es(yn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Is(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function WE(n,e,t){n=Dn(n,Pr);const s=Object.assign(Object.assign({},yI),t);return function(a){if(a.maxAttempts<1)throw new qe(be.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function em(n,e,t){const s=new ci;return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){const a=yield(l=n,Jg(l).then(p=>p.datastore));var l;new $v(n.asyncQueue,a,t,e,s).run()})),s.promise}(vi(n),a=>e(new w_(n,a)),s)}(this._delegate,t=>e(new Cm(this,t)))}batch(){return vi(this._delegate),new Sm(new bh(this._delegate,e=>Dl(this._delegate,e)))}loadBundle(e){return function Xv(n,e){const t=vi(n=Dn(n,Pr)),s=new IE;return function fh(n,e,t,s){const a=function(l,p){let E;return E="string"==typeof l?(new TextEncoder).encode(l):l,S=function(S,P){if(S instanceof Uint8Array)return Bv(S,P);if(S instanceof ArrayBuffer)return Bv(new Uint8Array(S),P);if(S instanceof ReadableStream)return S.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(E),new jv(S,p);var S}(t,nh(e));n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){!function mE(n,e,t){const s=it(n);var a;(a=(0,Ae.Z)(function*(l,p,E){try{const S=yield p.getMetadata();if(yield function(Ee,Oe){const We=it(Ee),ht=sr(Oe.createTime);return We.persistence.runTransaction("hasNewerBundle","readonly",It=>We.Ds.getBundleMetadata(It,Oe.id)).then(It=>!!It&&It.createTime.compareTo(ht)>=0)}(l.localStore,S))return yield p.close(),E._completeWith({taskState:"Success",documentsLoaded:(Ee=S).totalDocuments,bytesLoaded:Ee.totalBytes,totalDocuments:Ee.totalDocuments,totalBytes:Ee.totalBytes}),Promise.resolve(new Set);E._updateProgress(sh(S));const P=new Dv(S,l.localStore,p.wt);let G=yield p.fc();for(;G;){const Ee=yield P.Nu(G);Ee&&E._updateProgress(Ee),G=yield p.fc()}const Q=yield P.complete();return yield gu(l,Q.Mu,void 0),yield function(Ee,Oe){const We=it(Ee);return We.persistence.runTransaction("Save bundle","readwrite",ht=>We.Ds.saveBundleMetadata(ht,Oe))}(l.localStore,S),E._completeWith(Q.progress),Promise.resolve(Q.Ou)}catch(S){return mi("SyncEngine",`Loading bundle failed with ${S}`),E._failWith(S),Promise.resolve(new Set)}var Ee}),function(l,p,E){return a.apply(this,arguments)})(s,e,t).then(a=>{s.sharedClientState.notifyBundleLoaded(a)})}(yield Xg(n),a,s)}))}(t,n._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function e_(n,e){return function EE(n,e){return n.asyncQueue.enqueue((0,Ae.Z)(function*(){return function(t,s){const a=it(t);return a.persistence.runTransaction("Get named query","readonly",l=>a.Ds.getNamedQuery(l,s))}(yield da(n),e)}))}(vi(n=Dn(n,Pr)),e).then(t=>t?new ss(n,null,t.query):null)}(this._delegate,e).then(t=>t?new os(this,t):null)}}class dp extends v_{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ch(new Va(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return fa.forKey(t,this.firestore,null)}}class Cm{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new dp(e)}get(e){const t=Cl(e);return this._delegate.get(t).then(s=>new Sh(this._firestore,new Hu(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const a=Cl(e);return s?(Dm("Transaction.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const l=Cl(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,s,...a),this}delete(e){const t=Cl(e);return this._delegate.delete(t),this}}class Sm{constructor(e){this._delegate=e}set(e,t,s){const a=Cl(e);return s?(Dm("WriteBatch.set",s),this._delegate.set(a,t,s)):this._delegate.set(a,t),this}update(e,t,s,...a){const l=Cl(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,s,...a),this}delete(e){const t=Cl(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class bl{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new Eh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Tl(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=bl.INSTANCES;let a=s.get(e);a||(a=new WeakMap,s.set(e,a));let l=a.get(t);return l||(l=new bl(e,new dp(e),t),a.set(t,l)),l}}bl.INSTANCES=new WeakMap;class fa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new dp(e)}static forPath(e,t,s){if(e.length%2!=0)throw new qe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new fa(t,new Er(t._delegate,s,new ut(e)))}static forKey(e,t,s){return new fa(t,new Er(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new vd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new vd(this.firestore,am(this._delegate,e))}catch(t){throw Is(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Pt.m9)(e))instanceof Er&&um(this._delegate,e)}set(e,t){t=Dm("DocumentReference.set",t);try{return t?E_(this._delegate,e,t):E_(this._delegate,e)}catch(s){throw Is(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?_m(this._delegate,e):_m(this._delegate,e,t,...s)}catch(a){throw Is(a,"updateDoc()","DocumentReference.update()")}}delete(){return function HE(n){return Dl(Dn(n.firestore,Pr),[new Vu(n._key,Nr.none())])}(this._delegate)}onSnapshot(...e){const t=S_(e),s=A_(e,a=>new Sh(this.firestore,new Hu(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return Il(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Th(n){n=Dn(n,Er);const e=Dn(n.firestore,Pr),t=vi(e),s=new Rc(e);return function Kv(n,e){const t=new ci;return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return(s=(0,Ae.Z)(function*(a,l,p){try{const E=yield function(S,P){const G=it(S);return G.persistence.runTransaction("read document","readonly",Q=>G.localDocuments.getDocument(Q,P))}(a,l);E.isFoundDocument()?p.resolve(E):E.isNoDocument()?p.resolve(null):p.reject(new qe(be.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(E){const S=ih(E,`Failed to get document '${l} from cache`);p.reject(S)}}),function(a,l,p){return s.apply(this,arguments)})(yield da(n),e,t);var s})),t.promise}(t,n._key).then(a=>new Hu(e,s,n._key,a,new Ac(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function VE(n){n=Dn(n,Er);const e=Dn(n.firestore,Pr);return qv(vi(e),n._key,{source:"server"}).then(t=>Em(e,n,t))}(this._delegate):function UE(n){n=Dn(n,Er);const e=Dn(n.firestore,Pr);return qv(vi(e),n._key).then(t=>Em(e,n,t))}(this._delegate),t.then(s=>new Sh(this.firestore,new Hu(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new fa(this.firestore,this._delegate.withConverter(e?bl.getInstance(this.firestore,e):null))}}function Is(n,e,t){return n.message=n.message.replace(e,t),n}function S_(n){for(const e of n)if("object"==typeof e&&!Tm(e))return e;return{}}function A_(n,e){var t,s;let a;return a=Tm(n[0])?n[0]:Tm(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{a.next&&a.next(e(l))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(s=a.complete)||void 0===s?void 0:s.bind(a)}}class Sh{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new fa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return u_(this._delegate,e._delegate)}}class Tl extends Sh{data(e){const t=this._delegate.data(e);return function Po(n,e){n||gt()}(void 0!==t),t}}class os{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new dp(e)}where(e,t,s){try{return new os(this.firestore,Ba(this._delegate,function d_(n,e,t){const s=e,a=_h("where",n);return new l_(a,s,t)}(e,t,s)))}catch(a){throw Is(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new os(this.firestore,Ba(this._delegate,function NE(n,e="asc"){const t=e,s=_h("orderBy",n);return new h_(s,t)}(e,t)))}catch(s){throw Is(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new os(this.firestore,Ba(this._delegate,function Dh(n){return sm("limit",n),new yd("limit",n,"F")}(e)))}catch(t){throw Is(t,"limit()","Query.limit()")}}limitToLast(e){try{return new os(this.firestore,Ba(this._delegate,function PE(n){return sm("limitToLast",n),new yd("limitToLast",n,"L")}(e)))}catch(t){throw Is(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new os(this.firestore,Ba(this._delegate,function kE(...n){return new f_("startAt",n,!0)}(...e)))}catch(t){throw Is(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new os(this.firestore,Ba(this._delegate,function p_(...n){return new f_("startAfter",n,!1)}(...e)))}catch(t){throw Is(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new os(this.firestore,Ba(this._delegate,function g_(...n){return new mm("endBefore",n,!1)}(...e)))}catch(t){throw Is(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new os(this.firestore,Ba(this._delegate,function FE(...n){return new mm("endAt",n,!0)}(...e)))}catch(t){throw Is(t,"endAt()","Query.endAt()")}}isEqual(e){return cm(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function jE(n){n=Dn(n,ss);const e=Dn(n.firestore,Pr),t=vi(e),s=new Rc(e);return function vE(n,e){const t=new ci;return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return(s=(0,Ae.Z)(function*(a,l,p){try{const E=yield Pf(a,l,!0),S=new Tv(l,E.ji),P=S.Ku(E.documents),G=S.applyChanges(P,!1);p.resolve(G.snapshot)}catch(E){const S=ih(E,`Failed to execute query '${l} against cache`);p.reject(S)}}),function(a,l,p){return s.apply(this,arguments)})(yield da(n),e,t);var s})),t.promise}(t,n._query).then(a=>new xc(e,s,n,a))}(this._delegate):"server"===(null==e?void 0:e.source)?function $E(n){n=Dn(n,ss);const e=Dn(n.firestore,Pr),t=vi(e),s=new Rc(e);return Zv(t,n._query,{source:"server"}).then(a=>new xc(e,s,n,a))}(this._delegate):function BE(n){n=Dn(n,ss);const e=Dn(n.firestore,Pr),t=vi(e),s=new Rc(e);return c_(n._query),Zv(t,n._query).then(a=>new xc(e,s,n,a))}(this._delegate),t.then(s=>new Ah(this.firestore,new xc(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=S_(e),s=A_(e,a=>new Ah(this.firestore,new xc(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return Il(this._delegate,t,s)}withConverter(e){return new os(this.firestore,this._delegate.withConverter(e?bl.getInstance(this.firestore,e):null))}}class x_{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Tl(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ah{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new os(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Tl(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new x_(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new Tl(this._firestore,s))})}isEqual(e){return u_(this._delegate,e._delegate)}}class vd extends os{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new fa(this.firestore,e):null}doc(e){try{return new fa(this.firestore,void 0===e?gh(this._delegate):gh(this._delegate,e))}catch(t){throw Is(t,"doc()","CollectionReference.doc()")}}add(e){return function GE(n,e){const t=Dn(n.firestore,Pr),s=gh(n),a=vm(n.converter,e);return Dl(t,[fm(ha(n.firestore),"addDoc",s._key,a,null!==n.converter,{}).toMutation(s._key,Nr.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new fa(this.firestore,t))}isEqual(e){return um(this._delegate,e._delegate)}withConverter(e){return new vd(this.firestore,this._delegate.withConverter(e?bl.getInstance(this.firestore,e):null))}}function Cl(n){return Dn(n,Er)}class xh{constructor(...e){this._delegate=new mu(...e)}static documentId(){return new xh(Mr.keyField().canonicalString())}isEqual(e){return(e=(0,Pt.m9)(e))instanceof mu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Sl{constructor(e){this._delegate=e}static serverTimestamp(){const e=function KE(){return new cp("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Sl(e)}static delete(){const e=function I_(){return new wl("deleteField")}();return e._methodName="FieldValue.delete",new Sl(e)}static arrayUnion(...e){const t=function wm(...n){return new r_("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Sl(t)}static arrayRemove(...e){const t=function qE(...n){return new gI("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Sl(t)}static increment(e){const t=function D_(n){return new Gt("increment",n)}(e);return t._methodName="FieldValue.increment",new Sl(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const M_={Firestore:C_,GeoPoint:mh,Timestamp:vr,Blob:Ch,Transaction:Cm,WriteBatch:Sm,DocumentReference:fa,DocumentSnapshot:Sh,Query:os,QueryDocumentSnapshot:Tl,QuerySnapshot:Ah,CollectionReference:vd,FieldPath:xh,FieldValue:Sl,setLogLevel:function XE(n){!function rs(n){Ct.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function R_(n){(function ew(n,e){n.INTERNAL.registerComponent(new ei.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(s,a)},"PUBLIC").setServiceProps(Object.assign({},M_)))})(n,(e,t)=>new C_(e,t,new JE)),n.registerVersion("@firebase/firestore-compat","0.1.19")}(Hr.Z);var O_=k(7579),N_=k(6451),Am=k(5363),Oc=k(3900),hp=k(6063);class tw extends O_.x{constructor(e=1/0,t=1/0,s=hp.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=s,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:s,_infiniteTimeWindow:a,_timestampProvider:l,_windowTime:p}=this;t||(s.push(e),!a&&s.push(l.now()+p)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:s,_buffer:a}=this,l=a.slice();for(let p=0;p<l.length&&!e.closed;p+=s?1:2)e.next(l[p]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:s,_infiniteTimeWindow:a}=this,l=(a?1:2)*e;if(e<1/0&&l<s.length&&s.splice(0,s.length-l),!a){const p=t.now();let E=0;for(let S=1;S<s.length&&s[S]<=p;S+=2)E=S;E&&s.splice(0,E+1)}}}var _d=k(3099);function Ed(n,e,t){let s,a=!1;return n&&"object"==typeof n?({bufferSize:s=1/0,windowTime:e=1/0,refCount:a=!1,scheduler:t}=n):s=null!=n?n:1/0,(0,_d.B)({connector:()=>new tw(s,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}var nw=k(590),_I=k(576);function xm(n,e){return(0,_I.m)(e)?(0,Oc.w)(()=>n,e):(0,Oc.w)(()=>n)}var Mm=k(9468);k(5867);const Al=new Map,U_={activated:!1,tokenObservers:[]},wd={initialized:!1,enabled:!1};function as(n){return Al.get(n)||U_}function pa(n,e){Al.set(n,e)}function gp(){return wd}class uw{constructor(e,t,s,a,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=s,this.lowerBound=a,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=a,a>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ae.Z)(function*(){t.stop();try{t.pending=new Pt.BH,yield function cw(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Pt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(s){t.retryPolicy(s)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Vs=new Pt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function $_(n){if(!as(n).activated)throw Vs.create("use-before-activation",{appName:n.name})}function xl(n,e){return _p.apply(this,arguments)}function _p(){return _p=(0,Ae.Z)(function*({url:n,body:e},t){var s,a;const l={"Content-Type":"application/json"},p=t.getImmediate({optional:!0});if(p){const Oe=yield p.getHeartbeatsHeader();Oe&&(l["X-Firebase-Client"]=Oe)}const E={method:"POST",body:JSON.stringify(e),headers:l};let S,P;try{S=yield fetch(n,E)}catch(Oe){throw Vs.create("fetch-network-error",{originalErrorMessage:null===(s=Oe)||void 0===s?void 0:s.message})}if(200!==S.status)throw Vs.create("fetch-status-error",{httpStatus:S.status});try{P=yield S.json()}catch(Oe){throw Vs.create("fetch-parse-error",{originalErrorMessage:null===(a=Oe)||void 0===a?void 0:a.message})}const G=P.ttl.match(/^([\d.]+)(s)$/);if(!G||!G[2]||isNaN(Number(G[1])))throw Vs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${P.ttl}`});const Q=1e3*Number(G[1]),Ee=Date.now();return{token:P.token,expireTimeMillis:Ee+Q,issuedAtTimeMillis:Ee}}),_p.apply(this,arguments)}function z_(n,e){const{projectId:t,appId:s,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${s}:exchangeDebugToken?key=${a}`,body:{debug_token:e}}}const Rh="firebase-app-check-store";let Ep=null;function q_(){return Ep||(Ep=new Promise((n,e)=>{var t;try{const s=indexedDB.open("firebase-app-check-database",1);s.onsuccess=a=>{n(a.target.result)},s.onerror=a=>{var l;e(Vs.create("storage-open",{originalErrorMessage:null===(l=a.target.error)||void 0===l?void 0:l.message}))},s.onupgradeneeded=a=>{0===a.oldVersion&&a.target.result.createObjectStore(Rh,{keyPath:"compositeKey"})}}catch(s){e(Vs.create("storage-open",{originalErrorMessage:null===(t=s)||void 0===t?void 0:t.message}))}}),Ep)}function ga(){return ga=(0,Ae.Z)(function*(n,e){const s=(yield q_()).transaction(Rh,"readwrite"),l=s.objectStore(Rh).put({compositeKey:n,value:e});return new Promise((p,E)=>{l.onsuccess=S=>{p()},s.onerror=S=>{var P;E(Vs.create("storage-set",{originalErrorMessage:null===(P=S.target.error)||void 0===P?void 0:P.message}))}})}),ga.apply(this,arguments)}const Ph=new un.Yd("@firebase/app-check");function kh(n,e){return(0,Pt.hl)()?function pw(n,e){return function wp(n,e){return ga.apply(this,arguments)}(function Id(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Ph.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Y_(){return gp().enabled}function km(){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,Ae.Z)(function*(){const n=gp();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Dp.apply(this,arguments)}const Q_={error:"UNKNOWN_ERROR"};function yw(n){return Pt.US.encodeString(JSON.stringify(n),!1)}function bp(n){return J_.apply(this,arguments)}function J_(){return J_=(0,Ae.Z)(function*(n,e=!1){const t=n.app;$_(t);const s=as(t);let l,a=s.token;if(!a){const S=yield s.cachedTokenPromise;S&&Cp(S)&&(a=S)}if(!e&&a&&Cp(a))return{token:a.token};let E,p=!1;if(Y_()){s.exchangeTokenPromise||(s.exchangeTokenPromise=xl(z_(t,yield km()),n.heartbeatServiceProvider).then(P=>(s.exchangeTokenPromise=void 0,P)),p=!0);const S=yield s.exchangeTokenPromise;return yield kh(t,S),pa(t,Object.assign(Object.assign({},s),{token:S})),{token:S.token}}try{s.exchangeTokenPromise||(s.exchangeTokenPromise=s.provider.getToken().then(S=>(s.exchangeTokenPromise=void 0,S)),p=!0),a=yield s.exchangeTokenPromise}catch(S){"appCheck/throttled"===S.code?Ph.warn(S.message):Ph.error(S),l=S}return a?(E={token:a.token},pa(t,Object.assign(Object.assign({},s),{token:a})),yield kh(t,a)):E=vw(l),p&&Tp(t,E),E}),J_.apply(this,arguments)}function Lh(n,e){const t=as(n),s=t.tokenObservers.filter(a=>a.next!==e);0===s.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),pa(n,Object.assign(Object.assign({},t),{tokenObservers:s}))}function Lm(n){const{app:e}=n,t=as(e);let s=t.tokenRefresher;s||(s=function Um(n){const{app:e}=n;return new uw((0,Ae.Z)(function*(){let s;if(s=as(e).token?yield bp(n,!0):yield bp(n),s.error)throw s.error}),()=>!0,()=>{const t=as(e);if(t.token){let s=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return s=Math.min(s,t.token.expireTimeMillis-3e5),Math.max(0,s-Date.now())}return 0},3e4,96e4)}(n),pa(e,Object.assign(Object.assign({},t),{tokenRefresher:s}))),!s.isRunning()&&t.isTokenAutoRefreshEnabled&&s.start()}function Tp(n,e){const t=as(n).tokenObservers;for(const s of t)try{"EXTERNAL"===s.type&&null!=e.error?s.error(e.error):s.next(e)}catch(a){}}function Cp(n){return n.expireTimeMillis-Date.now()>0}function vw(n){return{token:yw(Q_),error:n}}class _w{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=as(this.app);for(const t of e)Lh(this.app,t.next);return Promise.resolve()}}const $m="app-check-internal";!function Ap(){(0,Rn._registerComponent)(new ei.wA("app-check",n=>function Ew(n,e){return new _w(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider($m).initialize()})),(0,Rn._registerComponent)(new ei.wA($m,n=>function X_(n){return{getToken:e=>bp(n,e),addTokenListener:e=>function Fh(n,e,t,s){const{app:a}=n,l=as(a),p={next:t,error:s,type:e};if(pa(a,Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,p]})),l.token&&Cp(l.token)){const E=l.token;Promise.resolve().then(()=>{t({token:E.token}),Lm(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>Lm(n))}(n,"INTERNAL",e),removeTokenListener:e=>Lh(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Rn.registerVersion)("@firebase/app-check","0.5.9")}();class Mp{constructor(){return(0,sn.vb)("app-check")}}"undefined"!=typeof window&&window;var f0=k(127);const Wm=new H.OlP("angularfire2.auth.use-emulator"),p0=new H.OlP("angularfire2.auth.settings"),Km=new H.OlP("angularfire2.auth.tenant-id"),qm=new H.OlP("angularfire2.auth.langugage-code"),Zm=new H.OlP("angularfire2.auth.use-device-language"),Ym=new H.OlP("angularfire.auth.persistence"),g0=(n,e,t,s,a,l,p,E)=>(0,Xn.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const S=e.runOutsideAngular(()=>n.auth());if(t&&S.useEmulator(...t),s&&(S.tenantId=s),S.languageCode=a,l&&S.useDeviceLanguage(),p)for(const[P,G]of Object.entries(p))S.settings[P]=G;return E&&S.setPersistence(E),S},[t,s,a,l,p,E]);let Qm=(()=>{class n{constructor(t,s,a,l,p,E,S,P,G,Q,Ee,Oe){const We=new O_.x,ht=(0,qn.of)(void 0).pipe((0,Am.Q)(p.outsideAngular),(0,Oc.w)(()=>l.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,9916)))),(0,Pn.U)(()=>(0,Xn.on)(t,l,s)),(0,Pn.U)(It=>g0(It,l,E,P,G,Q,S,Ee)),Ed({bufferSize:1,refCount:!1}));if((0,D.PM)(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,qn.of)(null);else{ht.pipe((0,nw.P)()).subscribe();const En=ht.pipe((0,Oc.w)(vn=>vn.getRedirectResult().then(wn=>wn,()=>null)),sn.iC,Ed({bufferSize:1,refCount:!1})),zn=ht.pipe((0,Oc.w)(vn=>new Nn.y(wn=>({unsubscribe:l.runOutsideAngular(()=>vn.onAuthStateChanged(dn=>wn.next(dn),dn=>wn.error(dn),()=>wn.complete()))})))),Un=ht.pipe((0,Oc.w)(vn=>new Nn.y(wn=>({unsubscribe:l.runOutsideAngular(()=>vn.onIdTokenChanged(dn=>wn.next(dn),dn=>wn.error(dn),()=>wn.complete()))}))));this.authState=En.pipe(xm(zn),(0,Mm.R)(p.outsideAngular),(0,Am.Q)(p.insideAngular)),this.user=En.pipe(xm(Un),(0,Mm.R)(p.outsideAngular),(0,Am.Q)(p.insideAngular)),this.idToken=this.user.pipe((0,Oc.w)(vn=>vn?(0,ur.D)(vn.getIdToken()):(0,qn.of)(null))),this.idTokenResult=this.user.pipe((0,Oc.w)(vn=>vn?(0,ur.D)(vn.getIdTokenResult()):(0,qn.of)(null))),this.credential=(0,N_.T)(En,We,this.authState.pipe((0,Et.h)(vn=>!vn))).pipe((0,Pn.U)(vn=>(null==vn?void 0:vn.user)?vn:null),(0,Mm.R)(p.outsideAngular),(0,Am.Q)(p.insideAngular))}return(0,Xn.pX)(this,ht,l,{spy:{apply:(It,En,zn)=>{(It.startsWith("signIn")||It.startsWith("createUser"))&&zn.then(Un=>We.next(Un))}}})}}return n.\u0275fac=function(t){return new(t||n)(H.LFG(Xn.Dh),H.LFG(Xn.xv,8),H.LFG(H.Lbi),H.LFG(H.R0b),H.LFG(sn.HU),H.LFG(Wm,8),H.LFG(p0,8),H.LFG(Km,8),H.LFG(qm,8),H.LFG(Zm,8),H.LFG(Ym,8),H.LFG(Mp,8))},n.\u0275prov=H.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),RI=(()=>{class n{constructor(){f0.Z.registerVersion("angularfire",sn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=H.oAB({type:n}),n.\u0275inj=H.cJS({providers:[Qm]}),n})();function Nw(n,e){return function m0(n,e=qt.z){return new Nn.y(t=>{let s;return null!=e?e.schedule(()=>{s=n.onSnapshot({includeMetadataChanges:!0},t)}):s=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(n,e)}function y0(n,e){return Nw(n,e).pipe((0,Pn.U)(t=>({payload:t,type:"query"})))}function Jm(n,e){return y0(n,e).pipe((0,Ar.O)(void 0),Ri(),(0,Pn.U)(([t,s])=>{const a=s.payload.docChanges(),l=a.map(p=>({type:p.type,payload:p}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((p,E)=>{const S=a.find(G=>G.doc.ref.isEqual(p.ref)),P=null==t?void 0:t.payload.docs.find(G=>G.ref.isEqual(p.ref));S&&JSON.stringify(S.doc.metadata)===JSON.stringify(p.metadata)||!S&&P&&JSON.stringify(P.metadata)===JSON.stringify(p.metadata)||l.push({type:"modified",payload:{oldIndex:E,newIndex:E,type:"modified",doc:p}})}),l}))}function Pw(n,e,t){return Jm(n,t).pipe((0,cr.R)((s,a)=>function NI(n,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(n=function PI(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return v0(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return v0(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return v0(n,e.oldIndex,1)}return n}(n,s))}),n}(s,a.map(l=>l.payload),e),[]),function Xr(n,e=Ki.y){return n=null!=n?n:at,(0,$o.e)((t,s)=>{let a,l=!0;t.subscribe((0,ls.x)(s,p=>{const E=e(p);(l||!n(a,E))&&(l=!1,a=E,s.next(p))}))})}(),(0,Pn.U)(s=>s.map(a=>({type:a.type,payload:a}))))}function v0(n,e,t,...s){const a=n.slice();return a.splice(e,t,...s),a}function Vh(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class kw{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=Jm(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Pn.U)(s=>s.filter(a=>e.indexOf(a.type)>-1)))),t.pipe((0,Ar.O)(void 0),Ri(),(0,Et.h)(([s,a])=>a.length>0||!s),(0,Pn.U)(([s,a])=>a),sn.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,cr.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Vh(e);return Pw(this.query,t,this.afs.schedulers.outsideAngular).pipe(sn.iC)}valueChanges(e={}){return y0(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pn.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),sn.iC)}get(e){return(0,ur.D)(this.query.get(e)).pipe(sn.iC)}add(e){return this.ref.add(e)}doc(e){return new Xm(this.ref.doc(e),this.afs)}}class Xm{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:a,query:l}=iy(s,t);return new kw(a,l,this.afs)}snapshotChanges(){return function OI(n,e){return Nw(n,e).pipe((0,Ar.O)(void 0),Ri(),(0,Pn.U)(([t,s])=>s.exists?(null==t?void 0:t.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(sn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Pn.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ur.D)(this.ref.get(e)).pipe(sn.iC)}}class ey{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Jm(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pn.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,Et.h)(t=>t.length>0),sn.iC):Jm(this.query,this.afs.schedulers.outsideAngular).pipe(sn.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,cr.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Vh(e);return Pw(this.query,t,this.afs.schedulers.outsideAngular).pipe(sn.iC)}valueChanges(e={}){return y0(this.query,this.afs.schedulers.outsideAngular).pipe((0,Pn.U)(s=>s.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),sn.iC)}get(e){return(0,ur.D)(this.query.get(e)).pipe(sn.iC)}}const ty=new H.OlP("angularfire2.enableFirestorePersistence"),ny=new H.OlP("angularfire2.firestore.persistenceSettings"),kI=new H.OlP("angularfire2.firestore.settings"),ry=new H.OlP("angularfire2.firestore.use-emulator");function iy(n,e=(t=>t)){return{query:e(n),ref:n}}let _0=(()=>{class n{constructor(t,s,a,l,p,E,S,P,G,Q,Ee,Oe,We,ht,It,En,zn){this.schedulers=S;const Un=(0,Xn.on)(t,E,s),vn=G;Q&&g0(Un,E,Ee,We,ht,It,Oe,En),[this.firestore,this.persistenceEnabled$]=(0,Xn.cc)(`${Un.name}.firestore`,"AngularFirestore",Un.name,()=>{const wn=E.runOutsideAngular(()=>Un.firestore());if(l&&wn.settings(l),vn&&wn.useEmulator(...vn),a&&!(0,D.PM)(p)){const dn=()=>{try{return(0,ur.D)(wn.enablePersistence(P||void 0).then(()=>!0,()=>!1))}catch(Ds){return"undefined"!=typeof console&&console.warn(Ds),(0,qn.of)(!1)}};return[wn,E.runOutsideAngular(dn)]}return[wn,(0,qn.of)(!1)]},[l,vn,a])}collection(t,s){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:p}=iy(a,s),E=this.schedulers.ngZone.run(()=>l);return new kw(E,p,this)}collectionGroup(t,s){const a=s||(p=>p),l=this.firestore.collectionGroup(t);return new ey(a(l),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>s);return new Xm(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(H.LFG(Xn.Dh),H.LFG(Xn.xv,8),H.LFG(ty,8),H.LFG(kI,8),H.LFG(H.Lbi),H.LFG(H.R0b),H.LFG(sn.HU),H.LFG(ny,8),H.LFG(ry,8),H.LFG(Qm,8),H.LFG(Wm,8),H.LFG(p0,8),H.LFG(Km,8),H.LFG(qm,8),H.LFG(Zm,8),H.LFG(Ym,8),H.LFG(Mp,8))},n.\u0275prov=H.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),E0=(()=>{class n{constructor(){f0.Z.registerVersion("angularfire",sn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:ty,useValue:!0},{provide:ny,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=H.oAB({type:n}),n.\u0275inj=H.cJS({providers:[_0]}),n})();var w0=k(5839),I0=k(9857);const sy=[{path:"game",loadChildren:()=>Promise.all([k.e(466),k.e(117)]).then(k.bind(k,6117)).then(n=>n.GameModule),canLoad:[(()=>{class n{constructor(t){this.authServ=t}canLoad(){return(0,qn.of)(this.authServ.isAuth())}}return n.\u0275fac=function(t){return new(t||n)(H.LFG(I0.e))},n.\u0275prov=H.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"",loadChildren:()=>Promise.all([k.e(466),k.e(698)]).then(k.bind(k,3698)).then(n=>n.HomeModule)},{path:"**",redirectTo:""}];let Fw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=H.oAB({type:n}),n.\u0275inj=H.cJS({imports:[[w0.Bz.forRoot(sy)],w0.Bz]}),n})(),LI=(()=>{class n{constructor(){this.title="pruebaBBVA"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=H.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,s){1&t&&H._UZ(0,"router-outlet")},directives:[w0.lC],styles:[""]}),n})(),UI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=H.oAB({type:n,bootstrap:[LI]}),n.\u0275inj=H.cJS({providers:[],imports:[[li,Fw,Xn.hO.initializeApp(Wi_firebase),E0,RI]]}),n})();(0,H.G48)(),_i().bootstrapModule(UI).catch(n=>console.error(n))},5867:(st,we,k)=>{k.d(we,{Mq:()=>D.getApp,C6:()=>D.getApps});var D=k(9681);(0,D.registerVersion)("firebase","9.8.3","app")},127:(st,we,k)=>{k.d(we,{Z:()=>D.Z});var D=k(3942);D.Z.registerVersion("firebase","9.8.3","app-compat")},9916:(st,we,k)=>{k.r(we);var D=k(5861),H=k(3942),$=k(2090),fe=k(9681),ae=k(655),le=k(1877),ce=k(4859);const He=function et(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Je=function Ve(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ce=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ot=new le.Yd("@firebase/auth");function ct(g,...d){ot.logLevel<=le.in.ERROR&&ot.error(`Auth (${fe.SDK_VERSION}): ${g}`,...d)}function Ue(g,...d){throw tt(g,...d)}function Ne(g,...d){return tt(g,...d)}function ke(g,d,f){const v=Object.assign(Object.assign({},Je()),{[d]:f});return new $.LL("auth","Firebase",v).create(d,{appName:g.name})}function Fe(g,d,f){if(!(d instanceof f))throw f.name!==d.constructor.name&&Ue(g,"argument-error"),ke(g,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function tt(g,...d){if("string"!=typeof g){const f=d[0],v=[...d.slice(1)];return v[0]&&(v[0].appName=g.name),g._errorFactory.create(f,...v)}return Ce.create(g,...d)}function ee(g,d,...f){if(!g)throw tt(d,...f)}function Re(g){const d="INTERNAL ASSERTION FAILED: "+g;throw ct(d),new Error(d)}function ie(g,d){g||Re(d)}const ge=new Map;function me(g){ie(g instanceof Function,"Expected a class definition");let d=ge.get(g);return d?(ie(d instanceof g,"Instance stored in cache mismatched with class"),d):(d=new g,ge.set(g,d),d)}function Ye(){var g;return"undefined"!=typeof self&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function bt(){return"http:"===hn()||"https:"===hn()}function hn(){var g;return"undefined"!=typeof self&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class rn{constructor(d,f){this.shortDelay=d,this.longDelay=f,ie(f>d,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function nn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(bt()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Wn(g,d){ie(g.emulator,"Emulator should always be set here");const{url:f}=g.emulator;return d?`${f}${d.startsWith("/")?d.slice(1):d}`:f}class An{static initialize(d,f,v){this.fetchImpl=d,f&&(this.headersImpl=f),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Re("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Re("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Re("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const pn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ar=new rn(3e4,6e4);function zt(g,d){return g.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:g.tenantId}):d}function Yt(g,d,f,v){return fr.apply(this,arguments)}function fr(){return(fr=(0,D.Z)(function*(g,d,f,v,O={}){return Qn(g,O,(0,D.Z)(function*(){let B={},se={};v&&("GET"===d?se=v:B={body:JSON.stringify(v)});const Me=(0,$.xO)(Object.assign({key:g.config.apiKey},se)).slice(1),Xe=yield g._getAdditionalHeaders();return Xe["Content-Type"]="application/json",g.languageCode&&(Xe["X-Firebase-Locale"]=g.languageCode),An.fetch()(us(g,g.config.apiHost,f,Me),Object.assign({method:d,headers:Xe,referrerPolicy:"no-referrer"},B))}))})).apply(this,arguments)}function Qn(g,d,f){return wr.apply(this,arguments)}function wr(){return(wr=(0,D.Z)(function*(g,d,f){g._canInitEmulator=!1;const v=Object.assign(Object.assign({},pn),d);try{const O=new li(g),B=yield Promise.race([f(),O.promise]);O.clearNetworkTimeout();const se=yield B.json();if("needConfirmation"in se)throw Mi(g,"account-exists-with-different-credential",se);if(B.ok&&!("errorMessage"in se))return se;{const Me=B.ok?se.errorMessage:se.error.message,[Xe,mt]=Me.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Xe)throw Mi(g,"credential-already-in-use",se);if("EMAIL_EXISTS"===Xe)throw Mi(g,"email-already-in-use",se);if("USER_DISABLED"===Xe)throw Mi(g,"user-disabled",se);const Ft=v[Xe]||Xe.toLowerCase().replace(/[_\s]+/g,"-");if(mt)throw ke(g,Ft,mt);Ue(g,Ft)}}catch(O){if(O instanceof $.ZR)throw O;Ue(g,"network-request-failed")}})).apply(this,arguments)}function pr(g,d,f,v){return _i.apply(this,arguments)}function _i(){return(_i=(0,D.Z)(function*(g,d,f,v,O={}){const B=yield Yt(g,d,f,v,O);return"mfaPendingCredential"in B&&Ue(g,"multi-factor-auth-required",{_serverResponse:B}),B})).apply(this,arguments)}function us(g,d,f,v){const O=`${d}${f}?${v}`;return g.config.emulator?Wn(g.config,O):`${g.config.apiScheme}://${O}`}class li{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((f,v)=>{this.timer=setTimeout(()=>v(Ne(this.auth,"network-request-failed")),ar.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Mi(g,d,f){const v={appName:g.name};f.email&&(v.email=f.email),f.phoneNumber&&(v.phoneNumber=f.phoneNumber);const O=Ne(g,d,v);return O.customData._tokenResponse=f,O}function Ei(){return(Ei=(0,D.Z)(function*(g,d){return Yt(g,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Jn(g,d){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,D.Z)(function*(g,d){return Yt(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function cs(g,d){return di.apply(this,arguments)}function di(){return(di=(0,D.Z)(function*(g,d){return Yt(g,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Sr(g){if(g)try{const d=new Date(Number(g));if(!isNaN(d.getTime()))return d.toUTCString()}catch(d){}}function $r(){return($r=(0,D.Z)(function*(g,d=!1){const f=(0,$.m9)(g),v=yield f.getIdToken(d),O=wt(v);ee(O&&O.exp&&O.auth_time&&O.iat,f.auth,"internal-error");const B="object"==typeof O.firebase?O.firebase:void 0,se=null==B?void 0:B.sign_in_provider;return{claims:O,token:v,authTime:Sr(pt(O.auth_time)),issuedAtTime:Sr(pt(O.iat)),expirationTime:Sr(pt(O.exp)),signInProvider:se||null,signInSecondFactor:(null==B?void 0:B.sign_in_second_factor)||null}})).apply(this,arguments)}function pt(g){return 1e3*Number(g)}function wt(g){const[d,f,v]=g.split(".");if(void 0===d||void 0===f||void 0===v)return ct("JWT malformed, contained fewer than 3 sections"),null;try{const O=(0,$.tV)(f);return O?JSON.parse(O):(ct("Failed to decode base64 JWT payload"),null)}catch(O){return ct("Caught error parsing JWT payload as JSON",O),null}}function Ir(g,d){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,D.Z)(function*(g,d,f=!1){if(f)return d;try{return yield d}catch(v){throw v instanceof $.ZR&&an(v)&&g.auth.currentUser===g&&(yield g.auth.signOut()),v}})).apply(this,arguments)}function an({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}class js{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var f;if(d){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const O=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,O)}}schedule(d=!1){var f=this;if(!this.isRunning)return;const v=this.getInterval(d);this.timerId=setTimeout((0,D.Z)(function*(){yield f.iteration()}),v)}iteration(){var d=this;return(0,D.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f.code&&d.schedule(!0))}d.schedule()})()}}class Fr{constructor(d,f){this.createdAt=d,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sr(this.lastLoginAt),this.creationTime=Sr(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Vn(g){return q.apply(this,arguments)}function q(){return(q=(0,D.Z)(function*(g){var d;const f=g.auth,v=yield g.getIdToken(),O=yield Ir(g,cs(f,{idToken:v}));ee(null==O?void 0:O.users.length,f,"internal-error");const B=O.users[0];g._notifyReloadListener(B);const se=(null===(d=B.providerUserInfo)||void 0===d?void 0:d.length)?Y(B.providerUserInfo):[],Me=Be(g.providerData,se),Ft=!!g.isAnonymous&&!(g.email&&B.passwordHash||(null==Me?void 0:Me.length)),Mt={uid:B.localId,displayName:B.displayName||null,photoURL:B.photoUrl||null,email:B.email||null,emailVerified:B.emailVerified||!1,phoneNumber:B.phoneNumber||null,tenantId:B.tenantId||null,providerData:Me,metadata:new Fr(B.createdAt,B.lastLoginAt),isAnonymous:Ft};Object.assign(g,Mt)})).apply(this,arguments)}function oe(){return(oe=(0,D.Z)(function*(g){const d=(0,$.m9)(g);yield Vn(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function Be(g,d){return[...g.filter(v=>!d.some(O=>O.providerId===v.providerId)),...d]}function Y(g){return g.map(d=>{var{providerId:f}=d,v=(0,ae._T)(d,["providerId"]);return{providerId:f,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function ze(){return(ze=(0,D.Z)(function*(g,d){const f=yield Qn(g,{},(0,D.Z)(function*(){const v=(0,$.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:O,apiKey:B}=g.config,se=us(g,O,"/v1/token",`key=${B}`),Me=yield g._getAdditionalHeaders();return Me["Content-Type"]="application/x-www-form-urlencoded",An.fetch()(se,{method:"POST",headers:Me,body:v})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class yt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){ee(d.idToken,"internal-error"),ee(void 0!==d.idToken,"internal-error"),ee(void 0!==d.refreshToken,"internal-error");const f="expiresIn"in d&&void 0!==d.expiresIn?Number(d.expiresIn):function Tt(g){const d=wt(g);return ee(d,"internal-error"),ee(void 0!==d.exp,"internal-error"),ee(void 0!==d.iat,"internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,f)}getToken(d,f=!1){var v=this;return(0,D.Z)(function*(){return ee(!v.accessToken||v.refreshToken,d,"user-token-expired"),f||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(d,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,f){var v=this;return(0,D.Z)(function*(){const{accessToken:O,refreshToken:B,expiresIn:se}=yield function he(g,d){return ze.apply(this,arguments)}(d,f);v.updateTokensAndExpiration(O,B,Number(se))})()}updateTokensAndExpiration(d,f,v){this.refreshToken=f||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(d,f){const{refreshToken:v,accessToken:O,expirationTime:B}=f,se=new yt;return v&&(ee("string"==typeof v,"internal-error",{appName:d}),se.refreshToken=v),O&&(ee("string"==typeof O,"internal-error",{appName:d}),se.accessToken=O),B&&(ee("number"==typeof B,"internal-error",{appName:d}),se.expirationTime=B),se}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new yt,this.toJSON())}_performRefresh(){return Re("not implemented")}}function St(g,d){ee("string"==typeof g||void 0===g,"internal-error",{appName:d})}class Lt{constructor(d){var{uid:f,auth:v,stsTokenManager:O}=d,B=(0,ae._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new js(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=v,this.stsTokenManager=O,this.accessToken=O.accessToken,this.displayName=B.displayName||null,this.email=B.email||null,this.emailVerified=B.emailVerified||!1,this.phoneNumber=B.phoneNumber||null,this.photoURL=B.photoURL||null,this.isAnonymous=B.isAnonymous||!1,this.tenantId=B.tenantId||null,this.providerData=B.providerData?[...B.providerData]:[],this.metadata=new Fr(B.createdAt||void 0,B.lastLoginAt||void 0)}getIdToken(d){var f=this;return(0,D.Z)(function*(){const v=yield Ir(f,f.stsTokenManager.getToken(f.auth,d));return ee(v,f.auth,"internal-error"),f.accessToken!==v&&(f.accessToken=v,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),v})()}getIdTokenResult(d){return function hi(g){return $r.apply(this,arguments)}(this,d)}reload(){return function re(g){return oe.apply(this,arguments)}(this)}_assign(d){this!==d&&(ee(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(f=>Object.assign({},f)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){return new Lt(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(d){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,f=!1){var v=this;return(0,D.Z)(function*(){let O=!1;d.idToken&&d.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(d),O=!0),f&&(yield Vn(v)),yield v.auth._persistUserIfCurrent(v),O&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var d=this;return(0,D.Z)(function*(){const f=yield d.getIdToken();return yield Ir(d,function Rt(g,d){return Ei.apply(this,arguments)}(d.auth,{idToken:f})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,f){var v,O,B,se,Me,Xe,mt,Ft;const Mt=null!==(v=f.displayName)&&void 0!==v?v:void 0,Or=null!==(O=f.email)&&void 0!==O?O:void 0,ws=null!==(B=f.phoneNumber)&&void 0!==B?B:void 0,nl=null!==(se=f.photoURL)&&void 0!==se?se:void 0,af=null!==(Me=f.tenantId)&&void 0!==Me?Me:void 0,Pa=null!==(Xe=f._redirectEventId)&&void 0!==Xe?Xe:void 0,rl=null!==(mt=f.createdAt)&&void 0!==mt?mt:void 0,nc=null!==(Ft=f.lastLoginAt)&&void 0!==Ft?Ft:void 0,{uid:$d,emailVerified:jl,isAnonymous:Hd,providerData:cu,stsTokenManager:lu}=f;ee($d&&lu,d,"internal-error");const uf=yt.fromJSON(this.name,lu);ee("string"==typeof $d,d,"internal-error"),St(Mt,d.name),St(Or,d.name),ee("boolean"==typeof jl,d,"internal-error"),ee("boolean"==typeof Hd,d,"internal-error"),St(ws,d.name),St(nl,d.name),St(af,d.name),St(Pa,d.name),St(rl,d.name),St(nc,d.name);const ka=new Lt({uid:$d,auth:d,email:Or,emailVerified:jl,displayName:Mt,isAnonymous:Hd,photoURL:nl,phoneNumber:ws,tenantId:af,stsTokenManager:uf,createdAt:rl,lastLoginAt:nc});return cu&&Array.isArray(cu)&&(ka.providerData=cu.map(cf=>Object.assign({},cf))),Pa&&(ka._redirectEventId=Pa),ka}static _fromIdTokenResponse(d,f,v=!1){return(0,D.Z)(function*(){const O=new yt;O.updateFromServerResponse(f);const B=new Lt({uid:f.localId,auth:d,stsTokenManager:O,isAnonymous:v});return yield Vn(B),B})()}}const Ut=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,D.Z)(function*(){return!0})()}_set(f,v){var O=this;return(0,D.Z)(function*(){O.storage[f]=v})()}_get(f){var v=this;return(0,D.Z)(function*(){const O=v.storage[f];return void 0===O?null:O})()}_remove(f){var v=this;return(0,D.Z)(function*(){delete v.storage[f]})()}_addListener(f,v){}_removeListener(f,v){}}return g.type="NONE",g})();function Dr(g,d,f){return`firebase:${g}:${d}:${f}`}class Lr{constructor(d,f,v){this.persistence=d,this.auth=f,this.userKey=v;const{config:O,name:B}=this.auth;this.fullUserKey=Dr(this.userKey,O.apiKey,B),this.fullPersistenceKey=Dr("persistence",O.apiKey,B),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,D.Z)(function*(){const f=yield d.persistence._get(d.fullUserKey);return f?Lt._fromJSON(d.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var f=this;return(0,D.Z)(function*(){if(f.persistence===d)return;const v=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=d,v?f.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,f,v="authUser"){return(0,D.Z)(function*(){if(!f.length)return new Lr(me(Ut),d,v);const O=(yield Promise.all(f.map(function(){var mt=(0,D.Z)(function*(Ft){if(yield Ft._isAvailable())return Ft});return function(Ft){return mt.apply(this,arguments)}}()))).filter(mt=>mt);let B=O[0]||me(Ut);const se=Dr(v,d.config.apiKey,d.name);let Me=null;for(const mt of f)try{const Ft=yield mt._get(se);if(Ft){const Mt=Lt._fromJSON(d,Ft);mt!==B&&(Me=Mt),B=mt;break}}catch(Ft){}const Xe=O.filter(mt=>mt._shouldAllowMigration);return B._shouldAllowMigration&&Xe.length?(B=Xe[0],Me&&(yield B._set(se,Me.toJSON())),yield Promise.all(f.map(function(){var mt=(0,D.Z)(function*(Ft){if(Ft!==B)try{yield Ft._remove(se)}catch(Mt){}});return function(Ft){return mt.apply(this,arguments)}}())),new Lr(B,d,v)):new Lr(B,d,v)})()}}function jo(g){const d=g.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(Nn(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(Wi(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(qn(d))return"Blackberry";if(sn(d))return"Webos";if(Xn(d))return"Safari";if((d.includes("chrome/")||qt(d))&&!d.includes("edge/"))return"Chrome";if(ur(d))return"Android";{const v=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function Wi(g=(0,$.z$)()){return/firefox\//i.test(g)}function Xn(g=(0,$.z$)()){const d=g.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function qt(g=(0,$.z$)()){return/crios\//i.test(g)}function Nn(g=(0,$.z$)()){return/iemobile/i.test(g)}function ur(g=(0,$.z$)()){return/android/i.test(g)}function qn(g=(0,$.z$)()){return/blackberry/i.test(g)}function sn(g=(0,$.z$)()){return/webos/i.test(g)}function Ar(g=(0,$.z$)()){return/iphone|ipad|ipod/i.test(g)}function Pn(g=(0,$.z$)()){return Ar(g)||ur(g)||sn(g)||qn(g)||/windows phone/i.test(g)||Nn(g)}function Ki(g,d=[]){let f;switch(g){case"Browser":f=jo((0,$.z$)());break;case"Worker":f=`${jo((0,$.z$)())}-${g}`;break;default:f=g}const v=d.length?d.join(","):"FirebaseCore-web";return`${f}/JsCore/${fe.SDK_VERSION}/${v}`}class Xr{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,f){const v=B=>new Promise((se,Me)=>{try{se(d(B))}catch(Xe){Me(Xe)}});v.onAbort=f,this.queue.push(v);const O=this.queue.length-1;return()=>{this.queue[O]=()=>Promise.resolve()}}runMiddleware(d){var f=this;return(0,D.Z)(function*(){var v;if(f.auth.currentUser===d)return;const O=[];try{for(const B of f.queue)yield B(d),B.onAbort&&O.push(B.onAbort)}catch(B){O.reverse();for(const se of O)try{se()}catch(Me){}throw f.auth._errorFactory.create("login-blocked",{originalMessage:null===(v=B)||void 0===v?void 0:v.message})}})()}}class at{constructor(d,f,v){this.app=d,this.heartbeatServiceProvider=f,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bn(this),this.idTokenSubscription=new bn(this),this.beforeStateQueue=new Xr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ce,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(d,f){var v=this;return f&&(this._popupRedirectResolver=me(f)),this._initializationPromise=this.queue((0,D.Z)(function*(){var O,B;if(!v._deleted&&(v.persistenceManager=yield Lr.create(v,d),!v._deleted)){if(null===(O=v._popupRedirectResolver)||void 0===O?void 0:O._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(se){}yield v.initializeCurrentUser(f),v.lastNotifiedUid=(null===(B=v.currentUser)||void 0===B?void 0:B.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,D.Z)(function*(){if(d._deleted)return;const f=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||f){if(d.currentUser&&f&&d.currentUser.uid===f.uid)return d._currentUser._assign(f),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(f,!0)}})()}initializeCurrentUser(d){var f=this;return(0,D.Z)(function*(){var v;const O=yield f.assertedPersistence.getCurrentUser();let B=O,se=!1;if(d&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const Me=null===(v=f.redirectUser)||void 0===v?void 0:v._redirectEventId,Xe=null==B?void 0:B._redirectEventId,mt=yield f.tryRedirectSignIn(d);(!Me||Me===Xe)&&(null==mt?void 0:mt.user)&&(B=mt.user,se=!0)}if(!B)return f.directlySetCurrentUser(null);if(!B._redirectEventId){if(se)try{yield f.beforeStateQueue.runMiddleware(B)}catch(Me){B=O,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(Me))}return B?f.reloadAndSetCurrentUserOrClear(B):f.directlySetCurrentUser(null)}return ee(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===B._redirectEventId?f.directlySetCurrentUser(B):f.reloadAndSetCurrentUserOrClear(B)})()}tryRedirectSignIn(d){var f=this;return(0,D.Z)(function*(){let v=null;try{v=yield f._popupRedirectResolver._completeRedirectFn(f,d,!0)}catch(O){yield f._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(d){var f=this;return(0,D.Z)(function*(){try{yield Vn(d)}catch(v){if("auth/network-request-failed"!==v.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function Qe(){if("undefined"==typeof navigator)return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var d=this;return(0,D.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var f=this;return(0,D.Z)(function*(){const v=d?(0,$.m9)(d):null;return v&&ee(v.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(v&&v._clone(f))})()}_updateCurrentUser(d,f=!1){var v=this;return(0,D.Z)(function*(){if(!v._deleted)return d&&ee(v.tenantId===d.tenantId,v,"tenant-id-mismatch"),f||(yield v.beforeStateQueue.runMiddleware(d)),v.queue((0,D.Z)(function*(){yield v.directlySetCurrentUser(d),v.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,D.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var f=this;return this.queue((0,D.Z)(function*(){yield f.assertedPersistence.setPersistence(me(d))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new $.LL("auth","Firebase",d())}onAuthStateChanged(d,f,v){return this.registerStateListener(this.authStateSubscription,d,f,v)}beforeAuthStateChanged(d,f){return this.beforeStateQueue.pushCallback(d,f)}onIdTokenChanged(d,f,v){return this.registerStateListener(this.idTokenSubscription,d,f,v)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,f){var v=this;return(0,D.Z)(function*(){const O=yield v.getOrInitRedirectPersistenceManager(f);return null===d?O.removeCurrentUser():O.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var f=this;return(0,D.Z)(function*(){if(!f.redirectPersistenceManager){const v=d&&me(d)||f._popupRedirectResolver;ee(v,f,"argument-error"),f.redirectPersistenceManager=yield Lr.create(f,[me(v._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(d){var f=this;return(0,D.Z)(function*(){var v,O;return f._isInitialized&&(yield f.queue((0,D.Z)(function*(){}))),(null===(v=f._currentUser)||void 0===v?void 0:v._redirectEventId)===d?f._currentUser:(null===(O=f.redirectUser)||void 0===O?void 0:O._redirectEventId)===d?f.redirectUser:null})()}_persistUserIfCurrent(d){var f=this;return(0,D.Z)(function*(){if(d===f.currentUser)return f.queue((0,D.Z)(function*(){return f.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(f=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,f,v,O){if(this._deleted)return()=>{};const B="function"==typeof f?f:f.next.bind(f),se=this._isInitialized?Promise.resolve():this._initializationPromise;return ee(se,this,"internal-error"),se.then(()=>B(this.currentUser)),"function"==typeof f?d.addObserver(f,v,O):d.addObserver(f)}directlySetCurrentUser(d){var f=this;return(0,D.Z)(function*(){f.currentUser&&f.currentUser!==d&&(f._currentUser._stopProactiveRefresh(),d&&f.isProactiveRefreshEnabled&&d._startProactiveRefresh()),f.currentUser=d,d?yield f.assertedPersistence.setCurrentUser(d):yield f.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=Ki(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,D.Z)(function*(){var f;const v={"X-Client-Version":d.clientVersion};d.app.options.appId&&(v["X-Firebase-gmpid"]=d.app.options.appId);const O=yield null===(f=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return O&&(v["X-Firebase-Client"]=O),v})()}}function Et(g){return(0,$.m9)(g)}class bn{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,$.ne)(f=>this.observer=f)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ae(g){const d=g.indexOf(":");return d<0?"":g.substr(0,d+1)}function ei(g){if(!g)return null;const d=Number(g);return isNaN(d)?null:d}class Pt{constructor(d,f){this.providerId=d,this.signInMethod=f}toJSON(){return Re("not implemented")}_getIdTokenResponse(d){return Re("not implemented")}_linkToIdToken(d,f){return Re("not implemented")}_getReauthenticationResolver(d){return Re("not implemented")}}function er(g,d){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,D.Z)(function*(g,d){return Yt(g,"POST","/v1/accounts:resetPassword",zt(g,d))})).apply(this,arguments)}function dt(g,d){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,D.Z)(function*(g,d){return Yt(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Nt(g,d){return ti.apply(this,arguments)}function ti(){return(ti=(0,D.Z)(function*(g,d){return Yt(g,"POST","/v1/accounts:update",zt(g,d))})).apply(this,arguments)}function lr(){return(lr=(0,D.Z)(function*(g,d){return pr(g,"POST","/v1/accounts:signInWithPassword",zt(g,d))})).apply(this,arguments)}function ni(g,d){return dr.apply(this,arguments)}function dr(){return(dr=(0,D.Z)(function*(g,d){return Yt(g,"POST","/v1/accounts:sendOobCode",zt(g,d))})).apply(this,arguments)}function Tn(g,d){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,D.Z)(function*(g,d){return ni(g,d)})).apply(this,arguments)}function Ni(g,d){return _n.apply(this,arguments)}function _n(){return(_n=(0,D.Z)(function*(g,d){return ni(g,d)})).apply(this,arguments)}function ri(g,d){return jn.apply(this,arguments)}function jn(){return(jn=(0,D.Z)(function*(g,d){return ni(g,d)})).apply(this,arguments)}function Pi(g,d){return fi.apply(this,arguments)}function fi(){return(fi=(0,D.Z)(function*(g,d){return ni(g,d)})).apply(this,arguments)}function $s(){return($s=(0,D.Z)(function*(g,d){return pr(g,"POST","/v1/accounts:signInWithEmailLink",zt(g,d))})).apply(this,arguments)}function $a(){return($a=(0,D.Z)(function*(g,d){return pr(g,"POST","/v1/accounts:signInWithEmailLink",zt(g,d))})).apply(this,arguments)}class nr extends Pt{constructor(d,f,v,O=null){super("password",v),this._email=d,this._password=f,this._tenantId=O}static _fromEmailAndPassword(d,f){return new nr(d,f,"password")}static _fromEmailAndCode(d,f,v=null){return new nr(d,f,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d;if((null==f?void 0:f.email)&&(null==f?void 0:f.password)){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(d){var f=this;return(0,D.Z)(function*(){switch(f.signInMethod){case"password":return function tr(g,d){return lr.apply(this,arguments)}(d,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function wi(g,d){return $s.apply(this,arguments)}(d,{email:f._email,oobCode:f._password});default:Ue(d,"internal-error")}})()}_linkToIdToken(d,f){var v=this;return(0,D.Z)(function*(){switch(v.signInMethod){case"password":return dt(d,{idToken:f,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function ma(g,d){return $a.apply(this,arguments)}(d,{idToken:f,email:v._email,oobCode:v._password});default:Ue(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function ki(g,d){return mo.apply(this,arguments)}function mo(){return(mo=(0,D.Z)(function*(g,d){return pr(g,"POST","/v1/accounts:signInWithIdp",zt(g,d))})).apply(this,arguments)}class xn extends Pt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const f=new xn(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(f.idToken=d.idToken),d.accessToken&&(f.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(f.nonce=d.nonce),d.pendingToken&&(f.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(f.accessToken=d.oauthToken,f.secret=d.oauthTokenSecret):Ue("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:v,signInMethod:O}=f,B=(0,ae._T)(f,["providerId","signInMethod"]);if(!v||!O)return null;const se=new xn(v,O);return se.idToken=B.idToken||void 0,se.accessToken=B.accessToken||void 0,se.secret=B.secret,se.nonce=B.nonce,se.pendingToken=B.pendingToken||null,se}_getIdTokenResponse(d){return ki(d,this.buildRequest())}_linkToIdToken(d,f){const v=this.buildRequest();return v.idToken=f,ki(d,v)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,ki(d,f)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),d.postBody=(0,$.xO)(f)}return d}}function Hs(g,d){return mr.apply(this,arguments)}function mr(){return(mr=(0,D.Z)(function*(g,d){return Yt(g,"POST","/v1/accounts:sendVerificationCode",zt(g,d))})).apply(this,arguments)}function Fi(){return(Fi=(0,D.Z)(function*(g,d){return pr(g,"POST","/v1/accounts:signInWithPhoneNumber",zt(g,d))})).apply(this,arguments)}function vo(){return(vo=(0,D.Z)(function*(g,d){const f=yield pr(g,"POST","/v1/accounts:signInWithPhoneNumber",zt(g,d));if(f.temporaryProof)throw Mi(g,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const _u={USER_NOT_FOUND:"user-not-found"};function Go(){return(Go=(0,D.Z)(function*(g,d){return pr(g,"POST","/v1/accounts:signInWithPhoneNumber",zt(g,Object.assign(Object.assign({},d),{operation:"REAUTH"})),_u)})).apply(this,arguments)}class bs extends Pt{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,f){return new bs({verificationId:d,verificationCode:f})}static _fromTokenResponse(d,f){return new bs({phoneNumber:d,temporaryProof:f})}_getIdTokenResponse(d){return function yo(g,d){return Fi.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,f){return function Ha(g,d){return vo.apply(this,arguments)}(d,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function Eu(g,d){return Go.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:f,verificationId:v,verificationCode:O}=this.params;return d&&f?{temporaryProof:d,phoneNumber:f}:{sessionInfo:v,code:O}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:f,verificationCode:v,phoneNumber:O,temporaryProof:B}=d;return v||f||O||B?new bs({verificationId:f,verificationCode:v,phoneNumber:O,temporaryProof:B}):null}}class Ts{constructor(d){var f,v,O,B,se,Me;const Xe=(0,$.zd)((0,$.pd)(d)),mt=null!==(f=Xe.apiKey)&&void 0!==f?f:null,Ft=null!==(v=Xe.oobCode)&&void 0!==v?v:null,Mt=function zo(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(O=Xe.mode)&&void 0!==O?O:null);ee(mt&&Ft&&Mt,"argument-error"),this.apiKey=mt,this.operation=Mt,this.code=Ft,this.continueUrl=null!==(B=Xe.continueUrl)&&void 0!==B?B:null,this.languageCode=null!==(se=Xe.languageCode)&&void 0!==se?se:null,this.tenantId=null!==(Me=Xe.tenantId)&&void 0!==Me?Me:null}static parseLink(d){const f=function Li(g){const d=(0,$.zd)((0,$.pd)(g)).link,f=d?(0,$.zd)((0,$.pd)(d)).deep_link_id:null,v=(0,$.zd)((0,$.pd)(g)).deep_link_id;return(v?(0,$.zd)((0,$.pd)(v)).link:null)||v||f||d||g}(d);try{return new Ts(f)}catch(v){return null}}}let Ko=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(f,v){return nr._fromEmailAndPassword(f,v)}static credentialWithLink(f,v){const O=Ts.parseLink(v);return ee(O,"argument-error"),nr._fromEmailAndCode(f,O.code,O.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class xr{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class ds extends xr{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class ii extends ds{static credentialFromJSON(d){const f="string"==typeof d?JSON.parse(d):d;return ee("providerId"in f&&"signInMethod"in f,"argument-error"),xn._fromParams(f)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return ee(d.idToken||d.accessToken,"argument-error"),xn._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return ii.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return ii.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:f,oauthAccessToken:v,oauthTokenSecret:O,pendingToken:B,nonce:se,providerId:Me}=d;if(!v&&!O&&!f&&!B||!Me)return null;try{return new ii(Me)._credential({idToken:f,accessToken:v,nonce:se,pendingToken:B})}catch(Xe){return null}}}let hs=(()=>{class g extends ds{constructor(){super("facebook.com")}static credential(f){return xn._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch(v){return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),Gs=(()=>{class g extends ds{constructor(){super("google.com"),this.addScope("profile")}static credential(f,v){return xn._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:v})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:v,oauthAccessToken:O}=f;if(!v&&!O)return null;try{return g.credential(v,O)}catch(B){return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),Ui=(()=>{class g extends ds{constructor(){super("github.com")}static credential(f){return xn._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch(v){return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class si extends Pt{constructor(d,f){super(d,d),this.pendingToken=f}_getIdTokenResponse(d){return ki(d,this.buildRequest())}_linkToIdToken(d,f){const v=this.buildRequest();return v.idToken=f,ki(d,v)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,ki(d,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:v,signInMethod:O,pendingToken:B}=f;return v&&O&&B&&v===O?new si(v,B):null}static _create(d,f){return new si(d,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ur extends xr{constructor(d){ee(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return Ur.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return Ur.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const f=si.fromJSON(d);return ee(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:f,providerId:v}=d;if(!f||!v)return null;try{return si._create(v,f)}catch(O){return null}}}let za=(()=>{class g extends ds{constructor(){super("twitter.com")}static credential(f,v){return xn._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:v})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:v,oauthTokenSecret:O}=f;if(!v||!O)return null;try{return g.credential(v,O)}catch(B){return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function Gr(g,d){return kn.apply(this,arguments)}function kn(){return(kn=(0,D.Z)(function*(g,d){return pr(g,"POST","/v1/accounts:signUp",zt(g,d))})).apply(this,arguments)}class rr{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,f,v,O=!1){return(0,D.Z)(function*(){const B=yield Lt._fromIdTokenResponse(d,v,O),se=ya(v);return new rr({user:B,providerId:se,_tokenResponse:v,operationType:f})})()}static _forOperation(d,f,v){return(0,D.Z)(function*(){yield d._updateTokensIfNecessary(v,!0);const O=ya(v);return new rr({user:d,providerId:O,_tokenResponse:v,operationType:f})})()}}function ya(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function _o(){return(_o=(0,D.Z)(function*(g){var d;const f=Et(g);if(yield f._initializationPromise,null===(d=f.currentUser)||void 0===d?void 0:d.isAnonymous)return new rr({user:f.currentUser,providerId:null,operationType:"signIn"});const v=yield Gr(f,{returnSecureToken:!0}),O=yield rr._fromIdTokenResponse(f,"signIn",v,!0);return yield f._updateCurrentUser(O.user),O})).apply(this,arguments)}class zs extends $.ZR{constructor(d,f,v,O){var B;super(f.code,f.message),this.operationType=v,this.user=O,Object.setPrototypeOf(this,zs.prototype),this.customData={appName:d.name,tenantId:null!==(B=d.tenantId)&&void 0!==B?B:void 0,_serverResponse:f.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(d,f,v,O){return new zs(d,f,v,O)}}function Cs(g,d,f,v){return("reauthenticate"===d?f._getReauthenticationResolver(g):f._getIdTokenResponse(g)).catch(B=>{throw"auth/multi-factor-auth-required"===B.code?zs._fromErrorAndOperation(g,B,d,v):B})}function zr(g){return new Set(g.map(({providerId:d})=>d).filter(d=>!!d))}function In(){return(In=(0,D.Z)(function*(g,d){const f=(0,$.m9)(g);yield A(!0,f,d);const{providerUserInfo:v}=yield Jn(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[d]}),O=zr(v||[]);return f.providerData=f.providerData.filter(B=>O.has(B.providerId)),O.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function x(g,d){return L.apply(this,arguments)}function L(){return(L=(0,D.Z)(function*(g,d,f=!1){const v=yield Ir(g,d._linkToIdToken(g.auth,yield g.getIdToken()),f);return rr._forOperation(g,"link",v)})).apply(this,arguments)}function A(g,d,f){return j.apply(this,arguments)}function j(){return(j=(0,D.Z)(function*(g,d,f){yield Vn(d);const O=!1===g?"provider-already-linked":"no-such-provider";ee(zr(d.providerData).has(f)===g,d.auth,O)})).apply(this,arguments)}function te(g,d){return Te.apply(this,arguments)}function Te(){return(Te=(0,D.Z)(function*(g,d,f=!1){const{auth:v}=g,O="reauthenticate";try{const B=yield Ir(g,Cs(v,O,d,g),f);ee(B.idToken,v,"internal-error");const se=wt(B.idToken);ee(se,v,"internal-error");const{sub:Me}=se;return ee(g.uid===Me,v,"user-mismatch"),rr._forOperation(g,O,B)}catch(B){throw"auth/user-not-found"===(null==B?void 0:B.code)&&Ue(v,"user-mismatch"),B}})).apply(this,arguments)}function je(g,d){return _t.apply(this,arguments)}function _t(){return(_t=(0,D.Z)(function*(g,d,f=!1){const v="signIn",O=yield Cs(g,v,d),B=yield rr._fromIdTokenResponse(g,v,O);return f||(yield g._updateCurrentUser(B.user)),B})).apply(this,arguments)}function Vt(g,d){return gn.apply(this,arguments)}function gn(){return(gn=(0,D.Z)(function*(g,d){return je(Et(g),d)})).apply(this,arguments)}function $t(g,d){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,D.Z)(function*(g,d){const f=(0,$.m9)(g);return yield A(!1,f,d.providerId),x(f,d)})).apply(this,arguments)}function Fn(g,d){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,D.Z)(function*(g,d){return te((0,$.m9)(g),d)})).apply(this,arguments)}function Kt(g,d){return br.apply(this,arguments)}function br(){return(br=(0,D.Z)(function*(g,d){return pr(g,"POST","/v1/accounts:signInWithCustomToken",zt(g,d))})).apply(this,arguments)}function At(){return(At=(0,D.Z)(function*(g,d){const f=Et(g),v=yield Kt(f,{token:d,returnSecureToken:!0}),O=yield rr._fromIdTokenResponse(f,"signIn",v);return yield f._updateCurrentUser(O.user),O})).apply(this,arguments)}class qi{constructor(d,f){this.factorId=d,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(d,f){return"phoneInfo"in f?Eo._fromServerResponse(d,f):Ue(d,"internal-error")}}class Eo extends qi{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,f){return new Eo(f)}}function Ws(g,d,f){var v;ee((null===(v=f.url)||void 0===v?void 0:v.length)>0,g,"invalid-continue-uri"),ee(void 0===f.dynamicLinkDomain||f.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),d.continueUrl=f.url,d.dynamicLinkDomain=f.dynamicLinkDomain,d.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(ee(f.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),d.iOSBundleId=f.iOS.bundleId),f.android&&(ee(f.android.packageName.length>0,g,"missing-android-pkg-name"),d.androidInstallApp=f.android.installApp,d.androidMinimumVersionCode=f.android.minimumVersion,d.androidPackageName=f.android.packageName)}function Ss(){return(Ss=(0,D.Z)(function*(g,d,f){const v=(0,$.m9)(g),O={requestType:"PASSWORD_RESET",email:d};f&&Ws(v,O,f),yield Ni(v,O)})).apply(this,arguments)}function Wa(){return(Wa=(0,D.Z)(function*(g,d,f){yield er((0,$.m9)(g),{oobCode:d,newPassword:f})})).apply(this,arguments)}function en(){return(en=(0,D.Z)(function*(g,d){yield Nt((0,$.m9)(g),{oobCode:d})})).apply(this,arguments)}function Ka(g,d){return On.apply(this,arguments)}function On(){return(On=(0,D.Z)(function*(g,d){const f=(0,$.m9)(g),v=yield er(f,{oobCode:d}),O=v.requestType;switch(ee(O,f,"internal-error"),O){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(v.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(v.mfaInfo,f,"internal-error");default:ee(v.email,f,"internal-error")}let B=null;return v.mfaInfo&&(B=qi._fromServerResponse(Et(f),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:B},operation:O}})).apply(this,arguments)}function Ii(){return(Ii=(0,D.Z)(function*(g,d){const{data:f}=yield Ka((0,$.m9)(g),d);return f.email})).apply(this,arguments)}function Ea(){return(Ea=(0,D.Z)(function*(g,d,f){const v=Et(g),O=yield Gr(v,{returnSecureToken:!0,email:d,password:f}),B=yield rr._fromIdTokenResponse(v,"signIn",O);return yield v._updateCurrentUser(B.user),B})).apply(this,arguments)}function qa(){return(qa=(0,D.Z)(function*(g,d,f){const v=(0,$.m9)(g),O={requestType:"EMAIL_SIGNIN",email:d};ee(f.handleCodeInApp,v,"argument-error"),f&&Ws(v,O,f),yield ri(v,O)})).apply(this,arguments)}function Tr(){return(Tr=(0,D.Z)(function*(g,d,f){const v=(0,$.m9)(g),O=Ko.credentialWithLink(d,f||Ye());return ee(O._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),Vt(v,O)})).apply(this,arguments)}function As(g,d){return ps.apply(this,arguments)}function ps(){return(ps=(0,D.Z)(function*(g,d){return Yt(g,"POST","/v1/accounts:createAuthUri",zt(g,d))})).apply(this,arguments)}function Yi(){return(Yi=(0,D.Z)(function*(g,d){const v={identifier:d,continueUri:bt()?Ye():"http://localhost"},{signinMethods:O}=yield As((0,$.m9)(g),v);return O||[]})).apply(this,arguments)}function wa(){return(wa=(0,D.Z)(function*(g,d){const f=(0,$.m9)(g),O={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};d&&Ws(f.auth,O,d);const{email:B}=yield Tn(f.auth,O);B!==g.email&&(yield g.reload())})).apply(this,arguments)}function Ia(){return(Ia=(0,D.Z)(function*(g,d,f){const v=(0,$.m9)(g),B={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:d};f&&Ws(v.auth,B,f);const{email:se}=yield Pi(v.auth,B);se!==g.email&&(yield g.reload())})).apply(this,arguments)}function xs(g,d){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,D.Z)(function*(g,d){return Yt(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Da(){return(Da=(0,D.Z)(function*(g,{displayName:d,photoURL:f}){if(void 0===d&&void 0===f)return;const v=(0,$.m9)(g),B={idToken:yield v.getIdToken(),displayName:d,photoUrl:f,returnSecureToken:!0},se=yield Ir(v,xs(v.auth,B));v.displayName=se.displayName||null,v.photoURL=se.photoUrl||null;const Me=v.providerData.find(({providerId:Xe})=>"password"===Xe);Me&&(Me.displayName=v.displayName,Me.photoURL=v.photoURL),yield v._updateTokensIfNecessary(se)})).apply(this,arguments)}function Zs(g,d,f){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,D.Z)(function*(g,d,f){const{auth:v}=g,B={idToken:yield g.getIdToken(),returnSecureToken:!0};d&&(B.email=d),f&&(B.password=f);const se=yield Ir(g,dt(v,B));yield g._updateTokensIfNecessary(se,!0)})).apply(this,arguments)}class Qs{constructor(d,f,v={}){this.isNewUser=d,this.providerId=f,this.profile=v}}class Io extends Qs{constructor(d,f,v,O){super(d,f,v),this.username=O}}class Do extends Qs{constructor(d,f){super(d,"facebook.com",f)}}class ea extends Io{constructor(d,f){super(d,"github.com",f,"string"==typeof(null==f?void 0:f.login)?null==f?void 0:f.login:null)}}class Iu extends Qs{constructor(d,f){super(d,"google.com",f)}}class ir extends Io{constructor(d,f,v){super(d,"twitter.com",f,v)}}function ji(g){const{user:d,_tokenResponse:f}=g;return d.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function wu(g){var d,f;if(!g)return null;const{providerId:v}=g,O=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},B=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!v&&(null==g?void 0:g.idToken)){const se=null===(f=null===(d=wt(g.idToken))||void 0===d?void 0:d.firebase)||void 0===f?void 0:f.sign_in_provider;if(se)return new Qs(B,"anonymous"!==se&&"custom"!==se?se:null)}if(!v)return null;switch(v){case"facebook.com":return new Do(B,O);case"github.com":return new ea(B,O);case"google.com":return new Iu(B,O);case"twitter.com":return new ir(B,O,g.screenName||null);case"custom":case"anonymous":return new Qs(B,null);default:return new Qs(B,v,O)}}(f)}class pi{constructor(d,f){this.type=d,this.credential=f}static _fromIdtoken(d){return new pi("enroll",d)}static _fromMfaPendingCredential(d){return new pi("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var f,v;if(null==d?void 0:d.multiFactorSession){if(null===(f=d.multiFactorSession)||void 0===f?void 0:f.pendingCredential)return pi._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null===(v=d.multiFactorSession)||void 0===v?void 0:v.idToken)return pi._fromIdtoken(d.multiFactorSession.idToken)}return null}}class To{constructor(d,f,v){this.session=d,this.hints=f,this.signInResolver=v}static _fromError(d,f){const v=Et(d),O=f.customData._serverResponse,B=(O.mfaInfo||[]).map(Me=>qi._fromServerResponse(v,Me));ee(O.mfaPendingCredential,v,"internal-error");const se=pi._fromMfaPendingCredential(O.mfaPendingCredential);return new To(se,B,function(){var Me=(0,D.Z)(function*(Xe){const mt=yield Xe._process(v,se);delete O.mfaInfo,delete O.mfaPendingCredential;const Ft=Object.assign(Object.assign({},O),{idToken:mt.idToken,refreshToken:mt.refreshToken});switch(f.operationType){case"signIn":const Mt=yield rr._fromIdTokenResponse(v,f.operationType,Ft);return yield v._updateCurrentUser(Mt.user),Mt;case"reauthenticate":return ee(f.user,v,"internal-error"),rr._forOperation(f.user,f.operationType,Ft);default:Ue(v,"internal-error")}});return function(Xe){return Me.apply(this,arguments)}}())}resolveSignIn(d){var f=this;return(0,D.Z)(function*(){return f.signInResolver(d)})()}}function na(g,d){return Yt(g,"POST","/v2/accounts/mfaEnrollment:start",zt(g,d))}class ba{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(v=>qi._fromServerResponse(d.auth,v)))})}static _fromUser(d){return new ba(d)}getSession(){var d=this;return(0,D.Z)(function*(){return pi._fromIdtoken(yield d.user.getIdToken())})()}enroll(d,f){var v=this;return(0,D.Z)(function*(){const O=d,B=yield v.getSession(),se=yield Ir(v.user,O._process(v.user.auth,B,f));return yield v.user._updateTokensIfNecessary(se),v.user.reload()})()}unenroll(d){var f=this;return(0,D.Z)(function*(){const v="string"==typeof d?d:d.uid,O=yield f.user.getIdToken(),B=yield Ir(f.user,function Ms(g,d){return Yt(g,"POST","/v2/accounts/mfaEnrollment:withdraw",zt(g,d))}(f.user.auth,{idToken:O,mfaEnrollmentId:v}));f.enrolledFactors=f.enrolledFactors.filter(({uid:se})=>se!==v),yield f.user._updateTokensIfNecessary(B);try{yield f.user.reload()}catch(se){if("auth/user-token-expired"!==se.code)throw se}})()}}const $i=new WeakMap,ys="__sak";class Rs{constructor(d,f){this.storageRetriever=d,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(ys,"1"),this.storage.removeItem(ys),Promise.resolve(!0)):Promise.resolve(!1)}catch(d){return Promise.resolve(!1)}}_set(d,f){return this.storage.setItem(d,JSON.stringify(f)),Promise.resolve()}_get(d){const f=this.storage.getItem(d);return Promise.resolve(f?JSON.parse(f):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const So=(()=>{class g extends Rs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,v)=>this.onStorageEvent(f,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Gu(){const g=(0,$.z$)();return Xn(g)||Ar(g)}()&&function cr(){try{return!(!window||window===window.top)}catch(g){return!1}}(),this.fallbackToPolling=Pn(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const v of Object.keys(this.listeners)){const O=this.storage.getItem(v),B=this.localCache[v];O!==B&&f(v,B,O)}}onStorageEvent(f,v=!1){if(!f.key)return void this.forAllChangedKeys((Me,Xe,mt)=>{this.notifyListeners(Me,mt)});const O=f.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Me=this.storage.getItem(O);if(f.newValue!==Me)null!==f.newValue?this.storage.setItem(O,f.newValue):this.storage.removeItem(O);else if(this.localCache[O]===f.newValue&&!v)return}const B=()=>{const Me=this.storage.getItem(O);!v&&this.localCache[O]===Me||this.notifyListeners(O,Me)},se=this.storage.getItem(O);!function Ri(){return(0,$.w1)()&&10===document.documentMode}()||se===f.newValue||f.newValue===f.oldValue?B():setTimeout(B,10)}notifyListeners(f,v){this.localCache[f]=v;const O=this.listeners[f];if(O)for(const B of Array.from(O))B(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,v,O)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:v,newValue:O}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(v)}_removeListener(f,v){this.listeners[f]&&(this.listeners[f].delete(v),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,v){var O=()=>super._set,B=this;return(0,D.Z)(function*(){yield O().call(B,f,v),B.localCache[f]=JSON.stringify(v)})()}_get(f){var v=()=>super._get,O=this;return(0,D.Z)(function*(){const B=yield v().call(O,f);return O.localCache[f]=JSON.stringify(B),B})()}_remove(f){var v=()=>super._remove,O=this;return(0,D.Z)(function*(){yield v().call(O,f),delete O.localCache[f]})()}}return g.type="LOCAL",g})(),ai=(()=>{class g extends Rs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,v){}_removeListener(f,v){}}return g.type="SESSION",g})();let Hn=(()=>{class g{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const v=this.receivers.find(B=>B.isListeningto(f));if(v)return v;const O=new g(f);return this.receivers.push(O),O}isListeningto(f){return this.eventTarget===f}handleEvent(f){var v=this;return(0,D.Z)(function*(){const O=f,{eventId:B,eventType:se,data:Me}=O.data,Xe=v.handlersMap[se];if(!(null==Xe?void 0:Xe.size))return;O.ports[0].postMessage({status:"ack",eventId:B,eventType:se});const mt=Array.from(Xe).map(function(){var Mt=(0,D.Z)(function*(Or){return Or(O.origin,Me)});return function(Or){return Mt.apply(this,arguments)}}()),Ft=yield function Ja(g){return Promise.all(g.map(function(){var d=(0,D.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(v){return{fulfilled:!1,reason:v}}});return function(f){return d.apply(this,arguments)}}()))}(mt);O.ports[0].postMessage({status:"done",eventId:B,eventType:se,response:Ft})})()}_subscribe(f,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(v)}_unsubscribe(f,v){this.handlersMap[f]&&v&&this.handlersMap[f].delete(v),(!v||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function Di(g="",d=10){let f="";for(let v=0;v<d;v++)f+=Math.floor(10*Math.random());return g+f}class Du{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,f,v=50){var O=this;return(0,D.Z)(function*(){const B="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!B)throw new Error("connection_unavailable");let se,Me;return new Promise((Xe,mt)=>{const Ft=Di("",20);B.port1.start();const Mt=setTimeout(()=>{mt(new Error("unsupported_event"))},v);Me={messageChannel:B,onMessage(Or){const ws=Or;if(ws.data.eventId===Ft)switch(ws.data.status){case"ack":clearTimeout(Mt),se=setTimeout(()=>{mt(new Error("timeout"))},3e3);break;case"done":clearTimeout(se),Xe(ws.data.response);break;default:clearTimeout(Mt),clearTimeout(se),mt(new Error("invalid_response"))}}},O.handlers.add(Me),B.port1.addEventListener("message",Me.onMessage),O.target.postMessage({eventType:d,eventId:Ft,data:f},[B.port2])}).finally(()=>{Me&&O.removeMessageHandler(Me)})})()}}function Gn(){return window}function Hi(){return void 0!==Gn().WorkerGlobalScope&&"function"==typeof Gn().importScripts}function Ta(){return(Ta=(0,D.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(g){return null}})).apply(this,arguments)}const Ku="firebaseLocalStorageDb",Ji="firebaseLocalStorage",bi="fbase_key";class Js{constructor(d){this.request=d}toPromise(){return new Promise((d,f)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function I(g,d){return g.transaction([Ji],d?"readwrite":"readonly").objectStore(Ji)}function y(){const g=indexedDB.open(Ku,1);return new Promise((d,f)=>{g.addEventListener("error",()=>{f(g.error)}),g.addEventListener("upgradeneeded",()=>{const v=g.result;try{v.createObjectStore(Ji,{keyPath:bi})}catch(O){f(O)}}),g.addEventListener("success",(0,D.Z)(function*(){const v=g.result;v.objectStoreNames.contains(Ji)?d(v):(v.close(),yield function _(){const g=indexedDB.deleteDatabase(Ku);return new Js(g).toPromise()}(),d(yield y()))}))})}function C(g,d,f){return R.apply(this,arguments)}function R(){return(R=(0,D.Z)(function*(g,d,f){const v=I(g,!0).put({[bi]:d,value:f});return new Js(v).toPromise()})).apply(this,arguments)}function W(){return(W=(0,D.Z)(function*(g,d){const f=I(g,!1).get(d),v=yield new Js(f).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function X(g,d){const f=I(g,!0).delete(d);return new Js(f).toPromise()}const vt=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,D.Z)(function*(){return f.db||(f.db=yield y()),f.db})()}_withRetries(f){var v=this;return(0,D.Z)(function*(){let O=0;for(;;)try{const B=yield v._openDb();return yield f(B)}catch(B){if(O++>3)throw B;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,D.Z)(function*(){return Hi()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,D.Z)(function*(){f.receiver=Hn._getInstance(function bu(){return Hi()?self:null}()),f.receiver._subscribe("keyChanged",function(){var v=(0,D.Z)(function*(O,B){return{keyProcessed:(yield f._poll()).includes(B.key)}});return function(O,B){return v.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var v=(0,D.Z)(function*(O,B){return["keyChanged"]});return function(O,B){return v.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,D.Z)(function*(){var v,O;if(f.activeServiceWorker=yield function zu(){return Ta.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new Du(f.activeServiceWorker);const B=yield f.sender._send("ping",{},800);!B||(null===(v=B[0])||void 0===v?void 0:v.fulfilled)&&(null===(O=B[0])||void 0===O?void 0:O.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var v=this;return(0,D.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Wu(){var g;return(null===(g=null==navigator?void 0:navigator.serviceWorker)||void 0===g?void 0:g.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:f},v.serviceWorkerReceiverAvailable?800:50)}catch(O){}})()}_isAvailable(){return(0,D.Z)(function*(){try{if(!indexedDB)return!1;const f=yield y();return yield C(f,ys,"1"),yield X(f,ys),!0}catch(f){}return!1})()}_withPendingWrite(f){var v=this;return(0,D.Z)(function*(){v.pendingWrites++;try{yield f()}finally{v.pendingWrites--}})()}_set(f,v){var O=this;return(0,D.Z)(function*(){return O._withPendingWrite((0,D.Z)(function*(){return yield O._withRetries(B=>C(B,f,v)),O.localCache[f]=v,O.notifyServiceWorker(f)}))})()}_get(f){var v=this;return(0,D.Z)(function*(){const O=yield v._withRetries(B=>function V(g,d){return W.apply(this,arguments)}(B,f));return v.localCache[f]=O,O})()}_remove(f){var v=this;return(0,D.Z)(function*(){return v._withPendingWrite((0,D.Z)(function*(){return yield v._withRetries(O=>X(O,f)),delete v.localCache[f],v.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,D.Z)(function*(){const v=yield f._withRetries(se=>{const Me=I(se,!1).getAll();return new Js(Me).toPromise()});if(!v)return[];if(0!==f.pendingWrites)return[];const O=[],B=new Set;for(const{fbase_key:se,value:Me}of v)B.add(se),JSON.stringify(f.localCache[se])!==JSON.stringify(Me)&&(f.notifyListeners(se,Me),O.push(se));for(const se of Object.keys(f.localCache))f.localCache[se]&&!B.has(se)&&(f.notifyListeners(se,null),O.push(se));return O})()}notifyListeners(f,v){this.localCache[f]=v;const O=this.listeners[f];if(O)for(const B of Array.from(O))B(v)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,D.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(v)}_removeListener(f,v){this.listeners[f]&&(this.listeners[f].delete(v),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})();function mn(g,d){return Yt(g,"POST","/v2/accounts/mfaSignIn:start",zt(g,d))}function Xi(){return(Xi=(0,D.Z)(function*(g){return(yield Yt(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function es(g){return new Promise((d,f)=>{const v=document.createElement("script");v.setAttribute("src",g),v.onload=d,v.onerror=O=>{const B=Ne("internal-error");B.customData=O,f(B)},v.type="text/javascript",v.charset="UTF-8",function xo(){var g,d;return null!==(d=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==d?d:document}().appendChild(v)})}function Vr(g){return`__${g}${Math.floor(1e6*Math.random())}`}const eu=1e12;class Xs{constructor(d){this.auth=d,this.counter=eu,this._widgets=new Map}render(d,f){const v=this.counter;return this._widgets.set(v,new qu(d,this.auth.name,f||{})),this.counter++,v}reset(d){var f;const v=d||eu;null===(f=this._widgets.get(v))||void 0===f||f.delete(),this._widgets.delete(v)}getResponse(d){var f;return(null===(f=this._widgets.get(d||eu))||void 0===f?void 0:f.getResponse())||""}execute(d){var f=this;return(0,D.Z)(function*(){var v;return null===(v=f._widgets.get(d||eu))||void 0===v||v.execute(),""})()}}class qu{constructor(d,f,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const O="string"==typeof d?document.getElementById(d):d;ee(O,"argument-error",{appName:f}),this.container=O,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Lc(g){const d=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<g;v++)d.push(f.charAt(Math.floor(Math.random()*f.length)));return d.join("")}(50);const{callback:d,"expired-callback":f}=this.params;if(d)try{d(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Xt=Vr("rcb"),Td=new rn(3e4,6e4);class Pp{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Gn().grecaptcha}load(d,f=""){return ee(function $h(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(f),d,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(Gn().grecaptcha):new Promise((v,O)=>{const B=Gn().setTimeout(()=>{O(Ne(d,"network-request-failed"))},Td.get());Gn()[Xt]=()=>{Gn().clearTimeout(B),delete Gn()[Xt];const Me=Gn().grecaptcha;if(!Me)return void O(Ne(d,"internal-error"));const Xe=Me.render;Me.render=(mt,Ft)=>{const Mt=Xe(mt,Ft);return this.counter++,Mt},this.hostLanguage=f,v(Me)},es(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:Xt,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(B),O(Ne(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){return!!Gn().grecaptcha&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Cd{load(d){return(0,D.Z)(function*(){return new Xs(d)})()}clearedOneInstance(){}}const Uc="recaptcha",Sd={theme:"light",type:"image"};class tu{constructor(d,f=Object.assign({},Sd),v){this.parameters=f,this.type=Uc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Et(v),this.isInvisible="invisible"===this.parameters.size,ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const O="string"==typeof d?document.getElementById(d):d;ee(O,this.auth,"argument-error"),this.container=O,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Cd:new Pp,this.validateStartingState()}verify(){var d=this;return(0,D.Z)(function*(){d.assertNotDestroyed();const f=yield d.render(),v=d.getAssertedRecaptcha();return v.getResponse(f)||new Promise(B=>{const se=Me=>{!Me||(d.tokenChangeListeners.delete(se),B(Me))};d.tokenChangeListeners.add(se),d.isInvisible&&v.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return f=>{if(this.tokenChangeListeners.forEach(v=>v(f)),"function"==typeof d)d(f);else if("string"==typeof d){const v=Gn()[d];"function"==typeof v&&v(f)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,D.Z)(function*(){if(yield d.init(),!d.widgetId){let f=d.container;if(!d.isInvisible){const v=document.createElement("div");f.appendChild(v),f=v}d.widgetId=d.getAssertedRecaptcha().render(f,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,D.Z)(function*(){ee(bt()&&!Hi(),d.auth,"internal-error"),yield function Vc(){let g=null;return new Promise(d=>{"complete"!==document.readyState?(g=()=>d(),window.addEventListener("load",g)):d()}).catch(d=>{throw g&&window.removeEventListener("load",g),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const f=yield function Ti(g){return Xi.apply(this,arguments)}(d.auth);ee(f,d.auth,"internal-error"),d.parameters.sitekey=f})()}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class yr{constructor(d,f){this.verificationId=d,this.onConfirmation=f}confirm(d){const f=bs._fromVerification(this.verificationId,d);return this.onConfirmation(f)}}function ra(){return(ra=(0,D.Z)(function*(g,d,f){const v=Et(g),O=yield Ca(v,d,(0,$.m9)(f));return new yr(O,B=>Vt(v,B))})).apply(this,arguments)}function Tu(){return(Tu=(0,D.Z)(function*(g,d,f){const v=(0,$.m9)(g);yield A(!1,v,"phone");const O=yield Ca(v.auth,d,(0,$.m9)(f));return new yr(O,B=>$t(v,B))})).apply(this,arguments)}function ts(){return(ts=(0,D.Z)(function*(g,d,f){const v=(0,$.m9)(g),O=yield Ca(v.auth,d,(0,$.m9)(f));return new yr(O,B=>Fn(v,B))})).apply(this,arguments)}function Ca(g,d,f){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,D.Z)(function*(g,d,f){var v;const O=yield f.verify();try{let B;if(ee("string"==typeof O,g,"argument-error"),ee(f.type===Uc,g,"argument-error"),B="string"==typeof d?{phoneNumber:d}:d,"session"in B){const se=B.session;if("phoneNumber"in B)return ee("enroll"===se.type,g,"internal-error"),(yield na(g,{idToken:se.credential,phoneEnrollmentInfo:{phoneNumber:B.phoneNumber,recaptchaToken:O}})).phoneSessionInfo.sessionInfo;{ee("signin"===se.type,g,"internal-error");const Me=(null===(v=B.multiFactorHint)||void 0===v?void 0:v.uid)||B.multiFactorUid;return ee(Me,g,"missing-multi-factor-info"),(yield mn(g,{mfaPendingCredential:se.credential,mfaEnrollmentId:Me,phoneSignInInfo:{recaptchaToken:O}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:se}=yield Hs(g,{phoneNumber:B.phoneNumber,recaptchaToken:O});return se}}finally{f._reset()}})).apply(this,arguments)}function sa(){return(sa=(0,D.Z)(function*(g,d){yield x((0,$.m9)(g),d)})).apply(this,arguments)}let eo=(()=>{class g{constructor(f){this.providerId=g.PROVIDER_ID,this.auth=Et(f)}verifyPhoneNumber(f,v){return Ca(this.auth,f,(0,$.m9)(v))}static credential(f,v){return bs._fromVerification(f,v)}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:v,temporaryProof:O}=f;return v&&O?bs._fromTokenResponse(v,O):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function Ro(g,d){return d?me(d):(ee(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class Cu extends Pt{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return ki(d,this._buildIdpRequest())}_linkToIdToken(d,f){return ki(d,this._buildIdpRequest(f))}_getReauthenticationResolver(d){return ki(d,this._buildIdpRequest())}_buildIdpRequest(d){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(f.idToken=d),f}}function nu(g){return je(g.auth,new Cu(g),g.bypassAuthState)}function Su(g){const{auth:d,user:f}=g;return ee(f,d,"internal-error"),te(f,new Cu(g),g.bypassAuthState)}function ns(g){return ru.apply(this,arguments)}function ru(){return(ru=(0,D.Z)(function*(g){const{auth:d,user:f}=g;return ee(f,d,"internal-error"),x(f,new Cu(g),g.bypassAuthState)})).apply(this,arguments)}class oa{constructor(d,f,v,O,B=!1){this.auth=d,this.resolver=v,this.user=O,this.bypassAuthState=B,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var d=this;return new Promise(function(){var f=(0,D.Z)(function*(v,O){d.pendingPromise={resolve:v,reject:O};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(B){d.reject(B)}});return function(v,O){return f.apply(this,arguments)}}())}onAuthEvent(d){var f=this;return(0,D.Z)(function*(){const{urlResponse:v,sessionId:O,postBody:B,tenantId:se,error:Me,type:Xe}=d;if(Me)return void f.reject(Me);const mt={auth:f.auth,requestUri:v,sessionId:O,tenantId:se||void 0,postBody:B||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Xe)(mt))}catch(Ft){f.reject(Ft)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return nu;case"linkViaPopup":case"linkViaRedirect":return ns;case"reauthViaPopup":case"reauthViaRedirect":return Su;default:Ue(this.auth,"internal-error")}}resolve(d){ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ad=new rn(2e3,1e4);function Oo(){return(Oo=(0,D.Z)(function*(g,d,f){const v=Et(g);Fe(g,d,xr);const O=Ro(v,f);return new xu(v,"signInViaPopup",d,O).executeNotNull()})).apply(this,arguments)}function No(){return(No=(0,D.Z)(function*(g,d,f){const v=(0,$.m9)(g);Fe(v.auth,d,xr);const O=Ro(v.auth,f);return new xu(v.auth,"reauthViaPopup",d,O,v).executeNotNull()})).apply(this,arguments)}function to(){return(to=(0,D.Z)(function*(g,d,f){const v=(0,$.m9)(g);Fe(v.auth,d,xr);const O=Ro(v.auth,f);return new xu(v.auth,"linkViaPopup",d,O,v).executeNotNull()})).apply(this,arguments)}let xu=(()=>{class g extends oa{constructor(f,v,O,B,se){super(f,v,B,se),this.provider=O,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var f=this;return(0,D.Z)(function*(){const v=yield f.execute();return ee(v,f.auth,"internal-error"),v})()}onExecution(){var f=this;return(0,D.Z)(function*(){ie(1===f.filter.length,"Popup operations only handle one event");const v=Di();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],v),f.authWindow.associatedEvent=v,f.resolver._originValidation(f.auth).catch(O=>{f.reject(O)}),f.resolver._isIframeWebStorageSupported(f.auth,O=>{O||f.reject(Ne(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(Ne(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const f=()=>{var v,O;this.pollId=(null===(O=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===O?void 0:O.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ne(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,Ad.get())};f()}}return g.currentPopupAction=null,g})();const ro=new Map;class ks extends oa{constructor(d,f,v=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,v),this.eventId=null}execute(){var d=()=>super.execute,f=this;return(0,D.Z)(function*(){let v=ro.get(f.auth._key());if(!v){try{const B=(yield function Sa(g,d){return iu.apply(this,arguments)}(f.resolver,f.auth))?yield d().call(f):null;v=()=>Promise.resolve(B)}catch(O){v=()=>Promise.reject(O)}ro.set(f.auth._key(),v)}return f.bypassAuthState||ro.set(f.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(d){var f=()=>super.onAuthEvent,v=this;return(0,D.Z)(function*(){if("signInViaRedirect"===d.type)return f().call(v,d);if("unknown"!==d.type){if(d.eventId){const O=yield v.auth._redirectUserForId(d.eventId);if(O)return v.user=O,f().call(v,d);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,D.Z)(function*(){})()}cleanUp(){}}function iu(){return(iu=(0,D.Z)(function*(g,d){const f=K(d),v=U(g);if(!(yield v._isAvailable()))return!1;const O="true"===(yield v._get(f));return yield v._remove(f),O})).apply(this,arguments)}function Fs(g,d){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,D.Z)(function*(g,d){return U(g)._set(K(d),"true")})).apply(this,arguments)}function M(g,d){ro.set(g._key(),d)}function U(g){return me(g._redirectPersistence)}function K(g){return Dr("pendingRedirect",g.config.apiKey,g.name)}function Ge(){return(Ge=(0,D.Z)(function*(g,d,f){const v=Et(g);Fe(g,d,xr);const O=Ro(v,f);return yield Fs(O,v),O._openRedirect(v,d,"signInViaRedirect")})).apply(this,arguments)}function xt(){return(xt=(0,D.Z)(function*(g,d,f){const v=(0,$.m9)(g);Fe(v.auth,d,xr);const O=Ro(v.auth,f);yield Fs(O,v.auth);const B=yield Mu(v);return O._openRedirect(v.auth,d,"reauthViaRedirect",B)})).apply(this,arguments)}function ui(){return(ui=(0,D.Z)(function*(g,d,f){const v=(0,$.m9)(g);Fe(v.auth,d,xr);const O=Ro(v.auth,f);yield A(!1,v,d.providerId),yield Fs(O,v.auth);const B=yield Mu(v);return O._openRedirect(v.auth,d,"linkViaRedirect",B)})).apply(this,arguments)}function Ze(){return(Ze=(0,D.Z)(function*(g,d){return yield Et(g)._initializationPromise,Mn(g,d,!1)})).apply(this,arguments)}function Mn(g,d){return mi.apply(this,arguments)}function mi(){return(mi=(0,D.Z)(function*(g,d,f=!1){const v=Et(g),O=Ro(v,d),se=yield new ks(v,O,f).execute();return se&&!f&&(delete se.user._redirectEventId,yield v._persistUserIfCurrent(se.user),yield v._setRedirectUser(null,d)),se})).apply(this,arguments)}function Mu(g){return gt.apply(this,arguments)}function gt(){return(gt=(0,D.Z)(function*(g){const d=Di(`${g.uid}:::`);return g._redirectEventId=d,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),d})).apply(this,arguments)}class Po{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let f=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(d,v)&&(f=!0,this.sendToConsumer(d,v),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function qe(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return be(g);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=d,f=!0)),f}sendToConsumer(d,f){var v;if(d.error&&!be(d)){const O=(null===(v=d.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";f.onError(Ne(this.auth,O))}else f.onAuthEvent(d)}isEventForConsumer(d,f){const v=null===f.eventId||!!d.eventId&&d.eventId===f.eventId;return f.filter.includes(d.type)&&v}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(it(d))}saveEventToCache(d){this.cachedEventUids.add(it(d)),this.lastProcessedEventTime=Date.now()}}function it(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(d=>d).join("-")}function be({type:g,error:d}){return"unknown"===g&&"auth/no-auth-event"===(null==d?void 0:d.code)}function ci(g){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,D.Z)(function*(g,d={}){return Yt(g,"GET","/v1/projects",d)})).apply(this,arguments)}const Zu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jc=/^https?/;function Hh(){return(Hh=(0,D.Z)(function*(g){if(g.config.emulator)return;const{authorizedDomains:d}=yield ci(g);for(const f of d)try{if(Gh(f))return}catch(v){}Ue(g,"unauthorized-domain")})).apply(this,arguments)}function Gh(g){const d=Ye(),{protocol:f,hostname:v}=new URL(d);if(g.startsWith("chrome-extension://")){const se=new URL(g);return""===se.hostname&&""===v?"chrome-extension:"===f&&g.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===f&&se.hostname===v}if(!jc.test(f))return!1;if(Zu.test(g))return v===g;const O=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+O+"|"+O+")$","i").test(v)}const zh=new rn(3e4,6e4);function Lp(){const g=Gn().___jsl;if(null==g?void 0:g.H)for(const d of Object.keys(g.H))if(g.H[d].r=g.H[d].r||[],g.H[d].L=g.H[d].L||[],g.H[d].r=[...g.H[d].L],g.CP)for(let f=0;f<g.CP.length;f++)g.CP[f]=null}let Pl=null;function Wh(g){return Pl=Pl||function oy(g){return new Promise((d,f)=>{var v,O,B;function se(){Lp(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{Lp(),f(Ne(g,"network-request-failed"))},timeout:zh.get()})}if(null===(O=null===(v=Gn().gapi)||void 0===v?void 0:v.iframes)||void 0===O?void 0:O.Iframe)d(gapi.iframes.getContext());else{if(!(null===(B=Gn().gapi)||void 0===B?void 0:B.load)){const Me=Vr("iframefcb");return Gn()[Me]=()=>{gapi.load?se():f(Ne(g,"network-request-failed"))},es(`https://apis.google.com/js/api.js?onload=${Me}`).catch(Xe=>f(Xe))}se()}}).catch(d=>{throw Pl=null,d})}(g),Pl}const Zt=new rn(5e3,15e3),vr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Wt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kl(g){const d=g.config;ee(d.authDomain,g,"auth-domain-config-required");const f=d.emulator?Wn(d,"emulator/auth/iframe"):`https://${g.config.authDomain}/__/auth/iframe`,v={apiKey:d.apiKey,appName:g.name,v:fe.SDK_VERSION},O=Wt.get(g.config.apiHost);O&&(v.eid=O);const B=g._getFrameworks();return B.length&&(v.fw=B.join(",")),`${f}?${(0,$.xO)(v).slice(1)}`}function $c(){return $c=(0,D.Z)(function*(g){const d=yield Wh(g),f=Gn().gapi;return ee(f,g,"internal-error"),d.open({where:document.body,url:kl(g),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vr,dontclear:!0},v=>new Promise(function(){var O=(0,D.Z)(function*(B,se){yield v.restyle({setHideOnLeave:!1});const Me=Ne(g,"network-request-failed"),Xe=Gn().setTimeout(()=>{se(Me)},Zt.get());function mt(){Gn().clearTimeout(Xe),B(v)}v.ping(mt).then(mt,()=>{se(Me)})});return function(B,se){return O.apply(this,arguments)}}()))}),$c.apply(this,arguments)}const Mr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Gc{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(d){}}}function Aa(g,d,f,v,O,B){ee(g.config.authDomain,g,"auth-domain-config-required"),ee(g.config.apiKey,g,"invalid-api-key");const se={apiKey:g.config.apiKey,appName:g.name,authType:f,redirectUrl:v,v:fe.SDK_VERSION,eventId:O};if(d instanceof xr){d.setDefaultLanguage(g.languageCode),se.providerId=d.providerId||"",(0,$.xb)(d.getCustomParameters())||(se.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Xe,mt]of Object.entries(B||{}))se[Xe]=mt}if(d instanceof ds){const Xe=d.getScopes().filter(mt=>""!==mt);Xe.length>0&&(se.scopes=Xe.join(","))}g.tenantId&&(se.tid=g.tenantId);const Me=se;for(const Xe of Object.keys(Me))void 0===Me[Xe]&&delete Me[Xe];return`${function Zh({config:g}){return g.emulator?Wn(g,"emulator/auth/handler"):`https://${g.authDomain}/__/auth/handler`}(g)}?${(0,$.xO)(Me).slice(1)}`}const xd="webStorageSupport";class Wc extends class De{constructor(d){this.factorId=d}_process(d,f,v){switch(f.type){case"enroll":return this._finalizeEnroll(d,f.credential,v);case"signin":return this._finalizeSignIn(d,f.credential);default:return Re("unexpected MultiFactorSessionType")}}}{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new Wc(d)}_finalizeEnroll(d,f,v){return function oi(g,d){return Yt(g,"POST","/v2/accounts/mfaEnrollment:finalize",zt(g,d))}(d,{idToken:f,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,f){return function on(g,d){return Yt(g,"POST","/v2/accounts/mfaSignIn:finalize",zt(g,d))}(d,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let io=(()=>{class g{constructor(){}static assertion(f){return Wc._fromCredential(f)}}return g.FACTOR_ID="phone",g})();var Yh="@firebase/auth";class ou{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var f=this;return(0,D.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const f=this.auth.onIdTokenChanged(v=>{var O;d((null===(O=v)||void 0===O?void 0:O.stsTokenManager.accessToken)||null)});this.internalListeners.set(d,f),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const f=this.internalListeners.get(d);!f||(this.internalListeners.delete(d),f(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function so(){return window}function qr(){return(qr=(0,D.Z)(function*(g,d,f){var v;const{BuildInfo:O}=so();ie(d.sessionId,"AuthEvent did not contain a session ID");const B=yield Ln(d.sessionId),se={};return Ar()?se.ibi=O.packageName:ur()?se.apn=O.packageName:Ue(g,"operation-not-supported-in-this-environment"),O.displayName&&(se.appDisplayName=O.displayName),se.sessionId=B,Aa(g,f,d.type,void 0,null!==(v=d.eventId)&&void 0!==v?v:void 0,se)})).apply(this,arguments)}function ua(){return(ua=(0,D.Z)(function*(g){const{BuildInfo:d}=so(),f={};Ar()?f.iosBundleId=d.packageName:ur()?f.androidPackageName=d.packageName:Ue(g,"operation-not-supported-in-this-environment"),yield ci(g,f)})).apply(this,arguments)}function Kc(){return(Kc=(0,D.Z)(function*(g,d,f){const{cordova:v}=so();let O=()=>{};try{yield new Promise((B,se)=>{let Me=null;function Xe(){var Mt;B();const Or=null===(Mt=v.plugins.browsertab)||void 0===Mt?void 0:Mt.close;"function"==typeof Or&&Or(),"function"==typeof(null==f?void 0:f.close)&&f.close()}function mt(){Me||(Me=window.setTimeout(()=>{se(Ne(g,"redirect-cancelled-by-user"))},2e3))}function Ft(){"visible"===(null==document?void 0:document.visibilityState)&&mt()}d.addPassiveListener(Xe),document.addEventListener("resume",mt,!1),ur()&&document.addEventListener("visibilitychange",Ft,!1),O=()=>{d.removePassiveListener(Xe),document.removeEventListener("resume",mt,!1),document.removeEventListener("visibilitychange",Ft,!1),Me&&window.clearTimeout(Me)}})}finally{O()}})).apply(this,arguments)}function Ln(g){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,D.Z)(function*(g){const d=au(g),f=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(f)).map(O=>O.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function au(g){if(ie(/[0-9a-zA-Z]+/.test(g),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(g);const d=new ArrayBuffer(g.length),f=new Uint8Array(d);for(let v=0;v<g.length;v++)f[v]=g.charCodeAt(v);return f}!function Qu(g){(0,fe._registerComponent)(new ce.wA("auth",(d,{options:f})=>{const v=d.getProvider("app").getImmediate(),O=d.getProvider("heartbeat"),{apiKey:B,authDomain:se}=v.options;return((Me,Xe)=>{ee(B&&!B.includes(":"),"invalid-api-key",{appName:Me.name}),ee(!(null==se?void 0:se.includes(":")),"argument-error",{appName:Me.name});const mt={apiKey:B,authDomain:se,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ki(g)},Ft=new at(Me,Xe,mt);return function Ie(g,d){const f=(null==d?void 0:d.persistence)||[],v=(Array.isArray(f)?f:[f]).map(me);(null==d?void 0:d.errorMap)&&g._updateErrorMap(d.errorMap),g._initializeWithPersistence(v,null==d?void 0:d.popupRedirectResolver)}(Ft,f),Ft})(v,O)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,f,v)=>{d.getProvider("auth-internal").initialize()})),(0,fe._registerComponent)(new ce.wA("auth-internal",d=>{const f=Et(d.getProvider("auth").getImmediate());return new ou(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,fe.registerVersion)(Yh,"0.20.3",function Up(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(g)),(0,fe.registerVersion)(Yh,"0.20.3","esm2017")}("Browser");class ay extends Po{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(d)),super.onEvent(d)}initialized(){var d=this;return(0,D.Z)(function*(){yield d.initPromise})()}}function xa(g){return _r.apply(this,arguments)}function _r(){return(_r=(0,D.Z)(function*(g){const d=yield ku()._get(Fu(g));return d&&(yield ku()._remove(Fu(g))),d})).apply(this,arguments)}function Ll(){const g=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const v=Math.floor(Math.random()*d.length);g.push(d.charAt(v))}return g.join("")}function ku(){return me(So)}function Fu(g){return Dr("authEvent",g.config.apiKey,g.name)}function Zn(g){if(!(null==g?void 0:g.includes("?")))return{};const[d,...f]=g.split("?");return(0,$.zd)(f.join("?"))}function Xu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ne("no-auth-event")}}function ec(){var g;return(null===(g=null==self?void 0:self.location)||void 0===g?void 0:g.protocol)||null}function Pd(g=(0,$.z$)()){return!("file:"!==ec()&&"ionic:"!==ec()&&"capacitor:"!==ec()||!g.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ul(){try{const g=self.localStorage,d=Di();if(g)return g.setItem(d,"1"),g.removeItem(d),!function kd(g=(0,$.z$)()){return function Ci(){return(0,$.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Uu(g=(0,$.z$)()){return/Edge\/\d+/.test(g)}(g)}()||(0,$.hl)()}catch(g){return jr()&&(0,$.hl)()}return!1}function jr(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Fo(){return(function Yc(){return"http:"===ec()||"https:"===ec()}()||(0,$.ru)()||Pd())&&!function ko(){return(0,$.b$)()||(0,$.UG)()}()&&Ul()&&!jr()}function Qc(){return Pd()&&"undefined"!=typeof document}function Fd(){return(Fd=(0,D.Z)(function*(){return!!Qc()&&new Promise(g=>{const d=setTimeout(()=>{g(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),g(!0)})})})).apply(this,arguments)}const vs={LOCAL:"local",NONE:"none",SESSION:"session"},Rr=ee,Ud="persistence";function Vd(g){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,D.Z)(function*(g){yield g._initializationPromise;const d=Xh(),f=Dr(Ud,g.config.apiKey,g.name);d&&d.setItem(f,g._getPersistence())})).apply(this,arguments)}function Xh(){var g;try{return(null===(g=function Ld(){return"undefined"!=typeof window?window:null}())||void 0===g?void 0:g.sessionStorage)||null}catch(d){return null}}const Jc=ee;class Ls{constructor(){this.browserResolver=me(class Nu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ai,this._completeRedirectFn=Mn,this._overrideRedirectResult=M}_openPopup(d,f,v,O){var B=this;return(0,D.Z)(function*(){var se;ie(null===(se=B.eventManagers[d._key()])||void 0===se?void 0:se.manager,"_initialize() not called before _openPopup()");const Me=Aa(d,f,v,Ye(),O);return function zc(g,d,f,v=500,O=600){const B=Math.max((window.screen.availHeight-O)/2,0).toString(),se=Math.max((window.screen.availWidth-v)/2,0).toString();let Me="";const Xe=Object.assign(Object.assign({},Mr),{width:v.toString(),height:O.toString(),top:B,left:se}),mt=(0,$.z$)().toLowerCase();f&&(Me=qt(mt)?"_blank":f),Wi(mt)&&(d=d||"http://localhost",Xe.scrollbars="yes");const Ft=Object.entries(Xe).reduce((Or,[ws,nl])=>`${Or}${ws}=${nl},`,"");if(function ls(g=(0,$.z$)()){var d;return Ar(g)&&!!(null===(d=window.navigator)||void 0===d?void 0:d.standalone)}(mt)&&"_self"!==Me)return function Kh(g,d){const f=document.createElement("a");f.href=g,f.target=d;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(v)}(d||"",Me),new Gc(null);const Mt=window.open(d||"",Me,Ft);ee(Mt,g,"popup-blocked");try{Mt.focus()}catch(Or){}return new Gc(Mt)}(d,Me,Di())})()}_openRedirect(d,f,v,O){var B=this;return(0,D.Z)(function*(){return yield B._originValidation(d),function Os(g){Gn().location.href=g}(Aa(d,f,v,Ye(),O)),new Promise(()=>{})})()}_initialize(d){const f=d._key();if(this.eventManagers[f]){const{manager:O,promise:B}=this.eventManagers[f];return O?Promise.resolve(O):(ie(B,"If manager is not set, promise should be"),B)}const v=this.initAndGetManager(d);return this.eventManagers[f]={promise:v},v.catch(()=>{delete this.eventManagers[f]}),v}initAndGetManager(d){var f=this;return(0,D.Z)(function*(){const v=yield function yn(g){return $c.apply(this,arguments)}(d),O=new Po(d);return v.register("authEvent",B=>(ee(null==B?void 0:B.authEvent,d,"invalid-auth-event"),{status:O.onEvent(B.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[d._key()]={manager:O},f.iframes[d._key()]=v,O})()}_isIframeWebStorageSupported(d,f){this.iframes[d._key()].send(xd,{type:xd},O=>{var B;const se=null===(B=null==O?void 0:O[0])||void 0===B?void 0:B[xd];void 0!==se&&f(!!se),Ue(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Fp(g){return Hh.apply(this,arguments)}(d)),this.originValidationPromises[f]}get _shouldInitProactively(){return Pn()||Xn()||Ar()}}),this.cordovaResolver=me(class Jh{constructor(){this._redirectPersistence=ai,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Mn,this._overrideRedirectResult=M}_initialize(d){var f=this;return(0,D.Z)(function*(){const v=d._key();let O=f.eventManagers.get(v);return O||(O=new ay(d),f.eventManagers.set(v,O),f.attachCallbackListeners(d,O)),O})()}_openPopup(d){Ue(d,"operation-not-supported-in-this-environment")}_openRedirect(d,f,v,O){var B=this;return(0,D.Z)(function*(){!function Gi(g){var d,f,v,O,B,se,Me,Xe,mt,Ft;const Mt=so();ee("function"==typeof(null===(d=null==Mt?void 0:Mt.universalLinks)||void 0===d?void 0:d.subscribe),g,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ee(void 0!==(null===(f=null==Mt?void 0:Mt.BuildInfo)||void 0===f?void 0:f.packageName),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ee("function"==typeof(null===(B=null===(O=null===(v=null==Mt?void 0:Mt.cordova)||void 0===v?void 0:v.plugins)||void 0===O?void 0:O.browsertab)||void 0===B?void 0:B.openUrl),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(Xe=null===(Me=null===(se=null==Mt?void 0:Mt.cordova)||void 0===se?void 0:se.plugins)||void 0===Me?void 0:Me.browsertab)||void 0===Xe?void 0:Xe.isAvailable),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(Ft=null===(mt=null==Mt?void 0:Mt.cordova)||void 0===mt?void 0:mt.InAppBrowser)||void 0===Ft?void 0:Ft.open),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const se=yield B._initialize(d);yield se.initialized(),se.resetRedirect(),function T(){ro.clear()}(),yield B._originValidation(d);const Me=function Zr(g,d,f=null){return{type:d,eventId:f,urlResponse:null,sessionId:Ll(),postBody:null,tenantId:g.tenantId,error:Ne(g,"no-auth-event")}}(d,v,O);yield function Bp(g,d){return ku()._set(Fu(g),d)}(d,Me);const Xe=yield function aa(g,d,f){return qr.apply(this,arguments)}(d,Me,f),mt=yield function Od(g){const{cordova:d}=so();return new Promise(f=>{d.plugins.browsertab.isAvailable(v=>{let O=null;v?d.plugins.browsertab.openUrl(g):O=d.InAppBrowser.open(g,function $o(g=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}()?"_blank":"_system","location=yes"),f(O)})})}(Xe);return function Br(g,d,f){return Kc.apply(this,arguments)}(d,se,mt)})()}_isIframeWebStorageSupported(d,f){throw new Error("Method not implemented.")}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Rd(g){return ua.apply(this,arguments)}(d)),this.originValidationPromises[f]}attachCallbackListeners(d,f){const{universalLinks:v,handleOpenURL:O,BuildInfo:B}=so(),se=setTimeout((0,D.Z)(function*(){yield xa(d),f.onEvent(Xu())}),500),Me=function(){var Ft=(0,D.Z)(function*(Mt){clearTimeout(se);const Or=yield xa(d);let ws=null;Or&&(null==Mt?void 0:Mt.url)&&(ws=function Pu(g,d){var f,v;const O=function Ma(g){const d=Zn(g),f=d.link?decodeURIComponent(d.link):void 0,v=Zn(f).link,O=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return Zn(O).link||O||v||f||g}(d);if(O.includes("/__/auth/callback")){const B=Zn(O),se=B.firebaseError?function Nd(g){try{return JSON.parse(g)}catch(d){return null}}(decodeURIComponent(B.firebaseError)):null,Me=null===(v=null===(f=null==se?void 0:se.code)||void 0===f?void 0:f.split("auth/"))||void 0===v?void 0:v[1],Xe=Me?Ne(Me):null;return Xe?{type:g.type,eventId:g.eventId,tenantId:g.tenantId,error:Xe,urlResponse:null,sessionId:null,postBody:null}:{type:g.type,eventId:g.eventId,tenantId:g.tenantId,sessionId:g.sessionId,urlResponse:O,postBody:null}}return null}(Or,Mt.url)),f.onEvent(ws||Xu())});return function(Or){return Ft.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,Me);const Xe=O,mt=`${B.packageName.toLowerCase()}://`;so().handleOpenURL=function(){var Ft=(0,D.Z)(function*(Mt){if(Mt.toLowerCase().startsWith(mt)&&Me({url:Mt}),"function"==typeof Xe)try{Xe(Mt)}catch(Or){console.error(Or)}});return function(Mt){return Ft.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ai,this._completeRedirectFn=Mn,this._overrideRedirectResult=M}_initialize(d){var f=this;return(0,D.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,f,v,O){var B=this;return(0,D.Z)(function*(){return yield B.selectUnderlyingResolver(),B.assertedUnderlyingResolver._openPopup(d,f,v,O)})()}_openRedirect(d,f,v,O){var B=this;return(0,D.Z)(function*(){return yield B.selectUnderlyingResolver(),B.assertedUnderlyingResolver._openRedirect(d,f,v,O)})()}_isIframeWebStorageSupported(d,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,f)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return Qc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Jc(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,D.Z)(function*(){if(d.underlyingResolver)return;const f=yield function jp(){return Fd.apply(this,arguments)}();d.underlyingResolver=f?d.cordovaResolver:d.browserResolver})()}}function Xc(g){return g.unwrap()}function el(g){return tf(g)}function tf(g){const{_tokenResponse:d}=g instanceof $.ZR?g.customData:g;if(!d)return null;if(!(g instanceof $.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return eo.credentialFromResult(g);const f=d.providerId;if(!f||"password"===f)return null;let v;switch(f){case"google.com":v=Gs;break;case"facebook.com":v=hs;break;case"github.com":v=Ui;break;case"twitter.com":v=za;break;default:const{oauthIdToken:O,oauthAccessToken:B,oauthTokenSecret:se,pendingToken:Me,nonce:Xe}=d;return B||se||O||Me?Me?f.startsWith("saml.")?si._create(f,Me):xn._fromParams({providerId:f,signInMethod:f,pendingToken:Me,idToken:O,accessToken:B}):new ii(f).credential({idToken:O,accessToken:B,rawNonce:Xe}):null}return g instanceof $.ZR?v.credentialFromError(g):v.credentialFromResult(g)}function _s(g,d){return d.catch(f=>{throw f instanceof $.ZR&&function Si(g,d){var f;const v=null===(f=d.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===d.code)d.resolver=new nf(g,function fn(g,d){var f;const v=(0,$.m9)(g),O=d;return ee(d.customData.operationType,v,"argument-error"),ee(null===(f=O.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,v,"argument-error"),To._fromError(v,O)}(g,d));else if(v){const O=tf(d),B=d;O&&(B.credential=O,B.tenantId=v.tenantId||void 0,B.email=v.email||void 0,B.phoneNumber=v.phoneNumber||void 0)}}(g,f),f}).then(f=>{const O=f.user;return{operationType:f.operationType,credential:el(f),additionalUserInfo:ji(f),user:Oa.getOrCreate(O)}})}function Bd(g,d){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,D.Z)(function*(g,d){const f=yield d;return{verificationId:f.verificationId,confirm:v=>_s(g,f.confirm(v))}})).apply(this,arguments)}class nf{constructor(d,f){this.resolver=f,this.auth=function ef(g){return g.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return _s(Xc(this.auth),this.resolver.resolveSignIn(d))}}class Oa{constructor(d){this._delegate=d,this.multiFactor=function ms(g){const d=(0,$.m9)(g);return $i.has(d)||$i.set(d,ba._fromUser(d)),$i.get(d)}(d)}static getOrCreate(d){return Oa.USER_MAP.has(d)||Oa.USER_MAP.set(d,new Oa(d)),Oa.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var f=this;return(0,D.Z)(function*(){return _s(f.auth,$t(f._delegate,d))})()}linkWithPhoneNumber(d,f){var v=this;return(0,D.Z)(function*(){return Bd(v.auth,function kp(g,d,f){return Tu.apply(this,arguments)}(v._delegate,d,f))})()}linkWithPopup(d){var f=this;return(0,D.Z)(function*(){return _s(f.auth,function Rl(g,d,f){return to.apply(this,arguments)}(f._delegate,d,Ls))})()}linkWithRedirect(d){var f=this;return(0,D.Z)(function*(){return yield Vd(Et(f.auth)),function cn(g,d,f){return function Ct(g,d,f){return ui.apply(this,arguments)}(g,d,f)}(f._delegate,d,Ls)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var f=this;return(0,D.Z)(function*(){return _s(f.auth,Fn(f._delegate,d))})()}reauthenticateWithPhoneNumber(d,f){return Bd(this.auth,function gi(g,d,f){return ts.apply(this,arguments)}(this._delegate,d,f))}reauthenticateWithPopup(d){return _s(this.auth,function Bc(g,d,f){return No.apply(this,arguments)}(this._delegate,d,Ls))}reauthenticateWithRedirect(d){var f=this;return(0,D.Z)(function*(){return yield Vd(Et(f.auth)),function nt(g,d,f){return function Ht(g,d,f){return xt.apply(this,arguments)}(g,d,f)}(f._delegate,d,Ls)})()}sendEmailVerification(d){return function gs(g,d){return wa.apply(this,arguments)}(this._delegate,d)}unlink(d){var f=this;return(0,D.Z)(function*(){return yield function va(g,d){return In.apply(this,arguments)}(f._delegate,d),f})()}updateEmail(d){return function Xo(g,d){return Zs((0,$.m9)(g),d,null)}(this._delegate,d)}updatePassword(d){return function qs(g,d){return Zs((0,$.m9)(g),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function ia(g,d){return sa.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function Cr(g,d){return Da.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,f){return function Qo(g,d,f){return Ia.apply(this,arguments)}(this._delegate,d,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Oa.USER_MAP=new WeakMap;const tl=ee;let rf=(()=>{class g{constructor(f,v){if(this.app=f,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:O}=f.options;tl(O,"invalid-api-key",{appName:f.name}),tl(O,"invalid-api-key",{appName:f.name});const B="undefined"!=typeof window?Ls:void 0;this._delegate=v.initialize({options:{persistence:tc(O,f.name),popupRedirectResolver:B}}),this._delegate._updateErrorMap(He),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Oa.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,v){!function Hr(g,d,f){const v=Et(g);ee(v._canInitEmulator,v,"emulator-config-failed"),ee(/^https?:\/\//.test(d),v,"invalid-emulator-scheme");const O=!!(null==f?void 0:f.disableWarnings),B=Ae(d),{host:se,port:Me}=function Rn(g){const d=Ae(g),f=/(\/\/)?([^?#/]+)/.exec(g.substr(d.length));if(!f)return{host:"",port:null};const v=f[2].split("@").pop()||"",O=/^(\[[^\]]+\])(:|$)/.exec(v);if(O){const B=O[1];return{host:B,port:ei(v.substr(B.length+1))}}{const[B,se]=v.split(":");return{host:B,port:ei(se)}}}(d);v.config.emulator={url:`${B}//${se}${null===Me?"":`:${Me}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:se,port:Me,protocol:B.replace(":",""),options:Object.freeze({disableWarnings:O})}),O||function un(){function g(){const d=document.createElement("p"),f=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}(this._delegate,f,v)}applyActionCode(f){return function $e(g,d){return en.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return Ka(this._delegate,f)}confirmPasswordReset(f,v){return function _a(g,d,f){return Wa.apply(this,arguments)}(this._delegate,f,v)}createUserWithEmailAndPassword(f,v){var O=this;return(0,D.Z)(function*(){return _s(O._delegate,function Bi(g,d,f){return Ea.apply(this,arguments)}(O._delegate,f,v))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function Ks(g,d){return Yi.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function Yo(g,d){const f=Ts.parseLink(d);return"EMAIL_SIGNIN"===(null==f?void 0:f.operation)}(0,f)}getRedirectResult(){var f=this;return(0,D.Z)(function*(){tl(Fo(),f._delegate,"operation-not-supported-in-this-environment");const v=yield function rs(g,d){return Ze.apply(this,arguments)}(f._delegate,Ls);return v?_s(f._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function Lu(g,d){Et(g)._logFramework(d)}(this._delegate,f)}onAuthStateChanged(f,v,O){const{next:B,error:se,complete:Me}=Na(f,v,O);return this._delegate.onAuthStateChanged(B,se,Me)}onIdTokenChanged(f,v,O){const{next:B,error:se,complete:Me}=Na(f,v,O);return this._delegate.onIdTokenChanged(B,se,Me)}sendSignInLinkToEmail(f,v){return function Nc(g,d,f){return qa.apply(this,arguments)}(this._delegate,f,v)}sendPasswordResetEmail(f,v){return function qo(g,d,f){return Ss.apply(this,arguments)}(this._delegate,f,v||void 0)}setPersistence(f){var v=this;return(0,D.Z)(function*(){let O;switch(function Yn(g,d){Rr(Object.values(vs).includes(d),g,"invalid-persistence-type"),(0,$.b$)()?Rr(d!==vs.SESSION,g,"unsupported-persistence-type"):(0,$.UG)()?Rr(d===vs.NONE,g,"unsupported-persistence-type"):jr()?Rr(d===vs.NONE||d===vs.LOCAL&&(0,$.hl)(),g,"unsupported-persistence-type"):Rr(d===vs.NONE||Ul(),g,"unsupported-persistence-type")}(v._delegate,f),f){case vs.SESSION:O=ai;break;case vs.LOCAL:O=(yield me(vt)._isAvailable())?vt:So;break;case vs.NONE:O=Ut;break;default:return Ue("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(O)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return _s(this._delegate,function Vi(g){return _o.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return _s(this._delegate,Vt(this._delegate,f))}signInWithCustomToken(f){return _s(this._delegate,function Wr(g,d){return At.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,v){return _s(this._delegate,function Zi(g,d,f){return Vt((0,$.m9)(g),Ko.credential(d,f))}(this._delegate,f,v))}signInWithEmailLink(f,v){return _s(this._delegate,function wo(g,d,f){return Tr.apply(this,arguments)}(this._delegate,f,v))}signInWithPhoneNumber(f,v){return Bd(this._delegate,function Ps(g,d,f){return ra.apply(this,arguments)}(this._delegate,f,v))}signInWithPopup(f){var v=this;return(0,D.Z)(function*(){return tl(Fo(),v._delegate,"operation-not-supported-in-this-environment"),_s(v._delegate,function Au(g,d,f){return Oo.apply(this,arguments)}(v._delegate,f,Ls))})()}signInWithRedirect(f){var v=this;return(0,D.Z)(function*(){return tl(Fo(),v._delegate,"operation-not-supported-in-this-environment"),yield Vd(v._delegate),function ue(g,d,f){return function _e(g,d,f){return Ge.apply(this,arguments)}(g,d,f)}(v._delegate,f,Ls)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function Zo(g,d){return Ii.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return g.Persistence=vs,g})();function Na(g,d,f){let v=g;"function"!=typeof g&&({next:v,error:d,complete:f}=g);const O=v;return{next:se=>O(se&&Oa.getOrCreate(se)),error:d,complete:f}}function tc(g,d){const f=function Ra(g,d){const f=Xh();if(!f)return[];const v=Dr(Ud,g,d);switch(f.getItem(v)){case vs.NONE:return[Ut];case vs.LOCAL:return[vt,ai];case vs.SESSION:return[ai];default:return[]}}(g,d);if("undefined"!=typeof self&&!f.includes(vt)&&f.push(vt),"undefined"!=typeof window)for(const v of[So,ai])f.includes(v)||f.push(v);return f.includes(Ut)||f.push(Ut),f}class jd{constructor(){this.providerId="phone",this._delegate=new eo(Xc(H.Z.auth()))}static credential(d,f){return eo.credential(d,f)}verifyPhoneNumber(d,f){return this._delegate.verifyPhoneNumber(d,f)}unwrap(){return this._delegate}}jd.PHONE_SIGN_IN_METHOD=eo.PHONE_SIGN_IN_METHOD,jd.PROVIDER_ID=eo.PROVIDER_ID;const sf=ee;class of{constructor(d,f,v=H.Z.app()){var O;sf(null===(O=v.options)||void 0===O?void 0:O.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new tu(d,f,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Lo(g){g.INTERNAL.registerComponent(new ce.wA("auth-compat",d=>{const f=d.getProvider("app-compat").getImmediate(),v=d.getProvider("auth");return new rf(f,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ko,FacebookAuthProvider:hs,GithubAuthProvider:Ui,GoogleAuthProvider:Gs,OAuthProvider:ii,SAMLAuthProvider:Ur,PhoneAuthProvider:jd,PhoneMultiFactorGenerator:io,RecaptchaVerifier:of,TwitterAuthProvider:za,Auth:rf,AuthCredential:Pt,Error:$.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),g.registerVersion("@firebase/auth-compat","0.2.16")}(H.Z)},8306:(st,we,k)=>{k.d(we,{y:()=>J});var D=k(2961),H=k(727),$=k(8822),fe=k(4671);var ce=k(2416),de=k(576),ve=k(2806);let J=(()=>{class Ve{constructor(Je){Je&&(this._subscribe=Je)}lift(Je){const Ce=new Ve;return Ce.source=this,Ce.operator=Je,Ce}subscribe(Je,Ce,Pe){const ot=function et(Ve){return Ve&&Ve instanceof D.Lv||function pe(Ve){return Ve&&(0,de.m)(Ve.next)&&(0,de.m)(Ve.error)&&(0,de.m)(Ve.complete)}(Ve)&&(0,H.Nn)(Ve)}(Je)?Je:new D.Hp(Je,Ce,Pe);return(0,ve.x)(()=>{const{operator:ct,source:Ue}=this;ot.add(ct?ct.call(ot,Ue):Ue?this._subscribe(ot):this._trySubscribe(ot))}),ot}_trySubscribe(Je){try{return this._subscribe(Je)}catch(Ce){Je.error(Ce)}}forEach(Je,Ce){return new(Ce=Z(Ce))((Pe,ot)=>{const ct=new D.Hp({next:Ue=>{try{Je(Ue)}catch(Ne){ot(Ne),ct.unsubscribe()}},error:ot,complete:Pe});this.subscribe(ct)})}_subscribe(Je){var Ce;return null===(Ce=this.source)||void 0===Ce?void 0:Ce.subscribe(Je)}[$.L](){return this}pipe(...Je){return function le(Ve){return 0===Ve.length?fe.y:1===Ve.length?Ve[0]:function(Je){return Ve.reduce((Ce,Pe)=>Pe(Ce),Je)}}(Je)(this)}toPromise(Je){return new(Je=Z(Je))((Ce,Pe)=>{let ot;this.subscribe(ct=>ot=ct,ct=>Pe(ct),()=>Ce(ot))})}}return Ve.create=He=>new Ve(He),Ve})();function Z(Ve){var He;return null!==(He=null!=Ve?Ve:ce.v.Promise)&&void 0!==He?He:Promise}},7579:(st,we,k)=>{k.d(we,{x:()=>ce});var D=k(8306),H=k(727);const fe=(0,k(3888).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ae=k(8737),le=k(2806);let ce=(()=>{class ve extends D.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Z){const pe=new de(this,this);return pe.operator=Z,pe}_throwIfClosed(){if(this.closed)throw new fe}next(Z){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const pe of this.currentObservers)pe.next(Z)}})}error(Z){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Z;const{observers:pe}=this;for(;pe.length;)pe.shift().error(Z)}})}complete(){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Z}=this;for(;Z.length;)Z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Z;return(null===(Z=this.observers)||void 0===Z?void 0:Z.length)>0}_trySubscribe(Z){return this._throwIfClosed(),super._trySubscribe(Z)}_subscribe(Z){return this._throwIfClosed(),this._checkFinalizedStatuses(Z),this._innerSubscribe(Z)}_innerSubscribe(Z){const{hasError:pe,isStopped:et,observers:Ve}=this;return pe||et?H.Lc:(this.currentObservers=null,Ve.push(Z),new H.w0(()=>{this.currentObservers=null,(0,ae.P)(Ve,Z)}))}_checkFinalizedStatuses(Z){const{hasError:pe,thrownError:et,isStopped:Ve}=this;pe?Z.error(et):Ve&&Z.complete()}asObservable(){const Z=new D.y;return Z.source=this,Z}}return ve.create=(J,Z)=>new de(J,Z),ve})();class de extends ce{constructor(J,Z){super(),this.destination=J,this.source=Z}next(J){var Z,pe;null===(pe=null===(Z=this.destination)||void 0===Z?void 0:Z.next)||void 0===pe||pe.call(Z,J)}error(J){var Z,pe;null===(pe=null===(Z=this.destination)||void 0===Z?void 0:Z.error)||void 0===pe||pe.call(Z,J)}complete(){var J,Z;null===(Z=null===(J=this.destination)||void 0===J?void 0:J.complete)||void 0===Z||Z.call(J)}_subscribe(J){var Z,pe;return null!==(pe=null===(Z=this.source)||void 0===Z?void 0:Z.subscribe(J))&&void 0!==pe?pe:H.Lc}}},2961:(st,we,k)=>{k.d(we,{Hp:()=>Je,Lv:()=>pe});var D=k(576),H=k(727),$=k(2416),fe=k(7849);function ae(){}const le=ve("C",void 0,void 0);function ve(Ue,Ne,ke){return{kind:Ue,value:Ne,error:ke}}var J=k(3410),Z=k(2806);class pe extends H.w0{constructor(Ne){super(),this.isStopped=!1,Ne?(this.destination=Ne,(0,H.Nn)(Ne)&&Ne.add(this)):this.destination=ct}static create(Ne,ke,Fe){return new Je(Ne,ke,Fe)}next(Ne){this.isStopped?ot(function de(Ue){return ve("N",Ue,void 0)}(Ne),this):this._next(Ne)}error(Ne){this.isStopped?ot(function ce(Ue){return ve("E",void 0,Ue)}(Ne),this):(this.isStopped=!0,this._error(Ne))}complete(){this.isStopped?ot(le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ne){this.destination.next(Ne)}_error(Ne){try{this.destination.error(Ne)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const et=Function.prototype.bind;function Ve(Ue,Ne){return et.call(Ue,Ne)}class He{constructor(Ne){this.partialObserver=Ne}next(Ne){const{partialObserver:ke}=this;if(ke.next)try{ke.next(Ne)}catch(Fe){Ce(Fe)}}error(Ne){const{partialObserver:ke}=this;if(ke.error)try{ke.error(Ne)}catch(Fe){Ce(Fe)}else Ce(Ne)}complete(){const{partialObserver:Ne}=this;if(Ne.complete)try{Ne.complete()}catch(ke){Ce(ke)}}}class Je extends pe{constructor(Ne,ke,Fe){let tt;if(super(),(0,D.m)(Ne)||!Ne)tt={next:null!=Ne?Ne:void 0,error:null!=ke?ke:void 0,complete:null!=Fe?Fe:void 0};else{let ee;this&&$.v.useDeprecatedNextContext?(ee=Object.create(Ne),ee.unsubscribe=()=>this.unsubscribe(),tt={next:Ne.next&&Ve(Ne.next,ee),error:Ne.error&&Ve(Ne.error,ee),complete:Ne.complete&&Ve(Ne.complete,ee)}):tt=Ne}this.destination=new He(tt)}}function Ce(Ue){$.v.useDeprecatedSynchronousErrorHandling?(0,Z.O)(Ue):(0,fe.h)(Ue)}function ot(Ue,Ne){const{onStoppedNotification:ke}=$.v;ke&&J.z.setTimeout(()=>ke(Ue,Ne))}const ct={closed:!0,next:ae,error:function Pe(Ue){throw Ue},complete:ae}},727:(st,we,k)=>{k.d(we,{Lc:()=>le,w0:()=>ae,Nn:()=>ce});var D=k(576);const $=(0,k(3888).d)(ve=>function(Z){ve(this),this.message=Z?`${Z.length} errors occurred during unsubscription:\n${Z.map((pe,et)=>`${et+1}) ${pe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Z});var fe=k(8737);class ae{constructor(J){this.initialTeardown=J,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let J;if(!this.closed){this.closed=!0;const{_parentage:Z}=this;if(Z)if(this._parentage=null,Array.isArray(Z))for(const Ve of Z)Ve.remove(this);else Z.remove(this);const{initialTeardown:pe}=this;if((0,D.m)(pe))try{pe()}catch(Ve){J=Ve instanceof $?Ve.errors:[Ve]}const{_finalizers:et}=this;if(et){this._finalizers=null;for(const Ve of et)try{de(Ve)}catch(He){J=null!=J?J:[],He instanceof $?J=[...J,...He.errors]:J.push(He)}}if(J)throw new $(J)}}add(J){var Z;if(J&&J!==this)if(this.closed)de(J);else{if(J instanceof ae){if(J.closed||J._hasParent(this))return;J._addParent(this)}(this._finalizers=null!==(Z=this._finalizers)&&void 0!==Z?Z:[]).push(J)}}_hasParent(J){const{_parentage:Z}=this;return Z===J||Array.isArray(Z)&&Z.includes(J)}_addParent(J){const{_parentage:Z}=this;this._parentage=Array.isArray(Z)?(Z.push(J),Z):Z?[Z,J]:J}_removeParent(J){const{_parentage:Z}=this;Z===J?this._parentage=null:Array.isArray(Z)&&(0,fe.P)(Z,J)}remove(J){const{_finalizers:Z}=this;Z&&(0,fe.P)(Z,J),J instanceof ae&&J._removeParent(this)}}ae.EMPTY=(()=>{const ve=new ae;return ve.closed=!0,ve})();const le=ae.EMPTY;function ce(ve){return ve instanceof ae||ve&&"closed"in ve&&(0,D.m)(ve.remove)&&(0,D.m)(ve.add)&&(0,D.m)(ve.unsubscribe)}function de(ve){(0,D.m)(ve)?ve():ve.unsubscribe()}},2416:(st,we,k)=>{k.d(we,{v:()=>D});const D={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(st,we,k)=>{k.d(we,{z:()=>ae});var D=k(8189),$=k(7669),fe=k(8996);function ae(...le){return function H(){return(0,D.J)(1)}()((0,fe.D)(le,(0,$.yG)(le)))}},515:(st,we,k)=>{k.d(we,{E:()=>H});const H=new(k(8306).y)(ae=>ae.complete())},8996:(st,we,k)=>{k.d(we,{D:()=>Ne});var D=k(8421),H=k(5363),$=k(9468),le=k(8306),de=k(2202),ve=k(576),J=k(9672);function pe(ke,Fe){if(!ke)throw new Error("Iterable cannot be null");return new le.y(tt=>{(0,J.f)(tt,Fe,()=>{const ee=ke[Symbol.asyncIterator]();(0,J.f)(tt,Fe,()=>{ee.next().then(Re=>{Re.done?tt.complete():tt.next(Re.value)})},0,!0)})})}var et=k(3670),Ve=k(8239),He=k(1144),Je=k(6495),Ce=k(2206),Pe=k(4532),ot=k(3260);function Ne(ke,Fe){return Fe?function Ue(ke,Fe){if(null!=ke){if((0,et.c)(ke))return function fe(ke,Fe){return(0,D.Xf)(ke).pipe((0,$.R)(Fe),(0,H.Q)(Fe))}(ke,Fe);if((0,He.z)(ke))return function ce(ke,Fe){return new le.y(tt=>{let ee=0;return Fe.schedule(function(){ee===ke.length?tt.complete():(tt.next(ke[ee++]),tt.closed||this.schedule())})})}(ke,Fe);if((0,Ve.t)(ke))return function ae(ke,Fe){return(0,D.Xf)(ke).pipe((0,$.R)(Fe),(0,H.Q)(Fe))}(ke,Fe);if((0,Ce.D)(ke))return pe(ke,Fe);if((0,Je.T)(ke))return function Z(ke,Fe){return new le.y(tt=>{let ee;return(0,J.f)(tt,Fe,()=>{ee=ke[de.h](),(0,J.f)(tt,Fe,()=>{let Re,ie;try{({value:Re,done:ie}=ee.next())}catch(ge){return void tt.error(ge)}ie?tt.complete():tt.next(Re)},0,!0)}),()=>(0,ve.m)(null==ee?void 0:ee.return)&&ee.return()})}(ke,Fe);if((0,ot.L)(ke))return function ct(ke,Fe){return pe((0,ot.Q)(ke),Fe)}(ke,Fe)}throw(0,Pe.z)(ke)}(ke,Fe):(0,D.Xf)(ke)}},8421:(st,we,k)=>{k.d(we,{Xf:()=>et});var D=k(655),H=k(1144),$=k(8239),fe=k(8306),ae=k(3670),le=k(2206),ce=k(4532),de=k(6495),ve=k(3260),J=k(576),Z=k(7849),pe=k(8822);function et(Ue){if(Ue instanceof fe.y)return Ue;if(null!=Ue){if((0,ae.c)(Ue))return function Ve(Ue){return new fe.y(Ne=>{const ke=Ue[pe.L]();if((0,J.m)(ke.subscribe))return ke.subscribe(Ne);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ue);if((0,H.z)(Ue))return function He(Ue){return new fe.y(Ne=>{for(let ke=0;ke<Ue.length&&!Ne.closed;ke++)Ne.next(Ue[ke]);Ne.complete()})}(Ue);if((0,$.t)(Ue))return function Je(Ue){return new fe.y(Ne=>{Ue.then(ke=>{Ne.closed||(Ne.next(ke),Ne.complete())},ke=>Ne.error(ke)).then(null,Z.h)})}(Ue);if((0,le.D)(Ue))return Pe(Ue);if((0,de.T)(Ue))return function Ce(Ue){return new fe.y(Ne=>{for(const ke of Ue)if(Ne.next(ke),Ne.closed)return;Ne.complete()})}(Ue);if((0,ve.L)(Ue))return function ot(Ue){return Pe((0,ve.Q)(Ue))}(Ue)}throw(0,ce.z)(Ue)}function Pe(Ue){return new fe.y(Ne=>{(function ct(Ue,Ne){var ke,Fe,tt,ee;return(0,D.mG)(this,void 0,void 0,function*(){try{for(ke=(0,D.KL)(Ue);!(Fe=yield ke.next()).done;)if(Ne.next(Fe.value),Ne.closed)return}catch(Re){tt={error:Re}}finally{try{Fe&&!Fe.done&&(ee=ke.return)&&(yield ee.call(ke))}finally{if(tt)throw tt.error}}Ne.complete()})})(Ue,Ne).catch(ke=>Ne.error(ke))})}},6451:(st,we,k)=>{k.d(we,{T:()=>le});var D=k(8189),H=k(8421),$=k(515),fe=k(7669),ae=k(8996);function le(...ce){const de=(0,fe.yG)(ce),ve=(0,fe._6)(ce,1/0),J=ce;return J.length?1===J.length?(0,H.Xf)(J[0]):(0,D.J)(ve)((0,ae.D)(J,de)):$.E}},9646:(st,we,k)=>{k.d(we,{of:()=>$});var D=k(7669),H=k(8996);function $(...fe){const ae=(0,D.yG)(fe);return(0,H.D)(fe,ae)}},5403:(st,we,k)=>{k.d(we,{x:()=>H});var D=k(2961);function H(fe,ae,le,ce,de){return new $(fe,ae,le,ce,de)}class $ extends D.Lv{constructor(ae,le,ce,de,ve,J){super(ae),this.onFinalize=ve,this.shouldUnsubscribe=J,this._next=le?function(Z){try{le(Z)}catch(pe){ae.error(pe)}}:super._next,this._error=de?function(Z){try{de(Z)}catch(pe){ae.error(pe)}finally{this.unsubscribe()}}:super._error,this._complete=ce?function(){try{ce()}catch(Z){ae.error(Z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:le}=this;super.unsubscribe(),!le&&(null===(ae=this.onFinalize)||void 0===ae||ae.call(this))}}}},6590:(st,we,k)=>{k.d(we,{d:()=>$});var D=k(4482),H=k(5403);function $(fe){return(0,D.e)((ae,le)=>{let ce=!1;ae.subscribe((0,H.x)(le,de=>{ce=!0,le.next(de)},()=>{ce||le.next(fe),le.complete()}))})}},9300:(st,we,k)=>{k.d(we,{h:()=>$});var D=k(4482),H=k(5403);function $(fe,ae){return(0,D.e)((le,ce)=>{let de=0;le.subscribe((0,H.x)(ce,ve=>fe.call(ae,ve,de++)&&ce.next(ve)))})}},590:(st,we,k)=>{k.d(we,{P:()=>ce});var D=k(6805),H=k(9300),$=k(5698),fe=k(6590),ae=k(8068),le=k(4671);function ce(de,ve){const J=arguments.length>=2;return Z=>Z.pipe(de?(0,H.h)((pe,et)=>de(pe,et,Z)):le.y,(0,$.q)(1),J?(0,fe.d)(ve):(0,ae.T)(()=>new D.K))}},4004:(st,we,k)=>{k.d(we,{U:()=>$});var D=k(4482),H=k(5403);function $(fe,ae){return(0,D.e)((le,ce)=>{let de=0;le.subscribe((0,H.x)(ce,ve=>{ce.next(fe.call(ae,ve,de++))}))})}},8189:(st,we,k)=>{k.d(we,{J:()=>$});var D=k(5577),H=k(4671);function $(fe=1/0){return(0,D.z)(H.y,fe)}},5577:(st,we,k)=>{k.d(we,{z:()=>de});var D=k(4004),H=k(8421),$=k(4482),fe=k(9672),ae=k(5403),ce=k(576);function de(ve,J,Z=1/0){return(0,ce.m)(J)?de((pe,et)=>(0,D.U)((Ve,He)=>J(pe,Ve,et,He))((0,H.Xf)(ve(pe,et))),Z):("number"==typeof J&&(Z=J),(0,$.e)((pe,et)=>function le(ve,J,Z,pe,et,Ve,He,Je){const Ce=[];let Pe=0,ot=0,ct=!1;const Ue=()=>{ct&&!Ce.length&&!Pe&&J.complete()},Ne=Fe=>Pe<pe?ke(Fe):Ce.push(Fe),ke=Fe=>{Ve&&J.next(Fe),Pe++;let tt=!1;(0,H.Xf)(Z(Fe,ot++)).subscribe((0,ae.x)(J,ee=>{null==et||et(ee),Ve?Ne(ee):J.next(ee)},()=>{tt=!0},void 0,()=>{if(tt)try{for(Pe--;Ce.length&&Pe<pe;){const ee=Ce.shift();He?(0,fe.f)(J,He,()=>ke(ee)):ke(ee)}Ue()}catch(ee){J.error(ee)}}))};return ve.subscribe((0,ae.x)(J,Ne,()=>{ct=!0,Ue()})),()=>{null==Je||Je()}}(pe,et,ve,Z)))}},5363:(st,we,k)=>{k.d(we,{Q:()=>fe});var D=k(9672),H=k(4482),$=k(5403);function fe(ae,le=0){return(0,H.e)((ce,de)=>{ce.subscribe((0,$.x)(de,ve=>(0,D.f)(de,ae,()=>de.next(ve),le),()=>(0,D.f)(de,ae,()=>de.complete(),le),ve=>(0,D.f)(de,ae,()=>de.error(ve),le)))})}},5026:(st,we,k)=>{k.d(we,{R:()=>fe});var D=k(4482),H=k(5403);function $(ae,le,ce,de,ve){return(J,Z)=>{let pe=ce,et=le,Ve=0;J.subscribe((0,H.x)(Z,He=>{const Je=Ve++;et=pe?ae(et,He,Je):(pe=!0,He),de&&Z.next(et)},ve&&(()=>{pe&&Z.next(et),Z.complete()})))}}function fe(ae,le){return(0,D.e)($(ae,le,arguments.length>=2,!0))}},3099:(st,we,k)=>{k.d(we,{B:()=>le});var D=k(8996),H=k(5698),$=k(7579),fe=k(2961),ae=k(4482);function le(de={}){const{connector:ve=(()=>new $.x),resetOnError:J=!0,resetOnComplete:Z=!0,resetOnRefCountZero:pe=!0}=de;return et=>{let Ve=null,He=null,Je=null,Ce=0,Pe=!1,ot=!1;const ct=()=>{null==He||He.unsubscribe(),He=null},Ue=()=>{ct(),Ve=Je=null,Pe=ot=!1},Ne=()=>{const ke=Ve;Ue(),null==ke||ke.unsubscribe()};return(0,ae.e)((ke,Fe)=>{Ce++,!ot&&!Pe&&ct();const tt=Je=null!=Je?Je:ve();Fe.add(()=>{Ce--,0===Ce&&!ot&&!Pe&&(He=ce(Ne,pe))}),tt.subscribe(Fe),Ve||(Ve=new fe.Hp({next:ee=>tt.next(ee),error:ee=>{ot=!0,ct(),He=ce(Ue,J,ee),tt.error(ee)},complete:()=>{Pe=!0,ct(),He=ce(Ue,Z),tt.complete()}}),(0,D.D)(ke).subscribe(Ve))})(et)}}function ce(de,ve,...J){return!0===ve?(de(),null):!1===ve?null:ve(...J).pipe((0,H.q)(1)).subscribe(()=>de())}},8675:(st,we,k)=>{k.d(we,{O:()=>fe});var D=k(7272),H=k(7669),$=k(4482);function fe(...ae){const le=(0,H.yG)(ae);return(0,$.e)((ce,de)=>{(le?(0,D.z)(ae,ce,le):(0,D.z)(ae,ce)).subscribe(de)})}},9468:(st,we,k)=>{k.d(we,{R:()=>H});var D=k(4482);function H($,fe=0){return(0,D.e)((ae,le)=>{le.add($.schedule(()=>ae.subscribe(le),fe))})}},3900:(st,we,k)=>{k.d(we,{w:()=>fe});var D=k(8421),H=k(4482),$=k(5403);function fe(ae,le){return(0,H.e)((ce,de)=>{let ve=null,J=0,Z=!1;const pe=()=>Z&&!ve&&de.complete();ce.subscribe((0,$.x)(de,et=>{null==ve||ve.unsubscribe();let Ve=0;const He=J++;(0,D.Xf)(ae(et,He)).subscribe(ve=(0,$.x)(de,Je=>de.next(le?le(et,Je,He,Ve++):Je),()=>{ve=null,pe()}))},()=>{Z=!0,pe()}))})}},5698:(st,we,k)=>{k.d(we,{q:()=>fe});var D=k(515),H=k(4482),$=k(5403);function fe(ae){return ae<=0?()=>D.E:(0,H.e)((le,ce)=>{let de=0;le.subscribe((0,$.x)(ce,ve=>{++de<=ae&&(ce.next(ve),ae<=de&&ce.complete())}))})}},8505:(st,we,k)=>{k.d(we,{b:()=>ae});var D=k(576),H=k(4482),$=k(5403),fe=k(4671);function ae(le,ce,de){const ve=(0,D.m)(le)||ce||de?{next:le,error:ce,complete:de}:le;return ve?(0,H.e)((J,Z)=>{var pe;null===(pe=ve.subscribe)||void 0===pe||pe.call(ve);let et=!0;J.subscribe((0,$.x)(Z,Ve=>{var He;null===(He=ve.next)||void 0===He||He.call(ve,Ve),Z.next(Ve)},()=>{var Ve;et=!1,null===(Ve=ve.complete)||void 0===Ve||Ve.call(ve),Z.complete()},Ve=>{var He;et=!1,null===(He=ve.error)||void 0===He||He.call(ve,Ve),Z.error(Ve)},()=>{var Ve,He;et&&(null===(Ve=ve.unsubscribe)||void 0===Ve||Ve.call(ve)),null===(He=ve.finalize)||void 0===He||He.call(ve)}))}):fe.y}},8068:(st,we,k)=>{k.d(we,{T:()=>fe});var D=k(6805),H=k(4482),$=k(5403);function fe(le=ae){return(0,H.e)((ce,de)=>{let ve=!1;ce.subscribe((0,$.x)(de,J=>{ve=!0,de.next(J)},()=>ve?de.complete():de.error(le())))})}function ae(){return new D.K}},4408:(st,we,k)=>{k.d(we,{o:()=>ae});var D=k(727);class H extends D.w0{constructor(ce,de){super()}schedule(ce,de=0){return this}}const $={setInterval(le,ce,...de){const{delegate:ve}=$;return(null==ve?void 0:ve.setInterval)?ve.setInterval(le,ce,...de):setInterval(le,ce,...de)},clearInterval(le){const{delegate:ce}=$;return((null==ce?void 0:ce.clearInterval)||clearInterval)(le)},delegate:void 0};var fe=k(8737);class ae extends H{constructor(ce,de){super(ce,de),this.scheduler=ce,this.work=de,this.pending=!1}schedule(ce,de=0){if(this.closed)return this;this.state=ce;const ve=this.id,J=this.scheduler;return null!=ve&&(this.id=this.recycleAsyncId(J,ve,de)),this.pending=!0,this.delay=de,this.id=this.id||this.requestAsyncId(J,this.id,de),this}requestAsyncId(ce,de,ve=0){return $.setInterval(ce.flush.bind(ce,this),ve)}recycleAsyncId(ce,de,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return de;$.clearInterval(de)}execute(ce,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(ce,de);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ce,de){let J,ve=!1;try{this.work(ce)}catch(Z){ve=!0,J=Z||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),J}unsubscribe(){if(!this.closed){const{id:ce,scheduler:de}=this,{actions:ve}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,fe.P)(ve,this),null!=ce&&(this.id=this.recycleAsyncId(de,ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(st,we,k)=>{k.d(we,{v:()=>$});var D=k(6063);class H{constructor(ae,le=H.now){this.schedulerActionCtor=ae,this.now=le}schedule(ae,le=0,ce){return new this.schedulerActionCtor(this,ae).schedule(ce,le)}}H.now=D.l.now;class $ extends H{constructor(ae,le=H.now){super(ae,le),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ae){const{actions:le}=this;if(this._active)return void le.push(ae);let ce;this._active=!0;do{if(ce=ae.execute(ae.state,ae.delay))break}while(ae=le.shift());if(this._active=!1,ce){for(;ae=le.shift();)ae.unsubscribe();throw ce}}}},4986:(st,we,k)=>{k.d(we,{z:()=>$});var D=k(4408);const $=new(k(7565).v)(D.o)},6063:(st,we,k)=>{k.d(we,{l:()=>D});const D={now:()=>(D.delegate||Date).now(),delegate:void 0}},3410:(st,we,k)=>{k.d(we,{z:()=>D});const D={setTimeout(H,$,...fe){const{delegate:ae}=D;return(null==ae?void 0:ae.setTimeout)?ae.setTimeout(H,$,...fe):setTimeout(H,$,...fe)},clearTimeout(H){const{delegate:$}=D;return((null==$?void 0:$.clearTimeout)||clearTimeout)(H)},delegate:void 0}},2202:(st,we,k)=>{k.d(we,{h:()=>H});const H=function D(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(st,we,k)=>{k.d(we,{L:()=>D});const D="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(st,we,k)=>{k.d(we,{K:()=>H});const H=(0,k(3888).d)($=>function(){$(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(st,we,k)=>{k.d(we,{_6:()=>le,jO:()=>fe,yG:()=>ae});var D=k(576);function $(ce){return ce[ce.length-1]}function fe(ce){return(0,D.m)($(ce))?ce.pop():void 0}function ae(ce){return function H(ce){return ce&&(0,D.m)(ce.schedule)}($(ce))?ce.pop():void 0}function le(ce,de){return"number"==typeof $(ce)?ce.pop():de}},4742:(st,we,k)=>{k.d(we,{D:()=>ae});const{isArray:D}=Array,{getPrototypeOf:H,prototype:$,keys:fe}=Object;function ae(ce){if(1===ce.length){const de=ce[0];if(D(de))return{args:de,keys:null};if(function le(ce){return ce&&"object"==typeof ce&&H(ce)===$}(de)){const ve=fe(de);return{args:ve.map(J=>de[J]),keys:ve}}}return{args:ce,keys:null}}},8737:(st,we,k)=>{function D(H,$){if(H){const fe=H.indexOf($);0<=fe&&H.splice(fe,1)}}k.d(we,{P:()=>D})},3888:(st,we,k)=>{function D(H){const fe=H(ae=>{Error.call(ae),ae.stack=(new Error).stack});return fe.prototype=Object.create(Error.prototype),fe.prototype.constructor=fe,fe}k.d(we,{d:()=>D})},1810:(st,we,k)=>{function D(H,$){return H.reduce((fe,ae,le)=>(fe[ae]=$[le],fe),{})}k.d(we,{n:()=>D})},2806:(st,we,k)=>{k.d(we,{x:()=>$,O:()=>fe});var D=k(2416);let H=null;function $(ae){if(D.v.useDeprecatedSynchronousErrorHandling){const le=!H;if(le&&(H={errorThrown:!1,error:null}),ae(),le){const{errorThrown:ce,error:de}=H;if(H=null,ce)throw de}}else ae()}function fe(ae){D.v.useDeprecatedSynchronousErrorHandling&&H&&(H.errorThrown=!0,H.error=ae)}},9672:(st,we,k)=>{function D(H,$,fe,ae=0,le=!1){const ce=$.schedule(function(){fe(),le?H.add(this.schedule(null,ae)):this.unsubscribe()},ae);if(H.add(ce),!le)return ce}k.d(we,{f:()=>D})},4671:(st,we,k)=>{function D(H){return H}k.d(we,{y:()=>D})},1144:(st,we,k)=>{k.d(we,{z:()=>D});const D=H=>H&&"number"==typeof H.length&&"function"!=typeof H},2206:(st,we,k)=>{k.d(we,{D:()=>H});var D=k(576);function H($){return Symbol.asyncIterator&&(0,D.m)(null==$?void 0:$[Symbol.asyncIterator])}},576:(st,we,k)=>{function D(H){return"function"==typeof H}k.d(we,{m:()=>D})},3670:(st,we,k)=>{k.d(we,{c:()=>$});var D=k(8822),H=k(576);function $(fe){return(0,H.m)(fe[D.L])}},6495:(st,we,k)=>{k.d(we,{T:()=>$});var D=k(2202),H=k(576);function $(fe){return(0,H.m)(null==fe?void 0:fe[D.h])}},8239:(st,we,k)=>{k.d(we,{t:()=>H});var D=k(576);function H($){return(0,D.m)(null==$?void 0:$.then)}},3260:(st,we,k)=>{k.d(we,{Q:()=>$,L:()=>fe});var D=k(655),H=k(576);function $(ae){return(0,D.FC)(this,arguments,function*(){const ce=ae.getReader();try{for(;;){const{value:de,done:ve}=yield(0,D.qq)(ce.read());if(ve)return yield(0,D.qq)(void 0);yield yield(0,D.qq)(de)}}finally{ce.releaseLock()}})}function fe(ae){return(0,H.m)(null==ae?void 0:ae.getReader)}},4482:(st,we,k)=>{k.d(we,{A:()=>H,e:()=>$});var D=k(576);function H(fe){return(0,D.m)(null==fe?void 0:fe.lift)}function $(fe){return ae=>{if(H(ae))return ae.lift(function(le){try{return fe(le,this)}catch(ce){this.error(ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(st,we,k)=>{k.d(we,{Z:()=>fe});var D=k(4004);const{isArray:H}=Array;function fe(ae){return(0,D.U)(le=>function $(ae,le){return H(le)?ae(...le):ae(le)}(ae,le))}},7849:(st,we,k)=>{k.d(we,{h:()=>$});var D=k(2416),H=k(3410);function $(fe){H.z.setTimeout(()=>{const{onUnhandledError:ae}=D.v;if(!ae)throw fe;ae(fe)})}},4532:(st,we,k)=>{function D(H){return new TypeError(`You provided ${null!==H&&"object"==typeof H?"an invalid object":`'${H}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(we,{z:()=>D})},655:(st,we,k)=>{function fe(ie,ge){var me={};for(var Se in ie)Object.prototype.hasOwnProperty.call(ie,Se)&&ge.indexOf(Se)<0&&(me[Se]=ie[Se]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var Ie=0;for(Se=Object.getOwnPropertySymbols(ie);Ie<Se.length;Ie++)ge.indexOf(Se[Ie])<0&&Object.prototype.propertyIsEnumerable.call(ie,Se[Ie])&&(me[Se[Ie]]=ie[Se[Ie]])}return me}function de(ie,ge,me,Se){return new(me||(me=Promise))(function(Ye,bt){function hn(rn){try{Qe(Se.next(rn))}catch(Wn){bt(Wn)}}function nn(rn){try{Qe(Se.throw(rn))}catch(Wn){bt(Wn)}}function Qe(rn){rn.done?Ye(rn.value):function Ie(Ye){return Ye instanceof me?Ye:new me(function(bt){bt(Ye)})}(rn.value).then(hn,nn)}Qe((Se=Se.apply(ie,ge||[])).next())})}function Ce(ie){return this instanceof Ce?(this.v=ie,this):new Ce(ie)}function Pe(ie,ge,me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ie,Se=me.apply(ie,ge||[]),Ye=[];return Ie={},bt("next"),bt("throw"),bt("return"),Ie[Symbol.asyncIterator]=function(){return this},Ie;function bt(An){Se[An]&&(Ie[An]=function(pn){return new Promise(function(ar,zt){Ye.push([An,pn,ar,zt])>1||hn(An,pn)})})}function hn(An,pn){try{!function nn(An){An.value instanceof Ce?Promise.resolve(An.value.v).then(Qe,rn):Wn(Ye[0][2],An)}(Se[An](pn))}catch(ar){Wn(Ye[0][3],ar)}}function Qe(An){hn("next",An)}function rn(An){hn("throw",An)}function Wn(An,pn){An(pn),Ye.shift(),Ye.length&&hn(Ye[0][0],Ye[0][1])}}function ct(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,ge=ie[Symbol.asyncIterator];return ge?ge.call(ie):(ie=function pe(ie){var ge="function"==typeof Symbol&&Symbol.iterator,me=ge&&ie[ge],Se=0;if(me)return me.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&Se>=ie.length&&(ie=void 0),{value:ie&&ie[Se++],done:!ie}}};throw new TypeError(ge?"Object is not iterable.":"Symbol.iterator is not defined.")}(ie),me={},Se("next"),Se("throw"),Se("return"),me[Symbol.asyncIterator]=function(){return this},me);function Se(Ye){me[Ye]=ie[Ye]&&function(bt){return new Promise(function(hn,nn){!function Ie(Ye,bt,hn,nn){Promise.resolve(nn).then(function(Qe){Ye({value:Qe,done:hn})},bt)}(hn,nn,(bt=ie[Ye](bt)).done,bt.value)})}}}k.d(we,{_T:()=>fe,mG:()=>de,qq:()=>Ce,FC:()=>Pe,KL:()=>ct})},9808:(st,we,k)=>{k.d(we,{mr:()=>ot,ez:()=>Ga,K0:()=>ce,Do:()=>Ue,V_:()=>J,Ye:()=>Ne,S$:()=>Ce,O5:()=>dr,b0:()=>ct,lw:()=>de,EM:()=>_o,JF:()=>In,PM:()=>kn,w_:()=>le,bD:()=>si,q:()=>$,Mx:()=>dt,HT:()=>ae});var D=k(5e3);let H=null;function $(){return H}function ae(x){H||(H=x)}class le{}const ce=new D.OlP("DocumentToken");let de=(()=>{class x{historyGo(A){throw new Error("Not implemented")}}return x.\u0275fac=function(A){return new(A||x)},x.\u0275prov=D.Yz7({token:x,factory:function(){return function ve(){return(0,D.LFG)(Z)}()},providedIn:"platform"}),x})();const J=new D.OlP("Location Initialized");let Z=(()=>{class x extends de{constructor(A){super(),this._doc=A,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return $().getBaseHref(this._doc)}onPopState(A){const j=$().getGlobalEventTarget(this._doc,"window");return j.addEventListener("popstate",A,!1),()=>j.removeEventListener("popstate",A)}onHashChange(A){const j=$().getGlobalEventTarget(this._doc,"window");return j.addEventListener("hashchange",A,!1),()=>j.removeEventListener("hashchange",A)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(A){this.location.pathname=A}pushState(A,j,te){pe()?this._history.pushState(A,j,te):this.location.hash=te}replaceState(A,j,te){pe()?this._history.replaceState(A,j,te):this.location.hash=te}forward(){this._history.forward()}back(){this._history.back()}historyGo(A=0){this._history.go(A)}getState(){return this._history.state}}return x.\u0275fac=function(A){return new(A||x)(D.LFG(ce))},x.\u0275prov=D.Yz7({token:x,factory:function(){return function et(){return new Z((0,D.LFG)(ce))}()},providedIn:"platform"}),x})();function pe(){return!!window.history.pushState}function Ve(x,L){if(0==x.length)return L;if(0==L.length)return x;let A=0;return x.endsWith("/")&&A++,L.startsWith("/")&&A++,2==A?x+L.substring(1):1==A?x+L:x+"/"+L}function He(x){const L=x.match(/#|\?|$/),A=L&&L.index||x.length;return x.slice(0,A-("/"===x[A-1]?1:0))+x.slice(A)}function Je(x){return x&&"?"!==x[0]?"?"+x:x}let Ce=(()=>{class x{historyGo(A){throw new Error("Not implemented")}}return x.\u0275fac=function(A){return new(A||x)},x.\u0275prov=D.Yz7({token:x,factory:function(){return function Pe(x){const L=(0,D.LFG)(ce).location;return new ct((0,D.LFG)(de),L&&L.origin||"")}()},providedIn:"root"}),x})();const ot=new D.OlP("appBaseHref");let ct=(()=>{class x extends Ce{constructor(A,j){if(super(),this._platformLocation=A,this._removeListenerFns=[],null==j&&(j=this._platformLocation.getBaseHrefFromDOM()),null==j)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=j}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(A){this._removeListenerFns.push(this._platformLocation.onPopState(A),this._platformLocation.onHashChange(A))}getBaseHref(){return this._baseHref}prepareExternalUrl(A){return Ve(this._baseHref,A)}path(A=!1){const j=this._platformLocation.pathname+Je(this._platformLocation.search),te=this._platformLocation.hash;return te&&A?`${j}${te}`:j}pushState(A,j,te,Te){const je=this.prepareExternalUrl(te+Je(Te));this._platformLocation.pushState(A,j,je)}replaceState(A,j,te,Te){const je=this.prepareExternalUrl(te+Je(Te));this._platformLocation.replaceState(A,j,je)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(A=0){var j,te;null===(te=(j=this._platformLocation).historyGo)||void 0===te||te.call(j,A)}}return x.\u0275fac=function(A){return new(A||x)(D.LFG(de),D.LFG(ot,8))},x.\u0275prov=D.Yz7({token:x,factory:x.\u0275fac}),x})(),Ue=(()=>{class x extends Ce{constructor(A,j){super(),this._platformLocation=A,this._baseHref="",this._removeListenerFns=[],null!=j&&(this._baseHref=j)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(A){this._removeListenerFns.push(this._platformLocation.onPopState(A),this._platformLocation.onHashChange(A))}getBaseHref(){return this._baseHref}path(A=!1){let j=this._platformLocation.hash;return null==j&&(j="#"),j.length>0?j.substring(1):j}prepareExternalUrl(A){const j=Ve(this._baseHref,A);return j.length>0?"#"+j:j}pushState(A,j,te,Te){let je=this.prepareExternalUrl(te+Je(Te));0==je.length&&(je=this._platformLocation.pathname),this._platformLocation.pushState(A,j,je)}replaceState(A,j,te,Te){let je=this.prepareExternalUrl(te+Je(Te));0==je.length&&(je=this._platformLocation.pathname),this._platformLocation.replaceState(A,j,je)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(A=0){var j,te;null===(te=(j=this._platformLocation).historyGo)||void 0===te||te.call(j,A)}}return x.\u0275fac=function(A){return new(A||x)(D.LFG(de),D.LFG(ot,8))},x.\u0275prov=D.Yz7({token:x,factory:x.\u0275fac}),x})(),Ne=(()=>{class x{constructor(A,j){this._subject=new D.vpe,this._urlChangeListeners=[],this._platformStrategy=A;const te=this._platformStrategy.getBaseHref();this._platformLocation=j,this._baseHref=He(tt(te)),this._platformStrategy.onPopState(Te=>{this._subject.emit({url:this.path(!0),pop:!0,state:Te.state,type:Te.type})})}path(A=!1){return this.normalize(this._platformStrategy.path(A))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(A,j=""){return this.path()==this.normalize(A+Je(j))}normalize(A){return x.stripTrailingSlash(function Fe(x,L){return x&&L.startsWith(x)?L.substring(x.length):L}(this._baseHref,tt(A)))}prepareExternalUrl(A){return A&&"/"!==A[0]&&(A="/"+A),this._platformStrategy.prepareExternalUrl(A)}go(A,j="",te=null){this._platformStrategy.pushState(te,"",A,j),this._notifyUrlChangeListeners(this.prepareExternalUrl(A+Je(j)),te)}replaceState(A,j="",te=null){this._platformStrategy.replaceState(te,"",A,j),this._notifyUrlChangeListeners(this.prepareExternalUrl(A+Je(j)),te)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(A=0){var j,te;null===(te=(j=this._platformStrategy).historyGo)||void 0===te||te.call(j,A)}onUrlChange(A){this._urlChangeListeners.push(A),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(j=>{this._notifyUrlChangeListeners(j.url,j.state)}))}_notifyUrlChangeListeners(A="",j){this._urlChangeListeners.forEach(te=>te(A,j))}subscribe(A,j,te){return this._subject.subscribe({next:A,error:j,complete:te})}}return x.normalizeQueryParams=Je,x.joinWithSlash=Ve,x.stripTrailingSlash=He,x.\u0275fac=function(A){return new(A||x)(D.LFG(Ce),D.LFG(de))},x.\u0275prov=D.Yz7({token:x,factory:function(){return function ke(){return new Ne((0,D.LFG)(Ce),(0,D.LFG)(de))}()},providedIn:"root"}),x})();function tt(x){return x.replace(/\/index.html$/,"")}function dt(x,L){L=encodeURIComponent(L);for(const A of x.split(";")){const j=A.indexOf("="),[te,Te]=-1==j?[A,""]:[A.slice(0,j),A.slice(j+1)];if(te.trim()===L)return decodeURIComponent(Te)}return null}let dr=(()=>{class x{constructor(A,j){this._viewContainer=A,this._context=new Tn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=j}set ngIf(A){this._context.$implicit=this._context.ngIf=A,this._updateView()}set ngIfThen(A){Ho("ngIfThen",A),this._thenTemplateRef=A,this._thenViewRef=null,this._updateView()}set ngIfElse(A){Ho("ngIfElse",A),this._elseTemplateRef=A,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(A,j){return!0}}return x.\u0275fac=function(A){return new(A||x)(D.Y36(D.s_b),D.Y36(D.Rgc))},x.\u0275dir=D.lG2({type:x,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),x})();class Tn{constructor(){this.$implicit=null,this.ngIf=null}}function Ho(x,L){if(L&&!L.createEmbeddedView)throw new Error(`${x} must be a TemplateRef, but received '${(0,D.AaK)(L)}'.`)}let Ga=(()=>{class x{}return x.\u0275fac=function(A){return new(A||x)},x.\u0275mod=D.oAB({type:x}),x.\u0275inj=D.cJS({}),x})();const si="browser";function kn(x){return"server"===x}let _o=(()=>{class x{}return x.\u0275prov=(0,D.Yz7)({token:x,providedIn:"root",factory:()=>new zs((0,D.LFG)(ce),window)}),x})();class zs{constructor(L,A){this.document=L,this.window=A,this.offset=()=>[0,0]}setOffset(L){this.offset=Array.isArray(L)?()=>L:L}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(L){this.supportsScrolling()&&this.window.scrollTo(L[0],L[1])}scrollToAnchor(L){if(!this.supportsScrolling())return;const A=function zr(x,L){const A=x.getElementById(L)||x.getElementsByName(L)[0];if(A)return A;if("function"==typeof x.createTreeWalker&&x.body&&(x.body.createShadowRoot||x.body.attachShadow)){const j=x.createTreeWalker(x.body,NodeFilter.SHOW_ELEMENT);let te=j.currentNode;for(;te;){const Te=te.shadowRoot;if(Te){const je=Te.getElementById(L)||Te.querySelector(`[name="${L}"]`);if(je)return je}te=j.nextNode()}}return null}(this.document,L);A&&(this.scrollToElement(A),A.focus())}setHistoryScrollRestoration(L){if(this.supportScrollRestoration()){const A=this.window.history;A&&A.scrollRestoration&&(A.scrollRestoration=L)}}scrollToElement(L){const A=L.getBoundingClientRect(),j=A.left+this.window.pageXOffset,te=A.top+this.window.pageYOffset,Te=this.offset();this.window.scrollTo(j-Te[0],te-Te[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const L=Cs(this.window.history)||Cs(Object.getPrototypeOf(this.window.history));return!(!L||!L.writable&&!L.set)}catch(L){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(L){return!1}}}function Cs(x){return Object.getOwnPropertyDescriptor(x,"scrollRestoration")}class In{}},5e3:(st,we,k)=>{k.d(we,{deG:()=>Td,tb:()=>E0,AFp:()=>ty,ip1:()=>Xm,CZH:()=>ey,hGG:()=>ND,z2F:()=>Lw,sBO:()=>yD,Sil:()=>t,_Vd:()=>hp,EJc:()=>Fw,SBq:()=>Ed,qLn:()=>el,vpe:()=>ga,tBr:()=>Mn,XFs:()=>Rt,OlP:()=>Xt,zs3:()=>Vo,ZZ4:()=>Hw,aQg:()=>Gw,soG:()=>sy,YKP:()=>U_,h0i:()=>Al,PXZ:()=>cD,R0b:()=>S,FiY:()=>mi,Lbi:()=>_0,g9A:()=>iy,Qsj:()=>Mm,FYo:()=>xm,JOm:()=>O,tp0:()=>gt,Rgc:()=>Id,dDg:()=>En,q4F:()=>k_,GfV:()=>iw,s_b:()=>Ip,ifc:()=>pt,eFA:()=>BI,G48:()=>mD,Gpc:()=>Z,X6Q:()=>gD,_c5:()=>OD,VLi:()=>vn,c2e:()=>I0,zSh:()=>eh,wAp:()=>Gt,vHH:()=>He,cg1:()=>wl,kL8:()=>cp,dqk:()=>an,sIi:()=>gl,CqO:()=>gu,QGY:()=>$g,F4k:()=>Yf,RDi:()=>Cs,AaK:()=>de,qOj:()=>Ig,TTD:()=>ii,_Bn:()=>M_,xp6:()=>Ey,uIk:()=>Bf,Gre:()=>cm,ekj:()=>sp,Suo:()=>t0,Xpm:()=>St,lG2:()=>Xn,Yz7:()=>pn,cJS:()=>zt,oAB:()=>Lr,Yjl:()=>qt,Y36:()=>fd,_UZ:()=>Ug,qZA:()=>pd,TgZ:()=>Zf,n5z:()=>Ti,LFG:()=>nt,$8M:()=>xo,$Z:()=>xv,NdJ:()=>lh,CRH:()=>n0,kcU:()=>Za,O4$:()=>Ml,Q6J:()=>uh,iGM:()=>e0,LSH:()=>ca,YNc:()=>yv,_uU:()=>sm,Oqu:()=>ap,hij:()=>Tc,AsE:()=>om});var D=k(7579),H=k(727),$=k(8306),fe=k(6451),ae=k(3099);function le(r){for(let i in r)if(r[i]===le)return i;throw Error("Could not find renamed property on target object.")}function ce(r,i){for(const o in i)i.hasOwnProperty(o)&&!r.hasOwnProperty(o)&&(r[o]=i[o])}function de(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(de).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const i=r.toString();if(null==i)return""+i;const o=i.indexOf("\n");return-1===o?i:i.substring(0,o)}function ve(r,i){return null==r||""===r?null===i?"":i:null==i||""===i?r:r+" "+i}const J=le({__forward_ref__:le});function Z(r){return r.__forward_ref__=Z,r.toString=function(){return de(this())},r}function pe(r){return et(r)?r():r}function et(r){return"function"==typeof r&&r.hasOwnProperty(J)&&r.__forward_ref__===Z}class He extends Error{constructor(i,o){super(function Je(r,i){return`NG0${Math.abs(r)}${i?": "+i:""}`}(i,o)),this.code=i}}function Ce(r){return"string"==typeof r?r:null==r?"":String(r)}function Pe(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():Ce(r)}function Ne(r,i){const o=i?` in ${i}`:"";throw new He(-201,`No provider for ${Pe(r)} found${o}`)}function nn(r,i){null==r&&function Qe(r,i,o,u){throw new Error(`ASSERTION ERROR: ${r}`+(null==u?"":` [Expected=> ${o} ${u} ${i} <=Actual]`))}(i,r,null,"!=")}function pn(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function zt(r){return{providers:r.providers||[],imports:r.imports||[]}}function Yt(r){return fr(r,_i)||fr(r,li)}function fr(r,i){return r.hasOwnProperty(i)?r[i]:null}function pr(r){return r&&(r.hasOwnProperty(us)||r.hasOwnProperty(Mi))?r[us]:null}const _i=le({\u0275prov:le}),us=le({\u0275inj:le}),li=le({ngInjectableDef:le}),Mi=le({ngInjectorDef:le});var Rt=(()=>((Rt=Rt||{})[Rt.Default=0]="Default",Rt[Rt.Host=1]="Host",Rt[Rt.Self=2]="Self",Rt[Rt.SkipSelf=4]="SkipSelf",Rt[Rt.Optional=8]="Optional",Rt))();let Ei;function Kn(r){const i=Ei;return Ei=r,i}function cs(r,i,o){const u=Yt(r);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&Rt.Optional?null:void 0!==i?i:void Ne(de(r),"Injector")}function Sr(r){return{toString:r}.toString()}var gr=(()=>((gr=gr||{})[gr.OnPush=0]="OnPush",gr[gr.Default=1]="Default",gr))(),pt=(()=>{return(r=pt||(pt={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",pt;var r})();const wt="undefined"!=typeof globalThis&&globalThis,Tt="undefined"!=typeof window&&window,Ir="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,an=wt||"undefined"!=typeof global&&global||Tt||Ir,Vn={},q=[],re=le({\u0275cmp:le}),oe=le({\u0275dir:le}),Be=le({\u0275pipe:le}),Y=le({\u0275mod:le}),he=le({\u0275fac:le}),ze=le({__NG_ELEMENT_ID__:le});let yt=0;function St(r){return Sr(()=>{const o={},u={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===gr.OnPush,directiveDefs:null,pipeDefs:null,selectors:r.selectors||q,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||pt.Emulated,id:"c",styles:r.styles||q,_:null,setInput:null,schemas:r.schemas||null,tView:null},c=r.directives,h=r.features,m=r.pipes;return u.id+=yt++,u.inputs=Wi(r.inputs,o),u.outputs=Wi(r.outputs),h&&h.forEach(w=>w(u)),u.directiveDefs=c?()=>("function"==typeof c?c():c).map(Bn):null,u.pipeDefs=m?()=>("function"==typeof m?m():m).map(Ut):null,u})}function Bn(r){return Nn(r)||function ur(r){return r[oe]||null}(r)}function Ut(r){return function qn(r){return r[Be]||null}(r)}const Dr={};function Lr(r){return Sr(()=>{const i={type:r.type,bootstrap:r.bootstrap||q,declarations:r.declarations||q,imports:r.imports||q,exports:r.exports||q,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null};return null!=r.id&&(Dr[r.id]=r.type),i})}function Wi(r,i){if(null==r)return Vn;const o={};for(const u in r)if(r.hasOwnProperty(u)){let c=r[u],h=c;Array.isArray(c)&&(h=c[1],c=c[0]),o[c]=u,i&&(i[c]=h)}return o}const Xn=St;function qt(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,onDestroy:r.type.prototype.ngOnDestroy||null}}function Nn(r){return r[re]||null}function sn(r,i){const o=r[Y]||null;if(!o&&!0===i)throw new Error(`Type ${de(r)} does not have '\u0275mod' property.`);return o}function _n(r){return Array.isArray(r)&&"object"==typeof r[1]}function ri(r){return Array.isArray(r)&&!0===r[1]}function jn(r){return 0!=(8&r.flags)}function Pi(r){return 2==(2&r.flags)}function fi(r){return 1==(1&r.flags)}function wi(r){return null!==r.template}function $s(r){return 0!=(512&r[2])}function xr(r,i){return r.hasOwnProperty(he)?r[he]:null}class ds{constructor(i,o,u){this.previousValue=i,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function ii(){return hs}function hs(r){return r.type.prototype.ngOnChanges&&(r.setInput=Ui),Gs}function Gs(){const r=si(this),i=null==r?void 0:r.current;if(i){const o=r.previous;if(o===Vn)r.previous=i;else for(let u in i)o[u]=i[u];r.current=null,this.ngOnChanges(i)}}function Ui(r,i,o,u){const c=si(r)||function fs(r,i){return r[Ga]=i}(r,{previous:Vn,current:null}),h=c.current||(c.current={}),m=c.previous,w=this.declaredInputs[o],b=m[w];h[w]=new ds(b&&b.currentValue,i,m===Vn),r[u]=i}ii.ngInherit=!0;const Ga="__ngSimpleChanges__";function si(r){return r[Ga]||null}let zs;function Cs(r){zs=r}function In(r){return!!r.listen}const x={createRenderer:(r,i)=>function zr(){return void 0!==zs?zs:"undefined"!=typeof document?document:void 0}()};function A(r){for(;Array.isArray(r);)r=r[0];return r}function Te(r,i){return A(i[r])}function je(r,i){return A(i[r.index])}function Vt(r,i){return r.data[i]}function $t(r,i){const o=i[r];return _n(o)?o:o[0]}function Qt(r){return 4==(4&r[2])}function Fn(r){return 128==(128&r[2])}function Kt(r,i){return null==i?null:r[i]}function br(r){r[18]=0}function Wr(r,i){r[5]+=i;let o=r,u=r[3];for(;null!==u&&(1===i&&1===o[5]||-1===i&&0===o[5]);)u[5]+=i,o=u,u=u[3]}const At={lFrame:wu(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ss(){return At.bindingsEnabled}function $e(){return At.lFrame.lView}function en(){return At.lFrame.tView}function On(){let r=Zo();for(;null!==r&&64===r.type;)r=r.parent;return r}function Zo(){return At.lFrame.currentTNode}function Bi(r,i){const o=At.lFrame;o.currentTNode=r,o.isParent=i}function Ea(){return At.lFrame.isParent}function Yo(){return At.isInCheckNoChangesMode}function wo(r){At.isInCheckNoChangesMode=r}function Ks(){return At.lFrame.bindingIndex++}function Yi(r){const i=At.lFrame,o=i.bindingIndex;return i.bindingIndex=i.bindingIndex+r,o}function Qo(r,i){const o=At.lFrame;o.bindingIndex=o.bindingRootIndex=r,xs(i)}function xs(r){At.lFrame.currentDirectiveIndex=r}function Cr(){return At.lFrame.currentQueryIndex}function Da(r){At.lFrame.currentQueryIndex=r}function Xo(r){const i=r[1];return 2===i.type?i.declTNode:1===i.type?r[6]:null}function qs(r,i,o){if(o&Rt.SkipSelf){let c=i,h=r;for(;!(c=c.parent,null!==c||o&Rt.Host||(c=Xo(h),null===c||(h=h[15],10&c.type))););if(null===c)return!1;i=c,r=h}const u=At.lFrame=Ys();return u.currentTNode=i,u.lView=r,!0}function Zs(r){const i=Ys(),o=r[1];At.lFrame=i,i.currentTNode=o.firstChild,i.lView=r,i.tView=o,i.contextLView=r,i.bindingIndex=o.bindingStartIndex,i.inI18n=!1}function Ys(){const r=At.lFrame,i=null===r?null:r.child;return null===i?wu(r):i}function wu(r){const i={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=i),i}function Qs(){const r=At.lFrame;return At.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const Io=Qs;function Do(){const r=Qs();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function ir(){return At.lFrame.selectedIndex}function ji(r){At.lFrame.selectedIndex=r}function hr(){const r=At.lFrame;return Vt(r.tView,r.selectedIndex)}function Ml(){At.lFrame.currentNamespace="svg"}function Za(){!function Pc(){At.lFrame.currentNamespace=null}()}function Qa(r,i){for(let o=i.directiveStart,u=i.directiveEnd;o<u;o++){const h=r.data[o].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:w,ngAfterViewInit:b,ngAfterViewChecked:N,ngOnDestroy:F}=h;m&&(r.contentHooks||(r.contentHooks=[])).push(-o,m),w&&((r.contentHooks||(r.contentHooks=[])).push(o,w),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(o,w)),b&&(r.viewHooks||(r.viewHooks=[])).push(-o,b),N&&((r.viewHooks||(r.viewHooks=[])).push(o,N),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(o,N)),null!=F&&(r.destroyHooks||(r.destroyHooks=[])).push(o,F)}}function bo(r,i,o){fn(r,i,3,o)}function pi(r,i,o,u){(3&r[2])===o&&fn(r,i,o,u)}function To(r,i){let o=r[2];(3&o)===i&&(o&=2047,o+=1,r[2]=o)}function fn(r,i,o,u){const h=null!=u?u:-1,m=i.length-1;let w=0;for(let b=void 0!==u?65535&r[18]:0;b<m;b++)if("number"==typeof i[b+1]){if(w=i[b],null!=u&&w>=u)break}else i[b]<0&&(r[18]+=65536),(w<h||-1==h)&&(na(r,o,i,b),r[18]=(4294901760&r[18])+b+2),b++}function na(r,i,o,u){const c=o[u]<0,h=o[u+1],w=r[c?-o[u]:o[u]];if(c){if(r[2]>>11<r[18]>>16&&(3&r[2])===i){r[2]+=2048;try{h.call(w)}finally{}}}else try{h.call(w)}finally{}}class Ms{constructor(i,o,u){this.factory=i,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function $n(r,i,o){const u=In(r);let c=0;for(;c<o.length;){const h=o[c];if("number"==typeof h){if(0!==h)break;c++;const m=o[c++],w=o[c++],b=o[c++];u?r.setAttribute(i,w,b,m):i.setAttributeNS(m,w,b)}else{const m=h,w=o[++c];Qi(m)?u&&r.setProperty(i,m,w):u?r.setAttribute(i,m,w):i.setAttribute(m,w),c++}}return c}function So(r){return 3===r||4===r||6===r}function Qi(r){return 64===r.charCodeAt(0)}function ai(r,i){if(null!==i&&0!==i.length)if(null===r||0===r.length)r=i.slice();else{let o=-1;for(let u=0;u<i.length;u++){const c=i[u];"number"==typeof c?o=c:0===o||Ja(r,o,c,null,-1===o||2===o?i[++u]:null)}}return r}function Ja(r,i,o,u,c){let h=0,m=r.length;if(-1===i)m=-1;else for(;h<r.length;){const w=r[h++];if("number"==typeof w){if(w===i){m=-1;break}if(w>i){m=h-1;break}}}for(;h<r.length;){const w=r[h];if("number"==typeof w)break;if(w===o){if(null===u)return void(null!==c&&(r[h+1]=c));if(u===r[h+1])return void(r[h+2]=c)}h++,null!==u&&h++,null!==c&&h++}-1!==m&&(r.splice(m,0,i),h=m+1),r.splice(h++,0,o),null!==u&&r.splice(h++,0,u),null!==c&&r.splice(h++,0,c)}function Hn(r){return-1!==r}function Di(r){return 32767&r}function Gn(r,i){let o=function Du(r){return r>>16}(r),u=i;for(;o>0;)u=u[15],o--;return u}let Os=!0;function Hi(r){const i=Os;return Os=r,i}let bu=0;function Ao(r,i){const o=bi(r,i);if(-1!==o)return o;const u=i[1];u.firstCreatePass&&(r.injectorIndex=i.length,Ji(u.data,r),Ji(i,null),Ji(u.blueprint,null));const c=Js(r,i),h=r.injectorIndex;if(Hn(c)){const m=Di(c),w=Gn(c,i),b=w[1].data;for(let N=0;N<8;N++)i[h+N]=w[m+N]|b[m+N]}return i[h+8]=c,h}function Ji(r,i){r.push(0,0,0,0,0,0,0,0,i)}function bi(r,i){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===i[r.injectorIndex+8]?-1:r.injectorIndex}function Js(r,i){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let o=0,u=null,c=i;for(;null!==c;){const h=c[1],m=h.type;if(u=2===m?h.declTNode:1===m?c[6]:null,null===u)return-1;if(o++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function I(r,i,o){!function Ku(r,i,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(ze)&&(u=o[ze]),null==u&&(u=o[ze]=bu++);const c=255&u;i.data[r+(c>>5)]|=1<<c}(r,i,o)}function y(r,i,o){if(o&Rt.Optional)return r;Ne(i,"NodeInjector")}function C(r,i,o,u){if(o&Rt.Optional&&void 0===u&&(u=null),0==(o&(Rt.Self|Rt.Host))){const c=r[9],h=Kn(void 0);try{return c?c.get(i,u,o&Rt.Optional):cs(i,u,o&Rt.Optional)}finally{Kn(h)}}return y(u,i,o)}function R(r,i,o,u=Rt.Default,c){if(null!==r){const h=function Jt(r){if("string"==typeof r)return r.charCodeAt(0)||0;const i=r.hasOwnProperty(ze)?r[ze]:void 0;return"number"==typeof i?i>=0?255&i:W:i}(o);if("function"==typeof h){if(!qs(i,r,u))return u&Rt.Host?y(c,o,u):C(i,o,u,c);try{const m=h(u);if(null!=m||u&Rt.Optional)return m;Ne(o)}finally{Io()}}else if("number"==typeof h){let m=null,w=bi(r,i),b=-1,N=u&Rt.Host?i[16][6]:null;for((-1===w||u&Rt.SkipSelf)&&(b=-1===w?Js(r,i):i[w+8],-1!==b&&mn(u,!1)?(m=i[1],w=Di(b),i=Gn(b,i)):w=-1);-1!==w;){const F=i[1];if(vt(h,w,F.data)){const z=X(w,i,o,m,u,N);if(z!==V)return z}b=i[w+8],-1!==b&&mn(u,i[1].data[w+8]===N)&&vt(h,w,i)?(m=F,w=Di(b),i=Gn(b,i)):w=-1}}}return C(i,o,u,c)}const V={};function W(){return new on(On(),$e())}function X(r,i,o,u,c,h){const m=i[1],w=m.data[r+8],F=xe(w,m,o,null==u?Pi(w)&&Os:u!=m&&0!=(3&w.type),c&Rt.Host&&h===w);return null!==F?lt(i,m,F,w):V}function xe(r,i,o,u,c){const h=r.providerIndexes,m=i.data,w=1048575&h,b=r.directiveStart,F=h>>20,ne=c?w+F:r.directiveEnd;for(let ye=u?w:w+F;ye<ne;ye++){const Le=m[ye];if(ye<b&&o===Le||ye>=b&&Le.type===o)return ye}if(c){const ye=m[b];if(ye&&wi(ye)&&ye.type===o)return b}return null}function lt(r,i,o,u){let c=r[o];const h=i.data;if(function ba(r){return r instanceof Ms}(c)){const m=c;m.resolving&&function ot(r,i){const o=i?`. Dependency path: ${i.join(" > ")} > ${r}`:"";throw new He(-200,`Circular dependency in DI detected for ${r}${o}`)}(Pe(h[o]));const w=Hi(m.canSeeViewProviders);m.resolving=!0;const b=m.injectImpl?Kn(m.injectImpl):null;qs(r,u,Rt.Default);try{c=r[o]=m.factory(void 0,h,r,u),i.firstCreatePass&&o>=u.directiveStart&&function kc(r,i,o){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:h}=i.type.prototype;if(u){const m=hs(i);(o.preOrderHooks||(o.preOrderHooks=[])).push(r,m),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,m)}c&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-r,c),h&&((o.preOrderHooks||(o.preOrderHooks=[])).push(r,h),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,h))}(o,h[o],i)}finally{null!==b&&Kn(b),Hi(w),m.resolving=!1,Io()}}return c}function vt(r,i,o){return!!(o[i+(r>>5)]&1<<r)}function mn(r,i){return!(r&Rt.Self||r&Rt.Host&&i)}class on{constructor(i,o){this._tNode=i,this._lView=o}get(i,o,u){return R(this._tNode,this._lView,i,u,o)}}function Ti(r){return Sr(()=>{const i=r.prototype.constructor,o=i[he]||Xi(i),u=Object.prototype;let c=Object.getPrototypeOf(r.prototype).constructor;for(;c&&c!==u;){const h=c[he]||Xi(c);if(h&&h!==o)return h;c=Object.getPrototypeOf(c)}return h=>new h})}function Xi(r){return et(r)?()=>{const i=Xi(pe(r));return i&&i()}:xr(r)}function xo(r){return function _(r,i){if("class"===i)return r.classes;if("style"===i)return r.styles;const o=r.attrs;if(o){const u=o.length;let c=0;for(;c<u;){const h=o[c];if(So(h))break;if(0===h)c+=2;else if("number"==typeof h)for(c++;c<u&&"string"==typeof o[c];)c++;else{if(h===i)return o[c+1];c+=2}}}return null}(On(),r)}const Vr="__parameters__";function Xs(r,i,o){return Sr(()=>{const u=function eu(r){return function(...o){if(r){const u=r(...o);for(const c in u)this[c]=u[c]}}}(i);function c(...h){if(this instanceof c)return u.apply(this,h),this;const m=new c(...h);return w.annotation=m,w;function w(b,N,F){const z=b.hasOwnProperty(Vr)?b[Vr]:Object.defineProperty(b,Vr,{value:[]})[Vr];for(;z.length<=F;)z.push(null);return(z[F]=z[F]||[]).push(m),b}}return o&&(c.prototype=Object.create(o.prototype)),c.prototype.ngMetadataName=r,c.annotationCls=c,c})}class Xt{constructor(i,o){this._desc=i,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=pn({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Td=new Xt("AnalyzeForEntryComponents");function gi(r,i){void 0===i&&(i=r);for(let o=0;o<r.length;o++){let u=r[o];Array.isArray(u)?(i===r&&(i=r.slice(0,o)),gi(u,i)):i!==r&&i.push(u)}return i}function ts(r,i){r.forEach(o=>Array.isArray(o)?ts(o,i):i(o))}function Ca(r,i,o){i>=r.length?r.push(o):r.splice(i,0,o)}function Mo(r,i){return i>=r.length-1?r.pop():r.splice(i,1)[0]}function ns(r,i,o){let u=oa(r,i);return u>=0?r[1|u]=o:(u=~u,function Ro(r,i,o,u){let c=r.length;if(c==i)r.push(o,u);else if(1===c)r.push(u,r[0]),r[0]=o;else{for(c--,r.push(r[c-1],r[c]);c>i;)r[c]=r[c-2],c--;r[i]=o,r[i+1]=u}}(r,u,i,o)),u}function ru(r,i){const o=oa(r,i);if(o>=0)return r[1|o]}function oa(r,i){return function Au(r,i,o){let u=0,c=r.length>>o;for(;c!==u;){const h=u+(c-u>>1),m=r[h<<o];if(i===m)return h<<o;m>i?c=h:u=h+1}return~(c<<o)}(r,i,1)}const Sa={},iu="__NG_DI_FLAG__",Fs="ngTempTokenPath",T=/\n/gm,U="__source",K=le({provide:String,useValue:le});let ue;function _e(r){const i=ue;return ue=r,i}function Ge(r,i=Rt.Default){if(void 0===ue)throw new He(203,"");return null===ue?cs(r,void 0,i):ue.get(r,i&Rt.Optional?null:void 0,i)}function nt(r,i=Rt.Default){return(function Jn(){return Ei}()||Ge)(pe(r),i)}const xt=nt;function cn(r){const i=[];for(let o=0;o<r.length;o++){const u=pe(r[o]);if(Array.isArray(u)){if(0===u.length)throw new He(900,"");let c,h=Rt.Default;for(let m=0;m<u.length;m++){const w=u[m],b=ui(w);"number"==typeof b?-1===b?c=w.token:h|=b:c=w}i.push(nt(c,h))}else i.push(nt(u))}return i}function Ct(r,i){return r[iu]=i,r.prototype[iu]=i,r}function ui(r){return r[iu]}const Mn=Ct(Xs("Inject",r=>({token:r})),-1),mi=Ct(Xs("Optional"),8),gt=Ct(Xs("SkipSelf"),4);class Fl{constructor(i){this.changingThisBreaksApplicationSecurity=i}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Kr(r){return r instanceof Fl?r.changingThisBreaksApplicationSecurity:r}const Up=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Vp=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Zn=(()=>((Zn=Zn||{})[Zn.NONE=0]="NONE",Zn[Zn.HTML=1]="HTML",Zn[Zn.STYLE=2]="STYLE",Zn[Zn.SCRIPT=3]="SCRIPT",Zn[Zn.URL=4]="URL",Zn[Zn.RESOURCE_URL=5]="RESOURCE_URL",Zn))();function ca(r){const i=function ko(){const r=$e();return r&&r[12]}();return i?i.sanitize(Zn.URL,r)||"":function Aa(r,i){const o=function Zh(r){return r instanceof Fl&&r.getTypeName()||null}(r);if(null!=o&&o!==i){if("ResourceURL"===o&&"URL"===i)return!0;throw new Error(`Required a safe ${i}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===i}(r,"URL")?Kr(r):function so(r){return(r=String(r)).match(Up)||r.match(Vp)?r:"unsafe:"+r}(Ce(r))}const Ul="__ngContext__";function jr(r,i){r[Ul]=i}function Qc(r){const i=function Fo(r){return r[Ul]||null}(r);return i?Array.isArray(i)?i:i.lView:null}function Ls(r){return r.ngOriginalError}function ef(r,...i){r.error(...i)}class el{constructor(){this._console=console}handleError(i){const o=this._findOriginalError(i),u=function Xc(r){return r&&r.ngErrorLogger||ef}(i);u(this._console,"ERROR",i),o&&u(this._console,"ORIGINAL ERROR",o)}_findOriginalError(i){let o=i&&Ls(i);for(;o&&Ls(o);)o=Ls(o);return o||null}}const tc=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(an))();function Lo(r){return r instanceof Function?r():r}var O=(()=>((O=O||{})[O.Important=1]="Important",O[O.DashCase=2]="DashCase",O))();function se(r,i){return undefined(r,i)}function mt(r){const i=r[3];return ri(i)?i[3]:i}function Or(r){return nl(r[13])}function ws(r){return nl(r[4])}function nl(r){for(;null!==r&&!ri(r);)r=r[4];return r}function Pa(r,i,o,u,c){if(null!=u){let h,m=!1;ri(u)?h=u:_n(u)&&(m=!0,u=u[0]);const w=A(u);0===r&&null!==o?null==c?Hp(i,o,w):du(i,o,w,c||null,!0):1===r&&null!==o?du(i,o,w,c||null,!0):2===r?function Cn(r,i,o){const u=df(r,i);u&&function zd(r,i,o,u){In(r)?r.removeChild(i,o,u):i.removeChild(o)}(r,u,i,o)}(i,w,m):3===r&&i.destroyNode(w),null!=h&&function ao(r,i,o,u,c){const h=o[7];h!==A(o)&&Pa(i,r,u,h,c);for(let w=10;w<o.length;w++){const b=o[w];Hl(b[1],b,r,i,u,h)}}(i,r,h,o,c)}}function jl(r,i,o){if(In(r))return r.createElement(i,o);{const u=null!==o?function _o(r){const i=r.toLowerCase();return"svg"===i?"http://www.w3.org/2000/svg":"math"===i?"http://www.w3.org/1998/MathML/":null}(o):null;return null===u?r.createElement(i):r.createElementNS(u,i)}}function il(r,i){const o=r[9],u=o.indexOf(i),c=i[3];1024&i[2]&&(i[2]&=-1025,Wr(c,-1)),o.splice(u,1)}function lf(r,i){if(r.length<=10)return;const o=10+i,u=r[o];if(u){const c=u[17];null!==c&&c!==r&&il(c,u),i>0&&(r[o-1][4]=u[4]);const h=Mo(r,10+i);!function Hd(r,i){Hl(r,i,i[11],2,null,null),i[0]=null,i[6]=null}(u[1],u);const m=h[19];null!==m&&m.detachView(h[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function $p(r,i){if(!(256&i[2])){const o=i[11];In(o)&&o.destroyNode&&Hl(r,i,o,3,null,null),function uf(r){let i=r[13];if(!i)return sl(r[1],r);for(;i;){let o=null;if(_n(i))o=i[13];else{const u=i[10];u&&(o=u)}if(!o){for(;i&&!i[4]&&i!==r;)_n(i)&&sl(i[1],i),i=i[3];null===i&&(i=r),_n(i)&&sl(i[1],i),o=i&&i[4]}i=o}}(i)}}function sl(r,i){if(!(256&i[2])){i[2]&=-129,i[2]|=256,function C0(r,i){let o;if(null!=r&&null!=(o=r.destroyHooks))for(let u=0;u<o.length;u+=2){const c=i[o[u]];if(!(c instanceof Ms)){const h=o[u+1];if(Array.isArray(h))for(let m=0;m<h.length;m+=2){const w=c[h[m]],b=h[m+1];try{b.call(w)}finally{}}else try{h.call(c)}finally{}}}}(r,i),function T0(r,i){const o=r.cleanup,u=i[7];let c=-1;if(null!==o)for(let h=0;h<o.length-1;h+=2)if("string"==typeof o[h]){const m=o[h+1],w="function"==typeof m?m(i):A(i[m]),b=u[c=o[h+2]],N=o[h+3];"boolean"==typeof N?w.removeEventListener(o[h],b,N):N>=0?u[c=N]():u[c=-N].unsubscribe(),h+=2}else{const m=u[c=o[h+1]];o[h].call(m)}if(null!==u){for(let h=c+1;h<u.length;h++)u[h]();i[7]=null}}(r,i),1===i[1].type&&In(i[11])&&i[11].destroy();const o=i[17];if(null!==o&&ri(i[3])){o!==i[3]&&il(o,i);const u=i[19];null!==u&&u.detachView(r)}}}function Nr(r,i,o){return function Gd(r,i,o){let u=i;for(;null!==u&&40&u.type;)u=(i=u).parent;if(null===u)return o[0];if(2&u.flags){const c=r.data[u.directiveStart].encapsulation;if(c===pt.None||c===pt.Emulated)return null}return je(u,o)}(r,i.parent,o)}function du(r,i,o,u,c){In(r)?r.insertBefore(i,o,u,c):i.insertBefore(o,u,c)}function Hp(r,i,o){In(r)?r.appendChild(i,o):i.appendChild(o)}function uy(r,i,o,u,c){null!==u?du(r,i,o,u,c):Hp(r,i,o)}function df(r,i){return In(r)?r.parentNode(i):i.parentNode}let Gp=function hu(r,i,o){return 40&r.type?je(r,o):null};function Vu(r,i,o,u){const c=Nr(r,u,i),h=i[11],w=function ol(r,i,o){return Gp(r,i,o)}(u.parent||i[6],u,i);if(null!=c)if(Array.isArray(o))for(let b=0;b<o.length;b++)uy(h,c,o[b],w,!1);else uy(h,c,o,w,!1)}function $l(r,i){if(null!==i){const o=i.type;if(3&o)return je(i,r);if(4&o)return Yr(-1,r[i.index]);if(8&o){const u=i.child;if(null!==u)return $l(r,u);{const c=r[i.index];return ri(c)?Yr(-1,c):A(c)}}if(32&o)return se(i,r)()||A(r[i.index]);{const u=ly(r,i);return null!==u?Array.isArray(u)?u[0]:$l(mt(r[16]),u):$l(r,i.next)}}return null}function ly(r,i){return null!==i?r[16][6].projection[i.projection]:null}function Yr(r,i){const o=10+r+1;if(o<i.length){const u=i[o],c=u[1].firstChild;if(null!==c)return $l(u,c)}return i[7]}function ff(r,i,o,u,c,h,m){for(;null!=o;){const w=u[o.index],b=o.type;if(m&&0===i&&(w&&jr(A(w),u),o.flags|=4),64!=(64&o.flags))if(8&b)ff(r,i,o.child,u,c,h,!1),Pa(i,r,c,w,h);else if(32&b){const N=se(o,u);let F;for(;F=N();)Pa(i,r,c,F,h);Pa(i,r,c,w,h)}else 16&b?dy(r,i,u,o,c,h):Pa(i,r,c,w,h);o=m?o.projectionNext:o.next}}function Hl(r,i,o,u,c,h){ff(o,u,r.firstChild,i,c,h,!1)}function dy(r,i,o,u,c,h){const m=o[16],b=m[6].projection[u.projection];if(Array.isArray(b))for(let N=0;N<b.length;N++)Pa(i,r,c,b[N],h);else ff(r,i,b,m[3],c,h,!0)}function Gl(r,i,o){In(r)?r.setAttribute(i,"style",o):i.style.cssText=o}function pf(r,i,o){In(r)?""===o?r.removeAttribute(i,"class"):r.setAttribute(i,"class",o):i.className=o}function Fa(r,i,o){let u=r.length;for(;;){const c=r.indexOf(i,o);if(-1===c)return c;if(0===c||r.charCodeAt(c-1)<=32){const h=i.length;if(c+h===u||r.charCodeAt(c+h)<=32)return c}o=c+1}}const zl="ng-template";function A0(r,i,o){let u=0;for(;u<r.length;){let c=r[u++];if(o&&"class"===c){if(c=r[u],-1!==Fa(c.toLowerCase(),i,0))return!0}else if(1===c){for(;u<r.length&&"string"==typeof(c=r[u++]);)if(c.toLowerCase()===i)return!0;return!1}}return!1}function fy(r){return 4===r.type&&r.value!==zl}function ln(r,i,o){return i===(4!==r.type||o?r.value:zl)}function x0(r,i,o){let u=4;const c=r.attrs||[],h=function py(r){for(let i=0;i<r.length;i++)if(So(r[i]))return i;return r.length}(c);let m=!1;for(let w=0;w<i.length;w++){const b=i[w];if("number"!=typeof b){if(!m)if(4&u){if(u=2|1&u,""!==b&&!ln(r,b,o)||""===b&&1===i.length){if(uo(u))return!1;m=!0}}else{const N=8&u?b:i[++w];if(8&u&&null!==r.attrs){if(!A0(r.attrs,N,o)){if(uo(u))return!1;m=!0}continue}const z=Wd(8&u?"class":b,c,fy(r),o);if(-1===z){if(uo(u))return!1;m=!0;continue}if(""!==N){let ne;ne=z>h?"":c[z+1].toLowerCase();const ye=8&u?ne:null;if(ye&&-1!==Fa(ye,N,0)||2&u&&N!==ne){if(uo(u))return!1;m=!0}}}}else{if(!m&&!uo(u)&&!uo(b))return!1;if(m&&uo(b))continue;m=!1,u=b|1&u}}return uo(u)||m}function uo(r){return 0==(1&r)}function Wd(r,i,o,u){if(null===i)return-1;let c=0;if(u||!o){let h=!1;for(;c<i.length;){const m=i[c];if(m===r)return c;if(3===m||6===m)h=!0;else{if(1===m||2===m){let w=i[++c];for(;"string"==typeof w;)w=i[++c];continue}if(4===m)break;if(0===m){c+=4;continue}}c+=h?1:2}return-1}return function gy(r,i){let o=r.indexOf(4);if(o>-1)for(o++;o<r.length;){const u=r[o];if("number"==typeof u)return-1;if(u===i)return o;o++}return-1}(i,r)}function Wl(r,i,o=!1){for(let u=0;u<i.length;u++)if(x0(r,i[u],o))return!0;return!1}function yy(r,i){return r?":not("+i.trim()+")":i}function vy(r){let i=r[0],o=1,u=2,c="",h=!1;for(;o<r.length;){let m=r[o];if("string"==typeof m)if(2&u){const w=r[++o];c+="["+m+(w.length>0?'="'+w+'"':"")+"]"}else 8&u?c+="."+m:4&u&&(c+=" "+m);else""!==c&&!uo(m)&&(i+=yy(h,c),c=""),u=m,h=h||!uo(u);o++}return""!==c&&(i+=yy(h,c)),i}const tn={};function Ey(r){Kl(en(),$e(),ir()+r,Yo())}function Kl(r,i,o,u){if(!u)if(3==(3&i[2])){const h=r.preOrderCheckHooks;null!==h&&bo(i,h,o)}else{const h=r.preOrderHooks;null!==h&&pi(i,h,0,o)}ji(o)}function mf(r,i){return r<<17|i<<2}function sr(r){return r>>17&32767}function al(r){return 2|r}function zi(r){return(131068&r)>>2}function Kd(r,i){return-131069&r|i<<2}function ul(r){return 1|r}function Oy(r,i){const o=r.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const c=o[u],h=o[u+1];if(-1!==h){const m=r.data[h];Da(c),m.contentQueries(2,i[h],h)}}}function Yd(r,i,o,u,c,h,m,w,b,N){const F=i.blueprint.slice();return F[0]=c,F[2]=140|u,br(F),F[3]=F[15]=r,F[8]=o,F[10]=m||r&&r[10],F[11]=w||r&&r[11],F[12]=b||r&&r[12]||null,F[9]=N||r&&r[9]||null,F[6]=h,F[16]=2==i.type?r[16]:F,F}function oc(r,i,o,u,c){let h=r.data[i];if(null===h)h=function yi(r,i,o,u,c){const h=Zo(),m=Ea(),b=r.data[i]=function Fy(r,i,o,u,c,h){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:i?i.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:i,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?h:h&&h.parent,o,i,u,c);return null===r.firstChild&&(r.firstChild=b),null!==h&&(m?null==h.child&&null!==b.parent&&(h.child=b):null===h.next&&(h.next=b)),b}(r,i,o,u,c),function gs(){return At.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=o,h.value=u,h.attrs=c;const m=function Ii(){const r=At.lFrame,i=r.currentTNode;return r.isParent?i:i.parent}();h.injectorIndex=null===m?-1:m.injectorIndex}return Bi(h,!0),h}function ac(r,i,o,u){if(0===o)return-1;const c=i.length;for(let h=0;h<o;h++)i.push(u),r.blueprint.push(u),r.data.push(null);return c}function ll(r,i,o){Zs(i);try{const u=r.viewQuery;null!==u&&og(1,u,o);const c=r.template;null!==c&&tg(r,i,c,1,o),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&Oy(r,i),r.staticViewQueries&&og(2,r.viewQuery,o);const h=r.components;null!==h&&function Py(r,i){for(let o=0;o<i.length;o++)$y(r,i[o])}(i,h)}catch(u){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),u}finally{i[2]&=-5,Do()}}function uc(r,i,o,u){const c=i[2];if(256==(256&c))return;Zs(i);const h=Yo();try{br(i),function ps(r){return At.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==o&&tg(r,i,o,2,u);const m=3==(3&c);if(!h)if(m){const N=r.preOrderCheckHooks;null!==N&&bo(i,N,null)}else{const N=r.preOrderHooks;null!==N&&pi(i,N,0,null),To(i,0)}if(function jy(r){for(let i=Or(r);null!==i;i=ws(i)){if(!i[2])continue;const o=i[9];for(let u=0;u<o.length;u++){const c=o[u],h=c[3];0==(1024&c[2])&&Wr(h,1),c[2]|=1024}}}(i),function xf(r){for(let i=Or(r);null!==i;i=ws(i))for(let o=10;o<i.length;o++){const u=i[o],c=u[1];Fn(u)&&uc(c,u,c.template,u[8])}}(i),null!==r.contentQueries&&Oy(r,i),!h)if(m){const N=r.contentCheckHooks;null!==N&&bo(i,N)}else{const N=r.contentHooks;null!==N&&pi(i,N,1),To(i,1)}!function Ry(r,i){const o=r.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const c=o[u];if(c<0)ji(~c);else{const h=c,m=o[++u],w=o[++u];Qo(m,h),w(2,i[h])}}}finally{ji(-1)}}(r,i);const w=r.components;null!==w&&function Ny(r,i){for(let o=0;o<i.length;o++)dc(r,i[o])}(i,w);const b=r.viewQuery;if(null!==b&&og(2,b,u),!h)if(m){const N=r.viewCheckHooks;null!==N&&bo(i,N)}else{const N=r.viewHooks;null!==N&&pi(i,N,2),To(i,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),h||(i[2]&=-73),1024&i[2]&&(i[2]&=-1025,Wr(i[3],-1))}finally{Do()}}function cc(r,i,o,u){const c=i[10],h=!Yo(),m=Qt(i);try{h&&!m&&c.begin&&c.begin(),m&&ll(r,i,u),uc(r,i,o,u)}finally{h&&!m&&c.end&&c.end()}}function tg(r,i,o,u,c){const h=ir(),m=2&u;try{ji(-1),m&&i.length>20&&Kl(r,i,20,Yo()),o(u,c)}finally{ji(h)}}function wf(r,i,o){!Ss()||(function fl(r,i,o,u){const c=o.directiveStart,h=o.directiveEnd;r.firstCreatePass||Ao(o,i),jr(u,i);const m=o.initialInputs;for(let w=c;w<h;w++){const b=r.data[w],N=wi(b);N&&Sf(i,o,b);const F=lt(i,r,w,o);jr(F,i),null!==m&&By(0,w-c,F,b,0,m),N&&($t(o.index,i)[8]=F)}}(r,i,o,je(o,i)),128==(128&o.flags)&&function Uy(r,i,o){const u=o.directiveStart,c=o.directiveEnd,m=o.index,w=function Ia(){return At.lFrame.currentDirectiveIndex}();try{ji(m);for(let b=u;b<c;b++){const N=r.data[b],F=i[b];xs(b),(null!==N.hostBindings||0!==N.hostVars||null!==N.hostAttrs)&&Vy(N,F)}}finally{ji(-1),xs(w)}}(r,i,o))}function Zl(r,i,o=je){const u=i.localNames;if(null!==u){let c=i.index+1;for(let h=0;h<u.length;h+=2){const m=u[h+1],w=-1===m?o(i,r):r[m];r[c++]=w}}}function lc(r){const i=r.tView;return null===i||i.incompleteFirstPass?r.tView=fu(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):i}function fu(r,i,o,u,c,h,m,w,b,N){const F=20+u,z=F+c,ne=function dl(r,i){const o=[];for(let u=0;u<i;u++)o.push(u<r?null:tn);return o}(F,z),ye="function"==typeof N?N():N;return ne[1]={type:r,blueprint:ne,template:o,queries:null,viewQuery:w,declTNode:i,data:ne.slice().fill(null,F),bindingStartIndex:F,expandoStartIndex:z,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:b,consts:ye,incompleteFirstPass:!1}}function Df(r,i,o,u){const c=Wy(i);null===o?c.push(u):(c.push(o),r.firstCreatePass&&ug(r).push(u,c.length-1))}function ng(r,i,o){for(let u in r)if(r.hasOwnProperty(u)){const c=r[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(i,c):o[u]=[i,c]}return o}function ig(r,i,o,u){let c=!1;if(Ss()){const h=function z0(r,i,o){const u=r.directiveRegistry;let c=null;if(u)for(let h=0;h<u.length;h++){const m=u[h];Wl(o,m.selectors,!1)&&(c||(c=[]),I(Ao(o,i),r,m.type),wi(m)?(Tf(r,o),c.unshift(m)):c.push(m))}return c}(r,i,o),m=null===u?null:{"":-1};if(null!==h){c=!0,sg(o,r.data.length,h.length);for(let F=0;F<h.length;F++){const z=h[F];z.providersResolver&&z.providersResolver(z)}let w=!1,b=!1,N=ac(r,i,h.length,null);for(let F=0;F<h.length;F++){const z=h[F];o.mergedAttrs=ai(o.mergedAttrs,z.hostAttrs),Xl(r,o,i,N,z),W0(N,z,m),null!==z.contentQueries&&(o.flags|=8),(null!==z.hostBindings||null!==z.hostAttrs||0!==z.hostVars)&&(o.flags|=128);const ne=z.type.prototype;!w&&(ne.ngOnChanges||ne.ngOnInit||ne.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(o.index),w=!0),!b&&(ne.ngOnChanges||ne.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(o.index),b=!0),N++}!function H0(r,i){const u=i.directiveEnd,c=r.data,h=i.attrs,m=[];let w=null,b=null;for(let N=i.directiveStart;N<u;N++){const F=c[N],z=F.inputs,ne=null===h||fy(i)?null:fo(z,h);m.push(ne),w=ng(z,N,w),b=ng(F.outputs,N,b)}null!==w&&(w.hasOwnProperty("class")&&(i.flags|=16),w.hasOwnProperty("style")&&(i.flags|=32)),i.initialInputs=m,i.inputs=w,i.outputs=b}(r,o)}m&&function Cf(r,i,o){if(i){const u=r.localNames=[];for(let c=0;c<i.length;c+=2){const h=o[i[c+1]];if(null==h)throw new He(-301,!1);u.push(i[c],h)}}}(o,u,m)}return o.mergedAttrs=ai(o.mergedAttrs,o.attrs),c}function Jl(r,i,o,u,c,h){const m=h.hostBindings;if(m){let w=r.hostBindingOpCodes;null===w&&(w=r.hostBindingOpCodes=[]);const b=~i.index;(function hl(r){let i=r.length;for(;i>0;){const o=r[--i];if("number"==typeof o&&o<0)return o}return 0})(w)!=b&&w.push(b),w.push(u,c,m)}}function Vy(r,i){null!==r.hostBindings&&r.hostBindings(1,i)}function Tf(r,i){i.flags|=2,(r.components||(r.components=[])).push(i.index)}function W0(r,i,o){if(o){if(i.exportAs)for(let u=0;u<i.exportAs.length;u++)o[i.exportAs[u]]=r;wi(i)&&(o[""]=r)}}function sg(r,i,o){r.flags|=1,r.directiveStart=i,r.directiveEnd=i+o,r.providerIndexes=i}function Xl(r,i,o,u,c){r.data[u]=c;const h=c.factory||(c.factory=xr(c.type)),m=new Ms(h,wi(c),null);r.blueprint[u]=m,o[u]=m,Jl(r,i,0,u,ac(r,o,c.hostVars,tn),c)}function Sf(r,i,o){const u=je(i,r),c=lc(o),h=r[10],m=Mf(r,Yd(r,c,null,o.onPush?64:16,u,i,h,h.createRenderer(u,o),null,null));r[i.index]=m}function ho(r,i,o,u,c,h){const m=je(r,i);!function Af(r,i,o,u,c,h,m){if(null==h)In(r)?r.removeAttribute(i,c,o):i.removeAttribute(c);else{const w=null==m?Ce(h):m(h,u||"",c);In(r)?r.setAttribute(i,c,w,o):o?i.setAttributeNS(o,c,w):i.setAttribute(c,w)}}(i[11],m,h,r.value,o,u,c)}function By(r,i,o,u,c,h){const m=h[i];if(null!==m){const w=u.setInput;for(let b=0;b<m.length;){const N=m[b++],F=m[b++],z=m[b++];null!==w?u.setInput(o,z,N,F):o[F]=z}}}function fo(r,i){let o=null,u=0;for(;u<i.length;){const c=i[u];if(0!==c)if(5!==c){if("number"==typeof c)break;r.hasOwnProperty(c)&&(null===o&&(o=[]),o.push(c,r[c],i[u+1])),u+=2}else u+=2;else u+=4}return o}function Jd(r,i,o,u){return new Array(r,!0,!1,i,null,0,u,o,null,null)}function dc(r,i){const o=$t(i,r);if(Fn(o)){const u=o[1];80&o[2]?uc(u,o,u.template,o[8]):o[5]>0&&hc(o)}}function hc(r){for(let u=Or(r);null!==u;u=ws(u))for(let c=10;c<u.length;c++){const h=u[c];if(1024&h[2]){const m=h[1];uc(m,h,m.template,h[8])}else h[5]>0&&hc(h)}const o=r[1].components;if(null!==o)for(let u=0;u<o.length;u++){const c=$t(o[u],r);Fn(c)&&c[5]>0&&hc(c)}}function $y(r,i){const o=$t(i,r),u=o[1];(function pl(r,i){for(let o=i.length;o<r.blueprint.length;o++)i.push(r.blueprint[o])})(u,o),ll(u,o,o[8])}function Mf(r,i){return r[13]?r[14][4]=i:r[13]=i,r[14]=i,i}function fc(r){for(;r;){r[2]|=64;const i=mt(r);if($s(r)&&!i)return r;r=i}return null}function Rf(r,i,o){const u=i[10];u.begin&&u.begin();try{uc(r,i,r.template,o)}catch(c){throw cg(i,c),c}finally{u.end&&u.end()}}function Gy(r){!function pu(r){for(let i=0;i<r.components.length;i++){const o=r.components[i],u=Qc(o),c=u[1];cc(c,u,c.template,o)}}(r[8])}function og(r,i,o){Da(0),i(r,o)}const zy=(()=>Promise.resolve(null))();function Wy(r){return r[7]||(r[7]=[])}function ug(r){return r.cleanup||(r.cleanup=[])}function cg(r,i){const o=r[9],u=o?o.get(el,null):null;u&&u.handleError(i)}function pc(r,i,o,u,c){for(let h=0;h<o.length;){const m=o[h++],w=o[h++],b=i[m],N=r.data[m];null!==N.setInput?N.setInput(b,c,u,w):b[w]=c}}function Uo(r,i,o){const u=Te(i,r);!function nc(r,i,o){In(r)?r.setValue(i,o):i.textContent=o}(r[11],u,o)}function Xd(r,i,o){let u=o?r.styles:null,c=o?r.classes:null,h=0;if(null!==i)for(let m=0;m<i.length;m++){const w=i[m];"number"==typeof w?h=w:1==h?c=ve(c,w):2==h&&(u=ve(u,w+": "+i[++m]+";"))}o?r.styles=u:r.stylesWithoutHost=u,o?r.classes=c:r.classesWithoutHost=c}const lg=new Xt("INJECTOR",-1);class Zy{get(i,o=Sa){if(o===Sa){const u=new Error(`NullInjectorError: No provider for ${de(i)}!`);throw u.name="NullInjectorError",u}return o}}const eh=new Xt("Set Injector scope."),Qr={},J0={};let dg;function Yy(){return void 0===dg&&(dg=new Zy),dg}function Qy(r,i=null,o=null,u){const c=hg(r,i,o,u);return c._resolveInjectorDefTypes(),c}function hg(r,i=null,o=null,u){return new X0(r,o,i||Yy(),u)}class X0{constructor(i,o,u,c=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const h=[];o&&ts(o,w=>this.processProvider(w,i,o)),ts([i],w=>this.processInjectorType(w,[],h)),this.records.set(lg,gc(void 0,this));const m=this.records.get(eh);this.scope=null!=m?m.value:null,this.source=c||("object"==typeof i?null:de(i))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(i=>i.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(i,o=Sa,u=Rt.Default){this.assertNotDestroyed();const c=_e(this),h=Kn(void 0);try{if(!(u&Rt.SkipSelf)){let w=this.records.get(i);if(void 0===w){const b=function tv(r){return"function"==typeof r||"object"==typeof r&&r instanceof Xt}(i)&&Yt(i);w=b&&this.injectableDefInScope(b)?gc(ed(i),Qr):null,this.records.set(i,w)}if(null!=w)return this.hydrate(i,w)}return(u&Rt.Self?Yy():this.parent).get(i,o=u&Rt.Optional&&o===Sa?null:o)}catch(m){if("NullInjectorError"===m.name){if((m[Fs]=m[Fs]||[]).unshift(de(i)),c)throw m;return function rs(r,i,o,u){const c=r[Fs];throw i[U]&&c.unshift(i[U]),r.message=function Ze(r,i,o,u=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.substr(2):r;let c=de(i);if(Array.isArray(i))c=i.map(de).join(" -> ");else if("object"==typeof i){let h=[];for(let m in i)if(i.hasOwnProperty(m)){let w=i[m];h.push(m+":"+("string"==typeof w?JSON.stringify(w):de(w)))}c=`{${h.join(", ")}}`}return`${o}${u?"("+u+")":""}[${c}]: ${r.replace(T,"\n  ")}`}("\n"+r.message,c,o,u),r.ngTokenPath=c,r[Fs]=null,r}(m,i,"R3InjectorError",this.source)}throw m}finally{Kn(h),_e(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(i=>this.get(i))}toString(){const i=[];return this.records.forEach((u,c)=>i.push(de(c))),`R3Injector[${i.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new He(205,!1)}processInjectorType(i,o,u){if(!(i=pe(i)))return!1;let c=pr(i);const h=null==c&&i.ngModule||void 0,m=void 0===h?i:h,w=-1!==u.indexOf(m);if(void 0!==h&&(c=pr(h)),null==c)return!1;if(null!=c.imports&&!w){let F;u.push(m);try{ts(c.imports,z=>{this.processInjectorType(z,o,u)&&(void 0===F&&(F=[]),F.push(z))})}finally{}if(void 0!==F)for(let z=0;z<F.length;z++){const{ngModule:ne,providers:ye}=F[z];ts(ye,Le=>this.processProvider(Le,ne,ye||q))}}this.injectorDefTypes.add(m);const b=xr(m)||(()=>new m);this.records.set(m,gc(b,Qr));const N=c.providers;if(null!=N&&!w){const F=i;ts(N,z=>this.processProvider(z,F,N))}return void 0!==h&&void 0!==i.providers}processProvider(i,o,u){let c=mc(i=pe(i))?i:pe(i&&i.provide);const h=function Jy(r,i,o){return td(r)?gc(void 0,r.useValue):gc(Of(r),Qr)}(i);if(mc(i)||!0!==i.multi)this.records.get(c);else{let m=this.records.get(c);m||(m=gc(void 0,Qr,!0),m.factory=()=>cn(m.multi),this.records.set(c,m)),c=i,m.multi.push(i)}this.records.set(c,h)}hydrate(i,o){return o.value===Qr&&(o.value=J0,o.value=o.factory()),"object"==typeof o.value&&o.value&&function ev(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(o.value)&&this.onDestroy.add(o.value),o.value}injectableDefInScope(i){if(!i.providedIn)return!1;const o=pe(i.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function ed(r){const i=Yt(r),o=null!==i?i.factory:xr(r);if(null!==o)return o;if(r instanceof Xt)throw new He(204,!1);if(r instanceof Function)return function eE(r){const i=r.length;if(i>0)throw function ia(r,i){const o=[];for(let u=0;u<r;u++)o.push(i);return o}(i,"?"),new He(204,!1);const o=function Qn(r){const i=r&&(r[_i]||r[li]);if(i){const o=function wr(r){if(r.hasOwnProperty("name"))return r.name;const i=(""+r).match(/^function\s*([^\s(]+)/);return null===i?"":i[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),i}return null}(r);return null!==o?()=>o.factory(r):()=>new r}(r);throw new He(204,!1)}function Of(r,i,o){let u;if(mc(r)){const c=pe(r);return xr(c)||ed(c)}if(td(r))u=()=>pe(r.useValue);else if(function fg(r){return!(!r||!r.useFactory)}(r))u=()=>r.useFactory(...cn(r.deps||[]));else if(function Nf(r){return!(!r||!r.useExisting)}(r))u=()=>nt(pe(r.useExisting));else{const c=pe(r&&(r.useClass||r.provide));if(!function tE(r){return!!r.deps}(r))return xr(c)||ed(c);u=()=>new c(...cn(r.deps))}return u}function gc(r,i,o=!1){return{factory:r,value:i,multi:o?[]:void 0}}function td(r){return null!==r&&"object"==typeof r&&K in r}function mc(r){return"function"==typeof r}let Vo=(()=>{class r{static create(o,u){var c;if(Array.isArray(o))return Qy({name:""},u,o,"");{const h=null!==(c=o.name)&&void 0!==c?c:"";return Qy({name:h},o.parent,o.providers,h)}}}return r.THROW_IF_NOT_FOUND=Sa,r.NULL=new Zy,r.\u0275prov=pn({token:r,providedIn:"any",factory:()=>nt(lg)}),r.__NG_ELEMENT_ID__=-1,r})();function cv(r,i){Qa(Qc(r)[1],On())}function Ig(r){let i=function lv(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),o=!0;const u=[r];for(;i;){let c;if(wi(r))c=i.\u0275cmp||i.\u0275dir;else{if(i.\u0275cmp)throw new He(903,"");c=i.\u0275dir}if(c){if(o){u.push(c);const m=r;m.inputs=id(r.inputs),m.declaredInputs=id(r.declaredInputs),m.outputs=id(r.outputs);const w=c.hostBindings;w&&hv(r,w);const b=c.viewQuery,N=c.contentQueries;if(b&&nh(r,b),N&&Dg(r,N),ce(r.inputs,c.inputs),ce(r.declaredInputs,c.declaredInputs),ce(r.outputs,c.outputs),wi(c)&&c.data.animation){const F=r.data;F.animation=(F.animation||[]).concat(c.data.animation)}}const h=c.features;if(h)for(let m=0;m<h.length;m++){const w=h[m];w&&w.ngInherit&&w(r),w===Ig&&(o=!1)}}i=Object.getPrototypeOf(i)}!function dv(r){let i=0,o=null;for(let u=r.length-1;u>=0;u--){const c=r[u];c.hostVars=i+=c.hostVars,c.hostAttrs=ai(c.hostAttrs,o=ai(o,c.hostAttrs))}}(u)}function id(r){return r===Vn?{}:r===q?[]:r}function nh(r,i){const o=r.viewQuery;r.viewQuery=o?(u,c)=>{i(u,c),o(u,c)}:i}function Dg(r,i){const o=r.contentQueries;r.contentQueries=o?(u,c,h)=>{i(u,c,h),o(u,c,h)}:i}function hv(r,i){const o=r.hostBindings;r.hostBindings=o?(u,c)=>{i(u,c),o(u,c)}:i}let Vf=null;function sd(){if(!Vf){const r=an.Symbol;if(r&&r.iterator)Vf=r.iterator;else{const i=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<i.length;++o){const u=i[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(Vf=u)}}}return Vf}function gl(r){return!!ad(r)&&(Array.isArray(r)||!(r instanceof Map)&&sd()in r)}function ad(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function is(r,i,o){return!Object.is(r[i],o)&&(r[i]=o,!0)}function Bf(r,i,o,u){const c=$e();return is(c,Ks(),i)&&(en(),ho(hr(),c,r,i,o,u)),Bf}function yc(r,i,o,u){return is(r,Ks(),o)?i+Ce(o)+u:tn}function ld(r,i,o,u,c,h){const w=function ju(r,i,o,u){const c=is(r,i,o);return is(r,i+1,u)||c}(r,function As(){return At.lFrame.bindingIndex}(),o,c);return Yi(2),w?i+Ce(o)+u+Ce(c)+h:tn}function yv(r,i,o,u,c,h,m,w){const b=$e(),N=en(),F=r+20,z=N.firstCreatePass?function Sg(r,i,o,u,c,h,m,w,b){const N=i.consts,F=oc(i,r,4,m||null,Kt(N,w));ig(i,o,F,Kt(N,b)),Qa(i,F);const z=F.tViews=fu(2,F,u,c,h,i.directiveRegistry,i.pipeRegistry,null,i.schemas,N);return null!==i.queries&&(i.queries.template(i,F),z.queries=i.queries.embeddedTView(F)),F}(F,N,b,i,o,u,c,h,m):N.data[F];Bi(z,!1);const ne=b[11].createComment("");Vu(N,b,ne,z),jr(ne,b),Mf(b,b[F]=Jd(ne,b,ne,z)),fi(z)&&wf(N,b,z),null!=m&&Zl(b,z,w)}function fd(r,i=Rt.Default){const o=$e();return null===o?nt(r,i):R(On(),o,pe(r),i)}function xv(){throw new Error("invalid")}function uh(r,i,o){const u=$e();return is(u,Ks(),i)&&function lo(r,i,o,u,c,h,m,w){const b=je(i,o);let F,N=i.inputs;!w&&null!=N&&(F=N[u])?(pc(r,o,F,u,c),Pi(i)&&function bf(r,i){const o=$t(i,r);16&o[2]||(o[2]|=64)}(o,i.index)):3&i.type&&(u=function Ly(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(u),c=null!=m?m(c,i.value||"",u):c,In(h)?h.setProperty(b,u,c):Qi(u)||(b.setProperty?b.setProperty(u,c):b[u]=c))}(en(),hr(),u,r,i,u[11],o,!1),uh}function Fg(r,i,o,u,c){const m=c?"class":"style";pc(r,o,i.inputs[m],m,u)}function Zf(r,i,o,u){const c=$e(),h=en(),m=20+r,w=c[11],b=c[m]=jl(w,i,function Ya(){return At.lFrame.currentNamespace}()),N=h.firstCreatePass?function Lg(r,i,o,u,c,h,m){const w=i.consts,N=oc(i,r,2,c,Kt(w,h));return ig(i,o,N,Kt(w,m)),null!==N.attrs&&Xd(N,N.attrs,!1),null!==N.mergedAttrs&&Xd(N,N.mergedAttrs,!0),null!==i.queries&&i.queries.elementStart(i,N),N}(m,h,c,0,i,o,u):h.data[m];Bi(N,!0);const F=N.mergedAttrs;null!==F&&$n(w,b,F);const z=N.classes;null!==z&&pf(w,b,z);const ne=N.styles;return null!==ne&&Gl(w,b,ne),64!=(64&N.flags)&&Vu(h,c,b,N),0===function Eo(){return At.lFrame.elementDepthCount}()&&jr(b,c),function Ws(){At.lFrame.elementDepthCount++}(),fi(N)&&(wf(h,c,N),function ky(r,i,o){if(jn(i)){const c=i.directiveEnd;for(let h=i.directiveStart;h<c;h++){const m=r.data[h];m.contentQueries&&m.contentQueries(1,o[h],h)}}}(h,N,c)),null!==u&&Zl(c,N),Zf}function pd(){let r=On();Ea()?function Zi(){At.lFrame.isParent=!1}():(r=r.parent,Bi(r,!1));const i=r;!function qo(){At.lFrame.elementDepthCount--}();const o=en();return o.firstCreatePass&&(Qa(o,r),jn(r)&&o.queries.elementEnd(r)),null!=i.classesWithoutHost&&function Rs(r){return 0!=(16&r.flags)}(i)&&Fg(o,i,$e(),i.classesWithoutHost,!0),null!=i.stylesWithoutHost&&function Gu(r){return 0!=(32&r.flags)}(i)&&Fg(o,i,$e(),i.stylesWithoutHost,!1),pd}function Ug(r,i,o,u){return Zf(r,i,o,u),pd(),Ug}function $g(r){return!!r&&"function"==typeof r.then}function Yf(r){return!!r&&"function"==typeof r.subscribe}const gu=Yf;function lh(r,i,o,u){const c=$e(),h=en(),m=On();return function Ov(r,i,o,u,c,h,m,w){const b=fi(u),F=r.firstCreatePass&&ug(r),z=i[8],ne=Wy(i);let ye=!0;if(3&u.type||w){const ft=je(u,i),Dt=w?w(ft):ft,Ke=ne.length,jt=w?Sn=>w(A(Sn[u.index])):u.index;if(In(o)){let Sn=null;if(!w&&b&&(Sn=function Hg(r,i,o,u){const c=r.cleanup;if(null!=c)for(let h=0;h<c.length-1;h+=2){const m=c[h];if(m===o&&c[h+1]===u){const w=i[7],b=c[h+2];return w.length>b?w[b]:null}"string"==typeof m&&(h+=2)}return null}(r,i,c,u.index)),null!==Sn)(Sn.__ngLastListenerFn__||Sn).__ngNextListenerFn__=h,Sn.__ngLastListenerFn__=h,ye=!1;else{h=dh(u,i,z,h,!1);const or=o.listen(Dt,c,h);ne.push(h,or),F&&F.push(c,jt,Ke,Ke+1)}}else h=dh(u,i,z,h,!0),Dt.addEventListener(c,h,m),ne.push(h),F&&F.push(c,jt,Ke,m)}else h=dh(u,i,z,h,!1);const Le=u.outputs;let rt;if(ye&&null!==Le&&(rt=Le[c])){const ft=rt.length;if(ft)for(let Dt=0;Dt<ft;Dt+=2){const ja=i[rt[Dt]][rt[Dt+1]].subscribe(h),jh=ne.length;ne.push(h,ja),F&&F.push(c,u.index,jh,-(jh+1))}}}(h,c,c[11],m,r,i,!!o,u),lh}function Nv(r,i,o,u){try{return!1!==o(u)}catch(c){return cg(r,c),!1}}function dh(r,i,o,u,c){return function h(m){if(m===Function)return u;const w=2&r.flags?$t(r.index,i):i;0==(32&i[2])&&fc(w);let b=Nv(i,0,u,m),N=h.__ngNextListenerFn__;for(;N;)b=Nv(i,0,N,m)&&b,N=N.__ngNextListenerFn__;return c&&!1===b&&(m.preventDefault(),m.returnValue=!1),b}}function Zg(r,i,o,u,c){const h=r[o+1],m=null===i;let w=u?sr(h):zi(h),b=!1;for(;0!==w&&(!1===b||m);){const F=r[w+1];Vv(r[w],i)&&(b=!0,r[w+1]=u?ul(F):al(F)),w=u?sr(F):zi(F)}b&&(r[o+1]=u?al(h):ul(h))}function Vv(r,i){return null===r||null==i||(Array.isArray(r)?r[1]:r)===i||!(!Array.isArray(r)||"string"!=typeof i)&&oa(r,i)>=0}const xi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ep(r){return r.substring(xi.key,xi.keyEnd)}function jv(r,i){const o=xi.textEnd;return o===i?-1:(i=xi.keyEnd=function Yg(r,i,o){for(;i<o&&r.charCodeAt(i)>32;)i++;return i}(r,xi.key=i,o),El(r,i,o))}function El(r,i,o){for(;i<o&&r.charCodeAt(i)<=32;)i++;return i}function sp(r,i){return function Bo(r,i,o,u){const c=$e(),h=en(),m=Yi(2);h.firstUpdatePass&&Kv(h,r,m,u),i!==tn&&is(c,m,i)&&rm(h,h.data[ir()],c,c[11],r,c[m+1]=function op(r,i){return null==r||("string"==typeof i?r+=i:"object"==typeof r&&(r=de(Kr(r)))),r}(i,o),u,m)}(r,i,null,!0),sp}function Us(r,i){for(let o=function tp(r){return function Hv(r){xi.key=0,xi.keyEnd=0,xi.value=0,xi.valueEnd=0,xi.textEnd=r.length}(r),jv(r,El(r,0,xi.textEnd))}(i);o>=0;o=jv(i,o))ns(r,ep(i),!0)}function Wv(r,i){return i>=r.expandoStartIndex}function Kv(r,i,o,u){const c=r.data;if(null===c[o+1]){const h=c[ir()],m=Wv(r,o);Dn(h,u)&&null===i&&!m&&(i=!1),i=function qv(r,i,o,u){const c=function Jo(r){const i=At.lFrame.currentDirectiveIndex;return-1===i?null:r[i]}(r);let h=u?i.residualClasses:i.residualStyles;if(null===c)0===(u?i.classBindings:i.styleBindings)&&(o=fh(o=em(null,r,i,o,u),i.attrs,u),h=null);else{const m=i.directiveStylingLast;if(-1===m||r[m]!==c)if(o=em(c,r,i,o,u),null===h){let b=function vE(r,i,o){const u=o?i.classBindings:i.styleBindings;if(0!==zi(u))return r[sr(u)]}(r,i,u);void 0!==b&&Array.isArray(b)&&(b=em(null,r,i,b[1],u),b=fh(b,i.attrs,u),function Zv(r,i,o,u){r[sr(o?i.classBindings:i.styleBindings)]=u}(r,i,u,b))}else h=function _E(r,i,o){let u;const c=i.directiveEnd;for(let h=1+i.directiveStylingLast;h<c;h++)u=fh(u,r[h].hostAttrs,o);return fh(u,i.attrs,o)}(r,i,u)}return void 0!==h&&(u?i.residualClasses=h:i.residualStyles=h),o}(c,h,i,u),function qg(r,i,o,u,c,h){let m=h?i.classBindings:i.styleBindings,w=sr(m),b=zi(m);r[u]=o;let F,N=!1;if(Array.isArray(o)){const z=o;F=z[1],(null===F||oa(z,F)>0)&&(N=!0)}else F=o;if(c)if(0!==b){const ne=sr(r[w+1]);r[u+1]=mf(ne,w),0!==ne&&(r[ne+1]=Kd(r[ne+1],u)),r[w+1]=function wy(r,i){return 131071&r|i<<17}(r[w+1],u)}else r[u+1]=mf(w,0),0!==w&&(r[w+1]=Kd(r[w+1],u)),w=u;else r[u+1]=mf(b,0),0===w?w=u:r[b+1]=Kd(r[b+1],u),b=u;N&&(r[u+1]=al(r[u+1])),Zg(r,F,u,!0),Zg(r,F,u,!1),function mE(r,i,o,u,c){const h=c?r.residualClasses:r.residualStyles;null!=h&&"string"==typeof i&&oa(h,i)>=0&&(o[u+1]=ul(o[u+1]))}(i,F,r,u,h),m=mf(w,b),h?i.classBindings=m:i.styleBindings=m}(c,h,i,o,m,u)}}function em(r,i,o,u,c){let h=null;const m=o.directiveEnd;let w=o.directiveStylingLast;for(-1===w?w=o.directiveStart:w++;w<m&&(h=i[w],u=fh(u,h.hostAttrs,c),h!==r);)w++;return null!==r&&(o.directiveStylingLast=w),u}function fh(r,i,o){const u=o?1:2;let c=-1;if(null!==i)for(let h=0;h<i.length;h++){const m=i[h];"number"==typeof m?c=m:c===u&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),ns(r,m,!!o||i[++h]))}return void 0===r?null:r}function rm(r,i,o,u,c,h,m,w){if(!(3&i.type))return;const b=r.data,N=b[w+1];ph(function Kp(r){return 1==(1&r)}(N)?im(b,i,o,c,zi(N),m):void 0)||(ph(h)||function yf(r){return 2==(2&r)}(N)&&(h=im(b,null,o,c,w,m)),function hy(r,i,o,u,c){const h=In(r);if(i)c?h?r.addClass(o,u):o.classList.add(u):h?r.removeClass(o,u):o.classList.remove(u);else{let m=-1===u.indexOf("-")?void 0:O.DashCase;if(null==c)h?r.removeStyle(o,u,m):o.style.removeProperty(u);else{const w="string"==typeof c&&c.endsWith("!important");w&&(c=c.slice(0,-10),m|=O.Important),h?r.setStyle(o,u,c,m):o.style.setProperty(u,c,w?"important":"")}}}(u,m,Te(ir(),o),c,h))}function im(r,i,o,u,c,h){const m=null===i;let w;for(;c>0;){const b=r[c],N=Array.isArray(b),F=N?b[1]:b,z=null===F;let ne=o[c+1];ne===tn&&(ne=z?q:void 0);let ye=z?ru(ne,u):F===u?ne:void 0;if(N&&!ph(ye)&&(ye=ru(b,u)),ph(ye)&&(w=ye,m))return w;const Le=r[c+1];c=m?sr(Le):zi(Le)}if(null!==i){let b=h?i.residualClasses:i.residualStyles;null!=b&&(w=ru(b,u))}return w}function ph(r){return void 0!==r}function Dn(r,i){return 0!=(r.flags&(i?16:32))}function sm(r,i=""){const o=$e(),u=en(),c=r+20,h=u.firstCreatePass?oc(u,c,1,i,null):u.data[c],m=o[c]=function rl(r,i){return In(r)?r.createText(i):r.createTextNode(i)}(o[11],i);Vu(u,o,m,h),Bi(h,!1)}function ap(r){return Tc("",r,""),ap}function Tc(r,i,o){const u=$e(),c=yc(u,r,i,o);return c!==tn&&Uo(u,ir(),c),Tc}function om(r,i,o,u,c){const h=$e(),m=ld(h,r,i,o,u,c);return m!==tn&&Uo(h,ir(),m),om}function cm(r,i,o){!function La(r,i,o,u){const c=en(),h=Yi(2);c.firstUpdatePass&&Kv(c,null,h,u);const m=$e();if(o!==tn&&is(m,h,o)){const w=c.data[ir()];if(Dn(w,u)&&!Wv(c,h)){let b=u?w.classesWithoutHost:w.stylesWithoutHost;null!==b&&(o=ve(b,o||"")),Fg(c,w,m,o,u)}else!function nm(r,i,o,u,c,h,m,w){c===tn&&(c=q);let b=0,N=0,F=0<c.length?c[0]:null,z=0<h.length?h[0]:null;for(;null!==F||null!==z;){const ne=b<c.length?c[b+1]:void 0,ye=N<h.length?h[N+1]:void 0;let rt,Le=null;F===z?(b+=2,N+=2,ne!==ye&&(Le=z,rt=ye)):null===z||null!==F&&F<z?(b+=2,Le=F):(N+=2,Le=z,rt=ye),null!==Le&&rm(r,i,o,u,Le,rt,m,w),F=b<c.length?c[b]:null,z=N<h.length?h[N]:null}}(c,w,m,m[11],m[h+1],m[h+1]=function EE(r,i,o){if(null==o||""===o)return q;const u=[],c=Kr(o);if(Array.isArray(c))for(let h=0;h<c.length;h++)r(u,c[h],!0);else if("object"==typeof c)for(const h in c)c.hasOwnProperty(h)&&r(u,h,c[h]);else"string"==typeof c&&i(u,c);return u}(r,i,o),u,h)}}(ns,Us,yc($e(),r,i,o),!0)}const Sc=void 0;var RE=["en",[["a","p"],["AM","PM"],Sc],[["AM","PM"],Sc,Sc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Sc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Sc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Sc,"{1} 'at' {0}",Sc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function up(r){const o=Math.floor(Math.abs(r)),u=r.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let ha={};function wl(r){const i=function pm(r){return r.toLowerCase().replace(/_/g,"-")}(r);let o=r_(i);if(o)return o;const u=i.split("-")[0];if(o=r_(u),o)return o;if("en"===u)return RE;throw new Error(`Missing locale data for the locale "${r}".`)}function cp(r){return wl(r)[Gt.PluralCase]}function r_(r){return r in ha||(ha[r]=an.ng&&an.ng.common&&an.ng.common.locales&&an.ng.common.locales[r]),ha[r]}var Gt=(()=>((Gt=Gt||{})[Gt.LocaleId=0]="LocaleId",Gt[Gt.DayPeriodsFormat=1]="DayPeriodsFormat",Gt[Gt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Gt[Gt.DaysFormat=3]="DaysFormat",Gt[Gt.DaysStandalone=4]="DaysStandalone",Gt[Gt.MonthsFormat=5]="MonthsFormat",Gt[Gt.MonthsStandalone=6]="MonthsStandalone",Gt[Gt.Eras=7]="Eras",Gt[Gt.FirstDayOfWeek=8]="FirstDayOfWeek",Gt[Gt.WeekendRange=9]="WeekendRange",Gt[Gt.DateFormat=10]="DateFormat",Gt[Gt.TimeFormat=11]="TimeFormat",Gt[Gt.DateTimeFormat=12]="DateTimeFormat",Gt[Gt.NumberSymbols=13]="NumberSymbols",Gt[Gt.NumberFormats=14]="NumberFormats",Gt[Gt.CurrencyCode=15]="CurrencyCode",Gt[Gt.CurrencySymbol=16]="CurrencySymbol",Gt[Gt.CurrencyName=17]="CurrencyName",Gt[Gt.Currencies=18]="Currencies",Gt[Gt.Directionality=19]="Directionality",Gt[Gt.PluralCase=20]="PluralCase",Gt[Gt.ExtraData=21]="ExtraData",Gt))();const yu="en-US";let vh=yu;function Tl(r,i,o,u,c){if(r=pe(r),Array.isArray(r))for(let h=0;h<r.length;h++)Tl(r[h],i,o,u,c);else{const h=en(),m=$e();let w=mc(r)?r:pe(r.provide),b=Of(r);const N=On(),F=1048575&N.providerIndexes,z=N.directiveStart,ne=N.providerIndexes>>20;if(mc(r)||!r.multi){const ye=new Ms(b,c,fd),Le=Ah(w,i,c?F:F+ne,z);-1===Le?(I(Ao(N,m),h,w),os(h,r,i.length),i.push(w),N.directiveStart++,N.directiveEnd++,c&&(N.providerIndexes+=1048576),o.push(ye),m.push(ye)):(o[Le]=ye,m[Le]=ye)}else{const ye=Ah(w,i,F+ne,z),Le=Ah(w,i,F,F+ne),rt=ye>=0&&o[ye],ft=Le>=0&&o[Le];if(c&&!ft||!c&&!rt){I(Ao(N,m),h,w);const Dt=function Sl(r,i,o,u,c){const h=new Ms(r,o,fd);return h.multi=[],h.index=i,h.componentProviders=0,x_(h,c,u&&!o),h}(c?Cl:vd,o.length,c,u,b);!c&&ft&&(o[Le].providerFactory=Dt),os(h,r,i.length,0),i.push(w),N.directiveStart++,N.directiveEnd++,c&&(N.providerIndexes+=1048576),o.push(Dt),m.push(Dt)}else os(h,r,ye>-1?ye:Le,x_(o[c?Le:ye],b,!c&&u));!c&&u&&ft&&o[Le].componentProviders++}}}function os(r,i,o,u){const c=mc(i),h=function Xy(r){return!!r.useClass}(i);if(c||h){const b=(h?pe(i.useClass):i).prototype.ngOnDestroy;if(b){const N=r.destroyHooks||(r.destroyHooks=[]);if(!c&&i.multi){const F=N.indexOf(o);-1===F?N.push(o,[u,b]):N[F+1].push(u,b)}else N.push(o,b)}}}function x_(r,i,o){return o&&r.componentProviders++,r.multi.push(i)-1}function Ah(r,i,o,u){for(let c=o;c<u;c++)if(i[c]===r)return c;return-1}function vd(r,i,o,u){return xh(this.multi,[])}function Cl(r,i,o,u){const c=this.multi;let h;if(this.providerFactory){const m=this.providerFactory.componentProviders,w=lt(o,o[1],this.providerFactory.index,u);h=w.slice(0,m),xh(c,h);for(let b=m;b<w.length;b++)h.push(w[b])}else h=[],xh(c,h);return h}function xh(r,i){for(let o=0;o<r.length;o++)i.push((0,r[o])());return i}function M_(r,i=[]){return o=>{o.providersResolver=(u,c)=>function Sh(r,i,o){const u=en();if(u.firstCreatePass){const c=wi(r);Tl(o,u.data,u.blueprint,c,!0),Tl(i,u.data,u.blueprint,c,!1)}}(u,c?c(r):r,i)}}class R_{}class Oc{resolveComponentFactory(i){throw function O_(r){const i=Error(`No component factory found for ${de(r)}. Did you add it to @NgModule.entryComponents?`);return i.ngComponent=r,i}(i)}}let hp=(()=>{class r{}return r.NULL=new Oc,r})();function tw(){return _d(On(),$e())}function _d(r,i){return new Ed(je(r,i))}let Ed=(()=>{class r{constructor(o){this.nativeElement=o}}return r.__NG_ELEMENT_ID__=tw,r})();function nw(r){return r instanceof Ed?r.nativeElement:r}class xm{}let Mm=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function fp(){const r=$e(),o=$t(On().index,r);return function P_(r){return r[11]}(_n(o)?o:r)}(),r})(),rw=(()=>{class r{}return r.\u0275prov=pn({token:r,providedIn:"root",factory:()=>null}),r})();class iw{constructor(i){this.full=i,this.major=i.split(".")[0],this.minor=i.split(".")[1],this.patch=i.split(".").slice(2).join(".")}}const k_=new iw("13.2.7"),Mh={};function Rm(r,i,o,u,c=!1){for(;null!==o;){const h=i[o.index];if(null!==h&&u.push(A(h)),ri(h))for(let w=10;w<h.length;w++){const b=h[w],N=b[1].firstChild;null!==N&&Rm(b[1],b,N,u)}const m=o.type;if(8&m)Rm(r,i,o.child,u);else if(32&m){const w=se(o,i);let b;for(;b=w();)u.push(b)}else if(16&m){const w=ly(i,o);if(Array.isArray(w))u.push(...w);else{const b=mt(i[16]);Rm(b[1],b,w,u,!0)}}o=c?o.projectionNext:o.next}return u}class pp{constructor(i,o){this._lView=i,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const i=this._lView,o=i[1];return Rm(o,i,o.firstChild,[])}get context(){return this._lView[8]}set context(i){this._lView[8]=i}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const i=this._lView[3];if(ri(i)){const o=i[8],u=o?o.indexOf(this):-1;u>-1&&(lf(i,u),Mo(o,u))}this._attachedToViewContainer=!1}$p(this._lView[1],this._lView)}onDestroy(i){Df(this._lView[1],this._lView,null,i)}markForCheck(){fc(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Rf(this._lView[1],this._lView,this.context)}checkNoChanges(){!function q0(r,i,o){wo(!0);try{Rf(r,i,o)}finally{wo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new He(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function lu(r,i){Hl(r,i,i[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(i){if(this._attachedToViewContainer)throw new He(902,"");this._appRef=i}}class sw extends pp{constructor(i){super(i),this._view=i}detectChanges(){Gy(this._view)}checkNoChanges(){!function Z0(r){wo(!0);try{Gy(r)}finally{wo(!1)}}(this._view)}get context(){return null}}class F_ extends hp{constructor(i){super(),this.ngModule=i}resolveComponentFactory(i){const o=Nn(i);return new L_(o,this.ngModule)}}function ow(r){const i=[];for(let o in r)r.hasOwnProperty(o)&&i.push({propName:r[o],templateName:o});return i}class L_ extends R_{constructor(i,o){super(),this.componentDef=i,this.ngModule=o,this.componentType=i.type,this.selector=function _y(r){return r.map(vy).join(",")}(i.selectors),this.ngContentSelectors=i.ngContentSelectors?i.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return ow(this.componentDef.inputs)}get outputs(){return ow(this.componentDef.outputs)}create(i,o,u,c){const h=(c=c||this.ngModule)?function wI(r,i){return{get:(o,u,c)=>{const h=r.get(o,Mh,c);return h!==Mh||u===Mh?h:i.get(o,u,c)}}}(i,c.injector):i,m=h.get(xm,x),w=h.get(rw,null),b=m.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",F=u?function If(r,i,o){if(In(r))return r.selectRootElement(i,o===pt.ShadowDom);let u="string"==typeof i?r.querySelector(i):i;return u.textContent="",u}(b,u,this.componentDef.encapsulation):jl(m.createRenderer(null,this.componentDef),N,function EI(r){const i=r.toLowerCase();return"svg"===i?"svg":"math"===i?"math":null}(N)),z=this.componentDef.onPush?576:528,ne=function uv(r,i){return{components:[],scheduler:r||tc,clean:zy,playerHandler:i||null,flags:0}}(),ye=fu(0,null,null,1,0,null,null,null,null,null),Le=Yd(null,ye,ne,z,null,null,m,b,w,h);let rt,ft;Zs(Le);try{const Dt=function Uf(r,i,o,u,c,h){const m=o[1];o[20]=r;const b=oc(m,20,2,"#host",null),N=b.mergedAttrs=i.hostAttrs;null!==N&&(Xd(b,N,!0),null!==r&&($n(c,r,N),null!==b.classes&&pf(c,r,b.classes),null!==b.styles&&Gl(c,r,b.styles)));const F=u.createRenderer(r,i),z=Yd(o,lc(i),null,i.onPush?64:16,o[20],b,u,F,h||null,null);return m.firstCreatePass&&(I(Ao(b,o),m,i.type),Tf(m,b),sg(b,o.length,1)),Mf(o,z),o[20]=z}(F,this.componentDef,Le,m,b);if(F)if(u)$n(b,F,["ng-version",k_.full]);else{const{attrs:Ke,classes:jt}=function M0(r){const i=[],o=[];let u=1,c=2;for(;u<r.length;){let h=r[u];if("string"==typeof h)2===c?""!==h&&i.push(h,r[++u]):8===c&&o.push(h);else{if(!uo(c))break;c=h}u++}return{attrs:i,classes:o}}(this.componentDef.selectors[0]);Ke&&$n(b,F,Ke),jt&&jt.length>0&&pf(b,F,jt.join(" "))}if(ft=Vt(ye,20),void 0!==o){const Ke=ft.projection=[];for(let jt=0;jt<this.ngContentSelectors.length;jt++){const Sn=o[jt];Ke.push(null!=Sn?Array.from(Sn):null)}}rt=function wg(r,i,o,u,c){const h=o[1],m=function G0(r,i,o){const u=On();r.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),Xl(r,u,i,ac(r,i,1,null),o));const c=lt(i,r,u.directiveStart,u);jr(c,i);const h=je(u,i);return h&&jr(h,i),c}(h,o,i);if(u.components.push(m),r[8]=m,c&&c.forEach(b=>b(m,i)),i.contentQueries){const b=On();i.contentQueries(1,m,b.directiveStart)}const w=On();return!h.firstCreatePass||null===i.hostBindings&&null===i.hostAttrs||(ji(w.index),Jl(o[1],w,0,w.directiveStart,w.directiveEnd,i),Vy(i,m)),m}(Dt,this.componentDef,Le,ne,[cv]),ll(ye,Le,null)}finally{Do()}return new DI(this.componentType,rt,_d(ft,Le),Le,ft)}}class DI extends class ew{}{constructor(i,o,u,c,h){super(),this.location=u,this._rootLView=c,this._tNode=h,this.instance=o,this.hostView=this.changeDetectorRef=new sw(c),this.componentType=i}get injector(){return new on(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(i){this.hostView.onDestroy(i)}}class Al{}class U_{}const wd=new Map;class j_ extends Al{constructor(i,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new F_(this);const u=sn(i);this._bootstrapComponents=Lo(u.bootstrap),this._r3Injector=hg(i,o,[{provide:Al,useValue:this},{provide:hp,useValue:this.componentFactoryResolver}],de(i)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(i)}get(i,o=Vo.THROW_IF_NOT_FOUND,u=Rt.Default){return i===Vo||i===Al||i===lg?this:this._r3Injector.get(i,o,u)}destroy(){const i=this._r3Injector;!i.destroyed&&i.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(i){this.destroyCbs.push(i)}}class mp extends U_{constructor(i){super(),this.moduleType=i,null!==sn(i)&&function gp(r){const i=new Set;!function o(u){const c=sn(u,!0),h=c.id;null!==h&&(function pa(r,i,o){if(i&&i!==o)throw new Error(`Duplicate module registered for ${r} - ${de(i)} vs ${de(i.name)}`)}(h,wd.get(h),u),wd.set(h,u));const m=Lo(c.imports);for(const w of m)i.has(w)||(i.add(w),o(w))}(r)}(i)}create(i){return new j_(this.moduleType,i)}}function wp(r){return i=>{setTimeout(r,void 0,i)}}const ga=class gw extends D.x{constructor(i=!1){super(),this.__isAsync=i}emit(i){super.next(i)}subscribe(i,o,u){var c,h,m;let w=i,b=o||(()=>null),N=u;if(i&&"object"==typeof i){const z=i;w=null===(c=z.next)||void 0===c?void 0:c.bind(z),b=null===(h=z.error)||void 0===h?void 0:h.bind(z),N=null===(m=z.complete)||void 0===m?void 0:m.bind(z)}this.__isAsync&&(b=wp(b),w&&(w=wp(w)),N&&(N=wp(N)));const F=super.subscribe({next:w,error:b,complete:N});return i instanceof H.w0&&i.add(F),F}};function Z_(){return this._results[sd()]()}class Nh{constructor(i=!1){this._emitDistinctChangesOnly=i,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=sd(),u=Nh.prototype;u[o]||(u[o]=Z_)}get changes(){return this._changes||(this._changes=new ga)}get(i){return this._results[i]}map(i){return this._results.map(i)}filter(i){return this._results.filter(i)}find(i){return this._results.find(i)}reduce(i,o){return this._results.reduce(i,o)}forEach(i){this._results.forEach(i)}some(i){return this._results.some(i)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(i,o){const u=this;u.dirty=!1;const c=gi(i);(this._changesDetected=!function Tu(r,i,o){if(r.length!==i.length)return!1;for(let u=0;u<r.length;u++){let c=r[u],h=i[u];if(o&&(c=o(c),h=o(h)),h!==c)return!1}return!0}(u._results,c,o))&&(u._results=c,u.length=c.length,u.last=c[this.length-1],u.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Id=(()=>{class r{}return r.__NG_ELEMENT_ID__=Nm,r})();const Ph=Id,mw=class extends Ph{constructor(i,o,u){super(),this._declarationLView=i,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(i){const o=this._declarationTContainer.tViews,u=Yd(this._declarationLView,o,i,16,null,o.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const h=this._declarationLView[19];return null!==h&&(u[19]=h.createEmbeddedView(o)),ll(o,u,i),new pp(u)}};function Nm(){return kh(On(),$e())}function kh(r,i){return 4&r.type?new mw(i,r,_d(r,i)):null}let Ip=(()=>{class r{}return r.__NG_ELEMENT_ID__=Pm,r})();function Pm(){return Q_(On(),$e())}const Y_=Ip,km=class extends Y_{constructor(i,o,u){super(),this._lContainer=i,this._hostTNode=o,this._hostLView=u}get element(){return _d(this._hostTNode,this._hostLView)}get injector(){return new on(this._hostTNode,this._hostLView)}get parentInjector(){const i=Js(this._hostTNode,this._hostLView);if(Hn(i)){const o=Gn(i,this._hostLView),u=Di(i);return new on(o[1].data[u+8],o)}return new on(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(i){const o=Dp(this._lContainer);return null!==o&&o[i]||null}get length(){return this._lContainer.length-10}createEmbeddedView(i,o,u){const c=i.createEmbeddedView(o||{});return this.insert(c,u),c}createComponent(i,o,u,c,h){const m=i&&!function ra(r){return"function"==typeof r}(i);let w;if(m)w=o;else{const z=o||{};w=z.index,u=z.injector,c=z.projectableNodes,h=z.ngModuleRef}const b=m?i:new L_(Nn(i)),N=u||this.parentInjector;if(!h&&null==b.ngModule){const ne=(m?N:this.parentInjector).get(Al,null);ne&&(h=ne)}const F=b.create(N,c,void 0,h);return this.insert(F.hostView,w),F}insert(i,o){const u=i._lView,c=u[1];if(function Bt(r){return ri(r[3])}(u)){const F=this.indexOf(i);if(-1!==F)this.detach(F);else{const z=u[3],ne=new km(z,z[6],z[3]);ne.detach(ne.indexOf(i))}}const h=this._adjustIndex(o),m=this._lContainer;!function ka(r,i,o,u){const c=10+u,h=o.length;u>0&&(o[c-1][4]=i),u<h-10?(i[4]=o[c],Ca(o,10+u,i)):(o.push(i),i[4]=null),i[3]=o;const m=i[17];null!==m&&o!==m&&function cf(r,i){const o=r[9];i[16]!==i[3][3][16]&&(r[2]=!0),null===o?r[9]=[i]:o.push(i)}(m,i);const w=i[19];null!==w&&w.insertView(r),i[2]|=128}(c,u,m,h);const w=Yr(h,m),b=u[11],N=df(b,m[7]);return null!==N&&function cu(r,i,o,u,c,h){u[0]=c,u[6]=i,Hl(r,u,o,1,c,h)}(c,m[6],b,u,N,w),i.attachToViewContainerRef(),Ca(Fm(m),h,i),i}move(i,o){return this.insert(i,o)}indexOf(i){const o=Dp(this._lContainer);return null!==o?o.indexOf(i):-1}remove(i){const o=this._adjustIndex(i,-1),u=lf(this._lContainer,o);u&&(Mo(Fm(this._lContainer),o),$p(u[1],u))}detach(i){const o=this._adjustIndex(i,-1),u=lf(this._lContainer,o);return u&&null!=Mo(Fm(this._lContainer),o)?new pp(u):null}_adjustIndex(i,o=0){return null==i?this.length+o:i}};function Dp(r){return r[8]}function Fm(r){return r[8]||(r[8]=[])}function Q_(r,i){let o;const u=i[r.index];if(ri(u))o=u;else{let c;if(8&r.type)c=A(u);else{const h=i[11];c=h.createComment("");const m=je(r,i);du(h,df(h,m),c,function cy(r,i){return In(r)?r.nextSibling(i):i.nextSibling}(h,m),!1)}i[r.index]=o=Jd(u,i,c,r),Mf(i,o)}return new km(o,r,i)}class Fh{constructor(i){this.queryList=i,this.matches=null}clone(){return new Fh(this.queryList)}setDirty(){this.queryList.setDirty()}}class Lh{constructor(i=[]){this.queries=i}createEmbeddedView(i){const o=i.queries;if(null!==o){const u=null!==i.contentQueries?i.contentQueries[0]:o.length,c=[];for(let h=0;h<u;h++){const m=o.getByIndex(h);c.push(this.queries[m.indexInDeclarationView].clone())}return new Lh(c)}return null}insertView(i){this.dirtyQueriesWithMatches(i)}detachView(i){this.dirtyQueriesWithMatches(i)}dirtyQueriesWithMatches(i){for(let o=0;o<this.queries.length;o++)null!==Sp(i,o).matches&&this.queries[o].setDirty()}}class Lm{constructor(i,o,u=null){this.predicate=i,this.flags=o,this.read=u}}class Um{constructor(i=[]){this.queries=i}elementStart(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(i,o)}elementEnd(i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(i)}embeddedTView(i){let o=null;for(let u=0;u<this.length;u++){const c=null!==o?o.length:0,h=this.getByIndex(u).embeddedTView(i,c);h&&(h.indexInDeclarationView=u,null!==o?o.push(h):o=[h])}return null!==o?new Um(o):null}template(i,o){for(let u=0;u<this.queries.length;u++)this.queries[u].template(i,o)}getByIndex(i){return this.queries[i]}get length(){return this.queries.length}track(i){this.queries.push(i)}}class Tp{constructor(i,o=-1){this.metadata=i,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(i,o){this.isApplyingToNode(o)&&this.matchTNode(i,o)}elementEnd(i){this._declarationNodeIndex===i.index&&(this._appliesToNextNode=!1)}template(i,o){this.elementStart(i,o)}embeddedTView(i,o){return this.isApplyingToNode(i)?(this.crossesNgTemplate=!0,this.addMatch(-i.index,o),new Tp(this.metadata)):null}isApplyingToNode(i){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let u=i.parent;for(;null!==u&&8&u.type&&u.index!==o;)u=u.parent;return o===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(i,o){const u=this.metadata.predicate;if(Array.isArray(u))for(let c=0;c<u.length;c++){const h=u[c];this.matchTNodeWithReadOption(i,o,Cp(o,h)),this.matchTNodeWithReadOption(i,o,xe(o,i,h,!1,!1))}else u===Id?4&o.type&&this.matchTNodeWithReadOption(i,o,-1):this.matchTNodeWithReadOption(i,o,xe(o,i,u,!1,!1))}matchTNodeWithReadOption(i,o,u){if(null!==u){const c=this.metadata.read;if(null!==c)if(c===Ed||c===Ip||c===Id&&4&o.type)this.addMatch(o.index,-2);else{const h=xe(o,i,c,!1,!1);null!==h&&this.addMatch(o.index,h)}else this.addMatch(o.index,u)}}addMatch(i,o){null===this.matches?this.matches=[i,o]:this.matches.push(i,o)}}function Cp(r,i){const o=r.localNames;if(null!==o)for(let u=0;u<o.length;u+=2)if(o[u]===i)return o[u+1];return null}function _w(r,i,o,u){return-1===o?function vw(r,i){return 11&r.type?_d(r,i):4&r.type?kh(r,i):null}(i,r):-2===o?function Ew(r,i,o){return o===Ed?_d(i,r):o===Id?kh(i,r):o===Ip?Q_(i,r):void 0}(r,i,u):lt(r,r[1],o,i)}function X_(r,i,o,u){const c=i[19].queries[u];if(null===c.matches){const h=r.data,m=o.matches,w=[];for(let b=0;b<m.length;b+=2){const N=m[b];w.push(N<0?null:_w(i,h[N],m[b+1],o.metadata.read))}c.matches=w}return c.matches}function Vm(r,i,o,u){const c=r.queries.getByIndex(o),h=c.matches;if(null!==h){const m=X_(r,i,c,o);for(let w=0;w<h.length;w+=2){const b=h[w];if(b>0)u.push(m[w/2]);else{const N=h[w+1],F=i[-b];for(let z=10;z<F.length;z++){const ne=F[z];ne[17]===ne[3]&&Vm(ne[1],ne,N,u)}if(null!==F[9]){const z=F[9];for(let ne=0;ne<z.length;ne++){const ye=z[ne];Vm(ye[1],ye,N,u)}}}}}return u}function e0(r){const i=$e(),o=en(),u=Cr();Da(u+1);const c=Sp(o,u);if(r.dirty&&Qt(i)===(2==(2&c.metadata.flags))){if(null===c.matches)r.reset([]);else{const h=c.crossesNgTemplate?Vm(o,i,u,[]):X_(o,i,c,u);r.reset(h,nw),r.notifyOnChanges()}return!0}return!1}function t0(r,i,o,u){const c=en();if(c.firstCreatePass){const h=On();(function Bm(r,i,o){null===r.queries&&(r.queries=new Um),r.queries.track(new Tp(i,o))})(c,new Lm(i,o,u),h.index),function r0(r,i){const o=r.contentQueries||(r.contentQueries=[]);i!==(o.length?o[o.length-1]:-1)&&o.push(r.queries.length-1,i)}(c,r),2==(2&o)&&(c.staticContentQueries=!0)}!function Uh(r,i,o){const u=new Nh(4==(4&o));Df(r,i,u,u.destroy),null===i[19]&&(i[19]=new Lh),i[19].queries.push(new Fh(u))}(c,$e(),o)}function n0(){return function Iw(r,i){return r[19].queries[i].queryList}($e(),Cr())}function Sp(r,i){return r.queries.getByIndex(i)}function Vh(...r){}const Xm=new Xt("Application Initializer");let ey=(()=>{class r{constructor(o){this.appInits=o,this.resolve=Vh,this.reject=Vh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const h=this.appInits[c]();if($g(h))o.push(h);else if(gu(h)){const m=new Promise((w,b)=>{h.subscribe({complete:w,error:b})});o.push(m)}}Promise.all(o).then(()=>{u()}).catch(c=>{this.reject(c)}),0===o.length&&u(),this.initialized=!0}}return r.\u0275fac=function(o){return new(o||r)(nt(Xm,8))},r.\u0275prov=pn({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const ty=new Xt("AppId",{providedIn:"root",factory:function ny(){return`${ry()}${ry()}${ry()}`}});function ry(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const iy=new Xt("Platform Initializer"),_0=new Xt("Platform ID"),E0=new Xt("appBootstrapListener");let I0=(()=>{class r{log(o){console.log(o)}warn(o){console.warn(o)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=pn({token:r,factory:r.\u0275fac}),r})();const sy=new Xt("LocaleId",{providedIn:"root",factory:()=>xt(sy,Rt.Optional|Rt.SkipSelf)||function FI(){return"undefined"!=typeof $localize&&$localize.locale||yu}()}),Fw=new Xt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class e{constructor(i,o){this.ngModuleFactory=i,this.componentFactories=o}}let t=(()=>{class r{compileModuleSync(o){return new mp(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const u=this.compileModuleSync(o),h=Lo(sn(o).declarations).reduce((m,w)=>{const b=Nn(w);return b&&m.push(new L_(b)),m},[]);return new e(u,h)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=pn({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const l=(()=>Promise.resolve(0))();function p(r){"undefined"==typeof Zone?l.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class S{constructor({enableLongStackTrace:i=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ga(!1),this.onMicrotaskEmpty=new ga(!1),this.onStable=new ga(!1),this.onError=new ga(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),i&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&o,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function E(){let r=an.requestAnimationFrame,i=an.cancelAnimationFrame;if("undefined"!=typeof Zone&&r&&i){const o=r[Zone.__symbol__("OriginalDelegate")];o&&(r=o);const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function Ee(r){const i=()=>{!function Q(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(an,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,Oe(r),r.isCheckStableRunning=!0,G(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),Oe(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,c,h,m,w)=>{try{return We(r),o.invokeTask(c,h,m,w)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||r.shouldCoalesceRunChangeDetection)&&i(),ht(r)}},onInvoke:(o,u,c,h,m,w,b)=>{try{return We(r),o.invoke(c,h,m,w,b)}finally{r.shouldCoalesceRunChangeDetection&&i(),ht(r)}},onHasTask:(o,u,c,h)=>{o.hasTask(c,h),u===c&&("microTask"==h.change?(r._hasPendingMicrotasks=h.microTask,Oe(r),G(r)):"macroTask"==h.change&&(r.hasPendingMacrotasks=h.macroTask))},onHandleError:(o,u,c,h)=>(o.handleError(c,h),r.runOutsideAngular(()=>r.onError.emit(h)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!S.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(S.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(i,o,u){return this._inner.run(i,o,u)}runTask(i,o,u,c){const h=this._inner,m=h.scheduleEventTask("NgZoneEvent: "+c,i,P,Vh,Vh);try{return h.runTask(m,o,u)}finally{h.cancelTask(m)}}runGuarded(i,o,u){return this._inner.runGuarded(i,o,u)}runOutsideAngular(i){return this._outer.run(i)}}const P={};function G(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function Oe(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function We(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function ht(r){r._nesting--,G(r)}class It{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ga,this.onMicrotaskEmpty=new ga,this.onStable=new ga,this.onError=new ga}run(i,o,u){return i.apply(o,u)}runGuarded(i,o,u){return i.apply(o,u)}runOutsideAngular(i){return i()}runTask(i,o,u,c){return i.apply(o,u)}}let En=(()=>{class r{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{S.assertNotInAngularZone(),p(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())p(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,c){let h=-1;u&&u>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==h),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:h,updateCb:c})}whenStable(o,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,u,c){return[]}}return r.\u0275fac=function(o){return new(o||r)(nt(S))},r.\u0275prov=pn({token:r,factory:r.\u0275fac}),r})(),zn=(()=>{class r{constructor(){this._applications=new Map,wn.addToWindow(this)}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return wn.findTestabilityInTree(this,o,u)}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=pn({token:r,factory:r.\u0275fac}),r})();class Un{addToWindow(i){}findTestabilityInTree(i,o,u){return null}}function vn(r){wn=r}let dn,wn=new Un;const VI=new Xt("AllowMultipleToken");class cD{constructor(i,o){this.name=i,this.token=o}}function BI(r,i,o=[]){const u=`Platform: ${i}`,c=new Xt(u);return(h=[])=>{let m=jI();if(!m||m.injector.get(VI,!1))if(r)r(o.concat(h).concat({provide:c,useValue:!0}));else{const w=o.concat(h).concat({provide:c,useValue:!0},{provide:eh,useValue:"platform"});!function lD(r){if(dn&&!dn.destroyed&&!dn.injector.get(VI,!1))throw new He(400,"");dn=r.get($I);const i=r.get(iy,null);i&&i.forEach(o=>o())}(Vo.create({providers:w,name:u}))}return function dD(r){const i=jI();if(!i)throw new He(401,"");return i}()}}function jI(){return dn&&!dn.destroyed?dn:null}let $I=(()=>{class r{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const w=function hD(r,i){let o;return o="noop"===r?new It:("zone.js"===r?void 0:r)||new S({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==i?void 0:i.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==i?void 0:i.ngZoneRunCoalescing)}),o}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),b=[{provide:S,useValue:w}];return w.run(()=>{const N=Vo.create({providers:b,parent:this.injector,name:o.moduleType.name}),F=o.create(N),z=F.injector.get(el,null);if(!z)throw new He(402,"");return w.runOutsideAngular(()=>{const ne=w.onError.subscribe({next:ye=>{z.handleError(ye)}});F.onDestroy(()=>{Uw(this._modules,F),ne.unsubscribe()})}),function fD(r,i,o){try{const u=o();return $g(u)?u.catch(c=>{throw i.runOutsideAngular(()=>r.handleError(c)),c}):u}catch(u){throw i.runOutsideAngular(()=>r.handleError(u)),u}}(z,w,()=>{const ne=F.injector.get(ey);return ne.runInitializers(),ne.donePromise.then(()=>(function lp(r){nn(r,"Expected localeId to be defined"),"string"==typeof r&&(vh=r.toLowerCase().replace(/_/g,"-"))}(F.injector.get(sy,yu)||yu),this._moduleDoBootstrap(F),F))})})}bootstrapModule(o,u=[]){const c=HI({},u);return function Ds(r,i,o){const u=new mp(o);return Promise.resolve(u)}(0,0,o).then(h=>this.bootstrapModuleFactory(h,c))}_moduleDoBootstrap(o){const u=o.injector.get(Lw);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!o.instance.ngDoBootstrap)throw new He(403,"");o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new He(404,"");this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(o){return new(o||r)(nt(Vo))},r.\u0275prov=pn({token:r,factory:r.\u0275fac}),r})();function HI(r,i){return Array.isArray(i)?i.reduce(HI,r):Object.assign(Object.assign({},r),i)}let Lw=(()=>{class r{constructor(o,u,c,h,m){this._zone=o,this._injector=u,this._exceptionHandler=c,this._componentFactoryResolver=h,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new $.y(N=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{N.next(this._stable),N.complete()})}),b=new $.y(N=>{let F;this._zone.runOutsideAngular(()=>{F=this._zone.onStable.subscribe(()=>{S.assertNotInAngularZone(),p(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,N.next(!0))})})});const z=this._zone.onUnstable.subscribe(()=>{S.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{N.next(!1)}))});return()=>{F.unsubscribe(),z.unsubscribe()}});this.isStable=(0,fe.T)(w,b.pipe((0,ae.B)()))}bootstrap(o,u){if(!this._initStatus.done)throw new He(405,"");let c;c=o instanceof R_?o:this._componentFactoryResolver.resolveComponentFactory(o),this.componentTypes.push(c.componentType);const h=function uD(r){return r.isBoundToModule}(c)?void 0:this._injector.get(Al),w=c.create(Vo.NULL,[],u||c.selector,h),b=w.location.nativeElement,N=w.injector.get(En,null),F=N&&w.injector.get(zn);return N&&F&&F.registerApplication(b,N),w.onDestroy(()=>{this.detachView(w.hostView),Uw(this.components,w),F&&F.unregisterApplication(b)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new He(101,"");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;Uw(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(E0,[]).concat(this._bootstrapListeners).forEach(c=>c(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return r.\u0275fac=function(o){return new(o||r)(nt(S),nt(Vo),nt(el),nt(hp),nt(ey))},r.\u0275prov=pn({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function Uw(r,i){const o=r.indexOf(i);o>-1&&r.splice(o,1)}let zI=!0,WI=!1;function gD(){return WI=!0,zI}function mD(){if(WI)throw new Error("Cannot enable prod mode after platform setup.");zI=!1}let yD=(()=>{class r{}return r.__NG_ELEMENT_ID__=vD,r})();function vD(r){return function _D(r,i,o){if(Pi(r)&&!o){const u=$t(r.index,i);return new pp(u,u)}return 47&r.type?new pp(i[16],i):null}(On(),$e(),16==(16&r))}class YI{constructor(){}supports(i){return gl(i)}create(i){return new TD(i)}}const bD=(r,i)=>i;class TD{constructor(i){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=i||bD}forEachItem(i){let o;for(o=this._itHead;null!==o;o=o._next)i(o)}forEachOperation(i){let o=this._itHead,u=this._removalsHead,c=0,h=null;for(;o||u;){const m=!u||o&&o.currentIndex<JI(u,c,h)?o:u,w=JI(m,c,h),b=m.currentIndex;if(m===u)c--,u=u._nextRemoved;else if(o=o._next,null==m.previousIndex)c++;else{h||(h=[]);const N=w-c,F=b-c;if(N!=F){for(let ne=0;ne<N;ne++){const ye=ne<h.length?h[ne]:h[ne]=0,Le=ye+ne;F<=Le&&Le<N&&(h[ne]=ye+1)}h[m.previousIndex]=F-N}}w!==b&&i(m,w,b)}}forEachPreviousItem(i){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachMovedItem(i){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}forEachIdentityChange(i){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)i(o)}diff(i){if(null==i&&(i=[]),!gl(i))throw new He(900,"");return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let c,h,m,o=this._itHead,u=!1;if(Array.isArray(i)){this.length=i.length;for(let w=0;w<this.length;w++)h=i[w],m=this._trackByFn(w,h),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,h,m,w)),Object.is(o.item,h)||this._addIdentityChange(o,h)):(o=this._mismatch(o,h,m,w),u=!0),o=o._next}else c=0,function bg(r,i){if(Array.isArray(r))for(let o=0;o<r.length;o++)i(r[o]);else{const o=r[sd()]();let u;for(;!(u=o.next()).done;)i(u.value)}}(i,w=>{m=this._trackByFn(c,w),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,w,m,c)),Object.is(o.item,w)||this._addIdentityChange(o,w)):(o=this._mismatch(o,w,m,c),u=!0),o=o._next,c++}),this.length=c;return this._truncate(o),this.collection=i,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let i;for(i=this._previousItHead=this._itHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._additionsHead;null!==i;i=i._nextAdded)i.previousIndex=i.currentIndex;for(this._additionsHead=this._additionsTail=null,i=this._movesHead;null!==i;i=i._nextMoved)i.previousIndex=i.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(i,o,u,c){let h;return null===i?h=this._itTail:(h=i._prev,this._remove(i)),null!==(i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._reinsertAfter(i,h,c)):null!==(i=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(i.item,o)||this._addIdentityChange(i,o),this._moveAfter(i,h,c)):i=this._addAfter(new CD(o,u),h,c),i}_verifyReinsertion(i,o,u,c){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==h?i=this._reinsertAfter(h,i._prev,c):i.currentIndex!=c&&(i.currentIndex=c,this._addToMoves(i,c)),i}_truncate(i){for(;null!==i;){const o=i._next;this._addToRemovals(this._unlink(i)),i=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(i,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(i);const c=i._prevRemoved,h=i._nextRemoved;return null===c?this._removalsHead=h:c._nextRemoved=h,null===h?this._removalsTail=c:h._prevRemoved=c,this._insertAfter(i,o,u),this._addToMoves(i,u),i}_moveAfter(i,o,u){return this._unlink(i),this._insertAfter(i,o,u),this._addToMoves(i,u),i}_addAfter(i,o,u){return this._insertAfter(i,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=i:this._additionsTail._nextAdded=i,i}_insertAfter(i,o,u){const c=null===o?this._itHead:o._next;return i._next=c,i._prev=o,null===c?this._itTail=i:c._prev=i,null===o?this._itHead=i:o._next=i,null===this._linkedRecords&&(this._linkedRecords=new QI),this._linkedRecords.put(i),i.currentIndex=u,i}_remove(i){return this._addToRemovals(this._unlink(i))}_unlink(i){null!==this._linkedRecords&&this._linkedRecords.remove(i);const o=i._prev,u=i._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,i}_addToMoves(i,o){return i.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=i:this._movesTail._nextMoved=i),i}_addToRemovals(i){return null===this._unlinkedRecords&&(this._unlinkedRecords=new QI),this._unlinkedRecords.put(i),i.currentIndex=null,i._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=i,i._prevRemoved=null):(i._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=i),i}_addIdentityChange(i,o){return i.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=i:this._identityChangesTail._nextIdentityChange=i,i}}class CD{constructor(i,o){this.item=i,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class SD{constructor(){this._head=null,this._tail=null}add(i){null===this._head?(this._head=this._tail=i,i._nextDup=null,i._prevDup=null):(this._tail._nextDup=i,i._prevDup=this._tail,i._nextDup=null,this._tail=i)}get(i,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,i))return u;return null}remove(i){const o=i._prevDup,u=i._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class QI{constructor(){this.map=new Map}put(i){const o=i.trackById;let u=this.map.get(o);u||(u=new SD,this.map.set(o,u)),u.add(i)}get(i,o){const c=this.map.get(i);return c?c.get(i,o):null}remove(i){const o=i.trackById;return this.map.get(o).remove(i)&&this.map.delete(o),i}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function JI(r,i,o){const u=r.previousIndex;if(null===u)return u;let c=0;return o&&u<o.length&&(c=o[u]),u+i+c}class XI{constructor(){}supports(i){return i instanceof Map||ad(i)}create(){return new AD}}class AD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(i){let o;for(o=this._mapHead;null!==o;o=o._next)i(o)}forEachPreviousItem(i){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)i(o)}forEachChangedItem(i){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)i(o)}forEachAddedItem(i){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)i(o)}forEachRemovedItem(i){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)i(o)}diff(i){if(i){if(!(i instanceof Map||ad(i)))throw new He(900,"")}else i=new Map;return this.check(i)?this:null}onDestroy(){}check(i){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(i,(u,c)=>{if(o&&o.key===c)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const h=this._getOrCreateRecordForKey(c,u);o=this._insertBeforeOrAppend(o,h)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(i,o){if(i){const u=i._prev;return o._next=i,o._prev=u,i._prev=o,u&&(u._next=o),i===this._mapHead&&(this._mapHead=o),this._appendAfter=i,i}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(i,o){if(this._records.has(i)){const c=this._records.get(i);this._maybeAddToChanges(c,o);const h=c._prev,m=c._next;return h&&(h._next=m),m&&(m._prev=h),c._next=null,c._prev=null,c}const u=new xD(i);return this._records.set(i,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let i;for(this._previousMapHead=this._mapHead,i=this._previousMapHead;null!==i;i=i._next)i._nextPrevious=i._next;for(i=this._changesHead;null!==i;i=i._nextChanged)i.previousValue=i.currentValue;for(i=this._additionsHead;null!=i;i=i._nextAdded)i.previousValue=i.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(i,o){Object.is(o,i.currentValue)||(i.previousValue=i.currentValue,i.currentValue=o,this._addToChanges(i))}_addToAdditions(i){null===this._additionsHead?this._additionsHead=this._additionsTail=i:(this._additionsTail._nextAdded=i,this._additionsTail=i)}_addToChanges(i){null===this._changesHead?this._changesHead=this._changesTail=i:(this._changesTail._nextChanged=i,this._changesTail=i)}_forEach(i,o){i instanceof Map?i.forEach(o):Object.keys(i).forEach(u=>o(i[u],u))}}class xD{constructor(i){this.key=i,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function eD(){return new Hw([new YI])}let Hw=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(null!=u){const c=u.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||eD()),deps:[[r,new gt,new mi]]}}find(o){const u=this.factories.find(c=>c.supports(o));if(null!=u)return u;throw new He(901,"")}}return r.\u0275prov=pn({token:r,providedIn:"root",factory:eD}),r})();function tD(){return new Gw([new XI])}let Gw=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(u){const c=u.factories.slice();o=o.concat(c)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||tD()),deps:[[r,new gt,new mi]]}}find(o){const u=this.factories.find(h=>h.supports(o));if(u)return u;throw new He(901,"")}}return r.\u0275prov=pn({token:r,providedIn:"root",factory:tD}),r})();const OD=BI(null,"core",[{provide:_0,useValue:"unknown"},{provide:$I,deps:[Vo]},{provide:zn,deps:[]},{provide:I0,deps:[]}]);let ND=(()=>{class r{constructor(o){}}return r.\u0275fac=function(o){return new(o||r)(nt(Lw))},r.\u0275mod=Lr({type:r}),r.\u0275inj=zt({}),r})()},5839:(st,we,k)=>{k.d(we,{F0:()=>fn,Bz:()=>Di,lC:()=>_o});var D=k(5e3),H=k(7579);class $ extends H.x{constructor(_){super(),this._value=_}get value(){return this.getValue()}_subscribe(_){const y=super._subscribe(_);return!y.closed&&_.next(this._value),y}getValue(){const{hasError:_,thrownError:y,_value:C}=this;if(_)throw y;return this._throwIfClosed(),C}next(_){super.next(this._value=_)}}var fe=k(8306),ae=k(4742),le=k(8996),ce=k(4671),de=k(3268),ve=k(7669),J=k(1810),Z=k(5403),pe=k(9672);function He(I,_,y){I?(0,pe.f)(y,I,_):_()}var Je=k(576);function Ce(I,_){const y=(0,Je.m)(I)?I:()=>I,C=R=>R.error(y());return new fe.y(_?R=>_.schedule(C,0,R):C)}var Pe=k(8421);function ot(I){return new fe.y(_=>{(0,Pe.Xf)(I()).subscribe(_)})}var ct=k(727),Ue=k(4482);function Ne(){return(0,Ue.e)((I,_)=>{let y=null;I._refCount++;const C=(0,Z.x)(_,void 0,void 0,void 0,()=>{if(!I||I._refCount<=0||0<--I._refCount)return void(y=null);const R=I._connection,V=y;y=null,R&&(!V||R===V)&&R.unsubscribe(),_.unsubscribe()});I.subscribe(C),C.closed||(y=I.connect())})}class ke extends fe.y{constructor(_,y){super(),this.source=_,this.subjectFactory=y,this._subject=null,this._refCount=0,this._connection=null,(0,Ue.A)(_)&&(this.lift=_.lift)}_subscribe(_){return this.getSubject().subscribe(_)}getSubject(){const _=this._subject;return(!_||_.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:_}=this;this._subject=this._connection=null,null==_||_.unsubscribe()}connect(){let _=this._connection;if(!_){_=this._connection=new ct.w0;const y=this.getSubject();_.add(this.source.subscribe((0,Z.x)(y,void 0,()=>{this._teardown(),y.complete()},C=>{this._teardown(),y.error(C)},()=>this._teardown()))),_.closed&&(this._connection=null,_=ct.w0.EMPTY)}return _}refCount(){return Ne()(this)}}var Fe=k(9646),tt=k(6805),ee=k(7272),Re=k(515);function ie(I){return(0,Ue.e)((_,y)=>{let V,C=null,R=!1;C=_.subscribe((0,Z.x)(y,void 0,void 0,W=>{V=(0,Pe.Xf)(I(W,ie(I)(_))),C?(C.unsubscribe(),C=null,V.subscribe(y)):R=!0})),R&&(C.unsubscribe(),C=null,V.subscribe(y))})}var ge=k(5577);function me(I,_){return(0,Je.m)(_)?(0,ge.z)(I,_,1):(0,ge.z)(I,1)}var Se=k(9300);function Ie(I){return I<=0?()=>Re.E:(0,Ue.e)((_,y)=>{let C=[];_.subscribe((0,Z.x)(y,R=>{C.push(R),I<C.length&&C.shift()},()=>{for(const R of C)y.next(R);y.complete()},void 0,()=>{C=null}))})}var Ye=k(8068),bt=k(6590),Qe=k(4004),rn=k(3900),Wn=k(5698),An=k(8675),pn=k(5026),ar=k(590),zt=k(8505),Yt=k(8189),fr=k(9808);class Qn{constructor(_,y){this.id=_,this.url=y}}class wr extends Qn{constructor(_,y,C="imperative",R=null){super(_,y),this.navigationTrigger=C,this.restoredState=R}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class pr extends Qn{constructor(_,y,C){super(_,y),this.urlAfterRedirects=C}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class _i extends Qn{constructor(_,y,C){super(_,y),this.reason=C}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class us extends Qn{constructor(_,y,C){super(_,y),this.error=C}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class li extends Qn{constructor(_,y,C,R){super(_,y),this.urlAfterRedirects=C,this.state=R}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mi extends Qn{constructor(_,y,C,R){super(_,y),this.urlAfterRedirects=C,this.state=R}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rt extends Qn{constructor(_,y,C,R,V){super(_,y),this.urlAfterRedirects=C,this.state=R,this.shouldActivate=V}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ei extends Qn{constructor(_,y,C,R){super(_,y),this.urlAfterRedirects=C,this.state=R}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jn extends Qn{constructor(_,y,C,R){super(_,y),this.urlAfterRedirects=C,this.state=R}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kn{constructor(_){this.route=_}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class cs{constructor(_){this.route=_}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class di{constructor(_){this.snapshot=_}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sr{constructor(_){this.snapshot=_}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gr{constructor(_){this.snapshot=_}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hi{constructor(_){this.snapshot=_}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $r{constructor(_,y,C){this.routerEvent=_,this.position=y,this.anchor=C}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const pt="primary";class wt{constructor(_){this.params=_||{}}has(_){return Object.prototype.hasOwnProperty.call(this.params,_)}get(_){if(this.has(_)){const y=this.params[_];return Array.isArray(y)?y[0]:y}return null}getAll(_){if(this.has(_)){const y=this.params[_];return Array.isArray(y)?y:[y]}return[]}get keys(){return Object.keys(this.params)}}function Tt(I){return new wt(I)}const Ir="ngNavigationCancelingError";function Jr(I){const _=Error("NavigationCancelingError: "+I);return _[Ir]=!0,_}function js(I,_,y){const C=y.path.split("/");if(C.length>I.length||"full"===y.pathMatch&&(_.hasChildren()||C.length<I.length))return null;const R={};for(let V=0;V<C.length;V++){const W=C[V],X=I[V];if(W.startsWith(":"))R[W.substring(1)]=X;else if(W!==X.path)return null}return{consumed:I.slice(0,C.length),posParams:R}}function Vn(I,_){const y=I?Object.keys(I):void 0,C=_?Object.keys(_):void 0;if(!y||!C||y.length!=C.length)return!1;let R;for(let V=0;V<y.length;V++)if(R=y[V],!q(I[R],_[R]))return!1;return!0}function q(I,_){if(Array.isArray(I)&&Array.isArray(_)){if(I.length!==_.length)return!1;const y=[...I].sort(),C=[..._].sort();return y.every((R,V)=>C[V]===R)}return I===_}function re(I){return Array.prototype.concat.apply([],I)}function oe(I){return I.length>0?I[I.length-1]:null}function Y(I,_){for(const y in I)I.hasOwnProperty(y)&&_(I[y],y)}function he(I){return(0,D.CqO)(I)?I:(0,D.QGY)(I)?(0,le.D)(Promise.resolve(I)):(0,Fe.of)(I)}const yt={exact:function Ut(I,_,y){if(!qn(I.segments,_.segments)||!Wi(I.segments,_.segments,y)||I.numberOfChildren!==_.numberOfChildren)return!1;for(const C in _.children)if(!I.children[C]||!Ut(I.children[C],_.children[C],y))return!1;return!0},subset:Lr},St={exact:function Bn(I,_){return Vn(I,_)},subset:function Dr(I,_){return Object.keys(_).length<=Object.keys(I).length&&Object.keys(_).every(y=>q(I[y],_[y]))},ignored:()=>!0};function Lt(I,_,y){return yt[y.paths](I.root,_.root,y.matrixParams)&&St[y.queryParams](I.queryParams,_.queryParams)&&!("exact"===y.fragment&&I.fragment!==_.fragment)}function Lr(I,_,y){return jo(I,_,_.segments,y)}function jo(I,_,y,C){if(I.segments.length>y.length){const R=I.segments.slice(0,y.length);return!(!qn(R,y)||_.hasChildren()||!Wi(R,y,C))}if(I.segments.length===y.length){if(!qn(I.segments,y)||!Wi(I.segments,y,C))return!1;for(const R in _.children)if(!I.children[R]||!Lr(I.children[R],_.children[R],C))return!1;return!0}{const R=y.slice(0,I.segments.length),V=y.slice(I.segments.length);return!!(qn(I.segments,R)&&Wi(I.segments,R,C)&&I.children[pt])&&jo(I.children[pt],_,V,C)}}function Wi(I,_,y){return _.every((C,R)=>St[y](I[R].parameters,C.parameters))}class Xn{constructor(_,y,C){this.root=_,this.queryParams=y,this.fragment=C}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Tt(this.queryParams)),this._queryParamMap}toString(){return ls.serialize(this)}}class qt{constructor(_,y){this.segments=_,this.children=y,this.parent=null,Y(y,(C,R)=>C.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ri(this)}}class Nn{constructor(_,y){this.path=_,this.parameters=y}get parameterMap(){return this._parameterMap||(this._parameterMap=Tt(this.parameters)),this._parameterMap}toString(){return Hr(this)}}function qn(I,_){return I.length===_.length&&I.every((y,C)=>y.path===_[C].path)}class Ar{}class $o{parse(_){const y=new Oi(_);return new Xn(y.parseRootSegment(),y.parseQueryParams(),y.parseFragment())}serialize(_){const y=`/${Pn(_.root,!0)}`,C=function Rn(I){const _=Object.keys(I).map(y=>{const C=I[y];return Array.isArray(C)?C.map(R=>`${Ki(y)}=${Ki(R)}`).join("&"):`${Ki(y)}=${Ki(C)}`}).filter(y=>!!y);return _.length?`?${_.join("&")}`:""}(_.queryParams);return`${y}${C}${"string"==typeof _.fragment?`#${function Xr(I){return encodeURI(I)}(_.fragment)}`:""}`}}const ls=new $o;function Ri(I){return I.segments.map(_=>Hr(_)).join("/")}function Pn(I,_){if(!I.hasChildren())return Ri(I);if(_){const y=I.children[pt]?Pn(I.children[pt],!1):"",C=[];return Y(I.children,(R,V)=>{V!==pt&&C.push(`${V}:${Pn(R,!1)}`)}),C.length>0?`${y}(${C.join("//")})`:y}{const y=function sn(I,_){let y=[];return Y(I.children,(C,R)=>{R===pt&&(y=y.concat(_(C,R)))}),Y(I.children,(C,R)=>{R!==pt&&(y=y.concat(_(C,R)))}),y}(I,(C,R)=>R===pt?[Pn(I.children[pt],!1)]:[`${R}:${Pn(C,!1)}`]);return 1===Object.keys(I.children).length&&null!=I.children[pt]?`${Ri(I)}/${y[0]}`:`${Ri(I)}/(${y.join("//")})`}}function cr(I){return encodeURIComponent(I).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ki(I){return cr(I).replace(/%3B/gi,";")}function at(I){return cr(I).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Et(I){return decodeURIComponent(I)}function bn(I){return Et(I.replace(/\+/g,"%20"))}function Hr(I){return`${at(I.path)}${function Ae(I){return Object.keys(I).map(_=>`;${at(_)}=${at(I[_])}`).join("")}(I.parameters)}`}const ei=/^[^\/()?;=#]+/;function un(I){const _=I.match(ei);return _?_[0]:""}const Pt=/^[^=?&#]+/,Ot=/^[^&#]+/;class Oi{constructor(_){this.url=_,this.remaining=_}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new qt([],{}):new qt([],this.parseChildren())}parseQueryParams(){const _={};if(this.consumeOptional("?"))do{this.parseQueryParam(_)}while(this.consumeOptional("&"));return _}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const _=[];for(this.peekStartsWith("(")||_.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),_.push(this.parseSegment());let y={};this.peekStartsWith("/(")&&(this.capture("/"),y=this.parseParens(!0));let C={};return this.peekStartsWith("(")&&(C=this.parseParens(!1)),(_.length>0||Object.keys(y).length>0)&&(C[pt]=new qt(_,y)),C}parseSegment(){const _=un(this.remaining);if(""===_&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(_),new Nn(Et(_),this.parseMatrixParams())}parseMatrixParams(){const _={};for(;this.consumeOptional(";");)this.parseParam(_);return _}parseParam(_){const y=un(this.remaining);if(!y)return;this.capture(y);let C="";if(this.consumeOptional("=")){const R=un(this.remaining);R&&(C=R,this.capture(C))}_[Et(y)]=Et(C)}parseQueryParam(_){const y=function er(I){const _=I.match(Pt);return _?_[0]:""}(this.remaining);if(!y)return;this.capture(y);let C="";if(this.consumeOptional("=")){const W=function dt(I){const _=I.match(Ot);return _?_[0]:""}(this.remaining);W&&(C=W,this.capture(C))}const R=bn(y),V=bn(C);if(_.hasOwnProperty(R)){let W=_[R];Array.isArray(W)||(W=[W],_[R]=W),W.push(V)}else _[R]=V}parseParens(_){const y={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const C=un(this.remaining),R=this.remaining[C.length];if("/"!==R&&")"!==R&&";"!==R)throw new Error(`Cannot parse url '${this.url}'`);let V;C.indexOf(":")>-1?(V=C.substr(0,C.indexOf(":")),this.capture(V),this.capture(":")):_&&(V=pt);const W=this.parseChildren();y[V]=1===Object.keys(W).length?W[pt]:new qt([],W),this.consumeOptional("//")}return y}peekStartsWith(_){return this.remaining.startsWith(_)}consumeOptional(_){return!!this.peekStartsWith(_)&&(this.remaining=this.remaining.substring(_.length),!0)}capture(_){if(!this.consumeOptional(_))throw new Error(`Expected "${_}".`)}}class Nt{constructor(_){this._root=_}get root(){return this._root.value}parent(_){const y=this.pathFromRoot(_);return y.length>1?y[y.length-2]:null}children(_){const y=ti(_,this._root);return y?y.children.map(C=>C.value):[]}firstChild(_){const y=ti(_,this._root);return y&&y.children.length>0?y.children[0].value:null}siblings(_){const y=tr(_,this._root);return y.length<2?[]:y[y.length-2].children.map(R=>R.value).filter(R=>R!==_)}pathFromRoot(_){return tr(_,this._root).map(y=>y.value)}}function ti(I,_){if(I===_.value)return _;for(const y of _.children){const C=ti(I,y);if(C)return C}return null}function tr(I,_){if(I===_.value)return[_];for(const y of _.children){const C=tr(I,y);if(C.length)return C.unshift(_),C}return[]}class lr{constructor(_,y){this.value=_,this.children=y}toString(){return`TreeNode(${this.value})`}}function ni(I){const _={};return I&&I.children.forEach(y=>_[y.value.outlet]=y),_}class dr extends Nt{constructor(_,y){super(_),this.snapshot=y,fi(this,_)}toString(){return this.snapshot.toString()}}function Tn(I,_){const y=function Ho(I,_){const W=new jn([],{},{},"",{},pt,_,null,I.root,-1,{});return new Pi("",new lr(W,[]))}(I,_),C=new $([new Nn("",{})]),R=new $({}),V=new $({}),W=new $({}),X=new $(""),xe=new Ni(C,R,W,X,V,pt,_,y.root);return xe.snapshot=y.root,new dr(new lr(xe,[]),y)}class Ni{constructor(_,y,C,R,V,W,X,xe){this.url=_,this.params=y,this.queryParams=C,this.fragment=R,this.data=V,this.outlet=W,this.component=X,this._futureSnapshot=xe}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Qe.U)(_=>Tt(_)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Qe.U)(_=>Tt(_)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function _n(I,_="emptyOnly"){const y=I.pathFromRoot;let C=0;if("always"!==_)for(C=y.length-1;C>=1;){const R=y[C],V=y[C-1];if(R.routeConfig&&""===R.routeConfig.path)C--;else{if(V.component)break;C--}}return function ri(I){return I.reduce((_,y)=>({params:Object.assign(Object.assign({},_.params),y.params),data:Object.assign(Object.assign({},_.data),y.data),resolve:Object.assign(Object.assign({},_.resolve),y._resolvedData)}),{params:{},data:{},resolve:{}})}(y.slice(C))}class jn{constructor(_,y,C,R,V,W,X,xe,lt,Jt,vt){this.url=_,this.params=y,this.queryParams=C,this.fragment=R,this.data=V,this.outlet=W,this.component=X,this.routeConfig=xe,this._urlSegment=lt,this._lastPathIndex=Jt,this._resolve=vt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Tt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Tt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(C=>C.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Pi extends Nt{constructor(_,y){super(y),this.url=_,fi(this,y)}toString(){return wi(this._root)}}function fi(I,_){_.value._routerState=I,_.children.forEach(y=>fi(I,y))}function wi(I){const _=I.children.length>0?` { ${I.children.map(wi).join(", ")} } `:"";return`${I.value}${_}`}function $s(I){if(I.snapshot){const _=I.snapshot,y=I._futureSnapshot;I.snapshot=y,Vn(_.queryParams,y.queryParams)||I.queryParams.next(y.queryParams),_.fragment!==y.fragment&&I.fragment.next(y.fragment),Vn(_.params,y.params)||I.params.next(y.params),function Fr(I,_){if(I.length!==_.length)return!1;for(let y=0;y<I.length;++y)if(!Vn(I[y],_[y]))return!1;return!0}(_.url,y.url)||I.url.next(y.url),Vn(_.data,y.data)||I.data.next(y.data)}else I.snapshot=I._futureSnapshot,I.data.next(I._futureSnapshot.data)}function ma(I,_){const y=Vn(I.params,_.params)&&function ur(I,_){return qn(I,_)&&I.every((y,C)=>Vn(y.parameters,_[C].parameters))}(I.url,_.url);return y&&!(!I.parent!=!_.parent)&&(!I.parent||ma(I.parent,_.parent))}function nr(I,_,y){if(y&&I.shouldReuseRoute(_.value,y.value.snapshot)){const C=y.value;C._futureSnapshot=_.value;const R=function ki(I,_,y){return _.children.map(C=>{for(const R of y.children)if(I.shouldReuseRoute(C.value,R.value.snapshot))return nr(I,C,R);return nr(I,C)})}(I,_,y);return new lr(C,R)}{if(I.shouldAttach(_.value)){const V=I.retrieve(_.value);if(null!==V){const W=V.route;return W.value._futureSnapshot=_.value,W.children=_.children.map(X=>nr(I,X)),W}}const C=function mo(I){return new Ni(new $(I.url),new $(I.params),new $(I.queryParams),new $(I.fragment),new $(I.data),I.outlet,I.component,I)}(_.value),R=_.children.map(V=>nr(I,V));return new lr(C,R)}}function xn(I){return"object"==typeof I&&null!=I&&!I.outlets&&!I.segmentPath}function Hs(I){return"object"==typeof I&&null!=I&&I.outlets}function mr(I,_,y,C,R){let V={};if(C&&Y(C,(X,xe)=>{V[xe]=Array.isArray(X)?X.map(lt=>`${lt}`):`${X}`}),I===_)return new Xn(y,V,R);const W=yo(I,_,y);return new Xn(W,V,R)}function yo(I,_,y){const C={};return Y(I.children,(R,V)=>{C[V]=R===_?y:yo(R,_,y)}),new qt(I.segments,C)}class Fi{constructor(_,y,C){if(this.isAbsolute=_,this.numberOfDoubleDots=y,this.commands=C,_&&C.length>0&&xn(C[0]))throw new Error("Root segment cannot have matrix parameters");const R=C.find(Hs);if(R&&R!==oe(C))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class vo{constructor(_,y,C){this.segmentGroup=_,this.processChildren=y,this.index=C}}function bs(I,_,y){if(I||(I=new qt([],{})),0===I.segments.length&&I.hasChildren())return zo(I,_,y);const C=function Li(I,_,y){let C=0,R=_;const V={match:!1,pathIndex:0,commandIndex:0};for(;R<I.segments.length;){if(C>=y.length)return V;const W=I.segments[R],X=y[C];if(Hs(X))break;const xe=`${X}`,lt=C<y.length-1?y[C+1]:null;if(R>0&&void 0===xe)break;if(xe&&lt&&"object"==typeof lt&&void 0===lt.outlets){if(!xr(xe,lt,W))return V;C+=2}else{if(!xr(xe,{},W))return V;C++}R++}return{match:!0,pathIndex:R,commandIndex:C}}(I,_,y),R=y.slice(C.commandIndex);if(C.match&&C.pathIndex<I.segments.length){const V=new qt(I.segments.slice(0,C.pathIndex),{});return V.children[pt]=new qt(I.segments.slice(C.pathIndex),I.children),zo(V,0,R)}return C.match&&0===R.length?new qt(I.segments,{}):C.match&&!I.hasChildren()?Ts(I,_,y):C.match?zo(I,0,R):Ts(I,_,y)}function zo(I,_,y){if(0===y.length)return new qt(I.segments,{});{const C=function Go(I){return Hs(I[0])?I[0].outlets:{[pt]:I}}(y),R={};return Y(C,(V,W)=>{"string"==typeof V&&(V=[V]),null!==V&&(R[W]=bs(I.children[W],_,V))}),Y(I.children,(V,W)=>{void 0===C[W]&&(R[W]=V)}),new qt(I.segments,R)}}function Ts(I,_,y){const C=I.segments.slice(0,_);let R=0;for(;R<y.length;){const V=y[R];if(Hs(V)){const xe=Wo(V.outlets);return new qt(C,xe)}if(0===R&&xn(y[0])){C.push(new Nn(I.segments[_].path,Ko(y[0]))),R++;continue}const W=Hs(V)?V.outlets[pt]:`${V}`,X=R<y.length-1?y[R+1]:null;W&&X&&xn(X)?(C.push(new Nn(W,Ko(X))),R+=2):(C.push(new Nn(W,{})),R++)}return new qt(C,{})}function Wo(I){const _={};return Y(I,(y,C)=>{"string"==typeof y&&(y=[y]),null!==y&&(_[C]=Ts(new qt([],{}),0,y))}),_}function Ko(I){const _={};return Y(I,(y,C)=>_[C]=`${y}`),_}function xr(I,_,y){return I==y.path&&Vn(_,y.parameters)}class ii{constructor(_,y,C,R){this.routeReuseStrategy=_,this.futureState=y,this.currState=C,this.forwardEvent=R}activate(_){const y=this.futureState._root,C=this.currState?this.currState._root:null;this.deactivateChildRoutes(y,C,_),$s(this.futureState.root),this.activateChildRoutes(y,C,_)}deactivateChildRoutes(_,y,C){const R=ni(y);_.children.forEach(V=>{const W=V.value.outlet;this.deactivateRoutes(V,R[W],C),delete R[W]}),Y(R,(V,W)=>{this.deactivateRouteAndItsChildren(V,C)})}deactivateRoutes(_,y,C){const R=_.value,V=y?y.value:null;if(R===V)if(R.component){const W=C.getContext(R.outlet);W&&this.deactivateChildRoutes(_,y,W.children)}else this.deactivateChildRoutes(_,y,C);else V&&this.deactivateRouteAndItsChildren(y,C)}deactivateRouteAndItsChildren(_,y){_.value.component&&this.routeReuseStrategy.shouldDetach(_.value.snapshot)?this.detachAndStoreRouteSubtree(_,y):this.deactivateRouteAndOutlet(_,y)}detachAndStoreRouteSubtree(_,y){const C=y.getContext(_.value.outlet),R=C&&_.value.component?C.children:y,V=ni(_);for(const W of Object.keys(V))this.deactivateRouteAndItsChildren(V[W],R);if(C&&C.outlet){const W=C.outlet.detach(),X=C.children.onOutletDeactivated();this.routeReuseStrategy.store(_.value.snapshot,{componentRef:W,route:_,contexts:X})}}deactivateRouteAndOutlet(_,y){const C=y.getContext(_.value.outlet),R=C&&_.value.component?C.children:y,V=ni(_);for(const W of Object.keys(V))this.deactivateRouteAndItsChildren(V[W],R);C&&C.outlet&&(C.outlet.deactivate(),C.children.onOutletDeactivated(),C.attachRef=null,C.resolver=null,C.route=null)}activateChildRoutes(_,y,C){const R=ni(y);_.children.forEach(V=>{this.activateRoutes(V,R[V.value.outlet],C),this.forwardEvent(new hi(V.value.snapshot))}),_.children.length&&this.forwardEvent(new Sr(_.value.snapshot))}activateRoutes(_,y,C){const R=_.value,V=y?y.value:null;if($s(R),R===V)if(R.component){const W=C.getOrCreateContext(R.outlet);this.activateChildRoutes(_,y,W.children)}else this.activateChildRoutes(_,y,C);else if(R.component){const W=C.getOrCreateContext(R.outlet);if(this.routeReuseStrategy.shouldAttach(R.snapshot)){const X=this.routeReuseStrategy.retrieve(R.snapshot);this.routeReuseStrategy.store(R.snapshot,null),W.children.onOutletReAttached(X.contexts),W.attachRef=X.componentRef,W.route=X.route.value,W.outlet&&W.outlet.attach(X.componentRef,X.route.value),$s(X.route.value),this.activateChildRoutes(_,null,W.children)}else{const X=function hs(I){for(let _=I.parent;_;_=_.parent){const y=_.routeConfig;if(y&&y._loadedConfig)return y._loadedConfig;if(y&&y.component)return null}return null}(R.snapshot),xe=X?X.module.componentFactoryResolver:null;W.attachRef=null,W.route=R,W.resolver=xe,W.outlet&&W.outlet.activateWith(R,xe),this.activateChildRoutes(_,null,W.children)}}else this.activateChildRoutes(_,null,C)}}class Gs{constructor(_,y){this.routes=_,this.module=y}}function Ui(I){return"function"==typeof I}function si(I){return I instanceof Xn}const kn=Symbol("INITIAL_VALUE");function rr(){return(0,rn.w)(I=>function et(...I){const _=(0,ve.yG)(I),y=(0,ve.jO)(I),{args:C,keys:R}=(0,ae.D)(I);if(0===C.length)return(0,le.D)([],_);const V=new fe.y(function Ve(I,_,y=ce.y){return C=>{He(_,()=>{const{length:R}=I,V=new Array(R);let W=R,X=R;for(let xe=0;xe<R;xe++)He(_,()=>{const lt=(0,le.D)(I[xe],_);let Jt=!1;lt.subscribe((0,Z.x)(C,vt=>{V[xe]=vt,Jt||(Jt=!0,X--),X||C.next(y(V.slice()))},()=>{--W||C.complete()}))},C)},C)}}(C,_,R?W=>(0,J.n)(R,W):ce.y));return y?V.pipe((0,de.Z)(y)):V}(I.map(_=>_.pipe((0,Wn.q)(1),(0,An.O)(kn)))).pipe((0,pn.R)((_,y)=>{let C=!1;return y.reduce((R,V,W)=>R!==kn?R:(V===kn&&(C=!0),C||!1!==V&&W!==y.length-1&&!si(V)?R:V),_)},kn),(0,Se.h)(_=>_!==kn),(0,Qe.U)(_=>si(_)?_:!0===_),(0,Wn.q)(1)))}class ya{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Vi,this.attachRef=null}}class Vi{constructor(){this.contexts=new Map}onChildOutletCreated(_,y){const C=this.getOrCreateContext(_);C.outlet=y,this.contexts.set(_,C)}onChildOutletDestroyed(_){const y=this.getContext(_);y&&(y.outlet=null,y.attachRef=null)}onOutletDeactivated(){const _=this.contexts;return this.contexts=new Map,_}onOutletReAttached(_){this.contexts=_}getOrCreateContext(_){let y=this.getContext(_);return y||(y=new ya,this.contexts.set(_,y)),y}getContext(_){return this.contexts.get(_)||null}}let _o=(()=>{class I{constructor(y,C,R,V,W){this.parentContexts=y,this.location=C,this.resolver=R,this.changeDetector=W,this.activated=null,this._activatedRoute=null,this.activateEvents=new D.vpe,this.deactivateEvents=new D.vpe,this.attachEvents=new D.vpe,this.detachEvents=new D.vpe,this.name=V||pt,y.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const y=this.parentContexts.getContext(this.name);y&&y.route&&(y.attachRef?this.attach(y.attachRef,y.route):this.activateWith(y.route,y.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const y=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(y.instance),y}attach(y,C){this.activated=y,this._activatedRoute=C,this.location.insert(y.hostView),this.attachEvents.emit(y.instance)}deactivate(){if(this.activated){const y=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(y)}}activateWith(y,C){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=y;const W=(C=C||this.resolver).resolveComponentFactory(y._futureSnapshot.routeConfig.component),X=this.parentContexts.getOrCreateContext(this.name).children,xe=new zs(y,X,this.location.injector);this.activated=this.location.createComponent(W,this.location.length,xe),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return I.\u0275fac=function(y){return new(y||I)(D.Y36(Vi),D.Y36(D.s_b),D.Y36(D._Vd),D.$8M("name"),D.Y36(D.sBO))},I.\u0275dir=D.lG2({type:I,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),I})();class zs{constructor(_,y,C){this.route=_,this.childContexts=y,this.parent=C}get(_,y){return _===Ni?this.route:_===Vi?this.childContexts:this.parent.get(_,y)}}let Cs=(()=>{class I{}return I.\u0275fac=function(y){return new(y||I)},I.\u0275cmp=D.Xpm({type:I,selectors:[["ng-component"]],decls:1,vars:0,template:function(y,C){1&y&&D._UZ(0,"router-outlet")},directives:[_o],encapsulation:2}),I})();function zr(I,_=""){for(let y=0;y<I.length;y++){const C=I[y];va(C,In(_,C))}}function va(I,_){I.children&&zr(I.children,_)}function In(I,_){return _?I||_.path?I&&!_.path?`${I}/`:!I&&_.path?_.path:`${I}/${_.path}`:"":I}function x(I){const _=I.children&&I.children.map(x),y=_?Object.assign(Object.assign({},I),{children:_}):Object.assign({},I);return!y.component&&(_||y.loadChildren)&&y.outlet&&y.outlet!==pt&&(y.component=Cs),y}function L(I){return I.outlet||pt}function A(I,_){const y=I.filter(C=>L(C)===_);return y.push(...I.filter(C=>L(C)!==_)),y}const j={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function te(I,_,y){var C;if(""===_.path)return"full"===_.pathMatch&&(I.hasChildren()||y.length>0)?Object.assign({},j):{matched:!0,consumedSegments:[],remainingSegments:y,parameters:{},positionalParamSegments:{}};const V=(_.matcher||js)(y,I,_);if(!V)return Object.assign({},j);const W={};Y(V.posParams,(xe,lt)=>{W[lt]=xe.path});const X=V.consumed.length>0?Object.assign(Object.assign({},W),V.consumed[V.consumed.length-1].parameters):W;return{matched:!0,consumedSegments:V.consumed,remainingSegments:y.slice(V.consumed.length),parameters:X,positionalParamSegments:null!==(C=V.posParams)&&void 0!==C?C:{}}}function Te(I,_,y,C,R="corrected"){if(y.length>0&&function Vt(I,_,y){return y.some(C=>$t(I,_,C)&&L(C)!==pt)}(I,y,C)){const W=new qt(_,function _t(I,_,y,C){const R={};R[pt]=C,C._sourceSegment=I,C._segmentIndexShift=_.length;for(const V of y)if(""===V.path&&L(V)!==pt){const W=new qt([],{});W._sourceSegment=I,W._segmentIndexShift=_.length,R[L(V)]=W}return R}(I,_,C,new qt(y,I.children)));return W._sourceSegment=I,W._segmentIndexShift=_.length,{segmentGroup:W,slicedSegments:[]}}if(0===y.length&&function gn(I,_,y){return y.some(C=>$t(I,_,C))}(I,y,C)){const W=new qt(I.segments,function je(I,_,y,C,R,V){const W={};for(const X of C)if($t(I,y,X)&&!R[L(X)]){const xe=new qt([],{});xe._sourceSegment=I,xe._segmentIndexShift="legacy"===V?I.segments.length:_.length,W[L(X)]=xe}return Object.assign(Object.assign({},R),W)}(I,_,y,C,I.children,R));return W._sourceSegment=I,W._segmentIndexShift=_.length,{segmentGroup:W,slicedSegments:y}}const V=new qt(I.segments,I.children);return V._sourceSegment=I,V._segmentIndexShift=_.length,{segmentGroup:V,slicedSegments:y}}function $t(I,_,y){return(!(I.hasChildren()||_.length>0)||"full"!==y.pathMatch)&&""===y.path}function Qt(I,_,y,C){return!!(L(I)===C||C!==pt&&$t(_,y,I))&&("**"===I.path||te(_,I,y).matched)}function Fn(I,_,y){return 0===_.length&&!I.children[y]}class Bt{constructor(_){this.segmentGroup=_||null}}class Kt{constructor(_){this.urlTree=_}}function br(I){return Ce(new Bt(I))}function Wr(I){return Ce(new Kt(I))}class Ws{constructor(_,y,C,R,V){this.configLoader=y,this.urlSerializer=C,this.urlTree=R,this.config=V,this.allowRedirects=!0,this.ngModule=_.get(D.h0i)}apply(){const _=Te(this.urlTree.root,[],[],this.config).segmentGroup,y=new qt(_.segments,_.children);return this.expandSegmentGroup(this.ngModule,this.config,y,pt).pipe((0,Qe.U)(V=>this.createUrlTree(Ss(V),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ie(V=>{if(V instanceof Kt)return this.allowRedirects=!1,this.match(V.urlTree);throw V instanceof Bt?this.noMatchError(V):V}))}match(_){return this.expandSegmentGroup(this.ngModule,this.config,_.root,pt).pipe((0,Qe.U)(R=>this.createUrlTree(Ss(R),_.queryParams,_.fragment))).pipe(ie(R=>{throw R instanceof Bt?this.noMatchError(R):R}))}noMatchError(_){return new Error(`Cannot match any routes. URL Segment: '${_.segmentGroup}'`)}createUrlTree(_,y,C){const R=_.segments.length>0?new qt([],{[pt]:_}):_;return new Xn(R,y,C)}expandSegmentGroup(_,y,C,R){return 0===C.segments.length&&C.hasChildren()?this.expandChildren(_,y,C).pipe((0,Qe.U)(V=>new qt([],V))):this.expandSegment(_,C,y,C.segments,R,!0)}expandChildren(_,y,C){const R=[];for(const V of Object.keys(C.children))"primary"===V?R.unshift(V):R.push(V);return(0,le.D)(R).pipe(me(V=>{const W=C.children[V],X=A(y,V);return this.expandSegmentGroup(_,X,W,V).pipe((0,Qe.U)(xe=>({segment:xe,outlet:V})))}),(0,pn.R)((V,W)=>(V[W.outlet]=W.segment,V),{}),function hn(I,_){const y=arguments.length>=2;return C=>C.pipe(I?(0,Se.h)((R,V)=>I(R,V,C)):ce.y,Ie(1),y?(0,bt.d)(_):(0,Ye.T)(()=>new tt.K))}())}expandSegment(_,y,C,R,V,W){return(0,le.D)(C).pipe(me(X=>this.expandSegmentAgainstRoute(_,y,C,X,R,V,W).pipe(ie(lt=>{if(lt instanceof Bt)return(0,Fe.of)(null);throw lt}))),(0,ar.P)(X=>!!X),ie((X,xe)=>{if(X instanceof tt.K||"EmptyError"===X.name)return Fn(y,R,V)?(0,Fe.of)(new qt([],{})):br(y);throw X}))}expandSegmentAgainstRoute(_,y,C,R,V,W,X){return Qt(R,y,V,W)?void 0===R.redirectTo?this.matchSegmentAgainstRoute(_,y,R,V,W):X&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(_,y,C,R,V,W):br(y):br(y)}expandSegmentAgainstRouteUsingRedirect(_,y,C,R,V,W){return"**"===R.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(_,C,R,W):this.expandRegularSegmentAgainstRouteUsingRedirect(_,y,C,R,V,W)}expandWildCardWithParamsAgainstRouteUsingRedirect(_,y,C,R){const V=this.applyRedirectCommands([],C.redirectTo,{});return C.redirectTo.startsWith("/")?Wr(V):this.lineralizeSegments(C,V).pipe((0,ge.z)(W=>{const X=new qt(W,{});return this.expandSegment(_,X,y,W,R,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(_,y,C,R,V,W){const{matched:X,consumedSegments:xe,remainingSegments:lt,positionalParamSegments:Jt}=te(y,R,V);if(!X)return br(y);const vt=this.applyRedirectCommands(xe,R.redirectTo,Jt);return R.redirectTo.startsWith("/")?Wr(vt):this.lineralizeSegments(R,vt).pipe((0,ge.z)(mn=>this.expandSegment(_,y,C,mn.concat(lt),W,!1)))}matchSegmentAgainstRoute(_,y,C,R,V){if("**"===C.path)return C.loadChildren?(C._loadedConfig?(0,Fe.of)(C._loadedConfig):this.configLoader.load(_.injector,C)).pipe((0,Qe.U)(vt=>(C._loadedConfig=vt,new qt(R,{})))):(0,Fe.of)(new qt(R,{}));const{matched:W,consumedSegments:X,remainingSegments:xe}=te(y,C,R);return W?this.getChildConfig(_,C,R).pipe((0,ge.z)(Jt=>{const vt=Jt.module,mn=Jt.routes,{segmentGroup:on,slicedSegments:Ti}=Te(y,X,xe,mn),Xi=new qt(on.segments,on.children);if(0===Ti.length&&Xi.hasChildren())return this.expandChildren(vt,mn,Xi).pipe((0,Qe.U)(Ns=>new qt(X,Ns)));if(0===mn.length&&0===Ti.length)return(0,Fe.of)(new qt(X,{}));const xo=L(C)===V;return this.expandSegment(vt,Xi,mn,Ti,xo?pt:V,!0).pipe((0,Qe.U)(Vr=>new qt(X.concat(Vr.segments),Vr.children)))})):br(y)}getChildConfig(_,y,C){return y.children?(0,Fe.of)(new Gs(y.children,_)):y.loadChildren?void 0!==y._loadedConfig?(0,Fe.of)(y._loadedConfig):this.runCanLoadGuards(_.injector,y,C).pipe((0,ge.z)(R=>R?this.configLoader.load(_.injector,y).pipe((0,Qe.U)(V=>(y._loadedConfig=V,V))):function qi(I){return Ce(Jr(`Cannot load children because the guard of the route "path: '${I.path}'" returned false`))}(y))):(0,Fe.of)(new Gs([],_))}runCanLoadGuards(_,y,C){const R=y.canLoad;if(!R||0===R.length)return(0,Fe.of)(!0);const V=R.map(W=>{const X=_.get(W);let xe;if(function fs(I){return I&&Ui(I.canLoad)}(X))xe=X.canLoad(y,C);else{if(!Ui(X))throw new Error("Invalid CanLoad guard");xe=X(y,C)}return he(xe)});return(0,Fe.of)(V).pipe(rr(),(0,zt.b)(W=>{if(!si(W))return;const X=Jr(`Redirecting to "${this.urlSerializer.serialize(W)}"`);throw X.url=W,X}),(0,Qe.U)(W=>!0===W))}lineralizeSegments(_,y){let C=[],R=y.root;for(;;){if(C=C.concat(R.segments),0===R.numberOfChildren)return(0,Fe.of)(C);if(R.numberOfChildren>1||!R.children[pt])return Ce(new Error(`Only absolute redirects can have named outlets. redirectTo: '${_.redirectTo}'`));R=R.children[pt]}}applyRedirectCommands(_,y,C){return this.applyRedirectCreatreUrlTree(y,this.urlSerializer.parse(y),_,C)}applyRedirectCreatreUrlTree(_,y,C,R){const V=this.createSegmentGroup(_,y.root,C,R);return new Xn(V,this.createQueryParams(y.queryParams,this.urlTree.queryParams),y.fragment)}createQueryParams(_,y){const C={};return Y(_,(R,V)=>{if("string"==typeof R&&R.startsWith(":")){const X=R.substring(1);C[V]=y[X]}else C[V]=R}),C}createSegmentGroup(_,y,C,R){const V=this.createSegments(_,y.segments,C,R);let W={};return Y(y.children,(X,xe)=>{W[xe]=this.createSegmentGroup(_,X,C,R)}),new qt(V,W)}createSegments(_,y,C,R){return y.map(V=>V.path.startsWith(":")?this.findPosParam(_,V,R):this.findOrReturn(V,C))}findPosParam(_,y,C){const R=C[y.path.substring(1)];if(!R)throw new Error(`Cannot redirect to '${_}'. Cannot find '${y.path}'.`);return R}findOrReturn(_,y){let C=0;for(const R of y){if(R.path===_.path)return y.splice(C),R;C++}return _}}function Ss(I){const _={};for(const C of Object.keys(I.children)){const V=Ss(I.children[C]);(V.segments.length>0||V.hasChildren())&&(_[C]=V)}return function qo(I){if(1===I.numberOfChildren&&I.children[pt]){const _=I.children[pt];return new qt(I.segments.concat(_.segments),_.children)}return I}(new qt(I.segments,_))}class Wa{constructor(_){this.path=_,this.route=this.path[this.path.length-1]}}class $e{constructor(_,y){this.component=_,this.route=y}}function en(I,_,y){const C=I._root;return Ii(C,_?_._root:null,y,[C.value])}function On(I,_,y){const C=function Zo(I){if(!I)return null;for(let _=I.parent;_;_=_.parent){const y=_.routeConfig;if(y&&y._loadedConfig)return y._loadedConfig}return null}(_);return(C?C.module.injector:y).get(I)}function Ii(I,_,y,C,R={canDeactivateChecks:[],canActivateChecks:[]}){const V=ni(_);return I.children.forEach(W=>{(function Bi(I,_,y,C,R={canDeactivateChecks:[],canActivateChecks:[]}){const V=I.value,W=_?_.value:null,X=y?y.getContext(I.value.outlet):null;if(W&&V.routeConfig===W.routeConfig){const xe=function Ea(I,_,y){if("function"==typeof y)return y(I,_);switch(y){case"pathParamsChange":return!qn(I.url,_.url);case"pathParamsOrQueryParamsChange":return!qn(I.url,_.url)||!Vn(I.queryParams,_.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ma(I,_)||!Vn(I.queryParams,_.queryParams);default:return!ma(I,_)}}(W,V,V.routeConfig.runGuardsAndResolvers);xe?R.canActivateChecks.push(new Wa(C)):(V.data=W.data,V._resolvedData=W._resolvedData),Ii(I,_,V.component?X?X.children:null:y,C,R),xe&&X&&X.outlet&&X.outlet.isActivated&&R.canDeactivateChecks.push(new $e(X.outlet.component,W))}else W&&Zi(_,X,R),R.canActivateChecks.push(new Wa(C)),Ii(I,null,V.component?X?X.children:null:y,C,R)})(W,V[W.value.outlet],y,C.concat([W.value]),R),delete V[W.value.outlet]}),Y(V,(W,X)=>Zi(W,y.getContext(X),R)),R}function Zi(I,_,y){const C=ni(I),R=I.value;Y(C,(V,W)=>{Zi(V,R.component?_?_.children.getContext(W):null:_,y)}),y.canDeactivateChecks.push(new $e(R.component&&_&&_.outlet&&_.outlet.isActivated?_.outlet.component:null,R))}class Yi{}function gs(I){return new fe.y(_=>_.error(I))}class Qo{constructor(_,y,C,R,V,W){this.rootComponentType=_,this.config=y,this.urlTree=C,this.url=R,this.paramsInheritanceStrategy=V,this.relativeLinkResolution=W}recognize(){const _=Te(this.urlTree.root,[],[],this.config.filter(W=>void 0===W.redirectTo),this.relativeLinkResolution).segmentGroup,y=this.processSegmentGroup(this.config,_,pt);if(null===y)return null;const C=new jn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},pt,this.rootComponentType,null,this.urlTree.root,-1,{}),R=new lr(C,y),V=new Pi(this.url,R);return this.inheritParamsAndData(V._root),V}inheritParamsAndData(_){const y=_.value,C=_n(y,this.paramsInheritanceStrategy);y.params=Object.freeze(C.params),y.data=Object.freeze(C.data),_.children.forEach(R=>this.inheritParamsAndData(R))}processSegmentGroup(_,y,C){return 0===y.segments.length&&y.hasChildren()?this.processChildren(_,y):this.processSegment(_,y,y.segments,C)}processChildren(_,y){const C=[];for(const V of Object.keys(y.children)){const W=y.children[V],X=A(_,V),xe=this.processSegmentGroup(X,W,V);if(null===xe)return null;C.push(...xe)}const R=Cr(C);return function Ia(I){I.sort((_,y)=>_.value.outlet===pt?-1:y.value.outlet===pt?1:_.value.outlet.localeCompare(y.value.outlet))}(R),R}processSegment(_,y,C,R){for(const V of _){const W=this.processSegmentAgainstRoute(V,y,C,R);if(null!==W)return W}return Fn(y,C,R)?[]:null}processSegmentAgainstRoute(_,y,C,R){if(_.redirectTo||!Qt(_,y,C,R))return null;let V,W=[],X=[];if("**"===_.path){const on=C.length>0?oe(C).parameters:{};V=new jn(C,on,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Zs(_),L(_),_.component,_,Xo(y),qs(y)+C.length,Ys(_))}else{const on=te(y,_,C);if(!on.matched)return null;W=on.consumedSegments,X=on.remainingSegments,V=new jn(W,on.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Zs(_),L(_),_.component,_,Xo(y),qs(y)+W.length,Ys(_))}const xe=function xs(I){return I.children?I.children:I.loadChildren?I._loadedConfig.routes:[]}(_),{segmentGroup:lt,slicedSegments:Jt}=Te(y,W,X,xe.filter(on=>void 0===on.redirectTo),this.relativeLinkResolution);if(0===Jt.length&&lt.hasChildren()){const on=this.processChildren(xe,lt);return null===on?null:[new lr(V,on)]}if(0===xe.length&&0===Jt.length)return[new lr(V,[])];const vt=L(_)===R,mn=this.processSegment(xe,lt,Jt,vt?pt:R);return null===mn?null:[new lr(V,mn)]}}function Jo(I){const _=I.value.routeConfig;return _&&""===_.path&&void 0===_.redirectTo}function Cr(I){const _=[],y=new Set;for(const C of I){if(!Jo(C)){_.push(C);continue}const R=_.find(V=>C.value.routeConfig===V.value.routeConfig);void 0!==R?(R.children.push(...C.children),y.add(R)):_.push(C)}for(const C of y){const R=Cr(C.children);_.push(new lr(C.value,R))}return _.filter(C=>!y.has(C))}function Xo(I){let _=I;for(;_._sourceSegment;)_=_._sourceSegment;return _}function qs(I){let _=I,y=_._segmentIndexShift?_._segmentIndexShift:0;for(;_._sourceSegment;)_=_._sourceSegment,y+=_._segmentIndexShift?_._segmentIndexShift:0;return y-1}function Zs(I){return I.data||{}}function Ys(I){return I.resolve||{}}function ea(I){return[...Object.keys(I),...Object.getOwnPropertySymbols(I)]}function ir(I){return(0,rn.w)(_=>{const y=I(_);return y?(0,le.D)(y).pipe((0,Qe.U)(()=>_)):(0,Fe.of)(_)})}class Ml extends class hr{shouldDetach(_){return!1}store(_,y){}shouldAttach(_){return!1}retrieve(_){return null}shouldReuseRoute(_,y){return _.routeConfig===y.routeConfig}}{}const ta=new D.OlP("ROUTES");class Za{constructor(_,y,C,R){this.injector=_,this.compiler=y,this.onLoadStartListener=C,this.onLoadEndListener=R}load(_,y){if(y._loader$)return y._loader$;this.onLoadStartListener&&this.onLoadStartListener(y);const R=this.loadModuleFactory(y.loadChildren).pipe((0,Qe.U)(V=>{this.onLoadEndListener&&this.onLoadEndListener(y);const W=V.create(_);return new Gs(re(W.injector.get(ta,void 0,D.XFs.Self|D.XFs.Optional)).map(x),W)}),ie(V=>{throw y._loader$=void 0,V}));return y._loader$=new ke(R,()=>new H.x).pipe(Ne()),y._loader$}loadModuleFactory(_){return he(_()).pipe((0,ge.z)(y=>y instanceof D.YKP?(0,Fe.of)(y):(0,le.D)(this.compiler.compileModuleAsync(y))))}}class Ya{shouldProcessUrl(_){return!0}extract(_){return _}merge(_,y){return _}}function kc(I){throw I}function Qa(I,_,y){return _.parse("/")}function bo(I,_){return(0,Fe.of)(null)}const pi={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},To={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let fn=(()=>{class I{constructor(y,C,R,V,W,X,xe){this.rootComponentType=y,this.urlSerializer=C,this.rootContexts=R,this.location=V,this.config=xe,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new H.x,this.errorHandler=kc,this.malformedUriErrorHandler=Qa,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:bo,afterPreactivation:bo},this.urlHandlingStrategy=new Ya,this.routeReuseStrategy=new Ml,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=W.get(D.h0i),this.console=W.get(D.c2e);const vt=W.get(D.R0b);this.isNgZoneEnabled=vt instanceof D.R0b&&D.R0b.isInAngularZone(),this.resetConfig(xe),this.currentUrlTree=function ze(){return new Xn(new qt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Za(W,X,mn=>this.triggerEvent(new Kn(mn)),mn=>this.triggerEvent(new cs(mn))),this.routerState=Tn(this.currentUrlTree,this.rootComponentType),this.transitions=new $({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var y;return null===(y=this.location.getState())||void 0===y?void 0:y.\u0275routerPageId}setupNavigations(y){const C=this.events;return y.pipe((0,Se.h)(R=>0!==R.id),(0,Qe.U)(R=>Object.assign(Object.assign({},R),{extractedUrl:this.urlHandlingStrategy.extract(R.rawUrl)})),(0,rn.w)(R=>{let V=!1,W=!1;return(0,Fe.of)(R).pipe((0,zt.b)(X=>{this.currentNavigation={id:X.id,initialUrl:X.currentRawUrl,extractedUrl:X.extractedUrl,trigger:X.source,extras:X.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,rn.w)(X=>{const xe=this.browserUrlTree.toString(),lt=!this.navigated||X.extractedUrl.toString()!==xe||xe!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||lt)&&this.urlHandlingStrategy.shouldProcessUrl(X.rawUrl))return oi(X.source)&&(this.browserUrlTree=X.extractedUrl),(0,Fe.of)(X).pipe((0,rn.w)(vt=>{const mn=this.transitions.getValue();return C.next(new wr(vt.id,this.serializeUrl(vt.extractedUrl),vt.source,vt.restoredState)),mn!==this.transitions.getValue()?Re.E:Promise.resolve(vt)}),function _a(I,_,y,C){return(0,rn.w)(R=>function Eo(I,_,y,C,R){return new Ws(I,_,y,C,R).apply()}(I,_,y,R.extractedUrl,C).pipe((0,Qe.U)(V=>Object.assign(Object.assign({},R),{urlAfterRedirects:V}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,zt.b)(vt=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:vt.urlAfterRedirects})}),function wu(I,_,y,C,R){return(0,ge.z)(V=>function wa(I,_,y,C,R="emptyOnly",V="legacy"){try{const W=new Qo(I,_,y,C,R,V).recognize();return null===W?gs(new Yi):(0,Fe.of)(W)}catch(W){return gs(W)}}(I,_,V.urlAfterRedirects,y(V.urlAfterRedirects),C,R).pipe((0,Qe.U)(W=>Object.assign(Object.assign({},V),{targetSnapshot:W}))))}(this.rootComponentType,this.config,vt=>this.serializeUrl(vt),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,zt.b)(vt=>{if("eager"===this.urlUpdateStrategy){if(!vt.extras.skipLocationChange){const on=this.urlHandlingStrategy.merge(vt.urlAfterRedirects,vt.rawUrl);this.setBrowserUrl(on,vt)}this.browserUrlTree=vt.urlAfterRedirects}const mn=new li(vt.id,this.serializeUrl(vt.extractedUrl),this.serializeUrl(vt.urlAfterRedirects),vt.targetSnapshot);C.next(mn)}));if(lt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:mn,extractedUrl:on,source:Ti,restoredState:Xi,extras:xo}=X,es=new wr(mn,this.serializeUrl(on),Ti,Xi);C.next(es);const Vr=Tn(on,this.rootComponentType).snapshot;return(0,Fe.of)(Object.assign(Object.assign({},X),{targetSnapshot:Vr,urlAfterRedirects:on,extras:Object.assign(Object.assign({},xo),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=X.rawUrl,X.resolve(null),Re.E}),ir(X=>{const{targetSnapshot:xe,id:lt,extractedUrl:Jt,rawUrl:vt,extras:{skipLocationChange:mn,replaceUrl:on}}=X;return this.hooks.beforePreactivation(xe,{navigationId:lt,appliedUrlTree:Jt,rawUrlTree:vt,skipLocationChange:!!mn,replaceUrl:!!on})}),(0,zt.b)(X=>{const xe=new Mi(X.id,this.serializeUrl(X.extractedUrl),this.serializeUrl(X.urlAfterRedirects),X.targetSnapshot);this.triggerEvent(xe)}),(0,Qe.U)(X=>Object.assign(Object.assign({},X),{guards:en(X.targetSnapshot,X.currentSnapshot,this.rootContexts)})),function Nc(I,_){return(0,ge.z)(y=>{const{targetSnapshot:C,currentSnapshot:R,guards:{canActivateChecks:V,canDeactivateChecks:W}}=y;return 0===W.length&&0===V.length?(0,Fe.of)(Object.assign(Object.assign({},y),{guardsResult:!0})):function qa(I,_,y,C){return(0,le.D)(I).pipe((0,ge.z)(R=>function Ks(I,_,y,C,R){const V=_&&_.routeConfig?_.routeConfig.canDeactivate:null;if(!V||0===V.length)return(0,Fe.of)(!0);const W=V.map(X=>{const xe=On(X,_,R);let lt;if(function Gr(I){return I&&Ui(I.canDeactivate)}(xe))lt=he(xe.canDeactivate(I,_,y,C));else{if(!Ui(xe))throw new Error("Invalid CanDeactivate guard");lt=he(xe(I,_,y,C))}return lt.pipe((0,ar.P)())});return(0,Fe.of)(W).pipe(rr())}(R.component,R.route,y,_,C)),(0,ar.P)(R=>!0!==R,!0))}(W,C,R,I).pipe((0,ge.z)(X=>X&&function Ga(I){return"boolean"==typeof I}(X)?function Yo(I,_,y,C){return(0,le.D)(_).pipe(me(R=>(0,ee.z)(function Tr(I,_){return null!==I&&_&&_(new di(I)),(0,Fe.of)(!0)}(R.route.parent,C),function wo(I,_){return null!==I&&_&&_(new gr(I)),(0,Fe.of)(!0)}(R.route,C),function ps(I,_,y){const C=_[_.length-1],V=_.slice(0,_.length-1).reverse().map(W=>function Ka(I){const _=I.routeConfig?I.routeConfig.canActivateChild:null;return _&&0!==_.length?{node:I,guards:_}:null}(W)).filter(W=>null!==W).map(W=>ot(()=>{const X=W.guards.map(xe=>{const lt=On(xe,W.node,y);let Jt;if(function za(I){return I&&Ui(I.canActivateChild)}(lt))Jt=he(lt.canActivateChild(C,I));else{if(!Ui(lt))throw new Error("Invalid CanActivateChild guard");Jt=he(lt(C,I))}return Jt.pipe((0,ar.P)())});return(0,Fe.of)(X).pipe(rr())}));return(0,Fe.of)(V).pipe(rr())}(I,R.path,y),function As(I,_,y){const C=_.routeConfig?_.routeConfig.canActivate:null;if(!C||0===C.length)return(0,Fe.of)(!0);const R=C.map(V=>ot(()=>{const W=On(V,_,y);let X;if(function Ur(I){return I&&Ui(I.canActivate)}(W))X=he(W.canActivate(_,I));else{if(!Ui(W))throw new Error("Invalid CanActivate guard");X=he(W(_,I))}return X.pipe((0,ar.P)())}));return(0,Fe.of)(R).pipe(rr())}(I,R.route,y))),(0,ar.P)(R=>!0!==R,!0))}(C,V,I,_):(0,Fe.of)(X)),(0,Qe.U)(X=>Object.assign(Object.assign({},y),{guardsResult:X})))})}(this.ngModule.injector,X=>this.triggerEvent(X)),(0,zt.b)(X=>{if(si(X.guardsResult)){const lt=Jr(`Redirecting to "${this.serializeUrl(X.guardsResult)}"`);throw lt.url=X.guardsResult,lt}const xe=new Rt(X.id,this.serializeUrl(X.extractedUrl),this.serializeUrl(X.urlAfterRedirects),X.targetSnapshot,!!X.guardsResult);this.triggerEvent(xe)}),(0,Se.h)(X=>!!X.guardsResult||(this.restoreHistory(X),this.cancelNavigationTransition(X,""),!1)),ir(X=>{if(X.guards.canActivateChecks.length)return(0,Fe.of)(X).pipe((0,zt.b)(xe=>{const lt=new Ei(xe.id,this.serializeUrl(xe.extractedUrl),this.serializeUrl(xe.urlAfterRedirects),xe.targetSnapshot);this.triggerEvent(lt)}),(0,rn.w)(xe=>{let lt=!1;return(0,Fe.of)(xe).pipe(function Qs(I,_){return(0,ge.z)(y=>{const{targetSnapshot:C,guards:{canActivateChecks:R}}=y;if(!R.length)return(0,Fe.of)(y);let V=0;return(0,le.D)(R).pipe(me(W=>function Io(I,_,y,C){return function Do(I,_,y,C){const R=ea(I);if(0===R.length)return(0,Fe.of)({});const V={};return(0,le.D)(R).pipe((0,ge.z)(W=>function Iu(I,_,y,C){const R=On(I,_,C);return he(R.resolve?R.resolve(_,y):R(_,y))}(I[W],_,y,C).pipe((0,zt.b)(X=>{V[W]=X}))),Ie(1),(0,ge.z)(()=>ea(V).length===R.length?(0,Fe.of)(V):Re.E))}(I._resolve,I,_,C).pipe((0,Qe.U)(V=>(I._resolvedData=V,I.data=Object.assign(Object.assign({},I.data),_n(I,y).resolve),null)))}(W.route,C,I,_)),(0,zt.b)(()=>V++),Ie(1),(0,ge.z)(W=>V===R.length?(0,Fe.of)(y):Re.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,zt.b)({next:()=>lt=!0,complete:()=>{lt||(this.restoreHistory(xe),this.cancelNavigationTransition(xe,"At least one route resolver didn't emit any value."))}}))}),(0,zt.b)(xe=>{const lt=new Jn(xe.id,this.serializeUrl(xe.extractedUrl),this.serializeUrl(xe.urlAfterRedirects),xe.targetSnapshot);this.triggerEvent(lt)}))}),ir(X=>{const{targetSnapshot:xe,id:lt,extractedUrl:Jt,rawUrl:vt,extras:{skipLocationChange:mn,replaceUrl:on}}=X;return this.hooks.afterPreactivation(xe,{navigationId:lt,appliedUrlTree:Jt,rawUrlTree:vt,skipLocationChange:!!mn,replaceUrl:!!on})}),(0,Qe.U)(X=>{const xe=function $a(I,_,y){const C=nr(I,_._root,y?y._root:void 0);return new dr(C,_)}(this.routeReuseStrategy,X.targetSnapshot,X.currentRouterState);return Object.assign(Object.assign({},X),{targetRouterState:xe})}),(0,zt.b)(X=>{this.currentUrlTree=X.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(X.urlAfterRedirects,X.rawUrl),this.routerState=X.targetRouterState,"deferred"===this.urlUpdateStrategy&&(X.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,X),this.browserUrlTree=X.urlAfterRedirects)}),((I,_,y)=>(0,Qe.U)(C=>(new ii(_,C.targetRouterState,C.currentRouterState,y).activate(I),C)))(this.rootContexts,this.routeReuseStrategy,X=>this.triggerEvent(X)),(0,zt.b)({next(){V=!0},complete(){V=!0}}),function nn(I){return(0,Ue.e)((_,y)=>{try{_.subscribe(y)}finally{y.add(I)}})}(()=>{var X;V||W||this.cancelNavigationTransition(R,`Navigation ID ${R.id} is not equal to the current navigation id ${this.navigationId}`),(null===(X=this.currentNavigation)||void 0===X?void 0:X.id)===R.id&&(this.currentNavigation=null)}),ie(X=>{if(W=!0,function an(I){return I&&I[Ir]}(X)){const xe=si(X.url);xe||(this.navigated=!0,this.restoreHistory(R,!0));const lt=new _i(R.id,this.serializeUrl(R.extractedUrl),X.message);C.next(lt),xe?setTimeout(()=>{const Jt=this.urlHandlingStrategy.merge(X.url,this.rawUrlTree),vt={skipLocationChange:R.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||oi(R.source)};this.scheduleNavigation(Jt,"imperative",null,vt,{resolve:R.resolve,reject:R.reject,promise:R.promise})},0):R.resolve(!1)}else{this.restoreHistory(R,!0);const xe=new us(R.id,this.serializeUrl(R.extractedUrl),X);C.next(xe);try{R.resolve(this.errorHandler(X))}catch(lt){R.reject(lt)}}return Re.E}))}))}resetRootComponentType(y){this.rootComponentType=y,this.routerState.root.component=this.rootComponentType}setTransition(y){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),y))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(y=>{const C="popstate"===y.type?"popstate":"hashchange";"popstate"===C&&setTimeout(()=>{var R;const V={replaceUrl:!0},W=(null===(R=y.state)||void 0===R?void 0:R.navigationId)?y.state:null;if(W){const xe=Object.assign({},W);delete xe.navigationId,delete xe.\u0275routerPageId,0!==Object.keys(xe).length&&(V.state=xe)}const X=this.parseUrl(y.url);this.scheduleNavigation(X,C,W,V)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(y){this.events.next(y)}resetConfig(y){zr(y),this.config=y.map(x),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(y,C={}){const{relativeTo:R,queryParams:V,fragment:W,queryParamsHandling:X,preserveFragment:xe}=C,lt=R||this.routerState.root,Jt=xe?this.currentUrlTree.fragment:W;let vt=null;switch(X){case"merge":vt=Object.assign(Object.assign({},this.currentUrlTree.queryParams),V);break;case"preserve":vt=this.currentUrlTree.queryParams;break;default:vt=V||null}return null!==vt&&(vt=this.removeEmptyProps(vt)),function vu(I,_,y,C,R){if(0===y.length)return mr(_.root,_.root,_.root,C,R);const V=function Ha(I){if("string"==typeof I[0]&&1===I.length&&"/"===I[0])return new Fi(!0,0,I);let _=0,y=!1;const C=I.reduce((R,V,W)=>{if("object"==typeof V&&null!=V){if(V.outlets){const X={};return Y(V.outlets,(xe,lt)=>{X[lt]="string"==typeof xe?xe.split("/"):xe}),[...R,{outlets:X}]}if(V.segmentPath)return[...R,V.segmentPath]}return"string"!=typeof V?[...R,V]:0===W?(V.split("/").forEach((X,xe)=>{0==xe&&"."===X||(0==xe&&""===X?y=!0:".."===X?_++:""!=X&&R.push(X))}),R):[...R,V]},[]);return new Fi(y,_,C)}(y);if(V.toRoot())return mr(_.root,_.root,new qt([],{}),C,R);const W=function _u(I,_,y){if(I.isAbsolute)return new vo(_.root,!0,0);if(-1===y.snapshot._lastPathIndex){const V=y.snapshot._urlSegment;return new vo(V,V===_.root,0)}const C=xn(I.commands[0])?0:1;return function Eu(I,_,y){let C=I,R=_,V=y;for(;V>R;){if(V-=R,C=C.parent,!C)throw new Error("Invalid number of '../'");R=C.segments.length}return new vo(C,!1,R-V)}(y.snapshot._urlSegment,y.snapshot._lastPathIndex+C,I.numberOfDoubleDots)}(V,_,I),X=W.processChildren?zo(W.segmentGroup,W.index,V.commands):bs(W.segmentGroup,W.index,V.commands);return mr(_.root,W.segmentGroup,X,C,R)}(lt,this.currentUrlTree,y,vt,null!=Jt?Jt:null)}navigateByUrl(y,C={skipLocationChange:!1}){const R=si(y)?y:this.parseUrl(y),V=this.urlHandlingStrategy.merge(R,this.rawUrlTree);return this.scheduleNavigation(V,"imperative",null,C)}navigate(y,C={skipLocationChange:!1}){return function na(I){for(let _=0;_<I.length;_++){const y=I[_];if(null==y)throw new Error(`The requested path contains ${y} segment at index ${_}`)}}(y),this.navigateByUrl(this.createUrlTree(y,C),C)}serializeUrl(y){return this.urlSerializer.serialize(y)}parseUrl(y){let C;try{C=this.urlSerializer.parse(y)}catch(R){C=this.malformedUriErrorHandler(R,this.urlSerializer,y)}return C}isActive(y,C){let R;if(R=!0===C?Object.assign({},pi):!1===C?Object.assign({},To):C,si(y))return Lt(this.currentUrlTree,y,R);const V=this.parseUrl(y);return Lt(this.currentUrlTree,V,R)}removeEmptyProps(y){return Object.keys(y).reduce((C,R)=>{const V=y[R];return null!=V&&(C[R]=V),C},{})}processNavigations(){this.navigations.subscribe(y=>{this.navigated=!0,this.lastSuccessfulId=y.id,this.currentPageId=y.targetPageId,this.events.next(new pr(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,y.resolve(!0)},y=>{this.console.warn(`Unhandled Navigation Error: ${y}`)})}scheduleNavigation(y,C,R,V,W){var X,xe;if(this.disposed)return Promise.resolve(!1);let lt,Jt,vt;W?(lt=W.resolve,Jt=W.reject,vt=W.promise):vt=new Promise((Ti,Xi)=>{lt=Ti,Jt=Xi});const mn=++this.navigationId;let on;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(R=this.location.getState()),on=R&&R.\u0275routerPageId?R.\u0275routerPageId:V.replaceUrl||V.skipLocationChange?null!==(X=this.browserPageId)&&void 0!==X?X:0:(null!==(xe=this.browserPageId)&&void 0!==xe?xe:0)+1):on=0,this.setTransition({id:mn,targetPageId:on,source:C,restoredState:R,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:y,extras:V,resolve:lt,reject:Jt,promise:vt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),vt.catch(Ti=>Promise.reject(Ti))}setBrowserUrl(y,C){const R=this.urlSerializer.serialize(y),V=Object.assign(Object.assign({},C.extras.state),this.generateNgRouterState(C.id,C.targetPageId));this.location.isCurrentPathEqualTo(R)||C.extras.replaceUrl?this.location.replaceState(R,"",V):this.location.go(R,"",V)}restoreHistory(y,C=!1){var R,V;if("computed"===this.canceledNavigationResolution){const W=this.currentPageId-y.targetPageId;"popstate"!==y.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(R=this.currentNavigation)||void 0===R?void 0:R.finalUrl)||0===W?this.currentUrlTree===(null===(V=this.currentNavigation)||void 0===V?void 0:V.finalUrl)&&0===W&&(this.resetState(y),this.browserUrlTree=y.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(W)}else"replace"===this.canceledNavigationResolution&&(C&&this.resetState(y),this.resetUrlToCurrentUrlTree())}resetState(y){this.routerState=y.currentRouterState,this.currentUrlTree=y.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,y.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(y,C){const R=new _i(y.id,this.serializeUrl(y.extractedUrl),C);this.triggerEvent(R),y.resolve(!1)}generateNgRouterState(y,C){return"computed"===this.canceledNavigationResolution?{navigationId:y,\u0275routerPageId:C}:{navigationId:y}}}return I.\u0275fac=function(y){D.$Z()},I.\u0275prov=D.Yz7({token:I,factory:I.\u0275fac}),I})();function oi(I){return"imperative"!==I}class Rs{}class Fc{preload(_,y){return(0,Fe.of)(null)}}let Co=(()=>{class I{constructor(y,C,R,V){this.router=y,this.injector=R,this.preloadingStrategy=V,this.loader=new Za(R,C,xe=>y.triggerEvent(new Kn(xe)),xe=>y.triggerEvent(new cs(xe)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Se.h)(y=>y instanceof pr),me(()=>this.preload())).subscribe(()=>{})}preload(){const y=this.injector.get(D.h0i);return this.processRoutes(y,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(y,C){const R=[];for(const V of C)if(V.loadChildren&&!V.canLoad&&V._loadedConfig){const W=V._loadedConfig;R.push(this.processRoutes(W.module,W.routes))}else V.loadChildren&&!V.canLoad?R.push(this.preloadConfig(y,V)):V.children&&R.push(this.processRoutes(y,V.children));return(0,le.D)(R).pipe((0,Yt.J)(),(0,Qe.U)(V=>{}))}preloadConfig(y,C){return this.preloadingStrategy.preload(C,()=>(C._loadedConfig?(0,Fe.of)(C._loadedConfig):this.loader.load(y.injector,C)).pipe((0,ge.z)(V=>(C._loadedConfig=V,this.processRoutes(V.module,V.routes)))))}}return I.\u0275fac=function(y){return new(y||I)(D.LFG(fn),D.LFG(D.Sil),D.LFG(D.zs3),D.LFG(Rs))},I.\u0275prov=D.Yz7({token:I,factory:I.\u0275fac}),I})(),$n=(()=>{class I{constructor(y,C,R={}){this.router=y,this.viewportScroller=C,this.options=R,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},R.scrollPositionRestoration=R.scrollPositionRestoration||"disabled",R.anchorScrolling=R.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(y=>{y instanceof wr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=y.navigationTrigger,this.restoredId=y.restoredState?y.restoredState.navigationId:0):y instanceof pr&&(this.lastId=y.id,this.scheduleScrollEvent(y,this.router.parseUrl(y.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(y=>{y instanceof $r&&(y.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(y.position):y.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(y.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(y,C){this.router.triggerEvent(new $r(y,"popstate"===this.lastSource?this.store[this.restoredId]:null,C))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return I.\u0275fac=function(y){D.$Z()},I.\u0275prov=D.Yz7({token:I,factory:I.\u0275fac}),I})();const Qi=new D.OlP("ROUTER_CONFIGURATION"),ai=new D.OlP("ROUTER_FORROOT_GUARD"),Ja=[fr.Ye,{provide:Ar,useClass:$o},{provide:fn,useFactory:function zu(I,_,y,C,R,V,W={},X,xe){const lt=new fn(null,I,_,y,C,R,re(V));return X&&(lt.urlHandlingStrategy=X),xe&&(lt.routeReuseStrategy=xe),function Ta(I,_){I.errorHandler&&(_.errorHandler=I.errorHandler),I.malformedUriErrorHandler&&(_.malformedUriErrorHandler=I.malformedUriErrorHandler),I.onSameUrlNavigation&&(_.onSameUrlNavigation=I.onSameUrlNavigation),I.paramsInheritanceStrategy&&(_.paramsInheritanceStrategy=I.paramsInheritanceStrategy),I.relativeLinkResolution&&(_.relativeLinkResolution=I.relativeLinkResolution),I.urlUpdateStrategy&&(_.urlUpdateStrategy=I.urlUpdateStrategy),I.canceledNavigationResolution&&(_.canceledNavigationResolution=I.canceledNavigationResolution)}(W,lt),W.enableTracing&&lt.events.subscribe(Jt=>{var vt,mn;null===(vt=console.group)||void 0===vt||vt.call(console,`Router Event: ${Jt.constructor.name}`),console.log(Jt.toString()),console.log(Jt),null===(mn=console.groupEnd)||void 0===mn||mn.call(console)}),lt},deps:[Ar,Vi,fr.Ye,D.zs3,D.Sil,ta,Qi,[class Pc{},new D.FiY],[class ji{},new D.FiY]]},Vi,{provide:Ni,useFactory:function Wu(I){return I.routerState.root},deps:[fn]},Co,Fc,class Gu{preload(_,y){return y().pipe(ie(()=>(0,Fe.of)(null)))}},{provide:Qi,useValue:{enableTracing:!1}}];function Hn(){return new D.PXZ("Router",fn)}let Di=(()=>{class I{constructor(y,C){}static forRoot(y,C){return{ngModule:I,providers:[Ja,Hi(y),{provide:ai,useFactory:Os,deps:[[fn,new D.FiY,new D.tp0]]},{provide:Qi,useValue:C||{}},{provide:fr.S$,useFactory:Gn,deps:[fr.lw,[new D.tBr(fr.mr),new D.FiY],Qi]},{provide:$n,useFactory:Du,deps:[fn,fr.EM,Qi]},{provide:Rs,useExisting:C&&C.preloadingStrategy?C.preloadingStrategy:Fc},{provide:D.PXZ,multi:!0,useFactory:Hn},[bu,{provide:D.ip1,multi:!0,useFactory:Ku,deps:[bu]},{provide:Ji,useFactory:Ao,deps:[bu]},{provide:D.tb,multi:!0,useExisting:Ji}]]}}static forChild(y){return{ngModule:I,providers:[Hi(y)]}}}return I.\u0275fac=function(y){return new(y||I)(D.LFG(ai,8),D.LFG(fn,8))},I.\u0275mod=D.oAB({type:I}),I.\u0275inj=D.cJS({}),I})();function Du(I,_,y){return y.scrollOffset&&_.setOffset(y.scrollOffset),new $n(I,_,y)}function Gn(I,_,y={}){return y.useHash?new fr.Do(I,_):new fr.b0(I,_)}function Os(I){return"guarded"}function Hi(I){return[{provide:D.deG,multi:!0,useValue:I},{provide:ta,multi:!0,useValue:I}]}let bu=(()=>{class I{constructor(y){this.injector=y,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new H.x}appInitializer(){return this.injector.get(fr.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let C=null;const R=new Promise(X=>C=X),V=this.injector.get(fn),W=this.injector.get(Qi);return"disabled"===W.initialNavigation?(V.setUpLocationChangeListener(),C(!0)):"enabled"===W.initialNavigation||"enabledBlocking"===W.initialNavigation?(V.hooks.afterPreactivation=()=>this.initNavigation?(0,Fe.of)(null):(this.initNavigation=!0,C(!0),this.resultOfPreactivationDone),V.initialNavigation()):C(!0),R})}bootstrapListener(y){const C=this.injector.get(Qi),R=this.injector.get(Co),V=this.injector.get($n),W=this.injector.get(fn),X=this.injector.get(D.z2F);y===X.components[0]&&(("enabledNonBlocking"===C.initialNavigation||void 0===C.initialNavigation)&&W.initialNavigation(),R.setUpPreloading(),V.init(),W.resetRootComponentType(X.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return I.\u0275fac=function(y){return new(y||I)(D.LFG(D.zs3))},I.\u0275prov=D.Yz7({token:I,factory:I.\u0275fac}),I})();function Ku(I){return I.appInitializer.bind(I)}function Ao(I){return I.bootstrapListener.bind(I)}const Ji=new D.OlP("Router Initializer")},3942:(st,we,k)=>{k.d(we,{Z:()=>He});var D=k(2090),H=k(4859),$=k(9681),fe=k(1877);class ae{constructor(Ce,Pe){this._delegate=Ce,this.firebase=Pe,(0,$._addComponent)(Ce,new H.wA("app-compat",()=>this,"PUBLIC")),this.container=Ce.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this._delegate.automaticDataCollectionEnabled=Ce}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ce=>{this._delegate.checkDestroyed(),Ce()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,$.deleteApp)(this._delegate)))}_getService(Ce,Pe=$._DEFAULT_ENTRY_NAME){var ot;this._delegate.checkDestroyed();const ct=this._delegate.container.getProvider(Ce);return!ct.isInitialized()&&"EXPLICIT"===(null===(ot=ct.getComponent())||void 0===ot?void 0:ot.instantiationMode)&&ct.initialize(),ct.getImmediate({identifier:Pe})}_removeServiceInstance(Ce,Pe=$._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ce).clearInstance(Pe)}_addComponent(Ce){(0,$._addComponent)(this._delegate,Ce)}_addOrOverwriteComponent(Ce){(0,$._addOrOverwriteComponent)(this._delegate,Ce)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ce=new D.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),J=function ve(){const Je=function de(Je){const Ce={},Pe={__esModule:!0,initializeApp:function Ue(tt,ee={}){const Re=$.initializeApp(tt,ee);if((0,D.r3)(Ce,Re.name))return Ce[Re.name];const ie=new Je(Re,Pe);return Ce[Re.name]=ie,ie},app:ct,registerVersion:$.registerVersion,setLogLevel:$.setLogLevel,onLog:$.onLog,apps:null,SDK_VERSION:$.SDK_VERSION,INTERNAL:{registerComponent:function ke(tt){const ee=tt.name,Re=ee.replace("-compat","");if($._registerComponent(tt)&&"PUBLIC"===tt.type){const ie=(ge=ct())=>{if("function"!=typeof ge[Re])throw ce.create("invalid-app-argument",{appName:ee});return ge[Re]()};void 0!==tt.serviceProps&&(0,D.ZB)(ie,tt.serviceProps),Pe[Re]=ie,Je.prototype[Re]=function(...ge){return this._getService.bind(this,ee).apply(this,tt.multipleInstances?ge:[])}}return"PUBLIC"===tt.type?Pe[Re]:null},removeApp:function ot(tt){delete Ce[tt]},useAsService:function Fe(tt,ee){return"serverAuth"===ee?null:ee},modularAPIs:$}};function ct(tt){if(!(0,D.r3)(Ce,tt=tt||$._DEFAULT_ENTRY_NAME))throw ce.create("no-app",{appName:tt});return Ce[tt]}return Pe.default=Pe,Object.defineProperty(Pe,"apps",{get:function Ne(){return Object.keys(Ce).map(tt=>Ce[tt])}}),ct.App=Je,Pe}(ae);return Je.INTERNAL=Object.assign(Object.assign({},Je.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function Ce(Pe){(0,D.ZB)(Je,Pe)},createSubscribe:D.ne,ErrorFactory:D.LL,deepExtend:D.ZB}),Je}(),Z=new fe.Yd("@firebase/app-compat");if((0,D.jU)()&&void 0!==self.firebase){Z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Je=self.firebase.SDK_VERSION;Je&&Je.indexOf("LITE")>=0&&Z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const He=J;!function Ve(Je){(0,$.registerVersion)("@firebase/app-compat","0.1.27",Je)}()},9681:(st,we,k)=>{k.r(we),k.d(we,{FirebaseError:()=>fe.ZR,SDK_VERSION:()=>_i,_DEFAULT_ENTRY_NAME:()=>nn,_addComponent:()=>An,_addOrOverwriteComponent:()=>pn,_apps:()=>rn,_clearComponents:()=>fr,_components:()=>Wn,_getProvider:()=>zt,_registerComponent:()=>ar,_removeServiceInstance:()=>Yt,deleteApp:()=>Rt,getApp:()=>li,getApps:()=>Mi,initializeApp:()=>us,onLog:()=>Kn,registerVersion:()=>Jn,setLogLevel:()=>cs});var D=k(5861),H=k(4859),$=k(1877),fe=k(2090),ae=k(8766);class le{constructor(he){this.container=he}getPlatformInfoString(){return this.container.getProviders().map(ze=>{if(function ce(Y){const he=Y.getComponent();return"VERSION"===(null==he?void 0:he.type)}(ze)){const yt=ze.getImmediate();return`${yt.library}/${yt.version}`}return null}).filter(ze=>ze).join(" ")}}const de="@firebase/app",J=new $.Yd("@firebase/app"),nn="[DEFAULT]",Qe={[de]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},rn=new Map,Wn=new Map;function An(Y,he){try{Y.container.addComponent(he)}catch(ze){J.debug(`Component ${he.name} failed to register with FirebaseApp ${Y.name}`,ze)}}function pn(Y,he){Y.container.addOrOverwriteComponent(he)}function ar(Y){const he=Y.name;if(Wn.has(he))return J.debug(`There were multiple attempts to register component ${he}.`),!1;Wn.set(he,Y);for(const ze of rn.values())An(ze,Y);return!0}function zt(Y,he){const ze=Y.container.getProvider("heartbeat").getImmediate({optional:!0});return ze&&ze.triggerHeartbeat(),Y.container.getProvider(he)}function Yt(Y,he,ze=nn){zt(Y,he).clearInstance(ze)}function fr(){Wn.clear()}const wr=new fe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class pr{constructor(he,ze,yt){this._isDeleted=!1,this._options=Object.assign({},he),this._config=Object.assign({},ze),this._name=ze.name,this._automaticDataCollectionEnabled=ze.automaticDataCollectionEnabled,this._container=yt,this.container.addComponent(new H.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this.checkDestroyed(),this._automaticDataCollectionEnabled=he}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(he){this._isDeleted=he}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}const _i="9.8.3";function us(Y,he={}){"object"!=typeof he&&(he={name:he});const ze=Object.assign({name:nn,automaticDataCollectionEnabled:!1},he),yt=ze.name;if("string"!=typeof yt||!yt)throw wr.create("bad-app-name",{appName:String(yt)});const St=rn.get(yt);if(St){if((0,fe.vZ)(Y,St.options)&&(0,fe.vZ)(ze,St.config))return St;throw wr.create("duplicate-app",{appName:yt})}const Lt=new H.H0(yt);for(const Ut of Wn.values())Lt.addComponent(Ut);const Bn=new pr(Y,ze,Lt);return rn.set(yt,Bn),Bn}function li(Y=nn){const he=rn.get(Y);if(!he)throw wr.create("no-app",{appName:Y});return he}function Mi(){return Array.from(rn.values())}function Rt(Y){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,D.Z)(function*(Y){const he=Y.name;rn.has(he)&&(rn.delete(he),yield Promise.all(Y.container.getProviders().map(ze=>ze.delete())),Y.isDeleted=!0)})).apply(this,arguments)}function Jn(Y,he,ze){var yt;let St=null!==(yt=Qe[Y])&&void 0!==yt?yt:Y;ze&&(St+=`-${ze}`);const Lt=St.match(/\s|\//),Bn=he.match(/\s|\//);if(Lt||Bn){const Ut=[`Unable to register library "${St}" with version "${he}":`];return Lt&&Ut.push(`library name "${St}" contains illegal characters (whitespace or "/")`),Lt&&Bn&&Ut.push("and"),Bn&&Ut.push(`version name "${he}" contains illegal characters (whitespace or "/")`),void J.warn(Ut.join(" "))}ar(new H.wA(`${St}-version`,()=>({library:St,version:he}),"VERSION"))}function Kn(Y,he){if(null!==Y&&"function"!=typeof Y)throw wr.create("invalid-log-argument");(0,$.Am)(Y,he)}function cs(Y){(0,$.Ub)(Y)}const gr="firebase-heartbeat-store";let hi=null;function $r(){return hi||(hi=(0,ae.X3)("firebase-heartbeat-database",1,{upgrade:(Y,he)=>{0===he&&Y.createObjectStore(gr)}}).catch(Y=>{throw wr.create("storage-open",{originalErrorMessage:Y.message})})),hi}function wt(){return(wt=(0,D.Z)(function*(Y){var he;try{return(yield $r()).transaction(gr).objectStore(gr).get(Jr(Y))}catch(ze){throw wr.create("storage-get",{originalErrorMessage:null===(he=ze)||void 0===he?void 0:he.message})}})).apply(this,arguments)}function Tt(Y,he){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,D.Z)(function*(Y,he){var ze;try{const St=(yield $r()).transaction(gr,"readwrite");return yield St.objectStore(gr).put(he,Jr(Y)),St.done}catch(yt){throw wr.create("storage-set",{originalErrorMessage:null===(ze=yt)||void 0===ze?void 0:ze.message})}})).apply(this,arguments)}function Jr(Y){return`${Y.name}!${Y.options.appId}`}class Fr{constructor(he){this.container=he,this._heartbeatsCache=null;const ze=this.container.getProvider("app").getImmediate();this._storage=new re(ze),this._heartbeatsCachePromise=this._storage.read().then(yt=>(this._heartbeatsCache=yt,yt))}triggerHeartbeat(){var he=this;return(0,D.Z)(function*(){const yt=he.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),St=Vn();if(null===he._heartbeatsCache&&(he._heartbeatsCache=yield he._heartbeatsCachePromise),he._heartbeatsCache.lastSentHeartbeatDate!==St&&!he._heartbeatsCache.heartbeats.some(Lt=>Lt.date===St))return he._heartbeatsCache.heartbeats.push({date:St,agent:yt}),he._heartbeatsCache.heartbeats=he._heartbeatsCache.heartbeats.filter(Lt=>{const Bn=new Date(Lt.date).valueOf();return Date.now()-Bn<=2592e6}),he._storage.overwrite(he._heartbeatsCache)})()}getHeartbeatsHeader(){var he=this;return(0,D.Z)(function*(){if(null===he._heartbeatsCache&&(yield he._heartbeatsCachePromise),null===he._heartbeatsCache||0===he._heartbeatsCache.heartbeats.length)return"";const ze=Vn(),{heartbeatsToSend:yt,unsentEntries:St}=function q(Y,he=1024){const ze=[];let yt=Y.slice();for(const St of Y){const Lt=ze.find(Bn=>Bn.agent===St.agent);if(Lt){if(Lt.dates.push(St.date),oe(ze)>he){Lt.dates.pop();break}}else if(ze.push({agent:St.agent,dates:[St.date]}),oe(ze)>he){ze.pop();break}yt=yt.slice(1)}return{heartbeatsToSend:ze,unsentEntries:yt}}(he._heartbeatsCache.heartbeats),Lt=(0,fe.L)(JSON.stringify({version:2,heartbeats:yt}));return he._heartbeatsCache.lastSentHeartbeatDate=ze,St.length>0?(he._heartbeatsCache.heartbeats=St,yield he._storage.overwrite(he._heartbeatsCache)):(he._heartbeatsCache.heartbeats=[],he._storage.overwrite(he._heartbeatsCache)),Lt})()}}function Vn(){return(new Date).toISOString().substring(0,10)}class re{constructor(he){this.app=he,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,D.Z)(function*(){return!!(0,fe.hl)()&&(0,fe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var he=this;return(0,D.Z)(function*(){return(yield he._canUseIndexedDBPromise)&&(yield function pt(Y){return wt.apply(this,arguments)}(he.app))||{heartbeats:[]}})()}overwrite(he){var ze=this;return(0,D.Z)(function*(){var yt;if(yield ze._canUseIndexedDBPromise){const Lt=yield ze.read();return Tt(ze.app,{lastSentHeartbeatDate:null!==(yt=he.lastSentHeartbeatDate)&&void 0!==yt?yt:Lt.lastSentHeartbeatDate,heartbeats:he.heartbeats})}})()}add(he){var ze=this;return(0,D.Z)(function*(){var yt;if(yield ze._canUseIndexedDBPromise){const Lt=yield ze.read();return Tt(ze.app,{lastSentHeartbeatDate:null!==(yt=he.lastSentHeartbeatDate)&&void 0!==yt?yt:Lt.lastSentHeartbeatDate,heartbeats:[...Lt.heartbeats,...he.heartbeats]})}})()}}function oe(Y){return(0,fe.L)(JSON.stringify({version:2,heartbeats:Y})).length}!function Be(Y){ar(new H.wA("platform-logger",he=>new le(he),"PRIVATE")),ar(new H.wA("heartbeat",he=>new Fr(he),"PRIVATE")),Jn(de,"0.7.26",Y),Jn(de,"0.7.26","esm2017"),Jn("fire-js","")}("")},4859:(st,we,k)=>{k.d(we,{wA:()=>$,H0:()=>de});var D=k(5861),H=k(2090);class ${constructor(J,Z,pe){this.name=J,this.instanceFactory=Z,this.type=pe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(J){return this.instantiationMode=J,this}setMultipleInstances(J){return this.multipleInstances=J,this}setServiceProps(J){return this.serviceProps=J,this}setInstanceCreatedCallback(J){return this.onInstanceCreated=J,this}}const fe="[DEFAULT]";class ae{constructor(J,Z){this.name=J,this.container=Z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(J){const Z=this.normalizeInstanceIdentifier(J);if(!this.instancesDeferred.has(Z)){const pe=new H.BH;if(this.instancesDeferred.set(Z,pe),this.isInitialized(Z)||this.shouldAutoInitialize())try{const et=this.getOrInitializeService({instanceIdentifier:Z});et&&pe.resolve(et)}catch(et){}}return this.instancesDeferred.get(Z).promise}getImmediate(J){var Z;const pe=this.normalizeInstanceIdentifier(null==J?void 0:J.identifier),et=null!==(Z=null==J?void 0:J.optional)&&void 0!==Z&&Z;if(!this.isInitialized(pe)&&!this.shouldAutoInitialize()){if(et)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:pe})}catch(Ve){if(et)return null;throw Ve}}getComponent(){return this.component}setComponent(J){if(J.name!==this.name)throw Error(`Mismatching Component ${J.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=J,this.shouldAutoInitialize()){if(function ce(ve){return"EAGER"===ve.instantiationMode}(J))try{this.getOrInitializeService({instanceIdentifier:fe})}catch(Z){}for(const[Z,pe]of this.instancesDeferred.entries()){const et=this.normalizeInstanceIdentifier(Z);try{const Ve=this.getOrInitializeService({instanceIdentifier:et});pe.resolve(Ve)}catch(Ve){}}}}clearInstance(J=fe){this.instancesDeferred.delete(J),this.instancesOptions.delete(J),this.instances.delete(J)}delete(){var J=this;return(0,D.Z)(function*(){const Z=Array.from(J.instances.values());yield Promise.all([...Z.filter(pe=>"INTERNAL"in pe).map(pe=>pe.INTERNAL.delete()),...Z.filter(pe=>"_delete"in pe).map(pe=>pe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(J=fe){return this.instances.has(J)}getOptions(J=fe){return this.instancesOptions.get(J)||{}}initialize(J={}){const{options:Z={}}=J,pe=this.normalizeInstanceIdentifier(J.instanceIdentifier);if(this.isInitialized(pe))throw Error(`${this.name}(${pe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const et=this.getOrInitializeService({instanceIdentifier:pe,options:Z});for(const[Ve,He]of this.instancesDeferred.entries())pe===this.normalizeInstanceIdentifier(Ve)&&He.resolve(et);return et}onInit(J,Z){var pe;const et=this.normalizeInstanceIdentifier(Z),Ve=null!==(pe=this.onInitCallbacks.get(et))&&void 0!==pe?pe:new Set;Ve.add(J),this.onInitCallbacks.set(et,Ve);const He=this.instances.get(et);return He&&J(He,et),()=>{Ve.delete(J)}}invokeOnInitCallbacks(J,Z){const pe=this.onInitCallbacks.get(Z);if(pe)for(const et of pe)try{et(J,Z)}catch(Ve){}}getOrInitializeService({instanceIdentifier:J,options:Z={}}){let pe=this.instances.get(J);if(!pe&&this.component&&(pe=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=J,ve===fe?void 0:ve),options:Z}),this.instances.set(J,pe),this.instancesOptions.set(J,Z),this.invokeOnInitCallbacks(pe,J),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,J,pe)}catch(et){}var ve;return pe||null}normalizeInstanceIdentifier(J=fe){return this.component?this.component.multipleInstances?J:fe:J}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(J){this.name=J,this.providers=new Map}addComponent(J){const Z=this.getProvider(J.name);if(Z.isComponentSet())throw new Error(`Component ${J.name} has already been registered with ${this.name}`);Z.setComponent(J)}addOrOverwriteComponent(J){this.getProvider(J.name).isComponentSet()&&this.providers.delete(J.name),this.addComponent(J)}getProvider(J){if(this.providers.has(J))return this.providers.get(J);const Z=new ae(J,this);return this.providers.set(J,Z),Z}getProviders(){return Array.from(this.providers.values())}}},1877:(st,we,k)=>{k.d(we,{in:()=>H,Yd:()=>ce,Ub:()=>de,Am:()=>ve});const D=[];var H=(()=>{return(J=H||(H={}))[J.DEBUG=0]="DEBUG",J[J.VERBOSE=1]="VERBOSE",J[J.INFO=2]="INFO",J[J.WARN=3]="WARN",J[J.ERROR=4]="ERROR",J[J.SILENT=5]="SILENT",H;var J})();const $={debug:H.DEBUG,verbose:H.VERBOSE,info:H.INFO,warn:H.WARN,error:H.ERROR,silent:H.SILENT},fe=H.INFO,ae={[H.DEBUG]:"log",[H.VERBOSE]:"log",[H.INFO]:"info",[H.WARN]:"warn",[H.ERROR]:"error"},le=(J,Z,...pe)=>{if(Z<J.logLevel)return;const et=(new Date).toISOString(),Ve=ae[Z];if(!Ve)throw new Error(`Attempted to log a message with an invalid logType (value: ${Z})`);console[Ve](`[${et}]  ${J.name}:`,...pe)};class ce{constructor(Z){this.name=Z,this._logLevel=fe,this._logHandler=le,this._userLogHandler=null,D.push(this)}get logLevel(){return this._logLevel}set logLevel(Z){if(!(Z in H))throw new TypeError(`Invalid value "${Z}" assigned to \`logLevel\``);this._logLevel=Z}setLogLevel(Z){this._logLevel="string"==typeof Z?$[Z]:Z}get logHandler(){return this._logHandler}set logHandler(Z){if("function"!=typeof Z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Z}get userLogHandler(){return this._userLogHandler}set userLogHandler(Z){this._userLogHandler=Z}debug(...Z){this._userLogHandler&&this._userLogHandler(this,H.DEBUG,...Z),this._logHandler(this,H.DEBUG,...Z)}log(...Z){this._userLogHandler&&this._userLogHandler(this,H.VERBOSE,...Z),this._logHandler(this,H.VERBOSE,...Z)}info(...Z){this._userLogHandler&&this._userLogHandler(this,H.INFO,...Z),this._logHandler(this,H.INFO,...Z)}warn(...Z){this._userLogHandler&&this._userLogHandler(this,H.WARN,...Z),this._logHandler(this,H.WARN,...Z)}error(...Z){this._userLogHandler&&this._userLogHandler(this,H.ERROR,...Z),this._logHandler(this,H.ERROR,...Z)}}function de(J){D.forEach(Z=>{Z.setLogLevel(J)})}function ve(J,Z){for(const pe of D){let et=null;Z&&Z.level&&(et=$[Z.level]),pe.userLogHandler=null===J?null:(Ve,He,...Je)=>{const Ce=Je.map(Pe=>{if(null==Pe)return null;if("string"==typeof Pe)return Pe;if("number"==typeof Pe||"boolean"==typeof Pe)return Pe.toString();if(Pe instanceof Error)return Pe.message;try{return JSON.stringify(Pe)}catch(ot){return null}}).filter(Pe=>Pe).join(" ");He>=(null!=et?et:Ve.logLevel)&&J({level:H[He].toLowerCase(),message:Ce,args:Je,type:Ve.name})}}}},8766:(st,we,k)=>{k.d(we,{Lj:()=>Ue,X3:()=>ct});var D=k(5861);let $,fe;const ce=new WeakMap,de=new WeakMap,ve=new WeakMap,J=new WeakMap,Z=new WeakMap;let Ve={get(ee,Re,ie){if(ee instanceof IDBTransaction){if("done"===Re)return de.get(ee);if("objectStoreNames"===Re)return ee.objectStoreNames||ve.get(ee);if("store"===Re)return ie.objectStoreNames[1]?void 0:ie.objectStore(ie.objectStoreNames[0])}return Pe(ee[Re])},set:(ee,Re,ie)=>(ee[Re]=ie,!0),has:(ee,Re)=>ee instanceof IDBTransaction&&("done"===Re||"store"===Re)||Re in ee};function Ce(ee){return"function"==typeof ee?function Je(ee){return ee!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function le(){return fe||(fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ee)?function(...Re){return ee.apply(ot(this),Re),Pe(ce.get(this))}:function(...Re){return Pe(ee.apply(ot(this),Re))}:function(Re,...ie){const ge=ee.call(ot(this),Re,...ie);return ve.set(ge,Re.sort?Re.sort():[Re]),Pe(ge)}}(ee):(ee instanceof IDBTransaction&&function et(ee){if(de.has(ee))return;const Re=new Promise((ie,ge)=>{const me=()=>{ee.removeEventListener("complete",Se),ee.removeEventListener("error",Ie),ee.removeEventListener("abort",Ie)},Se=()=>{ie(),me()},Ie=()=>{ge(ee.error||new DOMException("AbortError","AbortError")),me()};ee.addEventListener("complete",Se),ee.addEventListener("error",Ie),ee.addEventListener("abort",Ie)});de.set(ee,Re)}(ee),((ee,Re)=>Re.some(ie=>ee instanceof ie))(ee,function ae(){return $||($=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ee,Ve):ee)}function Pe(ee){if(ee instanceof IDBRequest)return function pe(ee){const Re=new Promise((ie,ge)=>{const me=()=>{ee.removeEventListener("success",Se),ee.removeEventListener("error",Ie)},Se=()=>{ie(Pe(ee.result)),me()},Ie=()=>{ge(ee.error),me()};ee.addEventListener("success",Se),ee.addEventListener("error",Ie)});return Re.then(ie=>{ie instanceof IDBCursor&&ce.set(ie,ee)}).catch(()=>{}),Z.set(Re,ee),Re}(ee);if(J.has(ee))return J.get(ee);const Re=Ce(ee);return Re!==ee&&(J.set(ee,Re),Z.set(Re,ee)),Re}const ot=ee=>Z.get(ee);function ct(ee,Re,{blocked:ie,upgrade:ge,blocking:me,terminated:Se}={}){const Ie=indexedDB.open(ee,Re),Ye=Pe(Ie);return ge&&Ie.addEventListener("upgradeneeded",bt=>{ge(Pe(Ie.result),bt.oldVersion,bt.newVersion,Pe(Ie.transaction))}),ie&&Ie.addEventListener("blocked",()=>ie()),Ye.then(bt=>{Se&&bt.addEventListener("close",()=>Se()),me&&bt.addEventListener("versionchange",()=>me())}).catch(()=>{}),Ye}function Ue(ee,{blocked:Re}={}){const ie=indexedDB.deleteDatabase(ee);return Re&&ie.addEventListener("blocked",()=>Re()),Pe(ie).then(()=>{})}const Ne=["get","getKey","getAll","getAllKeys","count"],ke=["put","add","delete","clear"],Fe=new Map;function tt(ee,Re){if(!(ee instanceof IDBDatabase)||Re in ee||"string"!=typeof Re)return;if(Fe.get(Re))return Fe.get(Re);const ie=Re.replace(/FromIndex$/,""),ge=Re!==ie,me=ke.includes(ie);if(!(ie in(ge?IDBIndex:IDBObjectStore).prototype)||!me&&!Ne.includes(ie))return;const Se=function(){var Ie=(0,D.Z)(function*(Ye,...bt){const hn=this.transaction(Ye,me?"readwrite":"readonly");let nn=hn.store;return ge&&(nn=nn.index(bt.shift())),(yield Promise.all([nn[ie](...bt),me&&hn.done]))[0]});return function(bt){return Ie.apply(this,arguments)}}();return Fe.set(Re,Se),Se}!function He(ee){Ve=ee(Ve)}(ee=>sD(iD({},ee),{get:(Re,ie,ge)=>tt(Re,ie)||ee.get(Re,ie,ge),has:(Re,ie)=>!!tt(Re,ie)||ee.has(Re,ie)}))},5861:(st,we,k)=>{function D($,fe,ae,le,ce,de,ve){try{var J=$[de](ve),Z=J.value}catch(pe){return void ae(pe)}J.done?fe(Z):Promise.resolve(Z).then(le,ce)}function H($){return function(){var fe=this,ae=arguments;return new Promise(function(le,ce){var de=$.apply(fe,ae);function ve(Z){D(de,le,ce,ve,J,"next",Z)}function J(Z){D(de,le,ce,ve,J,"throw",Z)}ve(void 0)})}}k.d(we,{Z:()=>H})}},st=>{st(st.s=5079)}]);